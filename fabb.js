/** @license
 * RequireJS plugin for async dependency load like JSONP and Google Maps
 * Author: Miller Medeiros
 * Version: 0.1.2 (2014/02/24)
 * Released under the MIT license
 */
/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.1
 *
 */
/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function hiremeABTest(){var a=!1;if(!a){a={userInInlinHireMeFormABGroup:function(){return b()%86<43},showNewCopy:function(a){return fromTagPage||b(a)%524<131},showOriForm:function(){var a=b()%480;return fromTagPage&&a<240},showOriFormWithNoCancelBtn:function(){var a=b()%480;return fromTagPage&&a>=240&&a<360},showOriFormWithNoRepeatPassword:function(){var a=b()%480;return fromTagPage&&a>=360},userInSteppedFormGroup:function(){return typeof fromTagPage!='undefined'&&typeof newHiremeForm!='undefined'?fromTagPage&&newHiremeForm:!1},milestoneFormTextTest:function(){var a=b()%212;return a>=53&&a<106},milestoneFormLinkTest:function(){var a=b()%212;return a>=106&&a<159},milestoneFormImageTest:function(){var a=b()%212;return a>=159},milestoneFormPercentageTest:function(){var a=b()%212;return a<106}};var b=function(a){if(typeof a=='undefined')var a=getUserIdfromCookie();return c(a)?a:d(window.IP)},c=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},d=function(a){var b=0;a=a.match(/^([1-9]\d*|0[0-7]*|0x[\da-f]+)(?:\.([1-9]\d*|0[0-7]*|0x[\da-f]+))?(?:\.([1-9]\d*|0[0-7]*|0x[\da-f]+))?(?:\.([1-9]\d*|0[0-7]*|0x[\da-f]+))?$/i);if(!a)return!1;a[0]=0;for(b=1;b<5;b+=1)a[0]+=!!(a[b]||'').length,a[b]=parseInt(a[b])||0;return a.push(256,256,256,256),a[4+a[0]]*=Math.pow(256,4-a[0]),a[1]>=a[5]||a[2]>=a[6]||a[3]>=a[7]||a[4]>=a[8]?!1:a[1]*(a[0]===1||16777216)+a[2]*(a[0]<=2||65536)+a[3]*(a[0]<=3||256)+a[4]*1}}return a}function DashboardParams(){var a=0;this.dashboardParamsInstance=null;var b=function(){return this.dashboardParamsInstance||(this.dashboardParamsInstance=c()),this.dashboardParamsInstance},c=function(){return{getImportantNotiCount:function(){return a},setImportantNotiCount:function(b){a=b},importantNotiCountPlusOne:function(){a++},importantNotiCountMinusOne:function(){a--}}};return b()}define('jquery-wrapper',[],function(){return jQuery}),define('underscore-wrapper',['jquery-wrapper'],function(a){return _}),define('backbone-wrapper',['jquery-wrapper','underscore-wrapper'],function(a,b){return Backbone}),function(){var a=function(a){var b='/api/newsfeed/0.1/',c=function(a){this instanceof c||console.log({name:'missingNew'}),this.message_type=a},d=function(c,d,e,f,g,h){typeof e=='undefined'&&(e=window),d=d||{},d.user_id=getUserIdfromCookie();if(d.user_id=='')return!1;a.ajax({type:h||'GET',url:b+this.message_type+c+'/',dataType:'json',data:d,cache:!1,timeout:3e4,success:function(a){a.status=='success'&&typeof f!='undefined'&&f&&f.call(e,a.result)},error:function(a,b){typeof g!='undefined'&&g&&g.call(b)}})};return c.prototype={notification:function(a,b,c,e){d.call(this,'/notifications',{start:a},e,b,c)},mark_seen:function(a,b,c){d.call(this,'/mark_all_seen',{start:0},c,a,b)},mark_read:function(a,b,c,e){d.call(this,'/mark_read',a,e,b,c)},mark_unread:function(a,b,c,e){d.call(this,'/mark_unread',a,e,b,c)},latest:function(a,b,c,e){d.call(this,'',{start:a},e,b,c)},latest_filtered:function(a,b,c,e,f){d.call(this,'',{start:a,filter:f},e,b,c)},unread:function(a,b,c,e){d.call(this,'/unread',{start:a},e,b,c)},bids:function(a,b,c,e){d.call(this,'/getbids',{project_id:a},e,b,c)},pin:function(a,b,c,e){d.call(this,'/pin',{id:a},e,b,c,'POST')},unpin:function(a,b,c,e){d.call(this,'/unpin',{id:a},e,b,c,'POST')},hide:function(a,b,c,e){d.call(this,'/userhide',{id:a},e,b,c,'POST')},unhide:function(a,b,c,e){d.call(this,'/userunhide',{id:a},e,b,c,'POST')},important:function(a,b,c,e){d.call(this,'/important',{id:a},e,b,c,'POST')},unimportant:function(a,b,c,e){d.call(this,'/unimportant',{id:a},e,b,c,'POST')},actionstate:function(a,b,c,e,f){d.call(this,'/actionstate',{id:a,state:b},f,c,e,'POST')},userstate:function(a,b,c,e,f){d.call(this,'/userstate',{id:a,state:b},f,c,e,'POST')},clarifications:function(a,b,c,e){d.call(this,'/getclarifications',{project_id:a},e,b,c)}},c};typeof define=='function'&&define.amd?define('notification/libpersist',['jquery-wrapper'],a):window.LibPersist=a(jQuery)}();var JSON;JSON||(JSON={}),function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=='object'&&typeof i.toJSON=='function'&&(i=i.toJSON(a)),typeof rep=='function'&&(i=rep.call(b,a,i));switch(typeof i){case'string':return quote(i);case'number':return isFinite(i)?String(i):'null';case'boolean':case'null':return String(i);case'object':if(!i)return'null';gap+=indent,h=[];if(Object.prototype.toString.apply(i)==='[object Array]'){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||'null';return e=h.length===0?'[]':gap?'[\n'+gap+h.join(',\n'+gap)+'\n'+g+']':'['+h.join(',')+']',gap=g,e}if(rep&&typeof rep=='object'){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=='string'&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?': ':':')+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?': ':':')+e));return e=h.length===0?'{}':gap?'{\n'+gap+h.join(',\n'+gap)+'\n'+g+'}':'{'+h.join(',')+'}',gap=g,e}}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=='string'?b:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?'0'+a:a}'use strict',typeof Date.prototype.toJSON!='function'&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','	':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;typeof JSON.stringify!='function'&&(JSON.stringify=function(a,b,c){var d;gap='',indent='';if(typeof c=='number')for(d=0;d<c;d+=1)indent+=' ';else typeof c=='string'&&(indent=c);rep=b;if(!b||typeof b=='function'||typeof b=='object'&&typeof b.length=='number')return str('',{'':a});throw new Error('JSON.stringify')}),typeof JSON.parse!='function'&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=='object')for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'')))return j=eval('('+text+')'),typeof reviver=='function'?walk({'':j},''):j;throw new SyntaxError('JSON.parse')})}(),SockJS=function(){var a=document,b=window,c={},d=function(){};d.prototype.addEventListener=function(a,b){this._listeners||(this._listeners={}),a in this._listeners||(this._listeners[a]=[]);var d=this._listeners[a];c.arrIndexOf(d,b)===-1&&d.push(b);return},d.prototype.removeEventListener=function(a,b){if(!(this._listeners&&a in this._listeners))return;var d=this._listeners[a],e=c.arrIndexOf(d,b);if(e!==-1){d.length>1?this._listeners[a]=d.slice(0,e).concat(d.slice(e+1)):delete this._listeners[a];return}return},d.prototype.dispatchEvent=function(a){var b=a.type,c=Array.prototype.slice.call(arguments,0);this['on'+b]&&this['on'+b].apply(this,c);if(this._listeners&&b in this._listeners)for(var d=0;d<this._listeners[b].length;d++)this._listeners[b][d].apply(this,c)};var e=function(a,b){this.type=a;if(typeof b!='undefined')for(var c in b){if(!b.hasOwnProperty(c))continue;this[c]=b[c]}};e.prototype.toString=function(){var a=[];for(var b in this){if(!this.hasOwnProperty(b))continue;var c=this[b];typeof c=='function'&&(c='[function]'),a.push(b+'='+c)}return'SimpleEvent('+a.join(', ')+')'};var f=function(a){var b=this;b._events=a||[],b._listeners={}};f.prototype.emit=function(a){var b=this;b._verifyType(a);if(b._nuked)return;var c=Array.prototype.slice.call(arguments,1);b['on'+a]&&b['on'+a].apply(b,c);if(a in b._listeners)for(var d=0;d<b._listeners[a].length;d++)b._listeners[a][d].apply(b,c)},f.prototype.on=function(a,b){var c=this;c._verifyType(a);if(c._nuked)return;a in c._listeners||(c._listeners[a]=[]),c._listeners[a].push(b)},f.prototype._verifyType=function(a){var b=this;c.arrIndexOf(b._events,a)===-1&&c.log('Event '+JSON.stringify(a)+' not listed '+JSON.stringify(b._events)+' in '+b)},f.prototype.nuke=function(){var a=this;a._nuked=!0;for(var b=0;b<a._events.length;b++)delete a[a._events[b]];a._listeners={}};var g='abcdefghijklmnopqrstuvwxyz0123456789_';c.random_string=function(a,b){b=b||g.length;var c,d=[];for(c=0;c<a;c++)d.push(g.substr(Math.floor(Math.random()*b),1));return d.join('')},c.random_number=function(a){return Math.floor(Math.random()*a)},c.random_number_string=function(a){var b=(''+(a-1)).length,d=Array(b+1).join('0');return(d+c.random_number(a)).slice(-b)},c.getOrigin=function(a){a+='/';var b=a.split('/').slice(0,3);return b.join('/')},c.isSameOriginUrl=function(a,c){return c||(c=b.location.href),a.split('/').slice(0,3).join('/')===c.split('/').slice(0,3).join('/')},c.getParentDomain=function(a){if(/^[0-9.]*$/.test(a))return a;if(/^\[/.test(a))return a;if(!/[.]/.test(a))return a;var b=a.split('.').slice(1);return b.join('.')},c.objectExtend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a};var h='_jp';c.polluteGlobalNamespace=function(){h in b||(b[h]={})},c.closeFrame=function(a,b){return'c'+JSON.stringify([a,b])},c.userSetCode=function(a){return a===1e3||a>=3e3&&a<=4999},c.countRTO=function(a){var b;return a>100?b=3*a:b=a+200,b},c.log=function(){b.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},c.bind=function(a,b){return a.bind?a.bind(b):function(){return a.apply(b,arguments)}},c.flatUrl=function(a){return a.indexOf('?')===-1&&a.indexOf('#')===-1},c.amendUrl=function(b){var d=a.location;if(!b)throw new Error('Wrong url for SockJS');if(!c.flatUrl(b))throw new Error('Only basic urls are supported in SockJS');return b.indexOf('//')===0&&(b=d.protocol+b),b.indexOf('/')===0&&(b=d.protocol+'//'+d.host+b),b=b.replace(/[/]+$/,''),b},c.arrIndexOf=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},c.arrSkip=function(a,b){var d=c.arrIndexOf(a,b);if(d===-1)return a.slice();var e=a.slice(0,d);return e.concat(a.slice(d+1))},c.isArray=Array.isArray||function(a){return{}.toString.call(a).indexOf('Array')>=0},c.delay=function(a,b){return typeof a=='function'&&(b=a,a=0),setTimeout(b,a)};var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j={'\0':'\\u0000','':'\\u0001','':'\\u0002','':'\\u0003','':'\\u0004','':'\\u0005','':'\\u0006','':'\\u0007','\b':'\\b','	':'\\t','\n':'\\n','':'\\u000b','\f':'\\f','\r':'\\r','':'\\u000e','':'\\u000f','':'\\u0010','':'\\u0011','':'\\u0012','':'\\u0013','':'\\u0014','':'\\u0015','':'\\u0016','':'\\u0017','':'\\u0018','':'\\u0019','':'\\u001a','':'\\u001b','':'\\u001c','':'\\u001d','':'\\u001e','':'\\u001f','"':'\\"','\\':'\\\\','':'\\u007f','':'\\u0080','':'\\u0081','':'\\u0082','':'\\u0083','':'\\u0084','':'\\u0085','':'\\u0086','':'\\u0087','':'\\u0088','':'\\u0089','':'\\u008a','':'\\u008b','':'\\u008c','':'\\u008d','':'\\u008e','':'\\u008f','':'\\u0090','':'\\u0091','':'\\u0092','':'\\u0093','':'\\u0094','':'\\u0095','':'\\u0096','':'\\u0097','':'\\u0098','':'\\u0099','':'\\u009a','':'\\u009b','':'\\u009c','':'\\u009d','':'\\u009e','':'\\u009f','­':'\\u00ad','؀':'\\u0600','؁':'\\u0601','؂':'\\u0602','؃':'\\u0603','؄':'\\u0604','܏':'\\u070f','឴':'\\u17b4','឵':'\\u17b5','‌':'\\u200c','‍':'\\u200d','‎':'\\u200e','‏':'\\u200f','\u2028':'\\u2028','\u2029':'\\u2029','‪':'\\u202a','‫':'\\u202b','‬':'\\u202c','‭':'\\u202d','‮':'\\u202e',' ':'\\u202f','⁠':'\\u2060','⁡':'\\u2061','⁢':'\\u2062','⁣':'\\u2063','⁤':'\\u2064','⁥':'\\u2065','⁦':'\\u2066','⁧':'\\u2067','⁨':'\\u2068','⁩':'\\u2069','⁪':'\\u206a','⁫':'\\u206b','⁬':'\\u206c','⁭':'\\u206d','⁮':'\\u206e','⁯':'\\u206f','﻿':'\\ufeff','￰':'\\ufff0','￱':'\\ufff1','￲':'\\ufff2','￳':'\\ufff3','￴':'\\ufff4','￵':'\\ufff5','￶':'\\ufff6','￷':'\\ufff7','￸':'\\ufff8','￹':'\\ufff9','￺':'\\ufffa','￻':'\\ufffb','￼':'\\ufffc','�':'\\ufffd','￾':'\\ufffe','￿':'\\uffff'},k=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,l,m=JSON&&JSON.stringify||function(a){return i.lastIndex=0,i.test(a)&&(a=a.replace(i,function(a){return j[a]})),'"'+a+'"'},n=function(a){var b,c={},d=[];for(b=0;b<65536;b++)d.push(String.fromCharCode(b));return a.lastIndex=0,d.join('').replace(a,function(a){return c[a]='\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4),''}),a.lastIndex=0,c};c.quote=function(a){var b=m(a);return k.lastIndex=0,k.test(b)?(l||(l=n(k)),b.replace(k,function(a){return l[a]})):b};var o=['websocket','xdr-streaming','xhr-streaming','iframe-eventsource','iframe-htmlfile','xdr-polling','xhr-polling','iframe-xhr-polling','jsonp-polling'];c.probeProtocols=function(){var a={};for(var b=0;b<o.length;b++){var c=o[b];a[c]=y[c]&&y[c].enabled()}return a},c.detectProtocols=function(a,b,c){var d={},e=[];b||(b=o);for(var f=0;f<b.length;f++){var g=b[f];d[g]=a[g]}var h=function(a){var b=a.shift();d[b]?e.push(b):a.length>0&&h(a)};return c.websocket!==!1&&h(['websocket']),d['xhr-streaming']&&!c.null_origin?e.push('xhr-streaming'):d['xdr-streaming']&&!c.cookie_needed&&!c.null_origin?e.push('xdr-streaming'):h(['iframe-eventsource','iframe-htmlfile']),d['xhr-polling']&&!c.null_origin?e.push('xhr-polling'):d['xdr-polling']&&!c.cookie_needed&&!c.null_origin?e.push('xdr-polling'):h(['iframe-xhr-polling','jsonp-polling']),e};var p='_sockjs_global';c.createHook=function(){var a='a'+c.random_string(8);if(!(p in b)){var d={};b[p]=function(a){return a in d||(d[a]={id:a,del:function(){delete d[a]}}),d[a]}}return b[p](a)},c.attachMessage=function(a){c.attachEvent('message',a)},c.attachEvent=function(c,d){typeof b.addEventListener!='undefined'?b.addEventListener(c,d,!1):(a.attachEvent('on'+c,d),b.attachEvent('on'+c,d))},c.detachMessage=function(a){c.detachEvent('message',a)},c.detachEvent=function(c,d){typeof b.addEventListener!='undefined'?b.removeEventListener(c,d,!1):(a.detachEvent('on'+c,d),b.detachEvent('on'+c,d))};var q={},r=!1,s=function(){for(var a in q)q[a](),delete q[a]},t=function(){if(r)return;r=!0,s()};c.attachEvent('unload',t),c.unload_add=function(a){var b=c.random_string(8);return q[b]=a,r&&c.delay(s),b},c.unload_del=function(a){a in q&&delete q[a]},c.createIframe=function(b,d){var e=a.createElement('iframe'),f,g,h=function(){clearTimeout(f);try{e.onload=null}catch(a){}e.onerror=null},i=function(){e&&(h(),setTimeout(function(){e&&e.parentNode.removeChild(e),e=null},0),c.unload_del(g))},j=function(a){e&&(i(),d(a))},k=function(a,b){try{e&&e.contentWindow&&e.contentWindow.postMessage(a,b)}catch(c){}};return e.src=b,e.style.display='none',e.style.position='absolute',e.onerror=function(){j('onerror')},e.onload=function(){clearTimeout(f),f=setTimeout(function(){j('onload timeout')},2e3)},a.body.appendChild(e),f=setTimeout(function(){j('timeout')},15e3),g=c.unload_add(i),{post:k,cleanup:i,loaded:h}},c.createHtmlfile=function(a,d){var e=new ActiveXObject('htmlfile'),f,g,i,j=function(){clearTimeout(f)},k=function(){e&&(j(),c.unload_del(g),i.parentNode.removeChild(i),i=e=null,CollectGarbage())},l=function(a){e&&(k(),d(a))},m=function(a,b){try{i&&i.contentWindow&&i.contentWindow.postMessage(a,b)}catch(c){}};e.open(),e.write('<html><script>document.domain="'+document.domain+'";'+'</s'+'cript></html>'),e.close(),e.parentWindow[h]=b[h];var n=e.createElement('div');return e.body.appendChild(n),i=e.createElement('iframe'),n.appendChild(i),i.src=a,f=setTimeout(function(){l('timeout')},15e3),g=c.unload_add(k),{post:m,cleanup:k,loaded:j}};var u=function(){};u.prototype=new f(['chunk','finish']),u.prototype._start=function(a,d,e,f){var g=this;try{g.xhr=new XMLHttpRequest}catch(h){}if(!g.xhr)try{g.xhr=new b.ActiveXObject('Microsoft.XMLHTTP')}catch(h){}if(b.ActiveXObject||b.XDomainRequest)d+=(d.indexOf('?')===-1?'?':'&')+'t='+ +(new Date);g.unload_ref=c.unload_add(function(){g._cleanup(!0)});try{g.xhr.open(a,d,!0)}catch(i){g.emit('finish',0,''),g._cleanup();return}if(!f||!f.no_credentials)g.xhr.withCredentials='true';if(f&&f.headers)for(var j in f.headers)g.xhr.setRequestHeader(j,f.headers[j]);g.xhr.onreadystatechange=function(){if(g.xhr){var a=g.xhr;switch(a.readyState){case 3:try{var b=a.status,c=a.responseText}catch(a){}b===1223&&(b=204),c&&c.length>0&&g.emit('chunk',b,c);break;case 4:var b=a.status;b===1223&&(b=204),g.emit('finish',b,a.responseText),g._cleanup(!1)}}},g.xhr.send(e)},u.prototype._cleanup=function(a){var b=this;if(!b.xhr)return;c.unload_del(b.unload_ref),b.xhr.onreadystatechange=function(){};if(a)try{b.xhr.abort()}catch(d){}b.unload_ref=b.xhr=null},u.prototype.close=function(){var a=this;a.nuke(),a._cleanup(!0)};var v=c.XHRCorsObject=function(){var a=this,b=arguments;c.delay(function(){a._start.apply(a,b)})};v.prototype=new u;var w=c.XHRLocalObject=function(a,b,d){var e=this;c.delay(function(){e._start(a,b,d,{no_credentials:!0})})};w.prototype=new u;var x=c.XDRObject=function(a,b,d){var e=this;c.delay(function(){e._start(a,b,d)})};x.prototype=new f(['chunk','finish']),x.prototype._start=function(a,b,d){var e=this,f=new XDomainRequest;b+=(b.indexOf('?')===-1?'?':'&')+'t='+ +(new Date);var g=f.ontimeout=f.onerror=function(){e.emit('finish',0,''),e._cleanup(!1)};f.onprogress=function(){e.emit('chunk',200,f.responseText)},f.onload=function(){e.emit('finish',200,f.responseText),e._cleanup(!1)},e.xdr=f,e.unload_ref=c.unload_add(function(){e._cleanup(!0)});try{e.xdr.open(a,b),e.xdr.send(d)}catch(h){g()}},x.prototype._cleanup=function(a){var b=this;if(!b.xdr)return;c.unload_del(b.unload_ref),b.xdr.ontimeout=b.xdr.onerror=b.xdr.onprogress=b.xdr.onload=null;if(a)try{b.xdr.abort()}catch(d){}b.unload_ref=b.xdr=null},x.prototype.close=function(){var a=this;a.nuke(),a._cleanup(!0)},c.isXHRCorsCapable=function(){return b.XMLHttpRequest&&'withCredentials'in new XMLHttpRequest?1:b.XDomainRequest&&a.domain?2:L.enabled()?3:4};var y=function(a,d,e){if(this===b)return new y(a,d,e);var f=this,g;f._options={devel:!1,debug:!1,protocols_whitelist:[],info:undefined,rtt:undefined},e&&c.objectExtend(f._options,e),f._base_url=c.amendUrl(a),f._server=f._options.server||c.random_number_string(1e3),f._options.protocols_whitelist&&f._options.protocols_whitelist.length?g=f._options.protocols_whitelist:(typeof d=='string'&&d.length>0?g=[d]:c.isArray(d)?g=d:g=null,g&&f._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),f._protocols=[],f.protocol=null,f.readyState=y.CONNECTING,f._ir=S(f._base_url),f._ir.onfinish=function(a,b){f._ir=null,a?(f._options.info&&(a=c.objectExtend(a,f._options.info)),f._options.rtt&&(b=f._options.rtt),f._applyInfo(a,b,g),f._didClose()):f._didClose(1002,'Can\'t connect to server',!0)}};y.prototype=new d,y.version='0.3.4',y.CONNECTING=0,y.OPEN=1,y.CLOSING=2,y.CLOSED=3,y.prototype._debug=function(){this._options.debug&&c.log.apply(c,arguments)},y.prototype._dispatchOpen=function(){var a=this;a.readyState===y.CONNECTING?(a._transport_tref&&(clearTimeout(a._transport_tref),a._transport_tref=null),a.readyState=y.OPEN,a.dispatchEvent(new e('open'))):a._didClose(1006,'Server lost session')},y.prototype._dispatchMessage=function(a){var b=this;if(b.readyState!==y.OPEN)return;b.dispatchEvent(new e('message',{data:a}))},y.prototype._dispatchHeartbeat=function(a){var b=this;if(b.readyState!==y.OPEN)return;b.dispatchEvent(new e('heartbeat',{}))},y.prototype._didClose=function(a,b,d){var f=this;if(f.readyState!==y.CONNECTING&&f.readyState!==y.OPEN&&f.readyState!==y.CLOSING)throw new Error('INVALID_STATE_ERR');f._ir&&(f._ir.nuke(),f._ir=null),f._transport&&(f._transport.doCleanup(),f._transport=null);var g=new e('close',{code:a,reason:b,wasClean:c.userSetCode(a)});if(!c.userSetCode(a)&&f.readyState===y.CONNECTING&&!d){if(f._try_next_protocol(g))return;g=new e('close',{code:2e3,reason:'All transports failed',wasClean:!1,last_event:g})}f.readyState=y.CLOSED,c.delay(function(){f.dispatchEvent(g)})},y.prototype._didMessage=function(a){var b=this,c=a.slice(0,1);switch(c){case'o':b._dispatchOpen();break;case'a':var d=JSON.parse(a.slice(1)||'[]');for(var e=0;e<d.length;e++)b._dispatchMessage(d[e]);break;case'm':var d=JSON.parse(a.slice(1)||'null');b._dispatchMessage(d);break;case'c':var d=JSON.parse(a.slice(1)||'[]');b._didClose(d[0],d[1]);break;case'h':b._dispatchHeartbeat()}},y.prototype._try_next_protocol=function(b){var d=this;d.protocol&&(d._debug('Closed transport:',d.protocol,''+b),d.protocol=null),d._transport_tref&&(clearTimeout(d._transport_tref),d._transport_tref=null);for(;;){var e=d.protocol=d._protocols.shift();if(!e)return!1;if(y[e]&&y[e].need_body===!0&&(!a.body||typeof a.readyState!='undefined'&&a.readyState!=='complete'))return d._protocols.unshift(e),d.protocol='waiting-for-load',c.attachEvent('load',function(){d._try_next_protocol()}),!0;if(!!y[e]&&!!y[e].enabled(d._options)){var f=y[e].roundTrips||1,g=(d._options.rto||0)*f||5e3;d._transport_tref=c.delay(g,function(){d.readyState===y.CONNECTING&&d._didClose(2007,'Transport timeouted')});var h=c.random_string(8),i=d._base_url+'/'+d._server+'/'+h;return d._debug('Opening transport:',e,' url:'+i,' RTO:'+d._options.rto),d._transport=new y[e](d,i,d._base_url),!0}d._debug('Skipping transport:',e)}},y.prototype.close=function(a,b){var d=this;if(a&&!c.userSetCode(a))throw new Error('INVALID_ACCESS_ERR');return d.readyState!==y.CONNECTING&&d.readyState!==y.OPEN?!1:(d.readyState=y.CLOSING,d._didClose(a||1e3,b||'Normal closure'),!0)},y.prototype.send=function(a){var b=this;if(b.readyState===y.CONNECTING)throw new Error('INVALID_STATE_ERR');return b.readyState===y.OPEN&&b._transport.doSend(c.quote(''+a)),!0},y.prototype._applyInfo=function(b,d,e){var f=this;f._options.info=b,f._options.rtt=d,f._options.rto=c.countRTO(d),f._options.info.null_origin=!a.domain;var g=c.probeProtocols();f._protocols=c.detectProtocols(g,e,b)};var z=y.websocket=function(a,d){var e=this,f=d+'/websocket';f.slice(0,5)==='https'?f='wss'+f.slice(5):f='ws'+f.slice(4),e.ri=a,e.url=f;var g=b.WebSocket||b.MozWebSocket;e.ws=new g(e.url),e.ws.onmessage=function(a){e.ri._didMessage(a.data)},e.unload_ref=c.unload_add(function(){e.ws.close()}),e.ws.onclose=function(){e.ri._didMessage(c.closeFrame(1006,'WebSocket connection broken'))}};z.prototype.doSend=function(a){this.ws.send('['+a+']')},z.prototype.doCleanup=function(){var a=this,b=a.ws;b&&(b.onmessage=b.onclose=null,b.close(),c.unload_del(a.unload_ref),a.unload_ref=a.ri=a.ws=null)},z.enabled=function(){return!!b.WebSocket||!!b.MozWebSocket},z.roundTrips=2;var A=function(){};A.prototype.send_constructor=function(a){var b=this;b.send_buffer=[],b.sender=a},A.prototype.doSend=function(a){var b=this;b.send_buffer.push(a),b.send_stop||b.send_schedule()},A.prototype.send_schedule_wait=function(){var a=this,b;a.send_stop=function(){a.send_stop=null,clearTimeout(b)},b=c.delay(25,function(){a.send_stop=null,a.send_schedule()})},A.prototype.send_schedule=function(){var a=this;if(a.send_buffer.length>0){var b='['+a.send_buffer.join(',')+']';a.send_stop=a.sender(a.trans_url,b,function(b,c){a.send_stop=null,b===!1?a.ri._didClose(1006,'Sending error '+c):a.send_schedule_wait()}),a.send_buffer=[]}},A.prototype.send_destructor=function(){var a=this;a._send_stop&&a._send_stop(),a._send_stop=null};var B=function(b,d,e){var f=this;if(!('_send_form'in f)){var g=f._send_form=a.createElement('form'),h=f._send_area=a.createElement('textarea');h.name='d',g.style.display='none',g.style.position='absolute',g.method='POST',g.enctype='application/x-www-form-urlencoded',g.acceptCharset='UTF-8',g.appendChild(h),a.body.appendChild(g)}var g=f._send_form,h=f._send_area,i='a'+c.random_string(8);g.target=i,g.action=b+'/jsonp_send?i='+i;var j;try{j=a.createElement('<iframe name="'+i+'">')}catch(k){j=a.createElement('iframe'),j.name=i}j.id=i,g.appendChild(j),j.style.display='none';try{h.value=d}catch(l){c.log('Your browser is seriously broken. Go home! '+l.message)}g.submit();var m=function(a){if(!j.onerror)return;j.onreadystatechange=j.onerror=j.onload=null,c.delay(500,function(){j.parentNode.removeChild(j),j=null}),h.value='',e(!0)};return j.onerror=j.onload=m,j.onreadystatechange=function(a){j.readyState=='complete'&&m()},m},C=function(a){return function(b,c,d){var e=new a('POST',b+'/xhr_send',c);return e.onfinish=function(a,b){d(a===200||a===204,'http status '+a)},function(a){d(!1,a)}}},D=function(b,d){var e,f=a.createElement('script'),g,h=function(a){g&&(g.parentNode.removeChild(g),g=null),f&&(clearTimeout(e),f.parentNode.removeChild(f),f.onreadystatechange=f.onerror=f.onload=f.onclick=null,f=null,d(a),d=null)},i=!1,j=null;f.id='a'+c.random_string(8),f.src=b,f.type='text/javascript',f.charset='UTF-8',f.onerror=function(a){j||(j=setTimeout(function(){i||h(c.closeFrame(1006,'JSONP script loaded abnormally (onerror)'))},1e3))},f.onload=function(a){h(c.closeFrame(1006,'JSONP script loaded abnormally (onload)'))},f.onreadystatechange=function(a){if(/loaded|closed/.test(f.readyState)){if(f&&f.htmlFor&&f.onclick){i=!0;try{f.onclick()}catch(b){}}f&&h(c.closeFrame(1006,'JSONP script loaded abnormally (onreadystatechange)'))}};if(typeof f.async=='undefined'&&a.attachEvent)if(!/opera/i.test(navigator.userAgent)){try{f.htmlFor=f.id,f.event='onclick'}catch(k){}f.async=!0}else g=a.createElement('script'),g.text='try{var a = document.getElementById(\''+f.id+'\'); if(a)a.onerror();}catch(x){};',f.async=g.async=!1;typeof f.async!='undefined'&&(f.async=!0),e=setTimeout(function(){h(c.closeFrame(1006,'JSONP script loaded abnormally (timeout)'))},35e3);var l=a.getElementsByTagName('head')[0];return l.insertBefore(f,l.firstChild),g&&l.insertBefore(g,l.firstChild),h},E=y['jsonp-polling']=function(a,b){c.polluteGlobalNamespace();var d=this;d.ri=a,d.trans_url=b,d.send_constructor(B),d._schedule_recv()};E.prototype=new A,E.prototype._schedule_recv=function(){var a=this,b=function(b){a._recv_stop=null,b&&(a._is_closing||a.ri._didMessage(b)),a._is_closing||a._schedule_recv()};a._recv_stop=F(a.trans_url+'/jsonp',D,b)},E.enabled=function(){return!0},E.need_body=!0,E.prototype.doCleanup=function(){var a=this;a._is_closing=!0,a._recv_stop&&a._recv_stop(),a.ri=a._recv_stop=null,a.send_destructor()};var F=function(a,d,e){var f='a'+c.random_string(6),g=a+'?c='+escape(h+'.'+f),i=0,j=function(a){switch(i){case 0:delete b[h][f],e(a);break;case 1:e(a),i=2;break;case 2:delete b[h][f]}},k=d(g,j);b[h][f]=k;var l=function(){b[h][f]&&(i=1,b[h][f](c.closeFrame(1e3,'JSONP user aborted read')))};return l},G=function(){};G.prototype=new A,G.prototype.run=function(a,b,c,d,e){var f=this;f.ri=a,f.trans_url=b,f.send_constructor(C(e)),f.poll=new $(a,d,b+c,e)},G.prototype.doCleanup=function(){var a=this;a.poll&&(a.poll.abort(),a.poll=null)};var H=y['xhr-streaming']=function(a,b){this.run(a,b,'/xhr_streaming',db,c.XHRCorsObject)};H.prototype=new G,H.enabled=function(){return b.XMLHttpRequest&&'withCredentials'in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},H.roundTrips=2,H.need_body=!0;var I=y['xdr-streaming']=function(a,b){this.run(a,b,'/xhr_streaming',db,c.XDRObject)};I.prototype=new G,I.enabled=function(){return!!b.XDomainRequest},I.roundTrips=2;var J=y['xhr-polling']=function(a,b){this.run(a,b,'/xhr',db,c.XHRCorsObject)};J.prototype=new G,J.enabled=H.enabled,J.roundTrips=2;var K=y['xdr-polling']=function(a,b){this.run(a,b,'/xhr',db,c.XDRObject)};K.prototype=new G,K.enabled=I.enabled,K.roundTrips=2;var L=function(){};L.prototype.i_constructor=function(a,b,d){var e=this;e.ri=a,e.origin=c.getOrigin(d),e.base_url=d,e.trans_url=b;var f=d+'/iframe.html';e.ri._options.devel&&(f+='?t='+ +(new Date)),e.window_id=c.random_string(8),f+='#'+e.window_id,e.iframeObj=c.createIframe(f,function(a){e.ri._didClose(1006,'Unable to load an iframe ('+a+')')}),e.onmessage_cb=c.bind(e.onmessage,e),c.attachMessage(e.onmessage_cb)},L.prototype.doCleanup=function(){var a=this;if(a.iframeObj){c.detachMessage(a.onmessage_cb);try{a.iframeObj.iframe.contentWindow&&a.postMessage('c')}catch(b){}a.iframeObj.cleanup(),a.iframeObj=null,a.onmessage_cb=a.iframeObj=null}},L.prototype.onmessage=function(a){var b=this;if(a.origin!==b.origin)return;var c=a.data.slice(0,8),d=a.data.slice(8,9),e=a.data.slice(9);if(c!==b.window_id)return;switch(d){case's':b.iframeObj.loaded(),b.postMessage('s',JSON.stringify([y.version,b.protocol,b.trans_url,b.base_url]));break;case't':b.ri._didMessage(e)}},L.prototype.postMessage=function(a,b){var c=this;c.iframeObj.post(c.window_id+a+(b||''),c.origin)},L.prototype.doSend=function(a){this.postMessage('m',a)},L.enabled=function(){var a=navigator&&navigator.userAgent&&navigator.userAgent.indexOf('Konqueror')!==-1;return(typeof b.postMessage=='function'||typeof b.postMessage=='object')&&!a};var M,N=function(a,d){parent!==b?parent.postMessage(M+a+(d||''),'*'):c.log('Can\'t postMessage, no parent window.',a,d)},O=function(){};O.prototype._didClose=function(a,b){N('t',c.closeFrame(a,b))},O.prototype._didMessage=function(a){N('t',a)},O.prototype._doSend=function(a){this._transport.doSend(a)},O.prototype._doCleanup=function(){this._transport.doCleanup()},c.parent_origin=undefined,y.bootstrap_iframe=function(){var d;M=a.location.hash.slice(1);var e=function(a){if(a.source!==parent)return;typeof c.parent_origin=='undefined'&&(c.parent_origin=a.origin);if(a.origin!==c.parent_origin)return;var e=a.data.slice(0,8),f=a.data.slice(8,9),g=a.data.slice(9);if(e!==M)return;switch(f){case's':var h=JSON.parse(g),i=h[0],j=h[1],k=h[2],l=h[3];i!==y.version&&c.log('Incompatibile SockJS! Main site uses: "'+i+'", the iframe:'+' "'+y.version+'".');if(!c.flatUrl(k)||!c.flatUrl(l)){c.log('Only basic urls are supported in SockJS');return}if(!c.isSameOriginUrl(k)||!c.isSameOriginUrl(l)){c.log('Can\'t connect to different domain from within an iframe. ('+JSON.stringify([b.location.href,k,l])+')');return}d=new O,d._transport=new O[j](d,k,l);break;case'm':d._doSend(g);break;case'c':d&&d._doCleanup(),d=null}};c.attachMessage(e),N('s')};var P=function(a,b){var d=this;c.delay(function(){d.doXhr(a,b)})};P.prototype=new f(['finish']),P.prototype.doXhr=function(a,b){var d=this,e=(new Date).getTime(),f=new b('GET',a+'/info'),g=c.delay(8e3,function(){f.ontimeout()});f.onfinish=function(a,b){clearTimeout(g),g=null;if(a===200){var c=(new Date).getTime()-e,f=JSON.parse(b);typeof f!='object'&&(f={}),d.emit('finish',f,c)}else d.emit('finish')},f.ontimeout=function(){f.close(),d.emit('finish')}};var Q=function(b){var d=this,e=function(){var a=new L;a.protocol='w-iframe-info-receiver';var c=function(b){if(typeof b=='string'&&b.substr(0,1)==='m'){var c=JSON.parse(b.substr(1)),e=c[0],f=c[1];d.emit('finish',e,f)}else d.emit('finish');a.doCleanup(),a=null},e={_options:{},_didClose:c,_didMessage:c};a.i_constructor(e,b,b)};a.body?e():c.attachEvent('load',e)};Q.prototype=new f(['finish']);var R=function(){var a=this;c.delay(function(){a.emit('finish',{},2e3)})};R.prototype=new f(['finish']);var S=function(a){if(c.isSameOriginUrl(a))return new P(a,c.XHRLocalObject);switch(c.isXHRCorsCapable()){case 1:return new P(a,c.XHRLocalObject);case 2:return new P(a,c.XDRObject);case 3:return new Q(a);default:return new R}},T=O['w-iframe-info-receiver']=function(a,b,d){var e=new P(d,c.XHRLocalObject);e.onfinish=function(b,c){a._didMessage('m'+JSON.stringify([b,c])),a._didClose()}};T.prototype.doCleanup=function(){};var U=y['iframe-eventsource']=function(){var a=this;a.protocol='w-iframe-eventsource',a.i_constructor.apply(a,arguments)};U.prototype=new L,U.enabled=function(){return'EventSource'in b&&L.enabled()},U.need_body=!0,U.roundTrips=3;var V=O['w-iframe-eventsource']=function(a,b){this.run(a,b,'/eventsource',_,c.XHRLocalObject)};V.prototype=new G;var W=y['iframe-xhr-polling']=function(){var a=this;a.protocol='w-iframe-xhr-polling',a.i_constructor.apply(a,arguments)};W.prototype=new L,W.enabled=function(){return b.XMLHttpRequest&&L.enabled()},W.need_body=!0,W.roundTrips=3;var X=O['w-iframe-xhr-polling']=function(a,b){this.run(a,b,'/xhr',db,c.XHRLocalObject)};X.prototype=new G;var Y=y['iframe-htmlfile']=function(){var a=this;a.protocol='w-iframe-htmlfile',a.i_constructor.apply(a,arguments)};Y.prototype=new L,Y.enabled=function(){return L.enabled()},Y.need_body=!0,Y.roundTrips=3;var Z=O['w-iframe-htmlfile']=function(a,b){this.run(a,b,'/htmlfile',cb,c.XHRLocalObject)};Z.prototype=new G;var $=function(a,b,c,d){var e=this;e.ri=a,e.Receiver=b,e.recv_url=c,e.AjaxObject=d,e._scheduleRecv()};$.prototype._scheduleRecv=function(){var a=this,b=a.poll=new a.Receiver(a.recv_url,a.AjaxObject),c=0;b.onmessage=function(b){c+=1,a.ri._didMessage(b.data)},b.onclose=function(c){a.poll=b=b.onmessage=b.onclose=null,a.poll_is_closing||(c.reason==='permanent'?a.ri._didClose(1006,'Polling error ('+c.reason+')'):a._scheduleRecv())}},$.prototype.abort=function(){var a=this;a.poll_is_closing=!0,a.poll&&a.poll.abort()};var _=function(a){var b=this,d=new EventSource(a);d.onmessage=function(a){b.dispatchEvent(new e('message',{data:unescape(a.data)}))},b.es_close=d.onerror=function(a,f){var g=f?'user':d.readyState!==2?'network':'permanent';b.es_close=d.onmessage=d.onerror=null,d.close(),d=null,c.delay(200,function(){b.dispatchEvent(new e('close',{reason:g}))})}};_.prototype=new d,_.prototype.abort=function(){var a=this;a.es_close&&a.es_close({},!0)};var ab,bb=function(){if(ab===undefined)if('ActiveXObject'in b)try{ab=!!(new ActiveXObject('htmlfile'))}catch(a){}else ab=!1;return ab},cb=function(a){var d=this;c.polluteGlobalNamespace(),d.id='a'+c.random_string(6,26),a+=(a.indexOf('?')===-1?'?':'&')+'c='+escape(h+'.'+d.id);var f=bb()?c.createHtmlfile:c.createIframe,g;b[h][d.id]={start:function(){g.loaded()},message:function(a){d.dispatchEvent(new e('message',{data:a}))},stop:function(){d.iframe_close({},'network')}},d.iframe_close=function(a,c){g.cleanup(),d.iframe_close=g=null,delete b[h][d.id],d.dispatchEvent(new e('close',{reason:c}))},g=f(a,function(a){d.iframe_close({},'permanent')})};cb.prototype=new d,cb.prototype.abort=function(){var a=this;a.iframe_close&&a.iframe_close({},'user')};var db=function(a,b){var c=this,d=0;c.xo=new b('POST',a,null),c.xo.onchunk=function(a,b){if(a!==200)return;for(;;){var f=b.slice(d),g=f.indexOf('\n');if(g===-1)break;d+=g+1;var h=f.slice(0,g);c.dispatchEvent(new e('message',{data:h}))}},c.xo.onfinish=function(a,b){c.xo.onchunk(a,b),c.xo=null;var d=a===200?'network':'permanent';c.dispatchEvent(new e('close',{reason:d}))}};return db.prototype=new d,db.prototype.abort=function(){var a=this;a.xo&&(a.xo.close(),a.dispatchEvent(new e('close',{reason:'user'})),a.xo=null)},y.getUtils=function(){return c},y.getIframeTransport=function(){return L},y}(),'_sockjs_onload'in window&&setTimeout(_sockjs_onload,1),typeof define=='function'&&define.amd&&define('sockjs',[],function(){return SockJS}),define('notification/sockjs',function(){}),function(){var a=[],b=function(b){var c,d=!1,e=[],f=[],g=[],h=5,i={last:undefined,first:undefined,packets:{}},j,k=function(a,b){i.packets[a]={id:b,next:undefined},i.packets[i.first].next=a,i.first=a},l=function(a){var b=i.last,c=i.packets[b],d=c.next;k(a,a),i.last=d,delete i.packets[b],delete c},m=function(a){return!i.packets[a]||i.packets[a].id!==a};(function(){var a;i.packets[0]={id:!1,next:undefined},i.first=0,i.last=0;for(a=1;a<=h;a++)k(a,!1)})();var n=function(a){var c=a.parent_type+':'+a.type;if(m(a.id)){l(a.id);var d=!0;b(g[c]).each(function(b,c){if(c(a)===!1)return d=!1,!1});if(!d)return!1;b(f[c]).each(function(c,d){var e=b.extend(!0,{},a);d(e)})}},o=function(a,b,c){var d=a+':'+b;if(f[d]){var e=_.find(f[d],function(a){return a==c});e||f[d].push(c)}else f[d]=new Array(c);return this},p=function(a,b,c){var d=a+':'+b;if(g[d]){var e=_.find(g[d],function(a){return a==c});e||g[d].push(c)}else g[d]=new Array(c);return this},q=function(a,b,c){c=c||window,b=b||[],d?a.apply(c,b):e.push({f:a,args:b,context:c})},r=function(){for(var a=0;a<e.length;a++){var b=e[a];b.f.apply(b.context,b.args)}e=[]},s=function(a,b){c.send(JSON.stringify({channel:a,body:b}))},t=function(){c&&c.close()},u=function(a){typeof a!='undefined'&&(typeof j=='undefined'||j.join('')!==a.join(''))&&(j=a,t())},v=function(){return b.ajax({url:'/ajax/pinky/header.php',dataType:'json',cache:!1,data:{}})},w=function(){return c&&c.readyState},x=function(a,b,c){this.name=a,this.first_fail=!0,this.first_timeout=c,this.wait_time=b,this.reset_time=b};x.prototype.fail=function(){var a;return this.first_fail?(this.first_fail=!1,a=this.first_timeout):(a=this.wait_time,this.wait_time*=2,this.wait_time=Math.min(this.wait_time,6e4)),console.log(this.name+' Failed retrying in '+a),a},x.prototype.ok=function(){if(!this.first_fail){console.log(this.name+' Recovered');var a,b='libnotify.connected',c,d='libnotify.connected.immediate';try{a=new Event(b),c=new Event(d)}catch(e){a=document.createEvent('Event'),c=document.createEvent('Event'),a.initEvent(b,!0,!1),c.initEvent(d,!0,!1)}setTimeout(function(){document.dispatchEvent(a)},Math.random()*3e4),document.dispatchEvent(c)}this.first_fail=!0,this.wait_time=this.reset_time};var y=function(b){var e,f=new x('sockJS Connect',1e3,200),g=new x('sockJS Reconnect',1e3,200),h=new x('sockJS Auth',4e3,500);v().then(function(e){var i=e.data.userJobs,j={hash:getCookie(flns.config.cookie_base+'_AUTH_HASH'),hash2:getCookie(flns.config.cookie_base+'_AUTH_HASH_V2'),user_id:getCookie(flns.config.cookie_base+'_USER_ID'),channels:i};if(j.hash2==''&&j.hash==''||j.user_id=='')return!1;var k=function(){c=new SockJS(flns.config.notify_server),j.channels=i,c.onmessage=function(e){var f=JSON.parse(e.data);a.length<100&&(f.body.parent_type==='onlineoffline'||f.channel==='subscribe')&&a.push(f),f.channel=='user'?n(f.body):f.channel=='subscribe'&&(g.ok(),f.body=='NO'?(b(),c.close(4e3,'Auth Failure')):(h.ok(),d=!0,r()));if(f.body.type === 'project') {var myd = JSON.stringify(f);jQuery("#projects").attr('data',myd);}},c.onopen=function(){var a;c&&c._transport&&c._transport.url&&c._transport.url.split('/').length!==0&&(a=c._transport.url.split('/')[4]);var b=(new Date).getTime();window.sessionStorage&&(window.sessionStorage.setItem('notification_socket_session_id',a),window.sessionStorage.setItem('notification_socket_session_time',b)),f.ok(),c.send(JSON.stringify({channel:'auth',body:j}))},c.onclose=function(a){c=undefined,d=!1,a.code===4e3?setTimeout(k,h.fail()):a.wasClean?setTimeout(k,g.fail()):setTimeout(k,f.fail())}};k()})},z=function(){return a};return y(function(){console.log('auth failure')}),{log:!0,register:o,register_filter:p,close:t,packets:i,send:s,ready:q,set_job_channel:u,getSocketReadyState:w,getEventHistory:z}};typeof define=='function'&&define.amd?define('notification/libnotify',['jquery-wrapper','notification/sockjs'],function(a){return window.libnotify=window.libnotify||b(a)}):window.libnotify=b(jQuery)}(),function(){var a=['Msxml2.XMLHTTP','Microsoft.XMLHTTP','Msxml2.XMLHTTP.4.0'],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d=typeof location!='undefined'&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,''),f=d&&location.hostname,g=d&&(location.port||undefined),h=[];define('text',[],function(){var i,j;return i={version:'1.0.8',strip:function(a){if(a){a=a.replace(b,'');var d=a.match(c);d&&(a=d[1])}else a='';return a},jsEscape:function(a){return a.replace(/(['\\])/g,'\\$1').replace(/[\f]/g,'\\f').replace(/[\b]/g,'\\b').replace(/[\n]/g,'\\n').replace(/[\t]/g,'\\t').replace(/[\r]/g,'\\r')},createXhr:function(){var b,c,d;if(typeof XMLHttpRequest!='undefined')return new XMLHttpRequest;if(typeof ActiveXObject!='undefined')for(c=0;c<3;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}return b},parseName:function(a){var b=!1,c=a.indexOf('.'),d=a.substring(0,c),e=a.substring(c+1,a.length);return c=e.indexOf('!'),c!==-1&&(b=e.substring(c+1,e.length),b=b==='strip',e=e.substring(0,c)),{moduleName:d,ext:e,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=i.xdRegExp.exec(a),f,g,h;return e?(f=e[2],g=e[3],g=g.split(':'),h=g[1],g=g[0],(!f||f===b)&&(!g||g===c)&&(!h&&!g||h===d)):!0},finishLoad:function(a,b,c,d,e){c=b?i.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText){c();return}var j=i.parseName(a),k=j.moduleName+'.'+j.ext,l=b.toUrl(k),m=h&&h.text&&h.text.useXhr||i.useXhr;!d||m(l,e,f,g)?i.get(l,function(b){i.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){i.finishLoad(j.moduleName+'.'+j.ext,j.strip,a,c,h)})},write:function(a,b,c,d){if(h.hasOwnProperty(b)){var e=i.jsEscape(h[b]);c.asModule(a+'!'+b,'define(function () { return \''+e+'\';});\n')}},writeFile:function(a,b,c,d,e){var f=i.parseName(b),g=f.moduleName+'.'+f.ext,h=c.toUrl(f.moduleName+'.'+f.ext)+'.js';i.load(g,c,function(b){var c=function(a){return d(h,a)};c.asModule=function(a,b){return d.asModule(a,h,b)},i.write(a,g,c,e)},e)}},i.createXhr()?i.get=function(a,b){var c=i.createXhr();c.open('GET',a,!0),c.onreadystatechange=function(a){c.readyState===4&&b(c.responseText)},c.send(null)}:typeof process!='undefined'&&process.versions&&!!process.versions.node?(j=require.nodeRequire('fs'),i.get=function(a,b){var c=j.readFileSync(a,'utf8');c.indexOf('﻿')===0&&(c=c.substring(1)),b(c)}):typeof Packages!='undefined'&&(i.get=function(a,b){var c='utf-8',d=new java.io.File(a),e=java.lang.System.getProperty('line.separator'),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(d),c)),g,h,i='';try{g=new java.lang.StringBuffer,h=f.readLine(),h&&h.length()&&h.charAt(0)===65279&&(h=h.substring(1)),g.append(h);while((h=f.readLine())!==null)g.append(e),g.append(h);i=String(g.toString())}finally{f.close()}b(i)}),i})}(),define('text!templates/dashboard/newsFeed.htm',[],function(){return'<div id="newsFeed" class="row-fluid newsfeed">\n    <div id="events" class="span8 news-feed">\n    </div>\n    <div id="right" class="span4 newsfeed-promotions hidden-title">\n        <div class="newsfeed-promotions-content">\n            <div id="user-details"><!-- User Details widget --></div>\n\n            <% if (ab_tests.showBidTicker && ab_tests.getMoreBidsButton.variant) { %>\n            <div id="bid-info" class="Card PageDashboard-card"><!-- Bid ticker widget --></div>\n            <% } %>\n\n            <% if (ab_tests.showNoCommissionBannerWidget) { %>\n            <div class="PageDashboard-banner">\n                <a class="WidgetNoCommissionBanner" href="/no-commission/no-commission-invitation.php" data-qtsb-section="dashboard" data-qtsb-subsection="no-commission-invitation-banner-card" data-qtsb-label="link-banner-image">\n                    <div class="WidgetNoCommissionBanner-content">\n                        <div class="WidgetNoCommissionBanner-heading">\n                            <%- T_("0% Commission") %>\n                        </div>\n                        <div class="WidgetNoCommissionBanner-body">\n                            <%- T_("Bring your clients to Freelancer and pay 0% Commission") %>\n                        </div>\n                    </div>\n                    <img class="WidgetNoCommissionBanner-img" src="<%= cdn_url(\'/build/img/no-commission/no-commission-dashboard-widget.png\') %>" alt="<%- T_("Bring your clients to Freelancer and pay 0% Commission.") %>">\n                </a>\n            </div>\n            <% } %>\n\n            <div id="kyc_module" class="hide"><!-- KYC widget --></div>\n\n            <div id="TopFreelancers_module" class="hide">\n                <div class="Card PageDashboard-card">\n                    <div class="PageDashboard-card-header">\n                        <h3 class="PageDashboard-card-title"></h3>\n                    </div>\n                    <p><%- T_("These are the top freelancers with this skill:") %></p>\n                    <div class="DashboardHireme">\n                        <div class="DashboardHireme-card">\n                            <div class="contact-popover-user-img">\n                                <figure class="profile-img">\n                                    <a href="" class="profile-img-link"><img alt="" src=""></a>\n                                </figure>\n                                <span class="contact-popover-flag small-flag"></span>\n                            </div>\n                            <div class="contact-popover-user-info">\n                                <div class="contact-popover-name">\n                                    <a href="" class="contact-popover-name-link"></a>\n                                    <span class="online-status" data-size="large" data-is_online=""></span>\n                                </div>\n                                <span class="Rating Rating--labeled" data-star_rating="">\n                                    <span class="Rating-total">\n                                        <span class="Rating-progress"></span>\n                                    </span>\n                                </span>\n                                <a href="" class="contact-popover-hire-bt btn fl-bt-skin fl-bt-3d-skin">\n                                    <span class="fl-icon-bird"></span><%- T_("Hire Me") %>\n                                </a>\n                            </div>\n                        </div>\n                        <div class="DashboardHireme-inner">\n                            <ul class="DashboardHireme-freelancer-list">\n                            </ul>\n                            <a href="" class="DashboardHireme-cta">\n                                <%= loadSvg(\'flicon-plus\') %>\n                                <span class="DashboardHireme-cta-text">\n                                    <%- T_("Show More Results") %>\n                                </span>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div id="pf_support_module"><!-- Preferred freelancer support module --></div>\n            <div id="funds_module"><!-- My Funds widget --></div>\n            <div id="hire_me_post_contest_module"><!-- Hire Me Post Contest widget --></div>\n            <div id="nearby_projects_module"><!-- Nearby Projects widget --></div>\n            <div id="poll_module" class="hide"><!-- Poll widget --></div>\n\n            <% if (ab_tests.showNoCommissionLink && !ab_tests.showNoCommissionBannerWidget) { %>\n            <div id="no_commission_module"><!-- No Commission widget --></div>\n            <% } %>\n\n            <div id="WidgetProjectsTodoList"><!-- Projects Todo List widget --></div>\n\n            <div id="newsfeed-main-nav" class="Card PageDashboard-card WidgetPostProjectLinks">\n                <div class="PageDashboard-card-header">\n                    <h3 class="PageDashboard-card-title">\n                        <%- T_("What work do you need done?") %>\n                    </h3>\n                </div>\n                <form id="post-fixed" action="/post-project" method="get" class="WidgetPostProjectLinks-form">\n                    <select id="skill_category-fixed" name="skill_category" class="WidgetPostProjectLinks-select"></select>\n                    <select id="skill_subcategory-fixed-dash" name="skill_subcategory" class="WidgetPostProjectLinks-select hide"></select>\n                    <a id="btn-post-first-project-fixed"\n                        class="btn btn-primary btn-small btn-block"\n                        onclick="javascript:_ttref.push([\'_setEntrypoint\', \'PostProject_DashboardWhatWorkNeedDone\']);"\n                        data-qtsb-section="DashboardSidebar" data-qtsb-label="GoToPPP">\n                        <%- T_("Post a Project") %>\n                    </a>\n                </form>\n                <div class="WidgetPostProjectLinks-content" id="post-project-one-click-links">\n                    <!-- Filled by JS -->\n                </div>\n                <form action="/buyers/onverifycreate.php" method="POST" id="post-project-one-click-form" class="is-hidden">\n                    <input type="hidden" name="csrf_token" value="<%- csrf_token %>">\n                    <input type="hidden" name="budgetPeriod" value="fixed">\n                    <input type="hidden" name="budget_set" value="false">\n                    <input type="hidden" name="commitment" value="10">\n                    <input type="hidden" name="duration" value="2">\n                    <input type="hidden" name="commitmentInterval" value="week">\n                    <input type="hidden" name="budget" value="custom">\n                    <input type="hidden" name="one_click_post" value="true">\n                    <input type="hidden" name="project_name">\n                    <input type="hidden" name="description">\n                    <input type="hidden" name="page_name" value="Dashboard">\n                    <div id="post-project-one-click-jobs" class="is-hidden"></div>\n                </form>\n            </div>\n\n            <div id="projects_module"><!-- My Projects widget --></div>\n            <div id="freemarket_module"><!-- Freemarket widget --></div>\n            <div id="post_local_module"><!-- Local Jobs Post widget --></div>\n            <div id="add_local_module"><!-- Local Jobs Add widget --></div>\n\n            <% if (ab_tests.showBidTicker && !ab_tests.getMoreBidsButton.variant) { %>\n            <div id="bid-info" class="Card PageDashboard-card"><!-- Bid ticker widget --></div>\n            <% } %>\n        </div>\n    </div>\n</div>\n'}),define('text!templates/dashboard/topFreelancersWidget/freelancer.htm',[],function(){return'<li class="DashboardHireme-freelancer-item" >\n    <a href="">\n        <figure class="ImageThumbnail ImageThumbnail--large">\n            <img src="" alt="" class="ImageThumbnail-image">\n        </figure>\n    </a>\n</li>\n'}),define('dashboard/lib/infiniScroll',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){c.InfiniScroll=function(c,d){function e(a){var b={};return typeof a[f.options.untilAttr]=='function'?b[f.options.param]=a[f.options.untilAttr]():b[f.options.param]=a.get(f.options.untilAttr),f.options.includePage&&(b.page=j+1),b}d=d||{};var f={},g,h,i,j,k,l=0,m=0;k=c.length||25,f.allowExtraFetch=!1,f.collection=c,f.options=b.defaults(d,{success:function(){},error:function(){},onFetch:function(){},target:a(window),param:'until',untilAttr:'id',pageSize:k,scrollOffset:100,add:!0,strict:!1,includePage:!1});var n=function(){g=a(f.options.target),i=!0,j=1,g.on('scroll',f.watchScroll)};return f.destroy=function(){g.off('scroll',f.watchScroll)},f.enableFetch=function(){i=!0},f.disableFetch=function(){i=!1},f.promptMoreFetch=function(){f.disableFetch(),a(document).find('.news-list-wrapper').last().parent().after('<li><div style="text-align:center" class="news-list-wrapper"><span><a id="news-load-more">'+T_('Load More')+'</a></span></div></li>'),a('#news-load-more').on('click',function(){f.enableFetch(),a(this).parents('li').remove(),f.allowExtraFetch=!0;var b;f.watchScroll(b,!0)})},f.onFetch=function(){f.options.onFetch()},f.fetchLoading=function(b){a(document).find('#NoneNotification').remove(),a(document).find('.news-list-wrapper').last().parent().append('<li><div class="news-list-wrapper"><div class="loading"><div class="Loader Loader--small Loader--full"></div></div></div></li>'),b&&a(document).find('.news-list-wrapper .loading').parent().parent().remove()},f.endofnews=function(){a(document).find('.news-list-wrapper').last().parent().after('<li><div style="text-align:center" class="news-list-wrapper"><span>'+T_('There are no more updates')+'</span></div></li>')},f.fetchSuccess=function(a,b){if(typeof b.limit_articles=='object'&&b.limit_articles[0]==null){f.disableFetch(),f.fetchLoading(!0),f.endofnews();return}f.options.strict&&a.length>=(j+1)*f.options.pageSize||!f.options.strict&&b.hits.hits.length>0?(f.enableFetch(),j+=1,f.fetchLoading(!0),f.allowExtraFetch||f.promptMoreFetch()):(f.disableFetch(),f.fetchLoading(!0),f.endofnews()),f.options.success(a,b)},f.fetchError=function(b,c){f.disableFetch(),a(document).find('.news-list-wrapper .loading').parent().parent().after('<p id="NoneNotification" class="margin-t10" align="center">'+T_('Sorry, we couldn\'t retrieve your updates. <a class="infinReload"> Try again </a> or <a class="refresh"> Refresh </a>')+'</p>'),a(document).find('.news-list-wrapper .loading').parent().parent().remove(),f.options.error(b,c)},f.watchScroll=function(b,c){var d,h=g.scrollTop()+g.height(),j=g.get(0).scrollHeight;j||(j=a(document).height());if(h>=j-f.options.scrollOffset&&i&&l<=h||c){var k=f.collection.last();if(!k)return;f.fetchLoading(),f.onFetch(),f.disableFetch(),f.collection.fetch({success:f.fetchSuccess,error:f.fetchError,add:f.options.add,data:e(k)})}l=h},n(),f}}),define('dashboard/models/newsitem',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.Model.extend({StikcyNewTopicId:18,initialize:function(){var a=this.get('ref_text'),b=this.get('ref_link'),c=Boolean(a)&&Boolean(b)&&Boolean(a.length!==0)&&Boolean(b.length!==0);this.set({has_external_link:c})}});return d}),define('dashboard/collections/freelancernews',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/newsitem'],function(a,b,c,d){var e=(new Date).getTime(),f=c.Collection.extend({model:d,url:'/ajax/dashboard/freelancernews.php',parse:function(a){return this.fetchFinished=!0,a.limit_articles.sort(function(a,b){return a.topic_id==d.StikcyNewTopicId&&b.topic_id!=d.StikcyNewTopicId?-1:a.topic_id!=d.StikcyNewTopicId&&b.topic_id==d.StikcyNewTopicId?1:b.timestamp-a.timestamp})}});return f}),define('text!templates/dashboard/eventList.htm',[],function(){return'<!-- Corporate Upsell Banner -->\n<div id="corporate-upsell-banner" class="DashboardPromotionBanner"></div>\n<!-- End Corporate Upsell Banner -->\n\n<!-- Local Jobs Banner -->\n<div id="local-jobs-banner" class="DashboardPromotionBanner"></div>\n<!-- End Local Jobs Banner -->\n\n<!-- Dashboard Alert -->\n<div class="Dashboard-alert-container" id="create-milestone-alert"></div>\n<!-- End Dashboard Alert -->\n\n<div class="dashboard-tab-content hidden-title">\n    <section class="newsfeed-events Card PageDashboard-card">\n        <div class="PageDashboard-card-header">\n            <h3 class="PageDashboard-card-title"><%- T_("Newsfeed") %></h3>\n        </div>\n        <div id="spiningOfDeath">\n            <div class="news-list-wrapper">\n                <div class="Loader Loader--small Loader--full"></div>\n            </div>\n        </div>\n        <span id="debug"></span>\n        <ul id="eventlist" class="opacity-0">\n            <li class="view-all" style="display:none"></li>\n        </ul>\n        <span id="pageBottom" align="center"></span>\n    </section>\n</div>\n'}),define('text!templates/dashboard/menu.htm',[],function(){return'<div class="btn-group news-actions">\n    <% if (share) { %>\n    <a class="btn dropdown-toggle share" title="<%- T_("Share this item") %>"\n        data-qtsb-section="newsfeed" data-qtsb-subsection="feed"\n        data-qtsb-label="share item">\n        <i class="icon-share-hub icon-grey"></i>\n    </a>\n    <% } %>\n    <a class="btn dropdown-toggle" data-toggle="dropdown" title="<%- T_("Options menu") %>"><i class="icon-list icon-grey"></i></a>\n    <ul class="dropdown-menu">\n        <% if (!user_hidden) { %>\n            <li>\n                <a class="hide" data-qtsb-section="newsfeed"\n                    data-qtsb-subsection="feed" data-qtsb-label="hide item">\n                    <%- T_("Hide this item") %>\n                </a>\n            </li>\n        <%  } %>\n        <% if (user_hidden) { %>\n            <li>\n                <a class="unhide" data-qtsb-section="newsfeed"\n                    data-qtsb-subsection="feed" data-qtsb-label="unhide item">\n                    <%- T_("Unhide this Item") %>\n                </a>\n            </li>\n        <%  } %>\n    <% if(typeof is_important !== "undefined"){ %>\n        <% if (is_important) { %>\n            <li>\n                <a class="unimportant" data-qtsb-section="newsfeed"\n                    data-qtsb-subsection="feed"\n                    data-qtsb-label="unimportant item">\n                    <%- T_("Mark as unimportant") %>\n                </a>\n            </li>\n        <%  } %>\n        <% if (!is_important) { %>\n            <li>\n                <a class="important" data-qtsb-section="newsfeed"\n                    data-qtsb-subsection="feed"\n                    data-qtsb-label="important item">\n                    <%- T_("Mark as important") %>\n                </a>\n            </li>\n        <%  } %>\n    <% } %>\n    </ul>\n    <% if (!is_pinned) { %>\n        <a class="btn dropdown-toggle pin" rel="tooltip"\n            title="<%- T_("Star this item") %>" data-qtsb-section="newsfeed"\n            data-qtsb-subsection="feed" data-qtsb-label="star item">\n            <i class="icon-star icon-grey"></i>\n        </a>\n    <%  } %>\n    <% if (is_pinned) { %>\n        <a class="btn dropdown-toggle unpin" rel="tooltip"\n            title="<%- T_("Unstar this item") %>" data-qtsb-section="newsfeed"\n            data-qtsb-subsection="feed" data-qtsb-label="unstar item">\n            <i class="icon-star icon-gold"></i>\n        </a>\n    <%  } %>\n    <% if (is_pinned) { %><i class="unhovered starred icon-star icon-gold"></i><%  } %>\n</div>\n'}),define('text!templates/dashboard/hidden.htm',[],function(){return'<div class="hidden">\n  <p class = "message unhideEvent">\n    <%- T_("This update is now hidden from your newsfeed. ") %>\n  </p>\n  <a class = "action unhideEvent" id="unhide"><%- T_("Undo this") %></a>\n</div>\n'}),define('text!templates/dashboard/hideImportant.htm',[],function(){return'<div class="hidden">\n  <p class = "message importantEvent">\n    <%- T_("This update is now marked as unimportant. ") %>\n  </p>\n  <a class = "action importantEvent" id="markImportant"><%- T_("Undo this") %></a>\n</div>\n'}),define('dashboard/views/events/hidden',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/hidden.htm','text!templates/dashboard/hideImportant.htm'],function(a,b,c,d,e){var f=c.View.extend({compileTemplate:b.template(d),compileImportantTemplate:b.template(e),events:{'click #unhide':'unhide','click #markImportant':'important'},initialize:function(a){this.constructor.__super__.initialize.call(this,a)},render:function(b){return b=='hide'?a(this.el).html(this.compileTemplate(this.model.toJSON())):b=='important'&&a(this.el).html(this.compileImportantTemplate(this.model.toJSON())),this},unhide:function(){this.trigger('unhideParent')},important:function(){this.trigger('markImportantParent')}});return f}),define('dashboard/models/portraitModel',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.Model.extend({defaults:{userId:null,userName:null,imgUrl:null,online:null},initialize:function(){}});return d}),define('dashboard/collections/portraitCollection',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/portraitModel'],function(a,b,c,d){var e=c.Collection.extend({model:d,comparator:function(a){}});return e}),define('text!templates/dashboard/portrait.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic">\n    <a <% if (userName !== "Freelancer") { %> href = "/u/<%- userName %>" <% } %> >\n      <img src="<%- imgUrl %>"  alt="profile pic" title="<%- userName %>" class="profile-pic" onerror="this.src=\'/img/unknown.png\'">\n    </a>\n    <i></i>\n    </span>\n</div>\n'}),define('dashboard/views/portraitView',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/portrait.htm'],function(a,b,c,d){var e=c.View.extend({events:{},debug:function(){},compileTemplate:b.template(d),initialize:function(){this.model.bind('change:online',this.renderOnlineStatus,this)},render:function(b){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this.renderOnlineStatus(),(this.model.get('userName')==='Freelancer'||a(this.el).find('img').attr('title')==='Freelancer')&&a(this.el).find('img').addClass('freelancer'),this},renderOnlineStatus:function(){switch(this.model.get('online')){case!0:a(this.el).find('.profile-pic-wrapper').addClass('online'),a(this.el).find('i').addClass('online-status');break;case!1:a(this.el).find('.profile-pic-wrapper').removeClass('online'),a(this.el).find('i').addClass('online-status');break;default:a(this.el).find('.profile-pic-wrapper').removeClass('online'),a(this.el).find('i').removeClass('online-status')}}});return e}),define('dashboard/views/portraitFactory',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/portraitModel','dashboard/collections/portraitCollection','dashboard/views/portraitView'],function(a,b,c,d,e,f){var g=!1,h=function(){if(g)return g;this.portraitCollection=new e,window.debugPortraitFactory=this,g=this};return h.prototype.generate=function(a){if(typeof a=='undefined'||typeof a.userId=='undefined'&&typeof a.userName=='undefined')return console.log('Error param \'portraitObj\''),null;var b=this.getPortraitModel(a),c=new f({model:b});return c},h.prototype.getPortrait=function(a){var b=this.generate(a);return b.render().el},h.prototype.getPortraitModel=function(a){if(typeof a.userId!='undefined'&&a.userId!=null){var b=this.portraitCollection.find(function(b){return b.get('userId')===a.userId});if(typeof b!='undefined')return b.get('userName')==null&&typeof a.userName!='undefined'&&b.set({userName:a.userName}),b}if(typeof a.userName!='undefined'&&a.userName!==null){var b=this.portraitCollection.find(function(b){return b.get('userName')===a.userName});if(typeof b!='undefined')return b.get('userId')==null&&typeof a.userId!='undefined'&&b.set({userId:a.userId}),b}var b=new d(a);return this.portraitCollection.add(b),b},h.prototype.getPortraitImgUrlByUserId=function(a){var b=this.getPortraitModelByUserId(a);return typeof b!='undefined'?b.get('imgUrl'):null},h.prototype.getPortraitModelByUserId=function(a){return this.portraitCollection.find(function(b){return b.get('userId')==a})},h.prototype.getPortraitModelByUserName=function(a){return this.portraitCollection.find(function(b){return b.get('userName')==a})},h.prototype.setOnlineStatusByUserId=function(a,b){var c=this.getPortraitModelByUserId(a);typeof c!='undefined'&&c.set({online:b})},h.prototype.setOnlineStatusByUserName=function(a,b){var c=this.getPortraitModelByUserName(a);typeof c!='undefined'&&c.set({online:b})},h.prototype.getAllPortraitUserIds=function(){return b.without(this.portraitCollection.pluck('userId'),[null])},h.prototype.getAllPortraitUserNames=function(){return b.without(this.portraitCollection.pluck('userName'),['Freelancer'])},h}),define('text!templates/dashboard/newsitem.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="/img/freelancer_32_32.png" alt="Freelancer" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%- title %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<p>\n    <%= orig_cont %>\n</p>\n<ul class="actions">\n    <li class="last">\n        <i class="icon-share-alt"></i>&nbsp; <a href="<%- ref_link %>"><%- ref_text %></a>\n    </li>\n</ul>\n'}),define('text!templates/dashboard/stickyNewsStatic.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="/img/freelancer_32_32.png" alt="Freelancer" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%- title %> </h2>\n<p>\n    <%= orig_cont %>\n</p>\n<ul class="actions">\n    <li class="last">\n        <i class="icon-share-alt"></i>&nbsp; <a href="<%- ref_link %>"><%- ref_text %></a>\n    </li>\n</ul>\n'}),define('text!templates/dashboard/messageThread.htm',[],function(){return'<div class="messages">\n    <textarea class="message" style="resize: none; width: auto;" rows="3" cols="75"></textarea>\n  <a class="btn btn-info btn-mini submit"><%- T_("Submit") %></a>\n</div>\n'}),define('dashboard/views/messageThread',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/messageThread.htm'],function(a,b,c,d){var e=c.View.extend({compileTemplate:b.template(d),events:{'click .submit':'submit'},collection:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'show','hide','submit','toggle','render')},show:function(){return a(this.el).show(),this.trigger('expand'),this},submit:function(){var b,c;b=this,c={project_id:this.model.get('project_id'),target_uid:this.model.get('bidder_id'),descr:a(this.el).find('.message').val(),oper:'post_pmb'},a.ajax({type:'POST',url:'/users/messages/on-pmb-ctrl.php',data:c,cache:!1,success:function(a){b.trigger('submitted',a)}})},hide:function(){return a(this.el).hide(),this.trigger('collapse'),this},toggle:function(){return a(this.el).is(':visible')?this.hide():this.show(),this},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return e}),define('text!templates/dashboard/project.commenced.htm',[],function(){return'<div class="well">\n<%= T_("<a href=\'/u/<[- bidder_username ]>.html\'><[- bidder_username ]></a> accepted your project <a href=\'/projects/<[- seo_url ]>.html\'><[- project_name ]></a>") %>\n<div class="clear"></div>\n<a class="actionMessage"><%- T_("Message") %></a> <small class="time_text"><%- lib_datetime_relative_date(creation_time) %></small>\n</div>\n'}),define('text!templates/dashboard/project.completed.freelancer.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("You completed <a class=\'font-bold\' href=\'/u/<[- data.employerUsername ]>.html\'><[- data.employerPublicName || data.employerUsername ]>\'s</a> project <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<% if(typeof state === \'undefined\' || state == "") { %>\n    <p id=\'expiredNotice\'><%- T_("Give feedback to let others know what it was like to work with them. ")%>(<span id=\'timeleft\'></span>)</p>\n<% } %>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && state == \'completed\') { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%-T_("Feedback Provided") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if ( typeof state === \'undefined\') { %>\n    <li class = "first">\n        <a id=\'feedbackButton\'><i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/project.completed.employer.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<% if(typeof data.completeStatus != \'undefined\' && data.completeStatus == \'incomplete\') {%>\n<h2><%= T_("Thank you for reporting project <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> <span class=\'noTrunc\'>as incomplete.", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n  <% if(typeof state === \'undefined\' || state == "") { %>\n     <p id=\'expiredNotice\'><%= T_("Give feedback to let others know what it was like to work with <a class=\'font-bold\' href=\'/u/<[- data.freelancerUsername ]>\'><[- data.freelancerPublicName || data.freelancerUsername ]></a>. ", {data: data})%>(<span id=\'timeleft\'></span>)</p>\n  <% } %>\n<% } else {%>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.freelancerUsername ]>.html\'><[- data.freelancerPublicName || data.freelancerUsername ]></a> completed <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n  <% if(typeof state === \'undefined\' || state == "") { %>\n     <p id=\'expiredNotice\'><%- T_("Give feedback to let others know what it was like to work with them. ")%>(<span id=\'timeleft\'></span>)</p>\n  <% } %>\n<% } %>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && state == \'completed\') { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%-T_("Feedback Provided") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if ( typeof state === \'undefined\') { %>\n    <li class = "first">\n        <a id=\'feedbackButton\'><i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/feedback.fixed.project.htm',[],function(){return'<div class="tab-content">\n    <form class="form-search">\n      <div class="well" id="feedbackBox" style="display:none">\n          <div id =\'processing\' style="text-align:center;display:none">\n              <img src="/img/dashboard-pending.gif">\n        </div>\n          <div id=\'innerWrapper\' style="">\n        <div class=\'reputation\'>\n            <div id=\'budget_time\' style=\'margin-right:64px;float:right\'>\n                <div>\n                <p style=\'\'><%- T_("Was this delivered on budget?") %></p>\n                    <ul class="ns_horizontal" style=\'margin-top: 3px;\'>\n                           <li style=\'display:inline-block\'><p><input style=\'vertical-align: middle; margin-top: -2px;\' type="radio" name=\'onbuget\' value=\'1\'> <%- T_("Yes") %></p></li>\n                           <li style=\'display:inline-block;margin-left:8px\'><p><input style=\'vertical-align: middle; margin-top: -2px;\' type="radio" name=\'onbuget\' value=\'0\'> <%- T_("No") %></p></li>\n                     </ul>\n                </div>\n                <div>\n                <p style=\'margin-top:4px\'><%- T_("Was this delivered on time?") %></p>\n                    <ul class="ns_horizontal" style=\'margin-top: 3px;\'>\n                           <li style=\'display:inline-block\'><p><input style=\'vertical-align: middle; margin-top: -2px;\' type="radio" name=\'ontime\' value=\'1\'> <%- T_("Yes") %></p></li>\n                           <li style=\'display:inline-block;margin-left:8px\'><p><input style=\'vertical-align: middle; margin-top: -2px;\' type="radio" name=\'ontime\' value=\'0\'> <%- T_("No") %></p></li>\n                     </ul>\n                </div>\n            </div>\n            <div style="float:left;">\n            <table id=\'toFreelancer\'>\n                <tr>\n                    <td width="200px">\n                        <p><%- T_("Clarity in Specification") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\' >\n                            <input type="radio" name="clarity_spec" value="1" class="star" title=\'<%- T_("Very Poor. I had no idea what they wanted and I doubt the employer did either.") %>\' />\n                            <input type="radio" name="clarity_spec" value="2" class="star" title=\'<%- T_("Poor. This employer wasn\'t very clear. Perhaps didn\'t understand the job.") %>\' />\n                            <input type="radio" name="clarity_spec" value="3" class="star" title=\'<%- T_("Good. This employer had a pretty good idea of what they wanted.") %>\' />\n                            <input type="radio" name="clarity_spec" value="4" class="star" title=\'<%- T_("Great! This employer was good at specifying the details they required.") %>\' />\n                            <input type="radio" name="clarity_spec" value="5" class="star" title=\'<%- T_("Excellent! This employer knew exactly what they wanted and I knew straight away what to do.") %>\' />\n                            <div id="clarity_spec_txt_id" style="margin-left:90px;"></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <p><%- T_("Communication") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\' >\n                            <input type="radio" name="communication" value="1" class="star" title=\'<%- T_("Very Poor. Couldn\'t understand the employer at all.") %>\' />\n                            <input type="radio" name="communication" value="2" class="star" title=\'<%- T_("Poor. This employer wasn\'t very clear. Perhaps didn\'t understand the job.") %>\' />\n                            <input type="radio" name="communication" value="3" class="star" title=\'<%- T_("Good. Communication was adequate for the task at hand.") %>\' />\n                            <input type="radio" name="communication" value="4" class="star" title=\'<%- T_("Great! Great communication between us.") %>\' />\n                            <input type="radio" name="communication" value="5" class="star" title=\'<%- T_("Excellent! Communication was perfect, couldn\'t be better!") %>\' />\n                            <div id="communication_txt_id" style="margin-left:90px;"></div>\n                        </div>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td>\n                        <p><%- T_("Payment Promptness") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\' >\n                            <input type="radio" name="payment_prom" value="1" class="star" title=\'<%- T_("Very Poor. The employer never answered my questions or had to wait forever for payment.") %>\' />\n                            <input type="radio" name="payment_prom" value="2" class="star" title=\'<%- T_("Poor. Sometimes I had to wait for responses or payment for days.") %>\' />\n                            <input type="radio" name="payment_prom" value="3" class="star" title=\'<%- T_("Good. This employer got back to me usually overnight.") %>\' />\n                            <input type="radio" name="payment_prom" value="4" class="star" title=\'<%- T_("Great! Payments and responses were quicker than expected!") %>\' />\n                            <input type="radio" name="payment_prom" value="5" class="star" title=\'<%- T_("Excellent! Amazed at how the employer was always there to answer questions and make payments.") %>\' />\n                            <div id="payment_prom_txt_id" style="margin-left:90px;"></div>\n                        </div>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td>\n                        <p><%- T_("Professionalism") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\' >\n                            <input type="radio" name="professionalism" value="1" class="star" title=\'<%- T_("Very Poor. This employer was not professional at all.") %>\' />\n                            <input type="radio" name="professionalism" value="2" class="star" title=\'<%- T_("Poor. This employer could improve their professionalism.") %>\' />\n                            <input type="radio" name="professionalism" value="3" class="star" title=\'<%- T_("Good. This  employer was courteous and treated me with respect.") %>\' />\n                            <input type="radio" name="professionalism" value="4" class="star" title=\'<%- T_("Great. This employer had a high degree of integrity and professionalism.") %>\' />\n                            <input type="radio" name="professionalism" value="5" class="star" title=\'<%- T_("Excellent! This employer was extremely professional. The best!") %>\' />\n                            <div id="professionalism_txt_id" style="margin-left:90px;"></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <p><%- T_("Would you work for again?") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\'  >\n                            <input type="radio" name="work_for_again" value="1" class="star" title=\'<%- T_("Never. I will never work again for this employer.") %>\' />\n                            <input type="radio" name="work_for_again" value="2" class="star" title=\'<%- T_("Rarely. I don\'t think I will work for this employer very often.") %>\' />\n                            <input type="radio" name="work_for_again" value="3" class="star" title=\'<%- T_("Sometimes. I don\'t mind working for this employer.") %>\' />\n                            <input type="radio" name="work_for_again" value="4" class="star" title=\'<%- T_("Often! I\'ll keep an eye out for this employer.") %>\' />\n                            <input type="radio" name="work_for_again" value="5" class="star" title=\'<%- T_("Absolutely! I\'ll always bid on this employer\'s jobs.") %>\' />\n                            <div id="work_for_again_txt_id" style="margin-left:90px;"></div>\n                        </div>\n                    </td>\n                </tr>\n            </table>\n            <table id=\'toEmployer\'>\n                <tr>\n                    <td width=\'130px\'>\n                        <p><%- T_("Quality") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\'  >\n                            <input type=\'radio\' name=\'quality\' class="star" value=\'1\' title=\'<%- T_("Awful Job. Couldn\'t use the results at all.") %>\' />\n                            <input type=\'radio\' name=\'quality\' class="star" value=\'2\' title=\'<%- T_("Poor Job. Had errors or didn\'t work as wanted.") %>\' />\n                            <input type=\'radio\' name=\'quality\' class="star" value=\'3\' title=\'<%- T_("Good Job. Good enough for the task.") %>\' />\n                            <input type=\'radio\' name=\'quality\' class="star" value=\'4\' title=\'<%- T_("Great job. Highly satisfied with work provided.") %>\' />\n                            <input type=\'radio\' name=\'quality\' class="star" value=\'5\' title=\'<%- T_("Excellent! Couldn\'t have hoped for better quality.") %>\' />\n                            <div id=\'quality_txt_id\' style="margin-left:90px; "></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <p><%- T_("Communication") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\'  >\n                            <input type=\'radio\' name=\'communication\' value=\'1\' class="star" title=\'<%- T_("Awful. Couldn\'t understand the provider at all, they didn\'t understand the requirements.") %>\' />\n                            <input type=\'radio\' name=\'communication\' value=\'2\' class="star" title=\'<%- T_("Poor. Freelancer didn\'t understand me or didn\'t always respond quickly.") %>\' />\n                            <input type=\'radio\' name=\'communication\' value=\'3\' class="star" title=\'<%- T_("Good. Communication was adequate for the task at hand.") %>\' />\n                            <input type=\'radio\' name=\'communication\' value=\'4\' class="star" title=\'<%- T_("Great! Freelancer was always quick to get back to me and understood what I wanted.") %>\' />\n                            <input type=\'radio\' name=\'communication\' value=\'5\' class="star" title=\'<%- T_("Excellent! Communication was perfect!") %>\' />\n                            <div id=\'communication_txt_id\' style="margin-left:90px; "></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                            <p><%- T_("Expertise") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\'  >\n                            <input type=\'radio\' name=\'expertise\' value=\'1\' class="star" title=\'<%- T_("Awful. The freelancer didn\'t have a clue about the area.") %>\' />\n                            <input type=\'radio\' name=\'expertise\' value=\'2\' class="star" title=\'<%- T_("Poor. The freelancer didn\'t know the subject matter well at all.") %>\' />\n                            <input type=\'radio\' name=\'expertise\' value=\'3\' class="star" title=\'<%- T_("Good. The freelancer knew how to get the job done or figured it out.") %>\' />\n                            <input type=\'radio\' name=\'expertise\' value=\'4\' class="star" title=\'<%- T_("Great! The freelancer is highly knowledgeable on the subject matter.") %>\'  />\n                            <input type=\'radio\' name=\'expertise\' value=\'5\' class="star" title=\'<%- T_("Excellent! The freelancer is a genius and in the top 5% of their class!") %>\' />\n                            <div id=\'expertise_txt_id\' style="margin-left:90px; "></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <p><%- T_("Professionalism") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\'  >\n                            <input type=\'radio\' name=\'professionalism\' value=\'1\' class="star" title=\'<%- T_("Awful. Completely unprofessional, immature, abusive or discourteous.") %>\' />\n                            <input type=\'radio\' name=\'professionalism\' value=\'2\' class="star" title=\'<%- T_("Poor. The freelancer needs to improve their professionalism.") %>\' />\n                            <input type=\'radio\' name=\'professionalism\' value=\'3\' class="star" title=\'<%- T_("Good. The customer service was good enough but not exceptional.") %>\' />\n                            <input type=\'radio\' name=\'professionalism\' value=\'4\' class="star" title=\'<%- T_("Great! Very happy with the level of customer service.") %>\' />\n                            <input type=\'radio\' name=\'professionalism\' value=\'5\' class="star" title=\'<%- T_("Excellent! The freelancer was an absolute professional, courteous and mature.") %>\' />\n                            <div id=\'professionalism_txt_id\' style="margin-left:90px;"></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <p><%- T_("Hire Again?") %></p>\n                    </td>\n                    <td>\n                        <div class=\'radio_option\' id=\'hireAgainRadio\'  >\n                            <input type=\'radio\' name=\'hire_again\' value=\'1\' class="star" title=\'<%- T_("Never. I will never hire this freelancer again.") %>\' />\n                            <input type=\'radio\' name=\'hire_again\' value=\'2\' class="star" title=\'<%- T_("Rarely. Only if I\'m in a pinch.") %>\' />\n                            <input type=\'radio\' name=\'hire_again\' value=\'3\' class="star" title=\'<%- T_("Sometimes. Provider was good but might like to try someone else next time.") %>\' />\n                            <input type=\'radio\' name=\'hire_again\' value=\'4\' class="star" title=\'<%- T_("Often! Will always think of this provider next time round.") %>\' />\n                            <input type=\'radio\' name=\'hire_again\' value=\'5\' class="star" title=\'<%- T_("Absolutely! Will be my first choice every time for this type of work.") %>\' />\n                            <div id=\'hire_again_txt_id\' style="margin-left:90px;"></div>\n                        </div>\n                    </td>\n                </tr>\n            </table>\n            </div>\n        </div>\n        <% if (window.isEmployer) { %>\n            <div class="" >\n                <div>\n                    <label for="" style=\'margin-top: 5px;\'>\n                        <span class="hint-star" style=\'font-size:13px\'></span>\n                        <p style=\'margin: 5px 0 -10px 2px;font-style:italic\'>\n                          <span style="font-style:normal"><strong> <%- T_("Did your Freelancer do a great job?") %></strong></span>\n                        </p>\n                        <p style=\'margin: 5px 0 -10px 2px;font-style:italic\'>\n                            <span style="font-style:normal">\n                                <%- T_("Help <[- data.freelancerPublicName || data.freelancerUsername]> win their next project by telling everyone a little bit about it. Longer reviews give other employers the confidence to hire good freelancers, like <[- data.freelancerPublicName || data.freelancerUsername]>, and helps to ensure that employers like you continue to receive nothing but the best quality of work.", {data: data}) %>\n                            </span>\n                        </p>\n                    </label>\n                </div>\n            </div>\n        <% } %>\n        <div class="" >\n            <label for="comment" style=\'margin-top: 5px;\'>\n                <span class="hint-star" style=\'font-size:13px\'></span>\n                <p style=\'margin: 5px 0 -10px 2px;font-style:italic\'>\n                    <span style="font-style:normal"><%- T_("Comment:") %></span>\n                    <% if (window.isEmployer) { %>\n                        <%- T_("(Maximum 1500 characters. This will be public)") %>\n                    <% } else { %>\n                        <%- T_("(Maximum 1000 characters. This will be public)") %>\n                    <% } %>\n                </p>\n            </label>\n            <% if (window.isEmployer) { %>\n                <textarea id=\'comment\' rows="4" name="descr" type="text" style="overflow: hidden; word-wrap: break-word; height: 18px;" class="multiple-row" maxlength="1500" id="new_message"></textarea>\n            <% } else { %>\n                <textarea id=\'comment\' rows="4" name="descr" type="text" style="overflow: hidden; word-wrap: break-word; height: 18px;" class="multiple-row" maxlength="1000" id="new_message"></textarea>\n            <% } %>\n        </div>\n        <span class="hint-comment"></span>\n        <% if(typeof data.currencyCode != \'undefined\' && typeof data.currencySign != \'undefined\' && typeof data.currencyId != \'undefined\') { %>\n        <div class="ns_tip" style=\'margin:10px 0 0 0\'>\n              <div class="alert" id="tipArea">\n                  <div class="ns_pad clickable" chkbx="chkbx_tip" id=\'tipcheck\' data-status = "">\n                    <input style=\'vertical-align: middle; margin:-2px 3px 0 7px;\' type="checkbox" id="chkbx_tip" name="chkbx_tip" class="ns_left">\n                    <span class="ns_left ns_margin"><%= T_("I would like to leave a <[- data.currencySign]></span>\n                    <input type=\'text\' style=\'display:inline\' id=\'tip-amount\' name=\'tip-amount\' class=\'form-inline span1\' value=\'<[- data.amount/10]>\'>\n                    <[- data.currencyCode]> <span class=\'ns_left\'> bonus for the freelancer.</span>", {data:data}) %>\n                    <span id="checkingSpinner">\n                        <span class="tipQuestion"></span>\n                        <img style=\'display:none\' src="/img/dashboard-loading.gif"></img>\n                          <img src="/img/coin-tip.png" class=\'goldImg\' style="height: 31px;float: right;"></img>\n                      </span>\n                      <div class="ns_clear"></div>\n                    <div class="tipmsg err-msg" style="font-size:13px; color:red; margin:0 24px 0 16px"></div>\n                </div>\n            </div>\n        </div>\n        <span class="hint-tip"></span>\n        <% } %>\n        <% if(typeof data.currencycode != \'undefined\' && typeof data.currencysign != \'undefined\' && typeof data.currencyid != \'undefined\') { %>\n        <div class="ns_tip" style=\'margin:10px 0 0 0\'>\n              <div class="alert" id="tipArea">\n                  <div class="ns_pad clickable" chkbx="chkbx_tip" id=\'tipcheck\' data-status = "">\n                    <input style=\'vertical-align: middle; margin:-2px 3px 0 7px;\' type="checkbox" id="chkbx_tip" name="chkbx_tip" class="ns_left">\n                    <span class="ns_left ns_margin"><%= T_("I would like to leave a <[- data.currencysign]></span>\n                    <input type=\'text\' style=\'display:inline\' id=\'tip-amount\' name=\'tip-amount\' class=\'form-inline span1\' value=\'<[- data.amount/10]>\'>\n                    <[- data.currencycode]> <span class=\'ns_left\'> bonus for the freelancer.</span>", {data:data}) %>\n                    <span id="checkingSpinner">\n                        <span class="tipQuestion" id="tipTip"></span>\n                        <img style=\'display:none\' src="/img/dashboard-loading.gif"></img>\n                          <img src="/img/coin-tip.png" class=\'goldImg\' style="height: 31px;float: right;"></img>\n                      </span>\n                      <div class="ns_clear"></div>\n                </div>\n            </div>\n        </div>\n        <span class="hint-tip"></span>\n        <% } %>\n\n\n        <div class="form-btn-wrapper">\n          <a id="submit" class="btn btn-info btn-mini"><%- T_("Rate")%></a>\n          <a id="cancel" class="btn btn-mini"><%- T_("Cancel")%></a>\n        </div>\n      </div>\n      </div>\n    </form>\n  </div>\n'}),jQuery(function(){var a=function(a){var b={className:'autosizejs',append:'',callback:!1},c='hidden',d='border-box',e='lineHeight',f='<textarea tabindex="-1" style="position:absolute; top:-9999px; left:-9999px;  right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',g=['fontFamily','fontSize','fontWeight','fontStyle','letterSpacing','textTransform','wordSpacing','textIndent'],h='oninput',i='onpropertychange',j=a(f)[0];j.setAttribute(h,'return'),a.isFunction(j[h])||i in j?(a(j).css(e,'99px'),a(j).css(e)==='99px'&&g.push(e),a.fn.autosize=function(e){return e=a.extend({},b,e||{}),this.each(function(){function b(){var a,b,d;o||(o=!0,l.value=j.value+e.append,l.style.overflowY=j.style.overflowY,d=parseInt(j.style.height,10),l.style.width=k.css('width'),l.scrollTop=0,l.scrollTop=9e4,a=l.scrollTop,b=c,a>n?(a=n,b='scroll'):a<m&&(a=m),a+=r,j.style.overflowY=b,d!==a&&(j.style.height=a+'px',t&&e.callback.call(j)),setTimeout(function(){o=!1},1))}var j=this,k=a(j),l,m=k.height(),n=parseInt(k.css('maxHeight'),10),o,p=g.length,q,r=0,s=j.value,t=a.isFunction(e.callback);if(k.css('box-sizing')===d||k.css('-moz-box-sizing')===d||k.css('-webkit-box-sizing')===d)r=k.outerHeight()-k.height();if(k.data('mirror')||k.data('ismirror'))return;l=a(f).data('ismirror',!0).addClass(e.className)[0],q=k.css('resize')==='none'?'none':'horizontal',k.data('mirror',a(l)).css({overflow:c,overflowY:c,wordWrap:'break-word',resize:q}),n=n&&n>0?n:9e4;while(p--)l.style[g[p]]=k.css(g[p]);a('body').append(l),i in j?h in j?j[h]=j.onkeyup=b:j[i]=b:(j[h]=b,j.value='',j.value=s),a(window).resize(b),k.bind('autosize',b),b()})}):a.fn.autosize=function(a){return this}};typeof define=='function'&&define.amd?define('jquery.autosize',['jquery-wrapper'],function(b){a(b)}):a(jQuery)}()),define('dashboard/lib/feedbackTip',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){a.fn.iniatialTipTooltip=function(){a(this).find('.star').rating();var b='<div class="tooltip" style="font-size:12px;!important"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>';a(this).find('.radio_option a').tooltip_legacy({delay:{show:15,hide:15},trigger:'hover',placement:'right',template:b});var c=T_('A bonus is a small amount you give to a freelancer as a token of your appreciation for the good work they have done on your project.')+T_(' You don\'t have to, but it\'s a nice way to say "Thank you for doing a good job".');a(this).find('#tipTip').popover_legacy({delay:{show:15,hide:15},trigger:'hover',placement:'right',title:T_('What is a bonus?'),content:c})}}),define('text!templates/dashboard/confirmation.htm',[],function(){return'<p id="confirmation-message"></p>\n\n<div class="form-btn-wrapper">\n  <a class="btn btn-info btn-mini submit"><%- T_("Confirm") %></a> <a class="btn btn-mini cancel"><%- T_("Cancel") %></a>\n  <span id="busy" style="display: none"> <img src="<%- cdn_url(\'/img/dashboard-loading.gif\') %>"/> </span>\n</div>\n\n<span class="error-msg" style="display: none"></span>\n'}),define('dashboard/views/confirmation',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/confirmation.htm'],function(a,b,c,d){var e=c.View.extend({compileTemplate:b.template(d),events:{'click .submit':'submit','click .cancel':'hide'},collection:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'show','hide','submit','toggle','render','setMessage','showButtons','hideButtons','showBusy','hideBusy','setConfirmButtonText','setTryAgainButton')},show:function(){return a(this.el).show(),this.trigger('expand'),this},submit:function(){this.trigger('submitted')},hide:function(b){return a(this.el).hide(),this.trigger('collapse'),a(this.el).parent().find('.nav-tabs .active').removeClass('active'),this},toggle:function(){return a(this.el).is(':visible')?this.hide():this.show(),this},isVisible:function(){return a(this.el).is(':visible')},render:function(b){var c=this.model.toJSON();return a(this.el).html(this.compileTemplate(c)),a(this.el).addClass('well'),this.setMessage(b),this},setMessage:function(b){a(this.el).find('#confirmation-message').html(b)},setConfirmButtonText:function(b){a(this.el).find('.submit').text(b)},setTryAgainButton:function(){this.setConfirmButtonText(T_('Try again'))},showButtons:function(){a(this.el).find('.form-btn-wrapper').show()},hideButtons:function(){a(this.el).find('.form-btn-wrapper').hide()},showBusy:function(){a(this.el).find('#busy').show()},hideBusy:function(){a(this.el).find('#busy').hide()},displayErrorMessage:function(b){a(this.el).find('.error-msg').html(b).show()},hideErrorMessage:function(){a(this.el).find('.error-msg').hide()}});return e}),define('text!templates/dashboard/milestone.new.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2> <%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> created a milestone payment of <strong><[= data.currencysign ]><[- data.amount ]>&nbsp;<[- data.currencycode]></strong> for <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.title ]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-info">\n  <strong><%- T_("Milestone details:") %> </strong><%- data.shortDescr %>\n</div>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && state == \'accept\') { %>\n      <li class="first">\n        <a href=\'<%- data.linkUrl %>#milestones_<%- data.bidId %>\' class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Release Requested") %></a>\n      </li>\n      <%}%>\n      <% if ( typeof state !== \'undefined\' && state == \'released\') { %>\n      <li class="first">\n        <a href=\'<%- data.linkUrl %>#milestones_<%- data.bidId %>\' class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Released") %></a>\n      </li>\n      <%}%>\n      <% if ( typeof state !== \'undefined\' && state == \'partialReleased\') { %>\n      <li class="first">\n        <a href=\'<%- data.linkUrl %>#milestones_<%- data.bidId %>\' class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Partially Released") %></a>\n      </li>\n      <%}%>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n      <%\n      if(typeof state === \'undefined\' || state == "" ) {%>\n      <a id=\'requestToReleaseBtn\' > <i class="icon-share-alt"></i>&nbsp;<%- T_("Request to Release") %></a>\n      <% } %>\n    </li>\n  </ul>\n</div>\n\n<div class="tab-content">\n  <div class="tab-pane active">\n  </div>\n</div>\n'}),define('text!templates/dashboard/milestone.requested.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> requested a milestone payment of <strong><[= data.currencySign ]><[- data.amount ]> <[- data.currencyCode ]></strong> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-info">\n<strong><%- T_("Milestone details: ") %> </strong><%- message %>\n</div>\n\n<!-- action history-->\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\') { %>\n      <li class="first">\n        <a href="/projects/<%- data.seoUrl %>.html#milestones_<%- data.bidId %>" class="action-state"> <i class="icon-ok"></i>&nbsp;<% if (state == \'accept\') {%><%- T_("Milestone Created") %>\n        <%} else if (state == \'reject\') {%><%- T_("Request Rejected") %><%}%> </a>\n      </li>\n      <%}%>\n    </ul>\n  </div>\n</div>\n\n<% if(typeof state === \'undefined\' || state == "") {%>\n<div class="actions">\n  <div class="well">\n    <div id = "rejectForm">\n      <p>\n        <%- T_("Do you want to create a milestone payment of") %> <strong><%= data.currencySign %><%- data.amount %> <%- data.currencyCode %></strong>?\n      </p>\n      <div class = "form-btn-wrapper">\n        <a class="btn btn-info btn-mini" id="create" title="Confirm"><%- T_("Confirm") %></a>\n        <a class="margin-l10" id="reject" title="Reject"><%- T_("Reject") %></a>\n      </div>\n    </div>\n    <form id = "rejectBox" style="display: none;">\n\n      <h3><%- T_("Are you sure you wish to reject the Milestone Request?") %></h3>\n      <label for="request-reject-reason"></label>\n      <textarea cols="50" name="request-reject-reason" class="milestone-request-message ns_half span7" placeholder="<%- T_("Send Personal Message (Optional)")%>"></textarea>\n      <a class="btn btn-info btn-mini" id="btn-reject-milestone-request"><%- T_("Reject Milestone") %></a>\n      <a class="btn-mini" id ="btn-cancel-request-rejection"><%- T_("Cancel") %></a>\n      <br>\n    </form>\n    <span class = "hint"></span>\n  </div>\n</div>\n<%}%>\n'}),define('text!templates/payments/payments-source.htm',[],function(){return'<p class="payment-from">\n    <div class="need-deposit payment-from-option" style="display:none">\n        <%- T_("You will be directed to the deposit page to make this payment.") %>\n    </div>\n    <div class="may-need-deposit payment-from-option" style="display:none">\n        <%- T_("This will be debited from your available account balances, then if required, you will be directed to the deposit page to make this payment:") %>\n    </div>\n    <div class=\'only-balance payment-from-option\' style="display:none">\n        <%- T_("This will be debited from your available account balances:") %>\n    </div>\n    <% if (templateData.firstAvailablePaymentMethod) { %>\n        <div class="only-vpm payment-from-option" style="display:none">\n            <% if (templateData.verifiedPaymentSourceCount == 1) { %>\n                <%- T_("This will be debited from your verified payment method.") %>\n            <% } else { %>\n                <%- T_("This will be debited from your verified payment methods.") %>\n            <% } %>\n            <% if (templateData.showWireTransferLink) { %>\n                <%= T_(" If you prefer to pay by wire deposit, please click <a class=\'handover-wire-transfer-link\'>here</a>") %>\n            <% } %>\n        </div>\n        <div class="mixed-balance-vpm payment-from-option" style="display:none">\n            <% if (templateData.verifiedPaymentSourceCount == 1) { %>\n                <%- T_("This will be debited from your available balances, then if required we will attempt to process this payment from your verified payment method:") %>\n            <% } else { %>\n                <%- T_("This will be debited from your available balances, then if required we will attempt to process this payment from your verified payment methods:") %>\n            <% } %>\n        </div>\n    <% } %>\n    <p class="account-balances margin-t10" style="display:none">\n        <strong><%- T_("Account Balance:") %></strong>\n        <% if (templateData.balances) { %>\n            <% for (var i = 0; i < templateData.balances.length; i++) { %>\n                <%- templateData.balances[i].currency.sign %><%- templateData.balances[i].balance.toFixed(2) %> <%- templateData.balances[i].currency.code %><%- (i == templateData.balances.length - 1) ? \'\' : \',\' %>\n            <% } %>\n        <% } %>\n    </p>\n</p>\n<% if (templateData.firstAvailablePaymentMethod) { %>\n    <div class="payment-logos-container" style="display:none">\n        <h6>\n            <%- T_("Verified payment method:") %>\n        </h6>\n        <div class="payment-method-info margin-0 inline-block pull-right">\n            <span class="showing-method-account-details gatewayPP" <% if (templateData.firstAvailablePaymentMethod != \'gatewayPP\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.ppEmail) { %>\n                    <%- templateData.paymentMethods.ppEmail %>\n                <% }%>\n            </span>\n            <span class="showing-method-account-details gatewayWP" <% if (templateData.firstAvailablePaymentMethod != \'gatewayWP\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.wpRecurring.length == 1) { %>\n                    <span class="margin-l20"><%- templateData.paymentMethods.wpRecurring[0][\'cc_number\'] %></span>\n                <% } else { %>\n                    <span class="payment-source-tooltip gatewayWP margin-l20"><%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.wpRecurring.length}) %></span>\n                <% } %>\n            </span>\n            <span class="showing-method-account-details gatewayNAB" <% if (templateData.firstAvailablePaymentMethod != \'gatewayNAB\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.nabRecurring.length == 1) { %>\n                    <span class="margin-l20"><%- templateData.paymentMethods.nabRecurring[0][\'cc_number\'] %></span>\n                <% } else { %>\n                    <span class="payment-source-tooltip gatewayNAB margin-l20"><%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.nabRecurring.length}) %></span>\n                <% } %>\n            </span>\n            <span class="showing-method-account-details gatewayAdyen" <% if (templateData.firstAvailablePaymentMethod != \'gatewayAdyen\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.adyenRecurring.length == 1) { %>\n                    <span class="margin-l20"><%- templateData.paymentMethods.adyenRecurring[0][\'cc_number\'] %></span>\n                <% } else { %>\n                    <span class="payment-source-tooltip gatewayAdyen margin-l20"><%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.adyenRecurring.length}) %></span>\n                <% } %>\n            </span>\n            <div class="payment-method-selector">\n                <% if (templateData.verifiedPaymentSourceCount > 1) { %>\n                    <a href="#" onclick="return false" class="right margin-l10 open-change-preferred-method">\n                        <%- T_("Edit preference") %>\n                    </a>\n                    <a href="#" onclick="return false" class="right margin-l10 close-change-preferred-method" style="display:none">\n                        <%- T_("Cancel") %>\n                    </a>\n                    <span class="is-preferred-separator right" <% if (templateData.preferredPaymentMethod != templateData.firstAvailablePaymentMethod) { %> style="display:none" <% } %>> | </span>\n                <% } %>\n                <span class="text-green is-preferred margin-r10 right" <% if (templateData.preferredPaymentMethod != templateData.firstAvailablePaymentMethod) { %> style="display:none" <% } %>><%- T_("Preferred") %></span>\n            </div>\n            <span class="showing-method-account-details gatewayGC" <% if (templateData.firstAvailablePaymentMethod != \'gatewayGC\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.gcRecurring.length == 1) { %>\n                    <span class="margin-l20"><%- templateData.paymentMethods.gcRecurring[0][\'cc_number\'] %></span>\n                <% } else { %>\n                    <span class="payment-source-tooltip gatewayGC margin-l20"><%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.gcRecurring.length}) %></span>\n                <% } %>\n            </span>\n            <span class="showing-method-account-details gatewayMB" <% if (templateData.firstAvailablePaymentMethod != \'gatewayMB\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.skrillPaymentVerified.length == 1) { %>\n                    <%- T_("Order ID ") %> <%- templateData.paymentMethods.skrillPaymentVerified[0].onetap_invoice_id %>\n                <% } else { %>\n                    <span class="payment-source-tooltip gatewayMB"><%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.skrillPaymentVerified.length}) %></span>\n                <% } %>\n            </span>\n            <div class="clear"></div>\n            <select class="default-select change-preferred-method" style="display:none">\n                <option value="" selected="selected"><%- T_("Select your preferred payment method") %></option>\n                <% if (templateData.paymentMethods.ppEmail) { %>\n                    <option value="gatewayPP"><%- T_("PayPal:") %> (<%- templateData.paymentMethods.ppEmail %>)</option>\n                <% } %>\n                <% if (templateData.paymentMethods.gcRecurring) { %>\n                    <option value="gatewayGC"><%- T_("Credit Card:") %>\n                        <% if (templateData.paymentMethods.gcRecurring.length == 1) { %>\n                            (<%- templateData.paymentMethods.gcRecurring[0][\'cc_number\'] %>)\n                        <% } else { %>\n                            (<%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.gcRecurring.length}) %>)\n                        <% } %>\n                    </option>\n                <% } %>\n                <% if (templateData.paymentMethods.wpRecurring) { %>\n                    <option value="gatewayWP"><%- T_("Credit Card:") %>\n                    <% if (templateData.paymentMethods.wpRecurring.length == 1) { %>\n                        (<%- templateData.paymentMethods.wpRecurring[0][\'cc_number\'] %>)\n                    <% } else { %>\n                        (<%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.wpRecurring.length}) %>)\n                    <% } %>\n                    </option>\n                <% } %>\n                <% if (templateData.paymentMethods.skrillPaymentVerified) { %>\n                    <option value="gatewayMB"><%- T_("Skrill:") %>\n                    <% if (templateData.paymentMethods.skrillPaymentVerified.length == 1) { %>\n                        (<%- T_("Order ID:") %> <%- templateData.paymentMethods.skrillPaymentVerified[0].onetap_invoice_id %>)\n                    <% } else { %>\n                        (<%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.skrillPaymentVerified.length}) %>)\n                    <% } %>\n                    </option>\n                <% } %>\n            </select>\n        </div>\n        <img src="<%= cdn_url(\'/img/ajax-loader.gif\') %>" class="loading-img-change-preferred-method margin-r20" style="display:none" />\n        <div class="payment-logo-container paypal gatewayPP" <% if (templateData.firstAvailablePaymentMethod != \'gatewayPP\') { %> style="display:none" <% } %>>\n            <div class="payment-logo payment-logo-paypal inline-block" >&nbsp;</div>\n            <div class="clear"></div>\n        </div>\n        <div class="payment-logo-container cc gatewayGC gatewayWP gatewayNAB gatewayAdyen" <% if (templateData.firstAvailablePaymentMethod != \'gatewayGC\' && templateData.firstAvailablePaymentMethod != \'gatewayWP\' && templateData.firstAvailablePaymentMethod != \'gatewayNAB\' && templateData.firstAvailablePaymentMethod != \'gatewayAdyen\') { %> style="display:none" <% } %>>\n            <div class="payment-logo payment-logo-cc2 inline-block">&nbsp;</div>\n            <div class="clear"></div>\n        </div>\n        <div class="payment-logo-container skrill gatewayMB" <% if (templateData.firstAvailablePaymentMethod != \'gatewayMB\') { %> style="display:none" <% } %>>\n            <div class="payment-logo payment-logo-skrill inline-block">&nbsp;</div>\n        </div>\n        <div class="payments-source-generic-error margin-t10 alert alert-error" style="display:none"></div>\n    </div>\n<% } %>\n'});var loadModule=function(a,b){function c(b,c,m){a.extend(p,m);if(typeof b!='object')return;n=b;if(typeof c=='undefined')return;o=c;if(!g())return;o.html('<img src="'+cdn_url('/img/ajax-loader.gif?v=62d3d0c60d4c33ef23dcefb9bc63e3a2&amp;m=6')+'" class="loading-payment-source-module margin-center block" />'),a.ajax({type:'post',data:{currency:n.currencyDetails.id},url:'/ajax/payment/getUserPaymentMethodInfo.php',dataType:'json',success:function(a){if(a.status=='success'){n.balances=a.balances,n.paymentMethods=a.paymentMethods,n.firstAvailablePaymentMethod=a.firstAvailablePaymentMethod,n.preferredPaymentMethod=a.preferredPaymentMethod;for(var b=0;b<n.balances.length;b++)if(parseFloat(n.balances[b].balance)>0){n.totalBalanceIsEmpty=!1;break}p.disableCC&&d(),p.disableBalance&&e(),p.showWireTransferLink&&f(),k(),l(),h(),j(),i(n.amount)}},complete:function(){o.find('.loading-payment-source-module').remove();if(typeof examId=='undefined'||!examId)return;var a;if(n.primaryBalanceForPayment&&n.amount<=n.primaryBalanceForPayment.balance)a='Balance';else switch(n.firstAvailablePaymentMethod){case'gatewayGC':case'gatewayWP':a='CC';break;case'gatewayMB':a='MB';break;case'gatewayPP':a='PP';break;default:a='None'}a+='-Open',_t.push(['user_action',{section:'ExamBuy',sub_section:examId,label:a}])}})}function d(){n.hasVerifiedCreditCard=n.paymentMethods.gcRecurring||n.paymentMethods.wpRecurring,n.removedCC=!0,n.paymentMethods.gcRecurring=!1,n.paymentMethods.wpRecurring=!1,n.preferredPaymentMethod='gatewayPP',n.firstAvailablePaymentMethod='gatewayPP'}function e(){n.balances=[],n.totalBalanceIsEmpty=!0}function f(){n.showWireTransferLink=!0}function g(){return typeof n.amount=='undefined'||isNaN(n.amount)||!n.amount||typeof n.currencyDetails=='undefined'?!1:(n.amount=parseFloat(n.amount),n.primaryBalanceForPayment=!1,n.totalBalanceIsEmpty=!0,n.verifiedPaymentSourceCount=0,!0)}function h(){typeof b=='undefined'&&(b=a('#payment-source-template').html()),o.html(_.template(b,{templateData:n}))}function i(a){o.find('.payment-from-option, .account-balances, .payment-logos-container').hide();if(isNaN(a)||!a)return;a=parseFloat(a),n.totalBalanceIsEmpty?n.firstAvailablePaymentMethod?o.find('.only-vpm, .payment-logos-container').show():(m(),o.find('.need-deposit').show()):n.primaryBalanceForPayment&&a<=n.primaryBalanceForPayment.balance?o.find('.only-balance, .account-balances').show():n.firstAvailablePaymentMethod?o.find('.mixed-balance-vpm, .account-balances, .payment-logos-container').show():n.balances.length==1&&n.balances[0].currency.id==n.currencyDetails.id?(m(),o.find('.need-deposit').show()):o.find('.may-need-deposit, .account-balances').show()}function j(){a(document).ready(function(){o.off('change','.change-preferred-method').on('change','.change-preferred-method',function(){var b=a(this),c=b.val();if(!c)return;var d=o.find('.payment-logo-container:visible, .showing-method-account-details:visible');a.ajax({url:'/ajax/user/setUserPreferedPayment.php',dataType:'json',type:'post',data:{method:c},beforeSend:function(){b.hide(),o.find('.payment-logo-container, .close-change-preferred-method, .showing-method-account-details').hide(),o.find('.loading-img-change-preferred-method, .open-change-preferred-method').show(),o.find('.payments-source-generic-error').html('').hide(),o.closest('.modal').find('.btn').attr('disabled',!0)},success:function(a){a.result=='success'?(o.find('.is-preferred, .is-preferred-separator, .payment-logo-container.'+c+', .showing-method-account-details.'+c).show(),n.preferredPaymentMethod=c):(o.find('.payments-source-generic-error').html(T_('Failed to save your preferred payment method. Please try again.')).show(),d.show())},error:function(){o.find('.payments-source-generic-error').html(T_('Server Error')).show(),d.show()},complete:function(){o.find('.loading-img-change-preferred-method').hide(),setTimeout(function(){o.closest('.modal').find('.btn').removeAttr('disabled')},1200)}})}),o.off('click','.open-change-preferred-method').on('click','.open-change-preferred-method',function(){a(this).hide(),o.find('.is-preferred').hide(),o.find('.change-preferred-method, .close-change-preferred-method').show()}),o.off('click','.close-change-preferred-method').on('click','.close-change-preferred-method',function(){a(this).hide(),o.find('.change-preferred-method').hide(),n.preferredPaymentMethod&&o.find('.is-preferred').show(),o.find('.open-change-preferred-method').show()}),o.find('.payment-source-tooltip.gatewayGC').popover_legacy({content:function(){var a=[];if(n.paymentMethods.gcRecurring)for(var b=0;b<n.paymentMethods.gcRecurring.length;b++)a.push(n.paymentMethods.gcRecurring[b].cc_number);return a.join('<br>')},title:'Credit cards',placement:'top',html:!0,trigger:'hover'}),o.find('.payment-source-tooltip.gatewayWP').popover_legacy({content:function(){var a=[];if(n.paymentMethods.wpRecurring)for(var b=0;b<n.paymentMethods.wpRecurring.length;b++)a.push(n.paymentMethods.wpRecurring[b].cc_number);return a.join('<br>')},title:T_('Credit cards'),placement:'top',html:!0,trigger:'hover'}),o.find('.payment-source-tooltip.gatewayMB').popover_legacy({content:function(){var a=[];if(n.paymentMethods.skrillPaymentVerified)for(var b=0;b<n.paymentMethods.skrillPaymentVerified.length;b++)a.push(n.paymentMethods.skrillPaymentVerified[b].onetap_invoice_id);return a.join('<br>')},placement:'top',html:!0,trigger:'hover'})})}function k(){for(var a=0;a<n.balances.length;)n.balances[a].balance=parseFloat(n.balances[a].balance),n.balances[a].balance==0?n.balances.splice(a,1):n.balances[a].currency.id==n.currencyDetails.id?(n.primaryBalanceForPayment=n.balances[a],n.balances.splice(a,1)):a++;n.primaryBalanceForPayment&&n.balances.unshift(n.primaryBalanceForPayment)}function l(){n.firstAvailablePaymentMethod&&(n.paymentMethods.ppEmail&&n.verifiedPaymentSourceCount++,n.paymentMethods.gcRecurring&&n.verifiedPaymentSourceCount++,n.paymentMethods.wpRecurring&&n.verifiedPaymentSourceCount++,n.paymentMethods.skrillPaymentVerified&&n.verifiedPaymentSourceCount++)}function m(){typeof n.needDepositCustomTitle!='undefined'&&o.closest('.modal').find('.modal-header h3').html(n.needDepositCustomTitle),typeof n.needDepositCustomBody!='undefined'&&o.find('.need-deposit').html(n.needDepositCustomBody),typeof n.needDepositAmountDiv!='undefined'&&!n.needDepositAmountDiv&&(o.find('.payment-from').hide(),o.closest('.modal-body').find('p:first').hide()),typeof n.needDepositConfirmText!='undefined'&&o.closest('.modal').find('.modal-footer .modal-btn-confirm-payment').html(n.needDepositConfirmText),typeof n.needDepositCancelText!='undefined'&&o.closest('.modal').find('.modal-footer .modal-btn-cancel-payment').html(n.needDepositCancelText)}var n=!1,o=!1,p={disableCC:!1,disableBalance:!1,showWireTransferLink:!1};return{init:c,checkPaymentSource:i}};if(typeof define=='function'&&define.amd)define('payments/module-payments-source',['jquery-wrapper','text!templates/payments/payments-source.htm'],loadModule);else var initPaymentsSourceModuleOnNonBSPage=loadModule(jq).initForm;var __awaiter=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(b){f(b)}}function h(a){try{i(d['throw'](a))}catch(b){f(b)}}function i(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},__generator=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(f)throw new TypeError('Generator is already executing.');while(e)try{if(f=1,g&&(h=g[c[0]&2?'return':c[0]?'throw':'next'])&&!(h=h.call(g,c[1])).done)return h;if(g=0,h)c=[0,h.value];switch(c[0]){case 0:case 1:h=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,g=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(!(h=e.trys,h=h.length>0&&h[h.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!h||c[1]>h[0]&&c[1]<h[3])){e.label=c[1];break}if(c[0]===6&&e.label<h[1]){e.label=h[1],h=c;break}if(h&&e.label<h[2]){e.label=h[2],e.ops.push(c);break}h[2]&&e.ops.pop(),e.trys.pop();continue}c=b.call(a,e)}catch(d){c=[6,d],g=0}finally{f=h=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h;return{next:c(0),'throw':c(1),'return':c(2)}},Billing=function(){function a(a,b,c,d){var e=this;this.origin=a,this.url=c,this.fields=d,b.addEventListener('message',function(b){b.origin===a&&e.callback&&e.callback(b.data)});var f=['cvv','name','expiry'];d.pan.addEventListener('load',function(){try{if(d.pan.contentWindow.location.origin&&d.pan.contentWindow.location.origin!==a)return}catch(b){}d.pan.contentWindow.postMessage('pan',a);for(var c=0,e=f;c<e.length;c++){var g=e[c];d[g].contentWindow.postMessage('clear',a)}});var g=function(b){d[b].addEventListener('load',function(){d[b].contentWindow.postMessage(b,a)})};for(var h=0,i=f;h<i.length;h++){var j=i[h];g(j)}}return a.prototype.setCallback=function(a){this.callback=a},a.prototype.reload=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(b){switch(b.label){case 0:return a=this.fields.pan,[4,this.url()];case 1:return a.src=b.sent(),[2]}})})},a.prototype.submit=function(a,b,c){this.fields.pan.contentWindow.postMessage({amount:a,currencyCode:b,meta:c},this.origin)},a.prototype.style=function(a){for(var b in a)a.hasOwnProperty(b)&&this.fields[b].contentWindow.postMessage(a,this.origin)},a}();define('payments/billing',function(){}),define('text!templates/payments/fixed-amount-payment-modal.htm',[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">&times;</a>\n    <h3><%- customizedModal.title %></h3>\n</div>\n<div class="modal-body">\n\n    <% if (customizedModal.description != \'\') { %>\n        <p class="margin-b20">\n            <%= customizedModal.description %>\n        </p>\n    <% } %>\n\n    <% if (!customizedModal.showDescriptionOnly) { %>\n        <p class="margin-b20">\n            <strong><%- T_("Amount to be paid:") %></strong> <%- templateData.currencyDetails.sign %><%- templateData.amount.toFixed(2) %> <%- templateData.currencyDetails.code %>\n            <span class=\'muted\'> <%- customizedModal.chargeDetail %> </span>\n        </p>\n        <div class="payment-sources-container">\n        </div>\n    <% } %>\n    <% if (typeof customizedModal.additionalDetails != \'undefined\') { %>\n        <p class="margin-b20 margin-t10">\n            <%= customizedModal.additionalDetails %>\n        </p>\n    <% } %>\n\n    <div class="alert alert-error modal-milestone-generic-error regular" style="display:none"></div>\n\n</div>\n<div class="modal-footer">\n    <% if (customizedConfirm.show) { %>\n        <button type="button" class="btn btn-info btn-small modal-btn-confirm-payment"><%- customizedConfirm.buttonText %></button>\n    <% } %>\n    <img src="<%= cdn_url(\'/img/ajax-loader.gif\') %>" class="loading-img margin-r20" style="display:none"/>\n    <% if (customizedCancel.show) { %>\n        <button type="button" class="btn btn-small modal-btn-cancel-payment"><%- customizedCancel.buttonText %></button>\n    <% } %>\n</div>\n'}),define('text!templates/payments/new-fixed-amount-payment-modal.htm',[],function(){return'<div class="responsive-modal" id="expanded-payment-modal">\n    <div class="modal ModalPayment" aria-label="<%- T_("Close") %>" data-backdrop="true">\n        <div class="modal-header ModalPayment-header">\n            <button id="paymentModalCloseButton" type="button" class="payment-modal-close close" data-dismiss="modal" aria-label="<%- T_("Close") %>">\n                <span class="Icon Icon--small">\n                    <%= loadSvg(\'ui-close-alt\') %>\n                </span>\n            </button>\n        </div>\n        <div class="modal-body">\n            <div class="ModalPayment-body">\n                <figure class="ModalPayment-figure">\n                    <img class="ModalPayment-image" src="<%= cdn_url(\'/static/img/secure-payment.png\') %>" alt="<%- T_("Secure Payment") %>" />\n                </figure>\n                <div class="ModalPayment-heading"><%- heading %></div>\n                <% if (headingSubtext) { %>\n                    <div class="ModalPayment-headingSubtext"><%- headingSubtext %></div>\n                <% } %>\n                <% if (subHeading) { %>\n                    <div class="ModalPayment-subHeading"><%- subHeading %></div>\n                <% } %>\n                <% if (showCharges) { %>\n                    <% for (i = 0; i < chargeDetails.length; i++) { %>\n                        <% if (parseFloat(chargeDetails[i].amount) > 0) { %>\n                            <div class="ModalPayment-paymentDetails">\n                                <div class="ModalPayment-label">\n                                    <%= chargeDetails[i].label %>\n                                </div>\n                                <div class="ModalPayment-price">\n                                    <span class="ModalPayment-totalCost-price">\n                                        <% if (chargeDetails[i].paid) { %>\n                                            <span class="ModalPayment-totalCost-price-paid">\n                                                <%- T_("PAID") %>\n                                            </span>\n                                        <% } else { %>\n                                            <%- currency.sign %><%- chargeDetails[i].amount.toFixed(2) %>\n                                        <% } %>\n                                    </span>\n                                </div>\n                            </div>\n                        <% } %>\n                    <% } %>\n                    <div class="ModalPayment-totalCost">\n                        <span class="ModalPayment-totalCost-label"><%- T_("Total: ") %></span>\n                        <span class="ModalPayment-totalCost-price">\n                            <%- currency.sign %><%- chargeTotal.toFixed(2) %> <%- currency.code %>\n                        </span>\n                        <% if (includesGST) { %>\n                            <div class="ModalPayment-totalCost-detail"><%- T_("including GST") %></div>\n                        <% } %>\n                    </div>\n                <% } %>\n                <% if (text) { %>\n                    <p class="ModalPayment-descriptionText"><%= text %></p>\n                <% } %>\n            </div>\n            <div class="ModalPayment-footer\n                <% if (!footerText) { %>\n                    ModalPayment-footer-noText\n                <% } %>\n            ">\n                <% if (footerText) { %>\n                    <p><%- footerText %></p>\n                <% } %>\n                <button id="paymentModalConfirmButton" class="btn btn-large btn-success ModalPayment-footer-btn"><%- buttonLabel %></button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define('text!templates/payments/deposit-modal.htm',[],function(){return'<div class="responsive-modal FIN-1031" id="expanded-payment-modal">\n    <div class="modal ModalPayment FIN-1031" aria-label="<%- T_("Close") %>" data-backdrop="true">\n        <button id="depositModalCloseButton" type="button" class="payment-modal-close close ModalPayment-close" data-dismiss="modal" aria-label="<%- T_("Close") %>">\n            <div class="Icon Icon--large">\n                <%= loadSvg(\'ui-close-alt\') %>\n            </div>\n        </button>\n        <div class="modal-header ModalPayment-header Container">\n            <h2 class="ModalPayment-heading"><%- heading %></h2>\n        </div>\n        <div class="modal-body Container">\n            <div class="Grid Grid-col">\n                <div class="Grid-col Grid-col--12">\n                    <div>\n                        <div class="span12 gc-processing-hide">\n                            <div class="alert alert-info">\n                                <p>\n                                    <strong><%- T_("Please deposit funds.") %></strong>\n                                    <%- T_("Deposit") %> <%- currency.sign %><%- (chargeTotal-availableAmount).toFixed(2) %> <%- currency.code %> <%- T_("to post your project with the selected upgrades and receive bids right away!") %>\n                                    <div class="noUpgradeSection">\n                                        <p class="alert-cancel-link">\n                                            <a id="noUpgrade" href="/buyers/draft.php?action=noUpgrade&id=<%- projectId %>"><%- T_("Post my project without upgrades") %>.</a>\n                                        </p>\n                                    </div>\n                                </p>\n                            </div>\n                        </div>\n                        <div class="alert-success alert deposit-alert">\n                            <button type="button" id="alertClose" class="close">x</button>\n                            <div class="alertHeader">\n                                <strong>\n                                    <div class="alertSuccess alertBody" data-uitest-target="deposit-success-notification"><%- T_("Deposit Success") %></div>\n                                    <div class="alertError alertBody" data-uitest-target="deposit-error"><%- T_("Deposit Failed") %></div>\n                                    <div class="alertCartError alertBody" data-uitest-target="deposit-error"><%- T_("Item paid for already") %></div>\n                                    <div class="alertApiError alertBody" data-uitest-target="deposit-error"><%- T_("Deposit Failed") %></div>\n                                    <div class="alertPreDepositError alertBody" data-uitest-target="deposit-error"><%- T_("Error") %></div>\n                                    <div class="alertGenericError alertBody" data-uitest-target="deposit-error"><%- T_("Something has gone wrong") %></div>\n                                    <div class="alertAuthError alertBody" data-uitest-target="deposit-error"><%- T_("Authentication Error") %></div>\n                                    <div class="alertBinError alertBody" data-uitest-target="deposit-error"><%- T_("Error") %></div>\n                                </strong>\n                            </div>\n                            <div class="alertSuccess alertBody" data-uitest-target="deposit-success-message">\n                                <span><%- T_("Thank you! Your account has been credited") %> </span>\n                                <span><%- currency.sign %><%- (chargeTotal-availableAmount).toFixed(2) %></span>\n                                <span><%- currency.code %>.</span>\n                            </div>\n                            <div class="alertError alertBody">\n                                <span><%- T_("Your payment has been rejected by your bank. Please ensure your payment details are entered correctly and that\n                                 your card is authorized for online purchasing. Alternatively, you can try a different card or one of our other payment\n                                  methods. Please do not hesitate to contact our ") %><a href="/support?show_ticket_modal=true" target="_blank">\n                                Freelancer.com support</a> <%- T_("if you need help.") %></span>\n                            </div>\n                            <div class="alertApiError alertBody">\n                                <%- T_("There was an error processing your payment.") %><br>\n                                <%- T_("Error message:") %> <span id="apiHumanMsg"></span><br>\n                                <%- T_("Error code:") %> <span id="apiErrorCode"></span><br>\n                                <%- T_("Event ID:") %> <span id="apiEventId"></span><br>\n                            </div>\n                            <div class="alertPreDepositError alertBody">\n                                <span>\n                                    <%- T_("There is an error loading the deposit form. Please refresh the page to try again.\n                                    If the problem persists, please contact") %>\n                                    <a href="javascript: void(0)" fl-analytics="DepositFailedSupportChat"\n                                    onclick="javascript: window.open(\'/users/helpdesk.php?redirect=live_chat&issue=DepositFailed\',\n                                    \'livechatwin\', \'toolbar=0,location=0,directories=0,status=1,menubar=0,scrollbars=0,resizable=1,width=600,height=680\');">\n                                    Freelancer.com support</a>.\n                                </span>\n                            </div>\n                            <div class="alertBinError alertBody">\n                                <span>\n                                    <span id="binHumanMsg"></span><br>\n                                    <%- T_("Error code:") %> <span id="binErrorCode"></span><br>\n                                    <%- T_("Event ID:") %> <span id="binEventId"></span><br></span>\n                            </div>\n                            <div class="alertGenericError alertBody">\n                                <span>\n                                    <%- T_("We cannot process any deposit requests at this stage. Please try again later.") %><br>\n                                    <%- T_("If the problem persists, please contact") %>\n                                    <a href="javascript: void(0)" fl-analytics="DepositFailedSupportChat"\n                                    onclick="javascript: window.open(\'/users/helpdesk.php?redirect=live_chat&issue=DepositFailed\',\n                                    \'livechatwin\', \'toolbar=0,location=0,directories=0,status=1,menubar=0,scrollbars=0,resizable=1,width=600,height=680\');">\n                                    Freelancer.com support</a>.\n                                </span>\n                            </div>\n                            <div class="alertAuthError alertBody">\n                              <span>\n                                There was an issue processing your deposit request.<br><br>\n                                This may be due to your browser blocking third party cookies, which can be fixed by enabling them for your browser, or adding www.{[{NewDeposit.alerts.message.domain}]} as an exception.<br>\n                                Please refer to the following support articles for more detailed instructions:<br><br>\n                                Google Chrome: <a href="https://support.google.com/chrome/answer/95647?co=GENIE.Platform%3DDesktop&hl=en" target="_blank">Google support article</a><br>\n                                Mozilla Firefox: <a href="https://support.mozilla.org/t5/Cookies-and-cache/Enable-and-disable-cookies-that-websites-use-to-track-your/ta-p/2784" target="_blank">Mozilla support article</a><br>\n                                Internet Explorer: <a href="https://support.microsoft.com/en-au/help/17442/windows-internet-explorer-delete-manage-cookies" target="_blank">Microsoft support article</a><br><br>\n\n                                Once you have completed this step, please refresh this page and try again.\n                                Alternatively, you can try a different payment method.<br>\n                                If the problem persists, please contact support@freelancer.com for further help.\n                              </span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="Grid-col Grid-col--7">\n                    <div class="PaymentMethod is-groupActive">\n                        <form class="methodsForm">\n                            <div class="PaymentMethod-item is-active" id="ccLabel">\n                                <input type="radio" class="PaymentMethod-radio" id="ccRadio" name="deposit-method" checked="checked">\n                                <label class="PaymentMethod-label PaymentMethod-label--fln_billing" for="ccRadio">\n                                    <%- creditCardLabel %>\n                                    <span class="PaymentMethod-note"><%- creditCardNote %></span>\n                                </label>\n                                <div class="tab-pane" id="ccItem">\n                                    <section class="PaymentMethod-content-inner">\n                                        <div class="fl-form PaymentMethod-form">\n                                            <div class="PaymentMethod-form-group">\n                                                <div class="PaymentMethod-form-column form-step"\n                                                    ng-class="{\'is-warning\' : NewCcDeposit.DepositService.deposit.data.pan.valid === false,\n                                                    \'is-valid\': NewCcDeposit.DepositService.deposit.data.pan.valid === true}">\n                                                    <label for="iframe-payment-method-pan" class="PaymentMethod-form-label"><%- cardNumber %></label>\n                                                    <div class="PaymentMethod-form-inputContainer">\n                                                        <div class="PaymentMethod-form-input large-input">\n                                                            <iframe fl-analytics="PanField" id="iframe-payment-method-pan"\n                                                                    class="PaymentMethod-form-iframe iframe-payment-method-cc" src="<%- customizedModal.depositUrl %>"\n                                                                    sandbox="allow-forms allow-scripts allow-same-origin"\n                                                                    data-uitest-target="credit-card-iframe"></iframe>\n                                                        </div>\n                                                        <span class="PaymentMethod-form-warningIcon panWarning Icon Tooltip--top"\n                                                              data-tooltip="Invalid card number">\n                                                            <%= loadSvg(\'ui-warning\') %>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                                <div class="PaymentMethod-form-column PaymentMethod-form-column--small form-step"\n                                                    ng-class="{\'is-warning\' : NewCcDeposit.DepositService.deposit.data.expiry.valid === false,\n                                                    \'is-valid\': NewCcDeposit.DepositService.deposit.data.expiry.valid === true}">\n                                                    <label for="iframe-payment-method-expiry" class="PaymentMethod-form-label"><%- expiryDate %></label>\n                                                    <div class="PaymentMethod-form-inputContainer">\n                                                        <div class="PaymentMethod-form-input large-input">\n                                                            <iframe fl-analytics="ExpiryField" id="iframe-payment-method-expiry"\n                                                                    class="PaymentMethod-form-iframe iframe-payment-method-cc" src="<%- customizedModal.depositUrl %>"\n                                                                    sandbox="allow-forms allow-scripts allow-same-origin"\n                                                                    data-uitest-target="credit-card-iframe"></iframe>\n                                                        </div>\n                                                        <span class="PaymentMethod-form-warningIcon expiryWarning Icon Tooltip--top"\n                                                              data-tooltip="Invalid expiry">\n                                                            <%= loadSvg(\'ui-warning\') %>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="PaymentMethod-form-group">\n                                                <div class="PaymentMethod-form-column form-step"\n                                                    ng-class="{\'is-warning\' : NewCcDeposit.DepositService.deposit.data.name.valid === false,\n                                                    \'is-valid\': NewCcDeposit.DepositService.deposit.data.name.valid === true}">\n                                                    <label for="iframe-payment-method-name" class="PaymentMethod-form-label"><%- cardholderName %></label>\n                                                    <div class="PaymentMethod-form-inputContainer">\n                                                        <div class="PaymentMethod-form-input large-input">\n                                                            <iframe fl-analytics="NameField" id="iframe-payment-method-name"\n                                                                    sandbox="allow-forms allow-scripts allow-same-origin"\n                                                                    class="PaymentMethod-form-iframe iframe-payment-method-cc" src="<%- customizedModal.depositUrl %>"\n                                                                    data-uitest-target="credit-card-iframe"></iframe>\n                                                        </div>\n                                                        <span class="PaymentMethod-form-warningIcon nameWarning Icon Tooltip--top"\n                                                              data-tooltip="Invalid cardholder name">\n                                                            <%= loadSvg(\'ui-warning\') %>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                                <div class="PaymentMethod-form-column PaymentMethod-form-column--small form-step"\n                                                    ng-class="{\'is-warning\' : NewCcDeposit.DepositService.deposit.data.cvv.valid === false,\n                                                    \'is-valid\' : NewCcDeposit.DepositService.deposit.data.cvv.valid === true}">\n                                                    <label for="iframe-payment-method-cvv" class="PaymentMethod-form-label">\n                                                        CCV/CVV:\n                                                        <span id=\'ccvHelp\' class="PaymentMethod-form-tip Icon Icon--mid Tooltip--left" data-tooltip="<%- ccvLabel %>">\n                                                            <%= loadSvg(\'ui-help\') %>\n                                                        </span>\n                                                        <span id=\'amexHelp\' class="PaymentMethod-form-tip Icon Icon--mid Tooltip--left" data-tooltip="<%- amexLabel %>">\n                                                            <%= loadSvg(\'ui-help\') %>\n                                                        </span>\n                                                    </label>\n                                                    <div class="PaymentMethod-form-inputContainer">\n                                                        <div class="PaymentMethod-form-input large-input">\n                                                            <iframe fl-analytics="CVVField" id="iframe-payment-method-cvv"\n                                                                    class="PaymentMethod-form-iframe iframe-payment-method-cc"\n                                                                    sandbox="allow-forms allow-scripts allow-same-origin"\n                                                                    src="<%- customizedModal.depositUrl %>" data-uitest-target="credit-card-iframe"></iframe>\n                                                        </div>\n                                                        <span class="PaymentMethod-form-warningIcon cvvWarning Icon Tooltip--top"\n                                                              data-tooltip="Invalid CVV">\n                                                            <%= loadSvg(\'ui-warning\') %>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="Grid PaymentMethod-form-row">\n                                            <div class="Grid-col Grid-col--12 PagePayments-creditCard">\n                                                <p class="PagePayments-creditCard-desc"><%- creditCardDesc %></p>\n                                                <ul class="PagePayments-acceptedCards">\n                                                    <li fl-analytics="Visa" class="PagePayments-acceptedCards-item">\n                                                        <%= loadSvg(\'visa\') %>\n                                                    </li>\n                                                    <li fl-analytics="Amex" class="PagePayments-acceptedCards-item">\n                                                        <%= loadSvg(\'amex\') %>\n                                                    </li>\n                                                    <li fl-analytics="Mastercard" class="PagePayments-acceptedCards-item">\n                                                        <%= loadSvg(\'mastercard\') %>\n                                                    </li>\n                                                    <li fl-analytics="JCB" class="PagePayments-acceptedCards-item">\n                                                        <%= loadSvg(\'jcb\') %>\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </section>\n                                </div>\n                            </div>\n                            <div class="PaymentMethod-item is-nextSibling" id="paypalLabel">\n                                <input type="radio" class="PaymentMethod-radio" id="paypalRadio" name="deposit-method">\n                                <label class="PaymentMethod-label PaymentMethod-label--paypal" for="paypalRadio">\n                                    PayPal\n                                    <span class="PaymentMethod-logo">\n                                        <span class="PaymentIcon PaymentIcon--paypal"></span>\n                                    </span>\n                                </label>\n                            </div>\n                            <div class="PaymentMethod-item is-nextSibling" id="showMoreLabel">\n                                <a id="redirectDepositPageButton" role="button" class="PaymentMethod-showMore">\n                                    <span class="PaymentMethod-showMore-icon">+</span>\n                                    <span>Show All Payment Options</span>\n                                </a>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n                <div class="Grid-col Grid-col--5">\n                    <div class="PagePayments-summary">\n                        <p class="ModalPayment-summary-title"><%- subHeading %></p>\n                        <div class="ModalPayment-body PagePayments-summary-content">\n                            <div class="PagePayments-summary-note" id="nativeCharge">\n                                <div class="PagePayments-charge">\n                                    <input class="PagePayments-charge-checkbox" type="checkbox" id="nativeChargeCheck" checked="checked">\n                                    <label class="PagePayments-charge-label" for="currency-charge-verify" id="nativeChargeNote">\n                                    </label>\n                                </div>\n                            </div>\n                            <% if (showCharges) { %>\n                                <% for (i = 0; i < chargeDetails.length; i++) { %>\n                                    <% if (parseFloat(chargeDetails[i].amount) > 0) { %>\n                                        <div class="PagePayments-summary-item PagePayments-summary-upgrades-label">\n                                            <span class="PagePayments-summary-label promotion-tag \n                                            promotion-<%= chargeDetails[i].style %>">\n                                                <%= chargeDetails[i].label %>\n                                            </span>\n                                            <span class="PagePayments-summary-val">\n                                                <% if (chargeDetails[i].paid) { %>\n                                                        <%- T_("PAID") %>\n                                                <% } else { %>\n                                                    <%- currency.sign %><%- chargeDetails[i].amount.toFixed(2) %>\n                                                <% } %>\n                                            </span>\n                                        </div>\n                                    <% } %>\n                                <% } %>\n                            <% } %>\n                            <% if (text) { %>\n                                <p class="ModalPayment-descriptionText"><%= text %></p>\n                            <% } %>\n                        <% if (availableAmount !== 0) { %>\n                            <div class="PagePayments-summary-item PagePayments-summary-upgrades-label">\n                                <span class="PagePayments-summary-label"><%- T_("Current Balance") %> (in <%- currency.code %>):</span>\n                                <span class="PagePayments-summary-val chargeTotal"><%- currency.sign %><%- parseFloat(availableAmount).toFixed(2) %></span>\n                            </div>\n                        <% } %>\n                        <div class="PagePayments-summary-item PagePayments-summary-upgrades-label">\n                            <span class="PagePayments-summary-label">\n                                <%- feeHeading %>\n                                <span id="ccFeeTooltip" class="PagePayments-helpIcon Icon Icon--mid Tooltip--top"\n                                data-tooltip="<%- T_("The fee is calculated as ") %> <%- currency.sign %><%- customizedModal.ccFeeObj.fee_fixed_amount.toFixed(2) %> + <%- customizedModal.ccFeeObj.fee_rate * 100 %>% <%- T_(" of the deposit amount.") %>">\n                                    <%= loadSvg(\'ui-help\') %>\n                                </span>\n                                <span id="paypalFeeTooltip" class="PagePayments-helpIcon Icon Icon--mid Tooltip--top"\n                                data-tooltip="<%- T_("The fee is calculated as ") %> <%- currency.sign %><%- customizedModal.paypalFeeObj.fee_fixed_amount.toFixed(2) %> + <%- customizedModal.paypalFeeObj.fee_rate * 100 %>% <%- T_(" of the deposit amount.") %>">\n                                    <%= loadSvg(\'ui-help\') %>\n                                </span>\n                            </span>\n                            <span class="PagePayments-summary-val" id="ccFee">\n                                <%- currency.sign %><%- ccFee.toFixed(2) %>\n                            </span>\n                            <span class="PagePayments-summary-val" id="paypalFee">\n                                <%- currency.sign %><%- paypalFee.toFixed(2) %>\n                            </span>\n                        </div>\n                        </div>\n                        <div class="ModalPayment-totalCost">\n                            <div class="PagePayments-summary-item">\n                                <span class="PagePayments-summary-label"><%- T_("Total") %></span>\n                                <span class="chargeTotal"><%- currency.sign %><%- (chargeTotal-availableAmount).toFixed(2) %> <%- currency.code %></span>\n                            </div>\n                            <% if (includesGST) { %>\n                                <div class="ModalPayment-totalCost-detail"><%- T_("including GST") %></div>\n                            <% } %>\n                        </div>\n                        <div class="ModalPayment-footer ModalPayment-footer-noText">\n                            <button id="paymentModalConfirmButton" class="PagePayments-summary-btn btn btn-large btn-info btn-block"><%- buttonLabel %> <%- currency.sign %><%- (chargeTotal-availableAmount).toFixed(2) %> <%- currency.code %></button>\n                        </div>\n                        <p class="alert-cancel-link payLaterLink ModalPayment-payLater">\n                            <a id="payLaterLink"><%- T_("Pay Upgrade Fees Later") %></a>\n                        </p>\n                    </div>\n                    <ul class="PagePayments-securityLogos">\n                        <li fl-analytics="VerifiedByVisa" class="PagePayments-securityLogos-item">\n                            <span class="PaymentSecurityLogo PaymentSecurityLogo--visa">\n                              <span class="is-accessibly-hidden">Verified by Visa</span>\n                            </span>\n                        </li>\n                        <li fl-analytics="MastercardSecureCode" class="PagePayments-securityLogos-item">\n                            <span class="PaymentSecurityLogo PaymentSecurityLogo--mastercard">\n                              <span class="is-accessibly-hidden">Mastercard Secure Code</span>\n                            </span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'});var loadFixedAmountPaymentModal=function(a,b,c,d,e,f,g){function i(a){a.moduleData={},a.$el=!1,a.callback=!1,a.callbackParams=!1,a.cancelCallback=!1,a.cancelCallbackParams=!1,a.closeCallback=!1,a.closeCallbackParams=!1,a.confirmConfig={buttonText:T_('Confirm Payment'),show:!0},a.cancelConfig={buttonText:T_('Cancel'),show:!0},a.customizedConfirm=a.confirmConfig,a.customizedCancel=a.cancelConfig,a.customizedModal={title:T_('Authorise Payment'),description:'',chargeDetail:'',showDescriptionOnly:!1}}function j(){a(document).ready(function(){h.$el.off('click','#redirectDepositPageButton').on('click','#redirectDepositPageButton',function(){return a('#redirectPaypal').val(''),typeof h.callback=='function'&&h.callback(h.callbackParams),h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'RedirectToDepositPage'}]),!1}),h.$el.on('click','#ccRadio',function(){a('#redirectPaypal').val(''),a('#ccItem').show(),a('#ccFeeTooltip').show(),a('#paypalFeeTooltip').hide(),a('#ccLabel').removeClass('is-prevSibling'),a('#paypalLabel').removeClass('is-active'),a('#ccLabel').addClass('is-active'),a('#paypalLabel').addClass('is-nextSibling'),a('.chargeTotal').show(),a('#paypalFee').hide(),a('#ccFee').show(),h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'clickCCRadio'}])}),h.$el.on('click','#paypalRadio',function(){a('#redirectPaypal').val('true'),a('#ccItem').hide(),a('#ccFeeTooltip').hide(),a('#paypalFeeTooltip').show(),a('#ccLabel').removeClass('is-active'),a('#paypalLabel').removeClass('is-nextSibling'),a('#ccLabel').addClass('is-prevSibling'),a('#paypalLabel').addClass('is-active'),a('#paypalFee').show(),a('#ccFee').hide(),h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'clickPaypalRadio'}])}),h.$el.off('click','#alertClose').on('click','#alertClose',function(){return a('.deposit-alert').hide(),h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'CloseAlert'}]),!1}),h.$el.off('click','#payLaterLink').on('click','#payLaterLink',function(){a('#payLaterModal').val('true'),a('#project-form').submit(),h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'PayLater'}])}),h.$el.off('click','#noUpgrade').on('click','#noUpgrade',function(){h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'NoUpgrade'}])}),h.$el.off('click','#depositModalCloseButton').on('click','#depositModalCloseButton',function(){a('body').removeClass('modal-open'),h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'CloseModal'}])}),window.history&&window.history.pushState&&(h.$el.on('show.bs.modal',function(){window.history.pushState('forward',null,'./post-project')}),a(window).on('popstate',function(){h.$el.modal('hide'),a('body').removeClass('modal-open'),h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'CloseModalBack'}])})),a(document).keyup(function(b){b.keyCode===27&&a('body').removeClass('modal-open'),h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'EscModalClose'}])}),h.$el.off('click','#paymentModalConfirmButton').on('click','#paymentModalConfirmButton',function(){return h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'ConfirmButton'}]),a('#paymentModalConfirmButton').addClass('processing'),a('#paymentModalConfirmButton').prop('disabled',!0),a('#redirectPaypal').val()!=='true'?h.customizedModal.pan.valid&&h.customizedModal.name.valid&&h.customizedModal.expiry.valid&&h.customizedModal.cvv.valid?h.customizedModal.billing.submit(h.moduleData.amount-h.moduleData.availableAmount,h.moduleData.currencyDetails.code,a('#nativeChargeCheck').prop('checked')&&a('#nativeChargeCheck').is(':visible')&&h.customizedModal.issuingCurrency?{'fx-issuing-currency':h.customizedModal.issuingCurrency}:{}):(h.customizedModal.pan.valid?a('.panWarning').hide():(a('.panWarning').show(),a('#paymentModalConfirmButton').removeClass('processing'),a('#paymentModalConfirmButton').prop('disabled',!1)),h.customizedModal.cvv.valid?a('.cvvWarning').hide():(a('.cvvWarning').show(),a('#paymentModalConfirmButton').removeClass('processing'),a('#paymentModalConfirmButton').prop('disabled',!1)),h.customizedModal.expiry.valid?a('.expiryWarning').hide():(a('.expiryWarning').show(),a('#paymentModalConfirmButton').removeClass('processing'),a('#paymentModalConfirmButton').prop('disabled',!1)),h.customizedModal.name.valid?a('.nameWarning').hide():(a('.nameWarning').show(),a('#paymentModalConfirmButton').removeClass('processing'),a('#paymentModalConfirmButton').prop('disabled',!1))):typeof h.callback=='function'&&h.callback(h.callbackParams),!1}),h.$el.off('click','.modal-btn-cancel-payment').on('click','.modal-btn-cancel-payment',function(){return h.$el.modal('hide'),typeof h.cancelCallback=='function'&&h.cancelCallback(h.cancelCallbackParams),window._t.push(['user_action',{section:'PaymentConfirmationModal',label:'CancelPayment',reference:'contest_id',reference_id:h.moduleData.contestId}]),!1})})}function k(){a(document).ready(function(){h.$el.off('click','.modal-btn-confirm-payment').on('click','.modal-btn-confirm-payment',function(){return h.$el.modal('hide'),typeof h.callback=='function'&&h.callback(h.callbackParams),window._t.push(['user_action',{section:'PaymentConfirmationModal',label:'ConfirmPayment',reference:'contest_id',reference_id:h.moduleData.contestId}]),!1}),h.$el.off('click','.modal-btn-cancel-payment').on('click','.modal-btn-cancel-payment',function(){return h.$el.modal('hide'),typeof h.cancelCallback=='function'&&h.cancelCallback(h.cancelCallbackParams),window._t.push(['user_action',{section:'PaymentConfirmationModal',label:'CancelPayment',reference:'contest_id',reference_id:h.moduleData.contestId}]),!1}),h.$el.on('click','.modal-header .close',function(){return typeof h.closeCallback=='function'&&h.closeCallback(h.closeCallbackParams),window._t.push(['user_action',{section:'PaymentConfirmationModal',label:'CloseModal',reference:'contest_id',reference_id:h.moduleData.contestId}]),!1}),h.$el.on('shown.bs.modal',function(){return window._t.push(['user_action',{section:'PaymentConfirmationModal',label:'OpenModal',reference:'contest_id',reference_id:h.moduleData.contestId}]),!1}),typeof h.extraBinds=='function'&&h.extraBinds(h.$el)})}function l(){a(document).ready(function(){h.$el.off('click','#paymentModalConfirmButton').on('click','#paymentModalConfirmButton',function(){return typeof h.callback=='function'&&h.callback(h.callbackParams),h.moduleData.contestId?window._t.push(['user_action',{section:'ExpandedPaymentConfirmationModal',label:'ConfirmPayment',reference:'contest_id',reference_id:h.moduleData.contestId}]):h.moduleData.onPPP&&window._t.push(['user_action',{section:'ExpandedPaymentConfirmationModalPPP',label:'ConfirmPayment'}]),!1}),h.$el.on('click','.modal-header .close',function(){return typeof h.closeCallback=='function'&&h.closeCallback(h.closeCallbackParams),h.moduleData.contestId&&window._t.push(['user_action',{section:'ExpandedPaymentConfirmationModal',label:'CloseModal',reference:'contest_id',reference_id:h.moduleData.contestId}]),!1}),a('body').on('hidden',h.$el,function(){h.$el.parent('.responsive-modal').remove()}),typeof h.extraBinds=='function'&&h.extraBinds(h.$el)})}function m(){var c;a('.gaf-container').length>0?c='.gaf-container:first':c='.pinky-template:first',h.$el=a('#expanded-payment-modal .modal'),h.$el.modal('hide').parent('.responsive-modal').remove(),h.$el=a(b.template(f,{heading:h.moduleData.heading||T_('Confirm Payment'),headingSubtext:h.moduleData.headingSubtext,subHeading:h.moduleData.subHeading||T_('Upgrades'),buttonLabel:T_('Confirm Payment'),showCharges:h.moduleData.showCharges||!0,chargeDetails:h.moduleData.chargeDetails,chargeTotal:h.moduleData.amount,currency:h.moduleData.currencyDetails,includesGST:h.moduleData.includesGST,text:null,footerText:T_('This will be debited from your available balances, then if required we will attempt to process this payment from your verified payment methods.')})).appendTo(c).find('.modal'),l(),h.$el.modal({backdrop:'static',keyboard:!0})}function n(b,c,d,e,f,g,j,k,l,n,p,q){i(h),typeof c=='function'&&(h.callback=c),typeof d=='object'&&(h.callbackParams=d),typeof e=='function'&&(h.cancelCallback=e),typeof f=='object'&&(h.cancelCallbackParams=f),typeof l=='function'&&(h.closeCallback=l),typeof n=='object'&&(h.closeCallbackParams=n),typeof g=='object'&&(h.customizedConfirm=g,typeof h.customizedConfirm.buttonText=='undefined'&&(h.customizedConfirm.buttonText=h.confirmConfig.buttonText),typeof h.customizedConfirm.show=='undefined'&&(h.customizedConfirm.show=h.confirmConfig.show)),typeof j=='object'&&(h.customizedCancel=j,typeof h.customizedCancel.buttonText=='undefined'&&(h.customizedCancel.buttonText=h.cancelConfig.buttonText),typeof h.customizedCancel.show=='undefined'&&(h.customizedCancel.show=h.cancelConfig.show)),typeof k=='object'&&(h.customizedModal=a.extend(h.customizedModal,k));if(typeof b!='object')return;h.moduleData=b,typeof p=='function'&&(h.extraBinds=p),o()&&(h.moduleData.amount>0?a.ajax({type:'post',data:{currency:h.moduleData.currencyDetails.id,amount:h.moduleData.amount,isPPP:h.moduleData.onPPP},url:'/ajax/payment/getUserPaymentMethodInfo.php',dataType:'json',success:function(b){b.status==='success'&&(h.moduleData.firstAvailablePaymentMethod=b.firstAvailablePaymentMethod,h.moduleData.canPaypalDeposit=b.canPaypalDeposit,h.moduleData.availableAmount=b.totalBalance.amount,h.moduleData.payLater=b.payLater);var c;window.fin1031&&h.moduleData.firstAvailablePaymentMethod===!1&&h.moduleData.canPaypalDeposit&&h.moduleData.availableAmount<h.moduleData.amount?(h.moduleData.balances=b.balances,c='test',s()):(c='control',typeof q!='undefined'&&q?m():x()),h.moduleData.onPPP&&a.ajax({url:'/api/abtest/0.1/enrollments/',method:'PUT',data:JSON.stringify({id_type:2,id:parseInt(window.getCookie('USER_ID'),10),experiment_name:'FIN-1031-deposit-modal',variation:c}),contentType:'application/json',headers:{'Freelancer-Auth-V2':window.getCookie('USER_ID')+';'+window.getCookie('AUTH_HASH_V2')}})}}):typeof h.callback=='function'&&h.callback(h.callbackParams))}function o(){return typeof h.moduleData.amount=='undefined'||typeof h.moduleData.currencyDetails=='undefined'||h.customizedModal.showDescriptionOnly&&h.customizedModal.description===''?!1:(h.moduleData.amount=parseFloat(h.moduleData.amount),isNaN(h.moduleData.amount)||h.moduleData.amount<0?!1:!0)}function q(b){if(h.moduleData.currencyDetails.code!==b.currency.code){h.customizedModal.issuingCurrency=b.currency.code,a('#nativeCharge').show();var c='(1.00 '+h.moduleData.currencyDetails.code+' = '+(1/h.exchangeRate[b.currency.id][h.moduleData.currencyDetails.code]).toFixed(5)+' '+b.currency.code+')';a('#nativeChargeNote').text('Your card will be charged in '+b.currency.code),a('#nativeChargeNote').append('<div>'+c+'</div>')}else a('#nativeCharge').hide()}function r(b){a('.alertBody').hide(),a('.deposit-alert').show(),a('.alert-success').removeClass('alert-success'),a('.alert-warning').removeClass('alert-warning'),a('.alert-error').removeClass('alert-error'),b==='success'?(a('.alertSuccess').show(),a('.deposit-alert').addClass('alert-success')):b==='error'?(a('.alertError').show(),a('#paymentModalConfirmButton').removeClass('processing'),a('#paymentModalConfirmButton').prop('disabled',!1),a('.deposit-alert').addClass('alert-error')):b==='binError'?(a('.alertBinError').show(),a('#paymentModalConfirmButton').removeClass('processing'),a('#paymentModalConfirmButton').prop('disabled',!1),a('.deposit-alert').addClass('alert-error')):(a('.deposit-alert').addClass('alert-warning'),a('#paymentModalConfirmButton').removeClass('processing'),a('#paymentModalConfirmButton').prop('disabled',!1),b==='authError'?a('.alertAuthError').show():b==='preDepositError'?a('.alertPreDepositError').show():b==='apiError'?a('.alertApiError').show():b==='genericError'&&a('.alertGenericError').show())}function s(){a.ajax({url:'/ajax/payment/depositModal.php',type:'GET',dataType:'json',success:function(a){v(a),h.isCCEligible=a.isCCEligible},error:function(){r('preDepositError')}})}function t(b){try{b=JSON.parse(b),r('apiError'),a('#apiErrorCode').text(b.error_code),a('#apiEventId').text(b.uuid),a('#apiHumanMsg').text(b.human_msg)}catch(c){r('genericError')}}function u(b){if(b.origin!==window.location.origin)return;r(b.data.type),b.data.type==='binError'&&w(b.data.message),typeof h.callback=='function'&&b.data.type==='success'?setTimeout(function(){h.callback(h.callbackParams)},2e3):a.ajax({url:'/api/payments/0.1/deposits/',type:'POST',dataType:'json',contentType:'application/json',headers:{'Freelancer-Auth-V2':window.getCookie('USER_ID')+';'+window.getCookie('AUTH_HASH_V2')},data:JSON.stringify(h.ccDepositData),success:function(b){a('#iframe-payment-method-pan').attr('src',b.result.url),h.customizedModal.pan={},h.customizedModal.cvv={},h.customizedModal.name={},h.customizedModal.expiry={}},error:function(){r('preDepositError')}})}function v(c){var d;a('.gaf-container').length>0?d='.gaf-container:first':d='.pinky-template:first',typeof h.moduleData.usePinkyTemplateContainer!='undefined'&&h.moduleData.usePinkyTemplateContainer===!0&&(d='.pinky-template:first'),h.ccDepositData={action:'getHosted',amount:5,currency_id:1,deposit_method:'fln_billing',credit_card_gateway:'gc',threatmetrix_session:window.tags_session_id,tracking_token:c.trackingToken};var e='fln_billing';c.isCCEligible||(e='paypal'),h.exchangeRate=c.exchangeRate,h.trackingToken=c.trackingToken,a.when(a.ajax({url:'/api/payments/0.1/deposits/',type:'POST',dataType:'json',contentType:'application/json',headers:{'Freelancer-Auth-V2':window.getCookie('USER_ID')+';'+window.getCookie('AUTH_HASH_V2')},data:JSON.stringify(h.ccDepositData)}),a.ajax({url:'/api/payments/0.1/deposits/fees/?compact=true&deposit_method='+e,type:'GET',dataType:'json',headers:{'Freelancer-Auth-V2':window.getCookie('USER_ID')+';'+window.getCookie('AUTH_HASH_V2')}}),a.ajax({url:'/api/payments/0.1/deposits/fees/?compact=true&deposit_method=paypal_reference',type:'GET',dataType:'json',headers:{'Freelancer-Auth-V2':window.getCookie('USER_ID')+';'+window.getCookie('AUTH_HASH_V2')}})).done(function(e,f,i){h.customizedModal={pan:{},expiry:{},name:{},cvv:{}},h.customizedModal.depositUrl=e[0].result.url,h.customizedModal.ccFeeObj=f[0].result.deposit_fee_configs.filter(function(a){return a.currency_id==h.moduleData.currencyDetails.id})[0],h.moduleData.ccFee=(h.moduleData.amount-h.moduleData.availableAmount)*h.customizedModal.ccFeeObj.fee_rate+h.customizedModal.ccFeeObj.fee_fixed_amount,h.customizedModal.paypalFeeObj=i[0].result.deposit_fee_configs.filter(function(a){return a.currency_id==h.moduleData.currencyDetails.id})[0],h.moduleData.usdChargeDetails=[],h.moduleData.paypalFee=(h.moduleData.amount-h.moduleData.availableAmount)*h.customizedModal.paypalFeeObj.fee_rate+h.customizedModal.paypalFeeObj.fee_fixed_amount,h.moduleData.projectId=a('#projectId').val(),h.$el=a('.fixed-amount-payment-modal'),h.$el.modal('hide').remove(),h.$el=a('<div class="fixed-amount-payment-modal modal hide"></div>').appendTo(d),typeof g=='undefined'&&(g=a('#fixed-amount-payment-modal-template').html()),h.moduleData.projectId=a('#projectId').val(),h.$el.html(b.template(g,{templateData:h.moduleData,customizedConfirm:h.customizedConfirm,customizedCancel:h.customizedCancel,customizedModal:h.customizedModal,heading:T_('Confirm Payment'),creditCardDesc:T_('You agree to authorize the use of your credit card for this deposit and future payments.'),headingSubtext:h.moduleData.headingSubtext,subHeading:T_('Project Upgrades'),buttonLabel:T_('Pay'),feeHeading:T_('Processing Fee'),creditCardLabel:T_('Credit Card'),creditCardNote:T_('All major cards accepted'),showAllOptionsLabel:T_('Show All Payment Options'),amexLabel:T_('The 4 digits displayed on the front of your card'),ccvLabel:T_('The last 3 digits displayed on the back of your card'),cardNumber:T_('Card Number:'),expiryDate:T_('Expiry Date:'),cardholderName:T_('Cardholder Name:'),showCharges:!0,projectId:h.moduleData.projectId,chargeDetails:h.moduleData.chargeDetails,ccFee:h.moduleData.ccFee,paypalFee:h.moduleData.paypalFee,chargeTotal:h.moduleData.amount+h.moduleData.ccFee,availableAmount:h.moduleData.availableAmount,currency:h.moduleData.currencyDetails,includesGST:h.moduleData.includesGST,text:null})),j(),h.$el.modal({backdrop:'static',keyboard:!0});if(c.isCCEligible){h.customizedModal.billing=new Billing(flns.config.fln_billing_base_url,window,e[0].result.url,{pan:document.getElementById('iframe-payment-method-pan'),cvv:document.getElementById('iframe-payment-method-cvv'),expiry:document.getElementById('iframe-payment-method-expiry'),name:document.getElementById('iframe-payment-method-name')}),h.customizedModal.billing.setCallback(p),window.addEventListener('message',function(a){u(a)}),a('.panWarning').hide(),a('.nameWarning').hide(),a('.expiryWarning').hide(),a('.cvvWarning').hide(),a('.alertBody').hide(),a('.deposit-alert').hide(),a('#paypalFeeTooltip').hide(),a('#nativeCharge').hide(),a('#ccvHelp').show(),a('#amexHelp').hide(),a('#paypalFee').hide(),a('#showAllDepositMethods').val('true');var k=h.moduleData.chargeDetails.filter(function(a){return a.label==='Full Time'})[0];h.moduleData.payLater&&!k&&h.moduleData.availableAmount==0?a('.noUpgradeSection').hide():a('.payLaterLink').hide()}else a('.ccItem').hide();a('body').addClass('modal-open'),h.$el.focus()}).fail(function(a){t(a)})}function w(b){try{b=JSON.parse(b),r('binError'),a('#binErrorCode').text(b.error_code),a('#binEventId').text(b.uuid),a('#binHumanMsg').text(b.human_msg)}catch(c){r('genericError')}}function x(){var d;a('.gaf-container').length>0?d='.gaf-container:first':d='.pinky-template:first',typeof h.moduleData.usePinkyTemplateContainer!='undefined'&&h.moduleData.usePinkyTemplateContainer===!0&&(d='.pinky-template:first'),h.$el=a('.fixed-amount-payment-modal'),h.$el.modal('hide').remove(),h.$el=a('<div class="fixed-amount-payment-modal modal hide"></div>').appendTo(d),typeof e=='undefined'&&(e=a('#fixed-amount-payment-modal-template').html()),h.$el.html(b.template(e,{templateData:h.moduleData,customizedConfirm:h.customizedConfirm,customizedCancel:h.customizedCancel,customizedModal:h.customizedModal})),c.init(h.moduleData,h.$el.find('.payment-sources-container')),k(),h.$el.modal({backdrop:'static',keyboard:!0})}function y(){return h.$el}var h={},p=function(b){h.moduleData.onPPP&&window._t.push(['user_action',{section:'DepositModalPPP',label:'BillingPostData',value:JSON.stringify(b)}]);if('pan'in b||'cvv'in b){b.pan.length===6&&(b.card==='amex'?(a('#ccvHelp').hide(),a('#amexHelp').show()):(a('#ccvHelp').show(),a('#amexHelp').hide())),h.customizedModal.billing.style({pan:b.pan.valid}),h.customizedModal.pan={valid:b.pan.valid},b.pan.valid===!1?a('.panWarning').show():(b.pan.valid===!0||!b.pan.length)&&a('.panWarning').hide(),h.customizedModal.billing.style({cvv:b.cvv.valid}),h.customizedModal.cvv={valid:b.cvv.valid},b.cvv.valid===!1?a('.cvvWarning').show():(b.cvv.valid===!0||!b.cvv.length)&&a('.cvvWarning').hide();if(b.pan.length>6){var c='/ajax/payment/iin.php?iin='+b.iin;a.ajax({url:c,type:'GET',dataType:'json',success:function(a){q(a)},error:function(){h.customizedModal.billing.style({pan:b.pan.valid}),a('.panWarning').show()}})}else h.customizedModal.nativeCharge=!1,a('#nativeCharge').hide()}else if('name'in b)h.customizedModal.billing.style({name:b.valid}),h.customizedModal.name={valid:b.valid},b.valid===!1?a('.nameWarning').show():b.valid===!0&&a('.nameWarning').hide();else if('year'in b||'month'in b)h.customizedModal.billing.style({expiry:b.valid}),h.customizedModal.expiry={valid:b.valid},b.valid===!1?a('.expiryWarning').show():b.valid===!0&&a('.expiryWarning').hide()};return{initModal:n,getModal:y}};if(typeof define=='function'&&define.amd)define('payments/module-fixed-amount-payment-modal',['jquery-wrapper','underscore-wrapper','payments/module-payments-source','payments/billing','text!templates/payments/fixed-amount-payment-modal.htm','text!templates/payments/new-fixed-amount-payment-modal.htm','text!templates/payments/deposit-modal.htm'],loadFixedAmountPaymentModal);else var initFixedAmountPaymentModalOnNonBSPage=loadFixedAmountPaymentModal(jq).initModal;define('text!templates/dashboard/milestone.released.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2> <%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> released a milestone payment of <strong><[= data.currencysign ]><[- data.amount ]> <[= data.currencycode ]></strong> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-info">\n  <strong><%- T_("Milestone details:") %> </strong><%- data.otherReason %>\n</div>\n'}),define('text!templates/dashboard/invoice.requested.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> requested an invoice of <strong><[= data.currencySign ]><[- data.amount ]> <[- data.currencyCode ]></strong> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && state == \'reject\') { %>\n      <li class="first">\n        <a href = "/projects/<%- data.seoUrl %>.html#pay-invoice-form-wrapper" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%-T_("Change Requested") %></a>\n      </li>\n      <% } %>\n      <% if ( typeof state !== \'undefined\' && state == \'paid\') { %>\n      <li class="first">\n        <a href = "/projects/<%- data.seoUrl %>.html#pay-invoice-form-wrapper" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%-T_("Invoice Paid") %></a>\n      </li>\n      <% } %>\n      <% if ( typeof state !== \'undefined\' && state.indexOf(\'outstanding\') != -1) {\n        var len=state.length;\n        var currentAmount = "NaN";\n        if (len > 11){\n          currentAmount = data.amount - parseFloat(state.substring(11))/100;\n          currentAmount = currentAmount.toFixed(2);\n        }%>\n      <li class="first">\n        <a href = "/projects/<%- data.seoUrl %>.html#pay-invoice-form-wrapper" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%-T_("Partly Paid: ") %><%= data.currencySign%><%-currentAmount%> <%-data.currencyCode%></a>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if ( typeof state === \'undefined\') { %>\n    <li class="first">\n      <a id="payInvoice"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Pay Invoice") %></a>\n    </li>\n    <li>\n      <a id="viewInvoice"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Invoice") %></a>\n    </li>\n    <li class="last">\n      <a id="requestToChange"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Request to change") %></a>\n    </li>\n    <% } else { if (state == \'paid\' || state.indexOf(\'accept\') != -1) {%>\n    <li class="first">\n      <a id="viewInvoice"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Invoice") %></a>\n    </li>\n    <% }if ((state == \'reject\' || state.indexOf(\'outstanding\') != -1)&&!(state.indexOf(\'accept\') != -1)) {%>\n    <li class="first">\n      <a id="payInvoice"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Pay Invoice") %></a>\n    </li>\n    <li>\n      <a id="viewInvoice"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Invoice") %></a>\n    </li>\n    <% }} %>\n  </ul>\n</div>\n\n<form id ="payNowBox" style = "display: none;" >\n  <div class = "well">\n    <div class = "hideAfterLoading" style="text-align:center">\n    </div>\n    <div class = "hideWhenLoading">\n      <h3><%- T_("Pay with Milestone Payment: ") %></h3>\n        <div class = "milestones">\n        </div>\n      <div class="direct-payment-container"></div>\n      <div class="form-btn-wrapper">\n        <a class="btn btn-info btn-mini" id = "confirmPayNow" ><%- T_("Pay Now") %></a>\n        <a class="btn btn-mini" id= "cancelPayNow"><%- T_("Cancel") %></a>\n      </div>\n      <span class = "hint"></span>\n    </div>\n  </div>\n</form>\n\n<form id =\'requestChangeBox\' style="display:none;">\n  <div class="well">\n    <textarea class="span7 requestChangeBox-message" id=\'requestChangeMsg\' placeholder="<%- T_("Explain what you would like changed on the invoice...") %>"></textarea>\n    <a class="btn btn-info btn-mini" id=\'requestChangeSubmit\'><%- T_("Request Change") %></a>\n    <a class="btn btn-mini" id=\'cancelRequestChange\'><%- T_("Cancel") %></a>\n    <span class=\'hint\'></span>\n  </div>\n</form>\n'}),define('text!templates/dashboard/invoice-pay-direct.htm',[],function(){return'<h3><%- T_("Pay from your balance: ") %> <%- currency.sign %><span class="payInvoice-directPayment"><%- amount %></span></h3>\n<div class="hide">\n  <span class="hide payInvoice-outstandingAmount"><%- amount %></span>\n  <span class="hide payInvoice-amountToPay"></span>\n</div>\n'}),define('text!templates/dashboard/invoice.requestChange.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> requested a change to your invoice of <[= data.currencySign]><[- data.amount]>&nbsp;<[- data.currencyCode]> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-info" id="description">\n  <strong><%- T_("Request: ") %></strong>\n  <% if (message !== null) { %>\n  <span id="needToShorten"  data-origin = "<%- message %>" value="<%- message %>"> <%- message %> </span>\n  <a class= "seeMore" id="seeMore"><%- T_("see more") %></a>\n  <% } %>\n</div>\n<% if ( typeof state === \'undefined\') { %>\n<ul class="nav nav-tabs">\n  <li class="first">\n    <a class="award" href="/projects/<%- data.seoUrl %>.html#invoices_<%- data.bidId %>"> <i class="icon-share-alt"></i>&nbsp; <%- T_("Change Invoice") %></a>\n  </li>\n</ul>\n<% } %>\n'}),define('dashboard/lib/dotdotdot',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){function d(a,b,c){var d=a.children(),e=!1;a.empty();for(var f=0,h=d.length;f<h;f++){var i=d.eq(f);a.append(i),c&&a.append(c);if(g(a,b)){i.remove(),e=!0;break}c&&c.remove()}return e}function e(b,c,d,h,i){var j=b.contents(),k=!1;b.empty();var l='table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style';for(var m=0,n=j.length;m<n;m++){if(k)break;var o=j[m],p=a(o);if(typeof o=='undefined')continue;b.append(p);if(i){var q=b.is(l)?'after':'append';b[q](i)}o.nodeType==3?g(d,h)&&(k=f(p,c,d,h,i)):k=e(p,c,d,h,i),k||i&&i.remove()}return k}function f(b,c,d,e,h){var k=!1,l=b[0];if(typeof l=='undefined')return!1;var m=e.wrap=='letter'?'':' ',n=j(l).split(m),o=-1,p=-1,q=0,r=n.length-1;while(q<=r){var s=Math.floor((q+r)/2);if(s==p)break;p=s,i(l,n.slice(0,p+1).join(m)+e.ellipsis),g(d,e)?r=p:(o=p,q=p)}if(o!=-1){var t=n.slice(0,o+1).join(m);k=!0;while(a.inArray(t.slice(-1),e.lastCharacter.remove)>-1)t=t.slice(0,-1);a.inArray(t.slice(-1),e.lastCharacter.noEllipsis)<0&&(t+=e.ellipsis),i(l,t)}else{var u=b.parent();b.remove(),$n=u.contents().eq(-1),k=f($n,c,d,e,h)}return k}function g(a,b){return a.innerHeight()>b.maxHeight}function h(a){return{width:a.innerWidth(),height:a.innerHeight()}}function i(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function j(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:''}function k(b,c){return typeof b=='undefined'?!1:b?typeof b=='string'?(b=a(b,c),b.length?b:!1):typeof b=='object'?typeof b.jquery=='undefined'?!1:b:!1:!1}function m(a){var b=a.innerHeight(),c=['paddingTop','paddingBottom'];for(z=0,l=c.length;z<l;z++){var d=parseInt(a.css(c[z]),10);isNaN(d)&&(d=0),b-=d}return b}function n(a,b){return a?(typeof b=='string'?b='dotdotdot: '+b:b=['dotdotdot:',b],window.console&&window.console.log&&window.console.log(b),!1):!1}if(a.fn.dotdotdot)return;a.fn.dotdotdot=function(b){if(this.length==0)return n(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){a(this).dotdotdot(b)});var c=this;c.data('dotdotdot')&&c.trigger('destroy.dot'),c.bind_events=function(){return c.bind('update.dot',function(b,h){b.preventDefault(),b.stopPropagation(),i.maxHeight=typeof i.height=='number'?i.height:m(c),i.maxHeight+=i.tolerance;if(typeof h!='undefined'){if(typeof h=='string'||h instanceof HTMLElement)h=a('<div />').append(h).contents();h instanceof a&&(f=h)}q=c.wrapInner('<div class="dotdotdot" />').children(),q.empty().append(f.clone(!0)).css({height:'auto',width:'auto',border:'none',padding:0,margin:0});var k=!1,l=!1;return j.afterElement&&(k=j.afterElement.clone(!0),j.afterElement.remove()),g(q,i)&&(i.wrap=='children'?l=d(q,i,k):l=e(q,c,q,i,k)),q.replaceWith(q.contents()),q=null,a.isFunction(i.callback)&&i.callback.call(c[0],l,f),j.isTruncated=l,l}).bind('isTruncated.dot',function(a,b){return a.preventDefault(),a.stopPropagation(),typeof b=='function'&&b.call(c[0],j.isTruncated),j.isTruncated}).bind('originalContent.dot',function(a,b){return a.preventDefault(),a.stopPropagation(),typeof b=='function'&&b.call(c[0],f),f}).bind('destroy.dot',function(a){a.preventDefault(),a.stopPropagation(),c.unwatch().unbind_events().empty().append(f).data('dotdotdot',!1)}),c},c.unbind_events=function(){return c.unbind('.dot'),c},c.watch=function(){c.unwatch();if(i.watch=='window'){var b=a(window),d=b.width(),e=b.height();b.bind('resize.dot'+j.dotId,function(){if(d!=b.width()||e!=b.height()||!i.windowResizeFix)d=b.width(),e=b.height(),p&&clearInterval(p),p=setTimeout(function(){c.trigger('update.dot')},10)})}else l=h(c),p=setInterval(function(){var a=h(c);if(l.width!=a.width||l.height!=a.height)c.trigger('update.dot'),l=h(c)},100);return c},c.unwatch=function(){return a(window).unbind('resize.dot'+j.dotId),p&&clearInterval(p),c};var f=c.contents(),i=a.extend(!0,{},a.fn.dotdotdot.defaults,b),j={},l={},p=null,q=null;return j.afterElement=k(i.after,c),j.isTruncated=!1,j.dotId=o++,c.data('dotdotdot',!0).bind_events().trigger('update.dot'),i.watch&&c.watch(),c},a.fn.dotdotdot.defaults={ellipsis:'... ',wrap:'word',lastCharacter:{remove:[' ',',',';','.','!','?'],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1};var o=1,p=a.fn.html;a.fn.html=function(a){return typeof a!='undefined'?this.data('dotdotdot')&&typeof a!='function'?this.trigger('update',[a]):p.call(this,a):p.call(this)};var q=a.fn.text;a.fn.text=function(b){if(typeof b!='undefined'){if(this.data('dotdotdot')){var c=a('<div />');return c.text(b),b=c.html(),c.remove(),this.trigger('update',[b])}return q.call(this,b)}return q.call(this)}}),define('dashboard/lib/seeMore',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/lib/dotdotdot'],function(a,b,c,d){if(a.fn.initialSeeMore)return;if(a.fn.seeMoreClick)return;a.fn.initialSeeMore=function(b){if(this.length!=1)return console.log('Error number element found for "'+this.selector+'".'),this;opts=a.extend(!0,{},a.fn.initialSeeMore.defaults,b),e(this,opts.preferLineNum)},a.fn.seeMoreClick=function(b){if(this.length!=1)return console.log('Error number element found for "'+this.selector+'".'),this;var c=this,d=a(c.parents('div')[0]),e=d.find('#needToShorten').length!=0?d.find('#needToShorten'):d.find('p'),f=e.data('origin');e.text(f),c.remove()};var e=function(a,b){var c=!1,d=a.find('#needToShorten').length!=0?a.find('#needToShorten'):a.find('p'),e;a.find('#seeMore').length!=0?e=a.find('#seeMore'):a.find('.seeMore').length!=0?e=a.find('.seeMore'):e=a.find('a');if(d.length==0)return;if(e.hasClass('initialized'))return;var f=3,g=a.css('line-height').replace('px',''),h=a.find('#needToShorten').height();if(g==0||g=='')return;var i=Math.round(h/g);i>b&&(c=!0);var j='word',k=a.width(),l=d.width();l>k&&(a.css('word-wrap','break-word'),j='letter',c=!0);if(c){e.show(),a.dotdotdot({after:'a#seeMore',height:g*b,wrap:j}),g=a.css('line-height').replace('px',''),h=a.find('#needToShorten').height(),i=Math.round(h/g),i==1&&(a.trigger('destroy'),a.dotdotdot({after:'a#seeMore',height:g*b,wrap:'letter'}));var m=a.html().toString();a.trigger('destroy'),a.html(m),a.find('a').addClass('initialized'),e.remove()}else e.remove()};a.fn.initialSeeMore.defaults={preferLineNum:'3'};if(a.fn.truncateProjectName)return;a.fn.truncateProjectName=function(b){if(this.find('.trunc').length==0)return;if(this.length!=1)return this;opts=a.extend(!0,{},a.fn.truncateProjectName.defaults,b);if(this.hasClass('initialized'))return;var c=3,d=this.css('line-height').replace('px',''),e=this.height();if(d==0||d=='')return;var f=Math.round(e/d);if(f>opts.preferLineNum){var g=this.find('.trunc').html();if(g.indexOf(' ')<20&&g.indexOf(' ')!=-1){var h=this.find('.noTrunc'),i;if(h.length==0){this.dotdotdot({ellipsis:'........',after:'em',height:d*opts.preferLineNum+2});var j=this.html().toString();this.html(j);var k=this.find('em');this.append(k.clone()),k.remove()}else{this.dotdotdot({ellipsis:'........',after:'.noTrunc',height:d*opts.preferLineNum+2});var j=this.html().toString();this.html(j);var h=this.find('.noTrunc');this.append(h.clone()),h.remove()}}else{var h=this.find('.noTrunc'),i;if(h.length==0){this.dotdotdot({wrap:'letter',ellipsis:'........',after:'em',height:d*opts.preferLineNum+2});var j=this.html().toString();this.html(j);var k=this.find('em');this.append(k.clone()),k.remove()}else{this.dotdotdot({wrap:'letter',ellipsis:'........',after:'.noTrunc',height:d*opts.preferLineNum+2});var j=this.html().toString();this.html(j);var h=this.find('.noTrunc');this.append(h.clone()),h.remove()}}var l=this.find('.trunc').html();if(l==null)return;i=l.toString(),i.indexOf('<strong>')!=-1?(this.find('.trunc').html(i.substring(0,i.length-opts.recoverLength-opts.strongTagLength)),this.find('trunc').append('</strong>')):this.find('.trunc').html(i.substring(0,i.length-opts.recoverLength))}};if(a.fn.truncateProjectNameForWidget)return;a.fn.truncateProjectNameForWidget=function(b){if(this.length!=1)return this;opts=a.extend(!0,{},a.fn.truncateProjectNameForWidget.defaults,b);var c=this.css('line-height').replace('px',''),d=this.height();if(c==0||c=='')return;if(Math.round(d/c)>opts.preferLineNum){var e=this.find('.noTrunc');e.length==0&&this.dotdotdot({ellipsis:'...',height:c*opts.preferLineNum+6})}},a.fn.truncateProjectNameForWidget.defaults={preferLineNum:'1'},a.fn.truncateProjectName.defaults={preferLineNum:'3',recoverLength:'5',strongTagLength:'9'}}),define('text!templates/dashboard/invoice.paid.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n\n<h2> <%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> paid your invoice of <strong><[= data.currencySign ]><[- data.amount ]> <[= data.currencyCode ]></strong> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class=\'first\'>\n            <a href="/payments/view-invoice.php?invoice_id=<%- data.invoiceId %>" target="_blank" > <i class="icon-share-alt"></i>&nbsp;<%- T_("View Invoice") %></a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/invoice.withdrawn.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> has withdrawn their invoice of <[= data.currencySign ]><[- data.amount ]> <[- data.currencyCode ]> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n'}),define('text!templates/dashboard/bid.invited.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> invited you to bid on <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.title ]></a> ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state != \'undefined\' && (state == \'completed\' || state == \'placed\')) { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%- T_("Bid Placed") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n<%if(typeof state == \'undefined\') {%>\n<ul class="news-list">\n  <li class="news-item last">\n    <p>\n      <strong><%- T_("Budget:")%></strong> <%= data.currencysign%><%if (data.maxBudget==false) {%><%- data.minBudget%><% }else {%><%- data.minBudget%> - <%= data.currencysign%><%- data.maxBudget%>\n      <%}%>\n      <%= data.currencycode%>\n      <% if (data.projIsHourly !=null && data.projIsHourly) {%>/hr\n      <% }%>\n    </p>\n    <div class="descr-long">\n      <p>\n        <Strong><%- T_("Description:") %></Strong>\n        <span id =\'needToShorten\' data-origin=\'<%- data.appended_descr %>\'> <%- data.appended_descr %> </span>\n      </p>\n      <a id=\'seeMore\' style ="display:none" ><%- T_("see more") %></a>\n    </div>\n    <p>\n      <strong><%- T_("Skills:") %></strong> <%- data.jobString %>\n    </p>\n  </li>\n</ul>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class ="first">\n      <a href="/sellers/placebid.php?id=<%- data.id %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Bid Now !") %></a>\n    </li>\n  </ul>\n</div>\n<%}%>\n'}),define('text!templates/dashboard/bid.placed.htm',[],function(){return'<div>\n    <div id="status"></div>\n    <div id="content">\n<!-- <span id="formatNotification"></span> -->\n        <ul class="news-list news-list-avatar news-list-ratings">\n            <li class="news-item first" id="loadingAll" style="text-align:center;padding:20px;">\n                <div id="loading"><img style="margin-right: 8px;" src="/img/dashboard-loading.gif" /><%= T_("Loading bids...") %></div>\n                <div id="loadingFail" style="display:none">\n                    <% if (typeof(postProject) != "undefined" && postProject) { %>\n                        <p><%- T_("This project has been deleted. Would you like to post another project?") %></p>\n                        <a class="postProject btn btn-primary btn-mini" href="/post-project">\n                            <%- T_("Post a Project") %>\n                        </a>\n                    <% } else { %>\n                        <p>\n                            <%- T_("We were unable to load your bids.") %>&nbsp;&nbsp;<a id="tryAgain"><%- T_("Try again") %></a>\n                        </p>\n                    <% } %>\n                </div>\n            </li>\n            <!-- put those bids here from bid.place.min.htm-->\n            <li id="pageBar" class="view-all last" style="">\n                <a id="viewAll" style="display:none"><i class="icon-plus-sign"></i><span>&nbsp;<%-T_("View all")%></span></a>\n                <div id = "scrollBar" style="display:none">\n                    <a id="scrollUp"><i class="icon-plus-sign"></i>&nbsp;<%-T_("View more bids")%></a>\n                    <span id="scrollStatus" style="margin-right:15px; margin-top: -20px; float:right"></span>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n'}),define('text!templates/dashboard/bid.placed.min.htm',[],function(){return'<li data-time="<%- timestamp %>" class="news-item\n <%\n if(typeof data.bid !== \'undefined\' && (typeof data.bid.is_selected === \'undefined\' || data.bid.is_selected == false)){\n    if(typeof data.bid.sponsored !== \'undefined\' && data.bid.sponsored != null && data.bid.sponsored.status == \'active\'){%>bid-sponsored <%}\n    if (data.bid.highlighted) {%> bid-highlighted <%}\n    }%>\n">\n  <div class="profile-pic-wrapper">\n    <span class="profile-pic">\n      <a href=\'/u/<%- data.userName %>?ref_project_id=<%- data.projectId %>\'>\n      <img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic">\n      </a>\n    </span>\n  </div>\n  <h3 class="dashboard-entry-heading">\n\n  <% if (data.projIsHourly !=null && data.projIsHourly == true) {%>\n    <%= T_(" <a id=\'username\' class=\'font-bold bidder\' href=\'/u/<[- data.userName ]>?ref_project_id=<[- data.projectId ]>\'><[- (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName ]></a> bid <strong><[= data.currency ]><[- data.amount ]>  <[- data.currencyCode ]>/hr for <[- data.period ]> hrs/week</strong> ", {data: data}) %>\n  <%} else if (data.period != 1) {%>\n    <%= T_(" <a id=\'username\' class=\'font-bold bidder\' href=\'/u/<[- data.userName ]>?ref_project_id=<[- data.projectId ]>\'><[- (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName ]></a> bid <strong><[= data.currency ]><[- data.amount ]>  <[- data.currencyCode ]> to complete in <[- data.period ]> days</strong> ", {data: data}) %>\n  <%} else {%>\n    <%= T_(" <a id=\'username\' class=\'font-bold bidder\' href=\'/u/<[- data.userName ]>?ref_project_id=<[- data.projectId ]>\'><[- (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName ]></a> bid <strong><[= data.currency ]><[- data.amount ]>  <[- data.currencyCode ]> to complete in <[- data.period ]> day</strong> ", {data: data}) %>\n  <%}%>\n\n  <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n\n  </h3>\n  <div class="descr-long" style="word-wrap: break-word;">\n    <% if (data.descr !== null) { %>\n    <p id =\'needToShorten\' data-origin = "<%- data.descr %>" >\n      <%- data.descr %>\n    </p>\n    <% } %>\n    <a id = "seeMore" class="seeMore" style="display:none" ><%- T_("see more") %></a>\n  </div>\n\n  <ul class="ReputationList">\n    <li class="ReputationList-item">\n      <span class="Rating Rating--basic"\n           data-star_rating="<%- parseFloat(data.bid.user.seller_rating.avg).toFixed(1) %>">\n          <span class="Rating-total">\n              <span class="Rating-progress"></span>\n          </span>\n      </span>\n    </li>\n    <li class="ReputationList-item">\n      <div class="Earnings" data-user_earnings="<%- parseFloat(data.bid.user.earnings).toFixed(1) %>">\n          <span class="Earnings-icon"></span>\n          <span class="Earnings-label">\n              <%- parseFloat(data.bid.user.earnings).toFixed(1) %>\n          </span>\n      </div>\n    </li>\n    <li class="ReputationList-item">\n      <span class="ReputationList-reviews Rating-review Rating-review--hasIcon">\n          <%- data.bid.user.seller_rating.count %>\n      </span>\n    </li>\n  </ul>\n\n  <!-- awarded case alert bar-->\n  <div class="alert alert-success" id="action_history" style=" display:<% if(!data.bid.is_selected) {%> none <% } %>" >\n    <div class="actions tabbable">\n      <ul class="nav nav-tabs">\n        <% if(data.bid.is_selected) {%>\n        <li class="first">\n          <a href="<%- data.linkUrl %>" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Project Awarded") %></a>\n        </li>\n        <% } %>\n        <% if(typeof state !== \'undefined\' && state.indexOf(\'milestoneCreated\')!=-1) {%>\n        <li id="milestone-created-flag">\n          <a href="<%- data.linkUrl %>" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Milestone Created") %></a>\n        </li>\n        <% } %>\n      </ul>\n    </div>\n  </div>\n\n  <% if(data.bid.is_selected != true) {%>\n\n  <!-- not awarded case -->\n  <% if(!isAutomaticPayments) { %>\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <li class="first" id="award-project">\n        <a id = "award"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Award Project") %></a>\n      </li>\n      <li class="last" id="send-message">\n        <a id = "messaging" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashBidFreelancer\', \'Project_NewsFeed\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Send Message") %></a>\n      </li>\n    </ul>\n  </div>\n  <% } %>\n  <%if(typeof data.bid != \'undefined\' && typeof data.bid.sponsored != \'undefined\'\n      && data.bid.sponsored != null && data.bid.sponsored.status == \'active\'){%>\n    <div class="text-red sponsored-bid-txt-label"><%- T_("Sponsored Bid") %></div>\n  <%}%>\n  <!-- confimation box -->\n  <div class="tab-content" id = "award_box" >\n    <div class="tab-pane active">\n      <div id="award-well" class="well" style="display: none; ">\n        <p id="confirmation-message">\n           <strong><%= T_("Award your project to <[- username ]>?", {\'username\': (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName }) %></strong>\n        </p>\n        <% if (data.projIsHourly) { %>\n          <p>\n            <% if (typeof data.bid.isWidgetAffiliate != \'undefined\' && data.bid.isWidgetAffiliate && data.bid.additional.buyerFeePerDollar > 0) { %>\n              <%= T_("For hourly projects, your <[-percentage]>% fee is waived for this freelancer.", {\'percentage\': data.bid.additional.buyerFeePerDollar * 100}) %>\n            <% } else if (typeof data.bid.additional !== \'undefined\' && data.bid.additional.buyerFeePerDollar > 0) { %>\n              <%= T_("For hourly projects, a <[-percentage]>% fee is charged on each payment made to the freelancer.", {\'percentage\': data.bid.additional.buyerFeePerDollar * 100}) %>\n            <% } else { %>\n              <%- T_("You will be notified once they accept your offer to start work.") %>\n            <% } %>\n          </p>\n        <% } else if (data.projIsFullTime || (typeof data.bid.additional !== \'undefined\' && data.bid.additional.buyerFeePerDollar == 0)) { %>\n          <p>\n            <%- T_("You will be notified once they accept your offer to start work.") %>\n          </p>\n        <% } else if (typeof data.bid.additional !== \'undefined\' && parseFloat(data.bid.additional.project_fee) > 0) { %>\n          <p>\n              <% if (typeof data.bid.isWidgetAffiliate != \'undefined\' && data.bid.isWidgetAffiliate) { %>\n                <%= T_("Your project fee of <strong><[= data.currency ]><[- data.bid.additional.project_fee ]> <[- data.currencyCode ]> will be waived once this freelancer accepts to work on your project.", {\'data\': data}) %>\n              <% } else if (data.bid.additional.gst) { %>\n                  <%= T_("You will be charged a project fee of <strong><[= data.currency ]><[- data.bid.additional.project_fee ]> <[- data.currencyCode ]> incl. GST</strong> if <[- user ]> accepts to work on your project.", {\'data\': data, \'user\' : (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName}) %>\n              <% } else { %>\n                  <%= T_("You will be charged a project fee of <strong><[= data.currency ]><[- data.bid.additional.project_fee ]>  <[- data.currencyCode ]></strong> if <[- user ]> accepts to work on your project.", {\'data\': data, \'user\' : (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName}) %>\n              <% } %>\n          </p>\n          <% if (typeof data.bid.isWidgetAffiliate != \'undefined\' && !data.bid.isWidgetAffiliate) { %>\n            <p>\n                <%= T_("This payment will be deducted from your <span class=\'payment-source-tooltip\' data-content=\'<[- content ]>\'>best available payment source</span>.", {content: T_("Payment will be deducted from your available currency balances, then if required, we will attempt to process this payment from your verified payment sources.")}) %>\n            </p>\n            <p class="align-l">\n                <%= T_("If there are any issues with your project, you can cancel it at any time within the next 7 days and this fee will be <strong>fully refunded</strong>.") %>\n            </p>\n          <% } %>\n        <% } %>\n        <div class="form-btn-wrapper">\n          <a class="btn btn-info submit btn-mini"\n             id="submit"><%- T_("Yes! Let\'s get started") %></a>\n          <a class="btn btn-mini cancel"><%- T_("Cancel") %></a>\n        </div>\n        <span class="hint error-msg" style="display: none; "></span>\n      </div>\n    </div>\n  </div>\n  <% } else {%>\n\n  <!-- awarded case-->\n  <% if(!isAutomaticPayments) { %>\n  <div id="action-links" class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <li class="first" id="create-milestone" >\n        <a id = "btn_create_milestone"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Create Milestone") %></a>\n      </li>\n      <li class="last" id="send-message">\n        <a id = "messaging" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Award_DashBidFreelancer\', \'Project_NewsFeed\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Send Message") %></a>\n      </li>\n    </ul>\n  </div>\n  <% } %>\n  <%if(typeof data.bid !== \'undefined\' && (typeof data.bid.is_selected === \'undefined\' || data.bid.is_selected == false) && typeof data.bid.sponsored !== \'undefined\'\n      && data.bid.sponsored != null && data.bid.sponsored.status == \'active\'){%>\n    <div class="text-red sponsored-bid-txt-label"><%- T_("Sponsored Bid") %></div>\n  <%}%>\n  <div id = "loadingRest" class = "well" style="display:none">\n    <img src="<%- cdn_url(\'/img/dashboard-loading.gif\', \'//\') %>"><span class="processing-text"><%- T_("Loading...") %></span></img>\n  </div>\n  <form class="form-search" id ="milestone-create-form" style="display:none;">\n    <div class = "well" >\n      <%if(typeof data.bid !== \'undefined\' && (typeof data.bid.is_awarded === \'undefined\' || data.bid.is_awarded == false)){%>\n      <p>\n        <%= T_("Get your project started faster! Create a milestone payment so work can begin once your project is accepted: ",{data: data}) %>\n      </p>\n      <%}%>\n      <label for="milestone-amount" class = "control-label" ><%= data.currency %> </label>\n      <input type="text" id="milestone-amount" class="form-inline span1" value="<%if(typeof data.bid !== \'undefined\' && (typeof data.bid.is_awarded === \'undefined\' || data.bid.is_awarded == false)){%><%- data.initMilestone %><%}%>" />\n      <input type="text" id="milestone-descr" name="milestone-descr" title="" placeholder="<%- T_("Initial milestone payment") %>"\n             class="milestone-descr-short" maxlength="40" ></input>\n      <div class="form-btn-wrapper">\n        <a class="btn btn-mini btn-info" id = "createMilestone" attr="<%- data.userId %>_<%- data.time %>"><%- T_("Create Milestone") %></a>\n        <a class="btn btn-mini" id= "cancelMilestone"><%- T_("No Thanks") %></a>\n      </div>\n      <p>\n      <%if(typeof data.bid !== \'undefined\' && (typeof data.bid.is_awarded === \'undefined\' || data.bid.is_awarded == false)){%>\n      <p>\n          <%= T_("Note: This is refunded if <strong><[- user ]></strong> does not accept the project.", {user: (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName}) %>\n      </p>\n      <%}%>\n      </p>\n      <span class="hint-milestone error-msg" style="display: none; "></span>\n    </div>\n  </form>\n  <%}%>\n</li>\n'}),define('text!templates/projectaward/award-upgrade.htm',[],function(){return'<thead>\n  <tr>\n      <th class="milestone-table-name" colspan="4"><%- T_("Recommended Upgrades")%></th>\n  </tr>\n</thead>\n<tbody class="project-displayed-upgrades">\n    <% if (!templateVars.upgraded.nda) { %>\n    <tr class="upgrade-listing-upgrade js-upgrade">\n        <td class="upgrade-listing-select">\n            <input type="checkbox" name="chkbx_nda" data-name="nda"\n                   class="custom-checkbox upgrade-checkbox" id="checkbox_nda"\n                   <% if (templateVars.hireMeNdaPreTick) { %> checked <% }%>>\n            <label class="custom-checkbox" for="checkbox_nda"></label>\n        </td>\n        <td class="upgrade-listing-type">\n            <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_nda">\n            <span class="promotion-tag has-no-icon promotion-nda"><%- T_("NDA")%></span>\n            </label>\n        </td>\n        <td class="upgrade-listing-description">\n            <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_nda">\n            <%= T_("Freelancers are prompted to sign a <a href=\'/NDA/NDA-print-contract.php\' target=\'_blank\'>Non-disclosure Agreement</a> when working on your project.")%>\n            <%- T_("Freelancers agree to keep details discussed through private messages and files confidential.")%>\n            </label>\n        </td>\n        <td class="upgrade-listing-price js-upgrade-price">\n            <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_nda">\n            <% if (templateVars.upgrade_prices.nda == 0) {%>\n            <span><%- T_("FREE") %></span>\n            <% } else { %>\n            <span class="currency-sign"><%- templateVars.currency %></span><span class=\'upgrade-price\' id="nda-upgrade-price"><%- (templateVars.upgrade_prices.nda).toFixed(2) %></span>\n            <% } %>\n            </label>\n        </td>\n    </tr>\n    <% } %>\n</tbody>\n<tbody class="is-hidden project-hidden-upgrades">\n    <% if (!templateVars.upgraded.nonpublic) { %>\n    <tr class="upgrade-listing-upgrade js-upgrade project-upgrade-item">\n        <td class="upgrade-listing-select">\n            <input type="checkbox" name="chkbx_nonpublic" data-name="private" class="custom-checkbox upgrade-checkbox" id="checkbox_private">\n            <label class="custom-checkbox" for="checkbox_private"></label>\n        </td>\n        <td class="upgrade-listing-type">\n          <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_private">\n            <span class="promotion-tag has-no-icon promotion-private"><%- T_("Private")%></span>\n          </label>\n        </td>\n        <td class="upgrade-listing-description">\n          <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_private">\n            <%= T_("I want to <strong>hide project details</strong> from search engines and users that are not logged in.")%>\n            <%- T_("This feature is recommended for projects where confidentiality is a must.")%>\n          </label>\n        </td>\n        <td class="upgrade-listing-price js-upgrade-price">\n            <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_private">\n            <% if (templateVars.upgrade_prices.nonpublic == 0) {%>\n            <span><%- T_("FREE") %></span>\n            <% } else { %>\n            <span class="currency-sign"><%- templateVars.currency %></span><span class=\'upgrade-price\' id="private-upgrade-price"><%- (templateVars.upgrade_prices.nonpublic).toFixed(2) %></span>\n            <% } %>\n            </label>\n        </td>\n    </tr>\n    <% } %>\n    <% if (!templateVars.upgraded.fulltime) { %>\n    <tr class="upgrade-listing-upgrade js-upgrade project-upgrade-item" style="display: table-row;">\n        <td class="upgrade-listing-select">\n            <input type="checkbox" name="chkbx_fulltime" data-name="fulltime" class="custom-checkbox upgrade-checkbox" id="checkbox_fulltime">\n            <label class="custom-checkbox" for="checkbox_fulltime"></label>\n        </td>\n        <td class="upgrade-listing-type">\n            <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_fulltime">\n            <span class="promotion-tag has-no-icon promotion-fulltime"><%- T_("Full Time")%></span>\n            </label>\n        </td>\n        <td class="upgrade-listing-description">\n            <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_fulltime">\n            <%- T_("This project is for hiring a full time or commission-based position (e.g. Sales) and you will save money if you have ongoing work. Fees are only charged if the project value exceeds $5000 USD.")%>\n            </label>\n        </td>\n        <td class="upgrade-listing-price js-upgrade-price">\n            <label class="upgrade-listing-select-label custom-checkbox" for="checkbox_fulltime">\n            <% if (templateVars.upgrade_prices.fulltime == 0) {%>\n            <span><%- T_("FREE") %></span>\n            <% } else { %>\n            <span class="currency-sign"><%- templateVars.currency %></span><span class=\'upgrade-price\' id="fulltime-upgrade-price"><%- (templateVars.upgrade_prices.fulltime).toFixed(2) %></span>\n            <% } %>\n            </label>\n        </td>\n    </tr>\n    <% } %>\n</tbody>\n'}),define('project/modules/module-award-upgrades',['jquery-wrapper','underscore-wrapper','text!templates/projectaward/award-upgrade.htm'],function(a,b,c){function d(){if(!x)return;e(),a('input[type="checkbox"]').change(function(){window._t.push(['user_action',{section:'ProjectUpgrade',subsection:'HireMe Milestone',label:this.checked?'select':'unselect',action:this.checked?'click':'unclick',name:'Upgrade Type',value:a(this).data('name'),reference:'project_id',reference_id:s.id}])})}function e(){a('#milestone-modal-upgrade-section').append(b.template(c,{templateVars:g()})).removeClass('is-hidden'),o=a('#milestone-modal-upgrade-section'),h()}function f(b,c){var d=a.Deferred(),e={id:b};return c&&(e.m=1),a.ajax({type:'get',url:'/ajax/buyer/upgrade_info.php',data:e,dataType:'json',success:function(a){a.status==='success'?(a.can_be_upgraded||(x=!1),u.nda=a.project.NDA!=='N',u.nonpublic=a.project.nonpublic!=='0',u.fulltime=a.project.fulltime!=='0'||a.project.hourly!=='0',u.nda&&u.nonpublic&&u.fulltime&&(x=!1),s=a.project,v=a.project_config,w=window.hireMeNdaPreTick):x=!1,d.resolve()},error:function(){x=!1,d.resolve()}}),d.promise()}function g(){var a={};return t.nonpublic=v.nonpublic_price,t.nda=v.free_NDA_upgrade?0:v.NDA_price,t.fulltime=v.fulltime_price,a.upgrade_prices=t,a.upgraded=u,a.currency=s.currency.sign,a.hireMeNdaPreTick=w,a}function h(){if(a.trim(o.find('.project-displayed-upgrades').html())===''){var b=o.find('.project-hidden-upgrades');a(b).find('tr').first().appendTo(o.find('.project-displayed-upgrades'))}if(a.trim(o.find('.project-hidden-upgrades').html())!==''){var c=T_('View more upgrades'),d='<a href="#" class="upgrade-listing-more">'+c+'</a>';o.find('.upgrade-listing-upgrade .upgrade-listing-description').first().append(d),o.find('.upgrade-listing-more').click(function(b){a(b.target).remove(),o.find('.project-hidden-upgrades').removeClass('is-hidden')})}}function i(b){var c=a.Deferred(),d={};return d.csrf_token=getCSRFToken(),d.data={},m(),a.each(y,function(a,b){d.data[b]='on'}),d.id=b,a.ajax({type:'post',url:'/ajax/buyer/onupgrade.php',dataType:'json',data:d,success:function(a){a.status==='failed'?c.reject(a.error):a.status==='insuffunds'?(window.location.replace(a.depositLink),c.reject('')):c.resolve(!0)},error:function(){var a=T_('Internal error, please try again later.');c.reject(a)}}),c.promise()}function j(b,c,d){r=b,p=c,q=d;if(!x||y.length<=0)p.call(q,r);else{var e=a('.milestone-modal .modal-footer'),f='<img id="award-loading" src="'+cdn_url('/img/ajax-loader.gif?v=62d3d0c60d4c33ef23dcefb9bc63e3a2&amp;m=6')+'" />';a('#milestone-error').html(''),e.append(f).find('.btn').hide(),l(y,r).then(function(){p.call(q,r);var b={id:s.id,data:{}};a.each(y,function(a,c){b.data[c]='on'}),a('#upgradeProjectContainer').trigger('onupgradeCall',[b])},function(b){b&&a('#milestone-error').html(b)}).always(function(){e.find('#award-loading').remove(),e.find('.btn').show()})}}function k(b,c,d,e){r={},r.milestone_amount=c.find('.milestone-amount').val(),r.description=c.find('.milestone-descr').val(),r.project_id=b.project_id,r.currency_id=b.currency_id,r.seller_id=b.seller_id,r.seller_name=b.seller_username,p=d;var f=a('.milestone-modal .modal-footer'),g='<img id="award-loading" src="'+cdn_url('/img/ajax-loader.gif?v=62d3d0c60d4c33ef23dcefb9bc63e3a2&amp;m=6')+'" />';a('#milestone-error').html(''),y.length>0?(f.append(g).find('.btn').hide(),a.each(y,function(a,c){window._t.push(['user_action',{section:'ProjectUpgrade',subsection:'HireMe Milestone',label:'confirm payment',action:'click',name:'Upgrade Type',value:c,reference:'project_id',reference_id:b.project_id}])}),l(y,r).then(function(){i(b.project_id).then(function(){p.call(e,c)},function(b){b&&a('#milestone-error').html(b),f.find('.btn').show()}).always(function(){f.find('#award-loading').remove()})},function(b){a('#milestone-error').html(b)})):p.call(e,c)}function l(b,c){var d=a.Deferred(),e=c;return e.chosen_upgrades=b,e.csrf_token=getCSRFToken(),a.ajax({type:'post',url:'/ajax/payment/on-preprocess-upgrades-and-milestones.php',dataType:'json',data:e,success:function(a){if(a.status==='success')if(a.diff_amount){var b='/payments/deposit.php?amount='+encodeURIComponent(a.diff_amount)+'&currency='+encodeURIComponent(a.currency_id)+'&id='+encodeURIComponent(a.project_id);a.ref_action&&a.data_token&&(b+='&refAction='+a.ref_action,b+='&dataToken='+a.data_token),a.back_url&&(b+='&back='+a.back_url),window.location=b,d.reject('')}else d.resolve(!0);else d.reject(a.msg)},error:function(){var a=T_('Internal error, please try again later.');d.reject(a)}}),d.promise()}function m(){y=[],o.find('#checkbox_nda').length>0&&o.find('#checkbox_nda').is(':checked')&&y.push('nda'),o.find('#checkbox_private').length>0&&o.find('#checkbox_private').is(':checked')&&y.push('nonpublic'),o.find('#checkbox_fulltime').length>0&&o.find('#checkbox_fulltime').is(':checked')&&y.push('fulltime')}function n(){if(!x)return 0;m();var b=0;return a.each(y,function(a,c){b+=t[c]}),b}var o,p,q,r,s,t={},u={},v={},w,x=!0,y=[];return{init:d,prepareUpgradeABTest:f,upgradeAndCreateMilestoneBreakdowns:j,upgradeAndCreateMilestone:k,getUpgradeTotal:n}}),define('text!templates/payments/milestone-breakdown-payments-source.htm',[],function(){return'<% if (data.balances) { %>\n<span class="payment-source-balance">\n  <% if (!data.totalBalanceIsEmpty) { %>\n    <strong><%= T_("Account Balance:") %></strong>\n      <% for (var i = 0; i < data.balances.length; i++) { %>\n        <%= data.balances[i].currency.sign %>\n        <%= data.balances[i].balance.toFixed(2) %>\n        <%= data.balances[i].currency.code %>\n        <%= (i == data.balances.length - 1) ? \'\' : \',\' %>\n      <% }\n  } %>\n</span>\n<% } %>\n\n<% if (data.firstAvailablePaymentMethod) { %>\n<h6><%= T_("Verified Payment Method") %></h6>\n\n<span class="payment-source-option">\n  <span class="payment-source-icons">\n    <div id="cc-icon" style="display:none;">\n      <span class="payment-icon-mastercard"></span>\n      <span class="payment-icon-visa"></span>\n      <span class="payment-icon-amex"></span>\n    </div>\n\n    <div id="pp-icon" style="display:none;">\n      <span class="payment-icon-paypal"></span>\n    </div>\n\n    <div id="mb-icon" style="display:none;">\n      <span class="payment-icon-skrill"></span>\n    </div>\n  </span>\n\n  <span class="payment-source-detail">\n  </span>\n\n  <span class="payment-source-preference" style="display:none;"><%= T_("Preferred") %></span>\n\n  <% if (data.verifiedPaymentSourceCount > 1) { %>\n  <a href="#" class="payment-source-edit-link">\n    <span class="fl-icon-pencil"></span>\n    <span id="edit-text"><%= T_("Edit Preference") %></span>\n  </a>\n  <% } %>\n</span>\n\n<% } %>\n\n\n<div class="payment-source-edit" style="display:none;">\n  <select id="payment-source-select" class="default-select">\n    <option value="" selected="selected"><%= T_("Select your preferred payment method") %></option>\n\n    <% if (data.paymentMethods.ppEmail) { %>\n    <option value="gatewayPP">\n      <%= T_("PayPal:") %>\n      (<%= data.paymentMethods.ppEmail %>)\n    </option>\n    <% } %>\n\n    <% if (data.paymentMethods.gcRecurring) { %>\n    <option value="gatewayGC">\n      <%= T_("Credit Card:") %>\n      <% if (data.paymentMethods.gcRecurring.length == 1) { %>\n        (<%= data.paymentMethods.gcRecurring[0][\'cc_number\'] %>)\n      <% } else { %>\n        (<%= T_("<[- num ]> accounts available", {\'num\': data.paymentMethods.gcRecurring.length})%>)\n      <% } %>\n    </option>\n    <% } %>\n\n    <% if (data.paymentMethods.wpRecurring) { %>\n    <option value="gatewayWP"><%= T_("Credit Card:") %>\n      <% if (data.paymentMethods.wpRecurring.length == 1) { %>\n        (<%= data.paymentMethods.wpRecurring[0][\'cc_number\'] %>)\n      <% } else { %>\n        (<%= T_("<[- num ]> accounts available", {\'num\': data.paymentMethods.wpRecurring.length})%>)\n      <% } %>\n    </option>\n    <% } %>\n\n    <% if (data.paymentMethods.skrillPaymentVerified) { %>\n    <option value="gatewayMB"><%= T_("Skrill:") %>\n      <% if (data.paymentMethods.skrillPaymentVerified.length == 1) { %>\n        (<%= T_("Order ID:") %> <%= data.paymentMethods.skrillPaymentVerified[0].onetap_invoice_id %>)\n      <% } else { %>\n        (<%= T_("<[- num ]> accounts available", {\'num\': data.paymentMethods.skrillPaymentVerified.length})%>)\n      <% } %>\n    </option>\n    <% } %>\n  </select>\n</div>\n\n<div class="payments-source-error error" style="display:none;"><%= T_("Server Error") %></div>\n'}),define('text!templates/projectaward/award-milestone-breakdown.htm',[],function(){return'<div class="responsive-modal hide" id="milestone-breakdown-modal">\n  <div id="milestone-request-modal" class="modal milestone-request-breakdown">\n    <div class="modal-header">\n      <h3><%= T_("Get your project started") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <%= data.seller.username %>\n        <%= T_("has requested that you deposit the following Milestone Payments\n            to start work on your project:") %>\n      </p>\n      <div class="popover bottom milestone-request-popover">\n        <div class="arrow"></div>\n        <h3 class="popover-title"><%= T_("Pay Safely with Milestone Payments") %></h3>\n        <div class="popover-content">\n          <p>\n            <%= T_("Milestone Payments are a secure and safe way to pay for work delivered online.\n              Define and agree upon the Milestones (or tasks) you want completed\n              then deposit funds for each milestone to be held securely for you by Freelancer.com") %>\n          </p>\n          <p>\n            <%= T_("Freelancers can begin work knowing the payment will be released once work is completed,\n              and employers are protected knowing their funds are secure to release only when the work\n              is delivered and has been accepted.") %>\n          </p>\n        </div>\n      </div>\n      <table class="milestone-breakdown-table default-table">\n          <thead>\n              <tr>\n                <th>\n                  <%= T_("Milestones") %>\n                  <a href="#" id="milestone-explanation-popover-link"><%= T_("Learn More") %></a>\n                </th>\n                <th class="milestone-header-amount">\n                  <%= T_("Amount") %>\n                  (<%= data.currencyDetails.code %>)\n                </th>\n              </tr>\n          </thead>\n          <tbody>\n              <%\n                var milestoneTotal = 0;\n                for (var i = 0; i < data.milestoneRequests.length; i++) {\n                  milestoneTotal += data.milestoneRequests[i].amount;\n              %>\n              <tr>\n                <td>\n                  <label class="checkbox">\n                    <input\n                      id="milestone-checkbox-<%= i %>"\n                      type="checkbox"\n                      class="milestone-request"\n                      value="<%= data.milestoneRequests[i].id %>"\n                      checked>\n                    <%= data.milestoneRequests[i].descr %>\n                  </label>\n                </td>\n                <td class="milestone-request-amount">\n                  <%= data.currencyDetails.sign + data.milestoneRequests[i].amount.toFixed(2) %>\n                </td>\n              </tr>\n              <% } %>\n\n              <tr>\n                <td><span id="milestone-error" style="color:red;"></span></td>\n                <td class="milestone-request-total">\n                  <%= T_("Total:") %>\n                  <span id="milestone-total">\n                      <%= data.currencyDetails.sign + milestoneTotal.toFixed(2) %>\n                  </span>\n                </td>\n              </tr>\n          </tbody>\n      </table>\n      <p>\n        <%= T_("This will be debited from your available account balances,\n            then if required, you will be directed to the deposit page to make this payment:") %>\n      </p>\n\n      <div class="payment-source-container"></div>\n    </div>\n    <div class="modal-footer">\n      <a id="btn-create-milestone" class="btn btn-primary">\n          <%= T_("Create Milestone") %>\n      </a>\n      <a href="#" id="btn-not-now" class="btn">\n          <%= T_("Not now") %>\n      </a>\n    </div>\n  </div>\n</div>\n'}),define('text!templates/projectaward/award-milestone-breakdown-ab.htm',[],function(){return'<div class="responsive-modal hide" id=\'milestone-modal-ab\'>\n  <div class="milestone-modal modal" aria-hidden="false" data-keyboard="false" data-backdrop="static">\n    <div class="modal-header">\n      <h1 class="modal-title">\n          <%- T_("Deposit requested for Milestone Payment") %>\n      </h1>\n    </div>\n    <div class="modal-body milestone-modal-body">\n      <div class="popover bottom milestone-request-popover">\n        <div class="arrow"></div>\n        <h3 class="popover-title"><%- T_("Pay Safely with Milestone Payments") %></h3>\n        <div class="popover-content">\n          <p>\n            <%- T_("Milestone Payments are a secure and safe way to pay for work delivered online.\n              Define and agree upon the Milestones (or tasks) you want completed\n              then deposit funds for each milestone to be held securely for you by Freelancer.com") %>\n          </p>\n          <p>\n            <%- T_("Freelancers can begin work knowing the payment will be released once work is completed,\n              and employers are protected knowing their funds are secure to release only when the work\n              is delivered and has been accepted.") %>\n          </p>\n        </div>\n      </div>\n      <table class="milestone-table default-table">\n        <thead>\n          <tr>\n            <th class="milestone-table-name"><%- T_("Milestones") %><span\n              id=\'milestone-explanation-popover-link\' class="table-help" data-toggle="tooltip"\n              data-placement="top" title="" data-original-title="Text goes here"></span></th>\n            <th class="milestone-table-amount"><%- T_("Amount") %> (<%- data.currencyDetails.code %>)</th>\n          </tr>\n        </thead>\n        <tbody>\n          <%\n            var milestoneTotal = 0;\n            for (var i = 0; i < data.milestoneRequests.length; i++) {\n            milestoneTotal += data.milestoneRequests[i].amount;\n          %>\n          <tr class="milestone-table-task is-active-task">\n            <td>\n              <label class="milestone-table-name" for="milestone-checkbox-<%- i %>">\n                <input class="milestone-table-checkbox milestone-request"\n                  id="milestone-checkbox-<%- i %>" type="checkbox" checked\n                  value="<%- data.milestoneRequests[i].id %>" /><%- data.milestoneRequests[i].descr %>\n              </label>\n            </td>\n            <td class="milestone-table-amount">\n              <label class="milestone-table-price" for="milestone-checkbox-<%- i %>">\n                <strong>\n                  <%- data.currencyDetails.sign + data.milestoneRequests[i].amount.toFixed(2) %>\n                </strong>\n              </label>\n            </td>\n          </tr>\n          <% } %>\n        </tbody>\n      </table>\n      <table id="milestone-modal-upgrade-section" class="upgrade-listing-options default-table is-hidden">\n      </table>\n      <div class="milestone-modal-terms">\n        <p>\n        <%- T_("This will be debited from your available account balances,\n          then if required, you will be directed to the deposit page to make this payment.") %>\n        </p>\n      </div><div class="milestone-request-total milestone-modal-total">\n        <%- T_("Total:") %>\n        <span id=\'milestone-total\'>\n          <%- data.currencyDetails.sign + milestoneTotal.toFixed(2) %>\n        </span>\n      </div>\n      <div class="milestone-modal-payment">\n        <div class="payment-source-container"></div>\n      </div>\n      <div class="milestone-modal-alert alert alert-error" id="milestone-error"></div>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" id="btn-not-now"><%- T_("Not now") %></button>\n      <button class="btn btn-info" id="btn-create-milestone"><%- T_("Proceed to Payment") %></button>\n    </div>\n  </div>\n</div>\n'}),define('project/modules/module-award-milestone-breakdown',['jquery-wrapper','underscore-wrapper','project/modules/module-award-upgrades','text!templates/payments/milestone-breakdown-payments-source.htm','text!templates/projectaward/award-milestone-breakdown.htm','text!templates/projectaward/award-milestone-breakdown-ab.htm'],function(a,b,c,d,e,f){function g(a){o=a,h(),n()}function h(){o.upgradeABTest&&(o.project.name=project.name,e=f),q.append(b.template(e,{data:o})),q.find('#milestone-breakdown-modal, #milestone-modal-ab').modal({backdrop:'static',keyboard:!1}),a('body').addClass('modal-open'),o.upgradeABTest&&c.init(),a('.payment-source-container').html('<img src="'+cdn_url('/img/ajax-loader.gif?v=62d3d0c60d4c33ef23dcefb9bc63e3a2&amp;m=6')+'" />'),a.ajax({type:'post',data:{currency:o.currencyDetails.id},url:'/ajax/payment/getUserPaymentMethodInfo.php',dataType:'json',success:function(a){if(a.status==='success'){p.balances=a.balances,p.paymentMethods=a.paymentMethods,p.firstAvailablePaymentMethod=a.firstAvailablePaymentMethod,p.preferredPaymentMethod=a.preferredPaymentMethod,p.totalBalanceIsEmpty=!0;for(var b=0;b<p.balances.length;)p.balances[b].balance=parseFloat(p.balances[b].balance),p.balances[b].balance>0&&(p.totalBalanceIsEmpty=!1),p.balances[b].balance===0?p.balances.splice(b,1):p.balances[b].currency.id===o.currencyDetails.id?(p.primaryBalanceForPayment=p.balances[b],p.balances.splice(b,1)):b++;p.primaryBalanceForPayment&&p.balances.unshift(p.primaryBalanceForPayment),p.verifiedPaymentSourceCount=0,p.firstAvailablePaymentMethod&&(p.paymentMethods.ppEmail&&p.verifiedPaymentSourceCount++,p.paymentMethods.gcRecurring&&p.verifiedPaymentSourceCount++,p.paymentMethods.wpRecurring&&p.verifiedPaymentSourceCount++,p.paymentMethods.skrillPaymentVerified&&p.verifiedPaymentSourceCount++),i(),k()}}})}function i(){a('.payment-source-container').html(b.template(d,{data:p})),j(p.firstAvailablePaymentMethod)}function j(b){a('#cc-icon').hide(),a('#pp-icon').hide(),a('#mb-icon').hide(),a('.payment-source-preference').hide(),b==='gatewayGC'?(a('#cc-icon').show(),p.paymentMethods.gcRecurring.length===1?a('.payment-source-detail').html(p.paymentMethods.gcRecurring[0].cc_number):a('.payment-source-detail').html(p.paymentMethods.gcRecurring.length+' '+T_('accounts available'))):b==='gatewayWP'?(a('#cc-icon').show(),p.paymentMethods.wpRecurring.length===1?a('.payment-source-detail').html(p.paymentMethods.wpRecurring[0].cc_number):a('.payment-source-detail').html(p.paymentMethods.wpRecurring.length+' '+T_('accounts available'))):b==='gatewayPP'?(a('#pp-icon').show(),a('.payment-source-detail').html(p.paymentMethods.ppEmail)):b==='gatewayMB'&&(a('#mb-icon').show(),p.paymentMethods.skrillPaymentVerified.length===1?a('.payment-source-detail').html(p.paymentMethods.skrillPaymentVerified[0].onetap_invoice_id):a('.payment-source-detail').html(p.paymentMethods.skrillPaymentVerified.length+' '+T_('accounts available'))),p.preferredPaymentMethod===b&&a('.payment-source-preference').show()}function k(){a('.payment-source-edit-link').on('click',function(){return a('.payment-source-edit').is(':visible')?(a('.payment-source-edit').hide(),a('.fl-icon-pencil').show(),a('#edit-text').html(T_('Edit Preference'))):(a('#payment-source-select').val(''),a('.payment-source-edit').show(),a('.fl-icon-pencil').hide(),a('#edit-text').html(T_('Cancel'))),!1}),a('#payment-source-select').on('change',function(){method=a('#payment-source-select').val();if(!method||method==='')return;a.ajax({url:'/ajax/user/setUserPreferedPayment.php',dataType:'json',type:'post',data:{method:method},success:function(b){b.result==='success'?(p.preferredPaymentMethod=method,j(method),a('.payment-source-edit').hide(),a('.fl-icon-pencil').show(),a('#edit-text').html(T_('Edit Preference'))):a('.payments-source-error').show()},error:function(){a('.payments-source-error').show()}})})}function l(a,b,d,e,f){var g={project_id:a,bid_id:b,currency_id:d,milestone_requests:f,seller_name:e};o.upgradeABTest?c.upgradeAndCreateMilestoneBreakdowns(g,m,this):m(g)}function m(b){var c=!1,d=b.currency_id;a.ajax({type:'post',url:'/ajax/payment/onCreateMilestoneBreakdown.php',data:b,dataType:'json',beforeSend:function(){a('#btn-not-now').hide(),a('#btn-create-milestone').hide().after('<img id="award-loading" src="'+cdn_url('/img/ajax-loader.gif?v=62d3d0c60d4c33ef23dcefb9bc63e3a2&amp;m=6')+'" />')},success:function(a){if(a.status==='needDeposit'){var b='/payments/deposit.php?amount='+encodeURIComponent(a.amountDiff)+'&currency='+encodeURIComponent(d)+'&back='+encodeURIComponent(a.backUrl);c=!0,window.location=b}},complete:function(){c||(q.find('#milestone-breakdown-modal, #milestone-modal-ab').on('hidden',function(){a(this).remove(),a('body').removeClass('modal-open')}),q.find('#milestone-breakdown-modal, #milestone-modal-ab').modal('hide'),a('#guide-widget-container').hide(),o.callback.func(o.callback.params))}})}function n(){a('input:checkbox.milestone-request, input:checkbox.upgrade-checkbox',q).on('change',function(){var b=0;for(var d=0;d<o.milestoneRequests.length;d++)a('#milestone-checkbox-'+d).is(':checked')?(a('#milestone-checkbox-'+d).parents('.milestone-table-task').addClass('is-active-task'),b+=o.milestoneRequests[d].amount):a('#milestone-checkbox-'+d).parents('.milestone-table-task').removeClass('is-active-task');o.upgradeABTest&&(b+=c.getUpgradeTotal()),a('#milestone-total').html(o.currencyDetails.sign+b.toFixed(2))}),a('#milestone-explanation-popover-link').hover(function(){a('.milestone-request-popover').fadeIn('fast')},function(){a('.milestone-request-popover').fadeOut('fast')}),a('#btn-create-milestone').on('click',function(){a('#milestone-error').html('');var b=a('input:checkbox:checked.milestone-request').map(function(){return this.value}).get();if(b.length===0)return a('#milestone-error').html(T_('Please select at least one milestone to create.')),!1;l(o.project.id,o.bidId,o.currencyDetails.id,o.seller.username,b)}),a('#btn-not-now').on('click',function(){return q.find('#milestone-breakdown-modal, #milestone-modal-ab').on('hidden',function(){a(this).remove(),a('body').removeClass('modal-open')}),q.find('#milestone-breakdown-modal, #milestone-modal-ab').modal('hide'),o.callback.func(o.callback.params),!1})}var o={},p={},q=a('#pinky-container');return{init:g}}),define('text!templates/dashboard/bid.placed.header.htm',[],function(){return'<div id="status">\n  <div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n  </div>\n    <h2><%= T_(" <a class=\'font-bold bidder\' id=\'username1st\' href=\'/u/<[- data.userName ]>?ref_project_id=<[- data.projectId ]>\'><[- (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName ]></a><span id=\'numOfOthers\'></span> placed a bid on <a class=\'trunc project\' href=\'<[- data.linkUrl ]>\'><[- data.projName ]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n</div>\n'}),define('text!templates/dashboard/selected.awarded.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2> <% if (data.bid) {\nif (data.projIsHourly !=null && data.projIsHourly == true) {\n%>\n<%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> awarded your bid of <strong><[= data.currencysign]><[- data.bid.bidAmount ]> <[- data.currencycode ]>/hr for <[- data.bid.bidPeriod ]> hrs/week</strong> for project <a class=\'trunc\' onclick=\'_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedCongratsBuyerAwardYou&quot;]);\' href=\'<[- data.linkUrl ]>\'><[- data.title ]></a>", {data: data}) %>\n<%} else { %>\n<%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> awarded your bid of <strong><[= data.currencysign]><[- data.bid.bidAmount ]> <[- data.currencycode ]> to complete in <[- data.bid.bidPeriod ]><[ if (data.bid.bidPeriod == 1) { ]> day<[ } else { ]> days<[ } ]></strong> for project <a class=\'trunc\' onclick=\'_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedCongratsBuyerAwardYou&quot;]);\' href=\'<[- data.linkUrl ]>\'><[- data.title ]></a>", {data: data}) %>\n<% }\n\n} else { %>\n<%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> awarded your bid for <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.title ]></a>", {data: data}) %>\n<% } %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<ul class="news-list">\n  <li class="news-item last">\n    <div class="descr-long">\n      <p>\n        <Strong><%- T_("Description:") %></Strong>\n        <span id =\'needToShorten\' data-origin=\'<%- data.appended_descr %>\'> <%- data.appended_descr %> </span>\n      </p>\n      <a id=\'seeMore\' style = "display:none" ><%- T_("see more") %></a>\n    </div>\n    <p>\n      <strong><%- T_("Skills:") %></strong>\n      <%- data.jobString %>\n    </p>\n\n    <div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n      <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n          <% if(typeof state !== \'undefined\') {%>\n          <li class="first">\n            <a href = "<%- data.linkUrl %>" class="action-state"> <i class="icon-ok"></i>&nbsp;<% if (state == \'accept\') {%><%-T_("Project Accepted") %>\n            <%} else if (state == \'reject\') {%><%-T_("Project Rejected") %><%}%> </a>\n          </li>\n          <% } %>\n        </ul>\n      </div>\n    </div>\n\n    <div id="action-links" class="actions tabbable">\n      <ul class="nav nav-tabs">\n        <li class="first pmb-start" id="send-message">\n          <a id = "messaging" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Award_DashBidFreelancer\', \'Project_NewsFeed\', \'user_action\', \'click\');"><i class="icon-share-alt"></i>&nbsp;<%- T_("Send Message") %></a>\n        </li>\n        <% if (typeof state !== \'undefined\' && state == \'accept\' && data.projIsHourly ) {%>\n        <li class="">\n          <a id="downloadTimeTrackerBtn" href="<%= desktopAppInstallerUrl %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Download <[- desktopAppName ]>", {\'desktopAppName\': desktopAppName}) %></a>\n        </li>\n        <span class="tipQuestion" id="downloadBtnTip"></span>\n        <% }%>\n      </ul>\n    </div>\n\n    <% if(typeof state === \'undefined\' || state == "") {%>\n    <div class="well">\n      <div id="rejectConfirmModal" class="modal hide fade LiteModal">\n        <div class="LiteModal-inner">\n          <div class="LiteModal-icon">\n            <%= loadSvg(\'flicon-warning\') %>\n          </div>\n          <h4 class="LiteModal-title">\n            <%- T_("Warning: a Milestone Payment has been created for you") %>\n          </h4>\n          <div class="LiteModal-details">\n            <p class="LiteModal-description">\n              <%- T_("Accepting projects with Milestone Payments is one of the easiest ways to maintain a good bid ranking. Repeatedly rejecting projects can lead to incremental penalties.") %>\n              <a target="_blank" href="/community/articles/the-freelancer-com-bid-ranking-guide">\n                <%- T_("Learn more.") %>\n              </a>\n            </p>\n          </div>\n          <div class="LiteModal-footer">\n            <div class="LiteModal-footerItem">\n              <button id="acceptOnRejectBtn"\n                class="btn btn-success"><%- T_("Accept") %></button>\n            </div>\n            <div class="LiteModal-footerItem">\n              <a id="rejectOnRejectBtn"\n                class="LiteModal-cancelAction"><%- T_("Reject") %></a>\n            </div>\n          </div>\n          <a data-dismiss="modal" class="LiteModal-close">\n            <%= loadSvg(\'flicon-close\') %>\n          </a>\n        </div>\n      </div>\n      <div id="rejectBox">\n        <p>\n          <% if(typeof data.hoursLeftStr === "undefined"){ %>\n            <%= T_("Accept the offer and start working on the project?") %>\n          <% } else { %>\n            <% if (data.hoursLeftStr == null) {%>\n              <%= T_("Accept the offer and start working on the project?") %>\n            <% } else { %>\n              <%= T_("You have <strong><[- data.hoursLeftStr]></strong> to accept the offer and begin work on this project.",{data:data}) %>\n              <% if (data.projIsHourly) { %>\n                <div class="alert alert-success">\n                  <%= T_("As this is an hourly project you will only be charged fees when money is released to you. <strong>Accepting this project is free!</strong>") %>\n                </div>\n              <% } else { %>\n                <p class="small"><%= T_("You will be charged a <strong>project fee in accordance with our <a href=\'/feesandcharges\' target=\'_blank\'>Fees and Charges</a> if you accept this project.</strong>") %></p></strong>\n              <% } %>\n            <% } %>\n          <% } %>\n        </p>\n        <div class="form-btn-wrapper">\n          <a class="btn btn-info btn-mini" id="accept"><%- T_("Accept") %></a>\n          <a class="margin-l10" id="rejectConfirm"><%- T_("Reject") %></a>\n        </div>\n      </div>\n\n      <div id="rejectArea" style="display:none;">\n        <p><%- T_("Are you sure you wish to reject the Awarded Project?") %></p>\n        <textarea id="reasonArea" class="ns_half" placeholder="<%- T_("Provide a reason (optional)") %>" style="min-height:90px; width:464px; max-width:464px; margin:5px 0 5px 0;"/>\n        <a class="btn btn-info btn-mini" id = "reject"><%- T_("Reject Awarded") %></a>\n        <a class="btn btn-mini"  id = "cancel-reject"><%- T_("Cancel") %></a>\n      </div>\n      <span class = "hint"></span>\n    </div>\n    <%}%>\n  </li>\n\n</ul>\n'}),define('text!templates/timetracker/time-tracker-download-promotion-modal.htm',[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">&times;</a>\n    <h3><%- T_("Congratulations on accepting to work on an hourly project") %></h3>\n</div>\n<div class="modal-body">\n    <p>\n        <%- T_("We recommend you use the new Freelancer <[- desktopAppName ]> with a bolder and sleeker design to track your hours worked and easily invoice and verify your hours worked to the employer.", {\'desktopAppName\': desktopAppName}) %>\n    </p>\n</div>\n<div class="modal-footer">\n    <a class="btn btn-info modal-btn-download-time-tracker" href="#" onclick="return false"><%- T_("Download Freelancer <[- desktopAppName ]> Now!", {\'desktopAppName\': desktopAppName}) %></a>\n    <a href="/desktop-app"><%- T_("Learn More") %></a>\n</div>\n'});var loadTimeTrackerDownloadPromotionModal=function(a,b){function c(){a(document).ready(function(){h.off('mousedown','.modal-btn-download-time-tracker').on('mousedown','.modal-btn-download-time-tracker',function(a){if(a.which==1||a.which==2)h.modal('hide'),_t.push(['user_action',{section:'DesktopAppModal',label:'Download',action:'click',funnel:'DesktopApp',goal:'Download'}]),window.open(desktopAppInstallerUrl,'_blank')}),h.off('click','.modal-lnk-learn-more-time-tracker').on('click','.modal-lnk-learn-more-time-tracker',function(){if(typeof project!='undefined'&&g.projectID==project.id){h.modal('hide');var b=a('#awarded-bid-list').find('.bid.owner .goToTimeTrackerTab');b.length&&(b.trigger('click'),a('html,body').animate({scrollTop:b.offset().top},500))}else window.location='/projects/'+g.projectID+'.html?promoteTimeTrackerDownload=true';return!1})})}function d(a,b){if(typeof a!='object')return;g=a,e()&&f(b)}function e(){return typeof g.projectID=='undefined'||isNaN(g.projectID)||!g.projectID?!1:!0}function f(d){h=a('.time-tracker-download-promotion-modal'),h.modal('hide').remove(),h=a('<div class="time-tracker-download-promotion-modal modal hide"></div>').appendTo('.gaf-container'),typeof b=='undefined'&&(b=a('#time-tracker-download-promotion-modal-template').html()),h.html(_.template(b,{templateData:g})),c(),h.modal({backdrop:'static',keyboard:!0}),typeof d=='object'&&typeof d.onModalClose=='function'&&h.on('hidden.bs.modal',d.onModalClose)}var g={},h=!1;return{initModal:d}};if(typeof define=='function'&&define.amd)define('project/modules/module-time-tracker-download-promotion-modal',['jquery-wrapper','text!templates/timetracker/time-tracker-download-promotion-modal.htm'],loadTimeTrackerDownloadPromotionModal);else var initTimeTrackerDownloadPromotionModal=loadTimeTrackerDownloadPromotionModal(jq).initModal;define('text!templates/dashboard/selected.accepted.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n\n<h2> <%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\' onclick=\'javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashProjectNav\', \'Project_NewsFeedQuickHirePosted\', \'user_action\', \'click\');\'><[- data.publicName || data.userName ]></a> accepted your project <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<% if(typeof state !== \'undefined\' && (state.indexOf(\'milestoneCreated\') != -1 || state.indexOf(\'paymentCreated\')!=-1)){ %>\n<div class="alert alert-success" id = \'action_history\'>\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <%\n      if(state.indexOf(\'milestoneCreated\') != -1){\n      %>\n      <li class="first">\n        <!-- show milestone hash when bidId is available, for backward compatibility  -->\n        <a id=\'milestoneCreated\' href=\'/projects/<%- data.seoUrl %>.html<% if(data.bidId) { %>#milestones_<%- data.bidId %><% } %>\' class=\'action-state\'><i class="icon-ok"></i>&nbsp;<%-T_("Milestone Created")%></a>\n      </li>\n      <%} if (state.indexOf(\'paymentCreated\')!=-1) {%>\n      <li <% if (state.indexOf(\'milestoneCreated\') == -1){%>class="first" <%}%>>\n        <a id=\'paymentCreated\' href=\'/payments/transactions.php\' class=\'action-state\'><i class="icon-ok"></i>&nbsp;<%-T_("Payment Provided")%></a>\n      </li>\n      <%}  %>\n    </ul>\n  </div>\n</div>\n<%}%>\n\n<div class="actions tabbable" id="cta">\n  <ul class="nav nav-tabs">\n    <li class="first <% if (typeof user_state !== \'undefined\' && user_state.indexOf(\'CM\') != -1 && user_state.indexOf(\'NO\') == -1){%>active<% } %>">\n      <a id="milestone"><i class="icon-share-alt"></i>&nbsp;\n        <span id="btn_create_milestone_label">\n          <% if (((typeof state === \'undefined\') || (typeof state !== \'undefined\' && state !== \'milestoneCreated\'))\n            && !data.milestoneCreated && (data.isAutomaticPayments || data.isHourly)) { %>\n            <%- T_("Setup Billing") %>\n          <% } else { %>\n            <%- T_("Create Milestone") %>\n          <% } %>\n        </span>\n      </a>\n    </li>\n    <li <% if (typeof user_state !== \'undefined\' && user_state.indexOf(\'DT\') != -1 && user_state.indexOf(\'NO\') == -1){%>class="active"<% } %>>\n      <a id="transfer" ><i class="icon-share-alt"></i>&nbsp;<%- T_("Direct Transfer") %></a>\n    </li>\n    <li class="last" id="send-message">\n      <a id = "messaging" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Award_DashBidFreelancer\', \'Project_NewsFeed\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Send Message") %></a>\n    </li>\n  </ul>\n</div>\n<div class="tab-content">\n  <div id = "loadingRest" class = "well" style="display:none">\n    <img src="<%- cdn_url(\'/img/dashboard-loading.gif\', \'//\') %>"><span class="processing-text"><%- T_("Loading...") %></span></img>\n  </div>\n  <form class="form-search" id ="milestone-create-form" <% if (typeof user_state !== \'undefined\' && user_state.indexOf(\'CM\') != -1 && user_state.indexOf(\'NO\') == -1){%>style = "display: block;"<% } %> style = "display: none;" >\n    <div class = "well" >\n      <label for="milestone-amount" class = "control-label" ><%= data.currencySign %> </label>\n      <input type="text" name="milestone-amount" class="form-inline span1" value="<%if((typeof state === \'undefined\' || (typeof state !==\'undefined\' && state.indexOf(\'milestoneCreated\') == -1)) && data.milestoneRequestedDifference > 0){%><%- data.milestoneRequestedDifference %><%}%>">\n      <input type="text" name="milestone-descr" title="" placeholder="<%- T_("Enter a milestone description") %>"\n             class="milestone-descr" maxlength="40"></input>\n      <div class="form-btn-wrapper">\n        <a class="btn btn-info btn-mini" id = "btn-create-milestone" ><%- T_("Confirm") %></a>\n        <a class="btn btn-mini" id= "cancel_milestone"><%- T_("Cancel") %></a>\n      </div>\n      <span class = "hint"></span>\n    </div>\n  </form>\n\n  <form class="form-search" id = "directTransfer" <% if (typeof user_state !== \'undefined\' && user_state.indexOf(\'DT\') != -1 && user_state.indexOf(\'NO\') == -1){%>style = "display: block;"<% } %> style = "display: none;" >\n    <div class = "well" >\n      <div class="alert alert-warning">\n        <strong><%- T_("This payment method is final.")%></strong> <%- T_("We recommend using Milestone Payments for payments sent in advance.") %>\n      </div>\n      <label for="direct-transfer" class = "control-label" ><%= data.currencySign %> </label>\n      <input class="form-inline span1" type="text" name="amount" value="<%if(data.milestoneRequestedDifference  > 0){%><%- data.milestoneRequestedDifference %><%}%>">\n      <textarea name="description" title="" placeholder="<%- T_("Enter a direct transfer description") %>" rows="1" cols="" class="one-row"></textarea>\n      <div class="form-btn-wrapper">\n        <a class="btn btn-info btn-mini" id="btn-transfer"><%- T_("Confirm") %></a>\n        <a class="btn btn-mini" id= "cancel_transfer"><%- T_("Cancel") %></a>\n      </div>\n      <span class = "hint"></span>\n    </div>\n  </form>\n\n</div>\n'}),define('text!templates/dashboard/selected.uploaded.htm',[],function(){return'<div id="uploadFile_<%- data.userName %>_<%- data.projectId %>">\n  <div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n  </div>\n  <div id="status">\n    <h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> uploaded <span id=\'numOfFiles\'>a file</span> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n  </div>\n\n  <ul class="news-list news-list-uploads">\n    <li class="news-item last">\n      <p id="loading" align="center"><%- T_("Loading...") %></p>\n      <p id="loadingFail" align="center" style="display:none"><%- T_("We were unable to load files.")%>&nbsp;&nbsp;<a id="tryAgain"><%= T_("Try again") %></a></p>\n      <!-- imgs -->\n      <ul class = "uploads-imgs"> </ul>\n      <hr style = "display:none" />\n      <!-- documents -->\n      <ul class = "uploads"> </ul>\n    <li class="view-all last">\n      <a href="/projects/<%- data.seoUrl %>.html#files_<%- data.id %>"><i class="icon-comment"></i> <%- T_("View all files...") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/selected.uploaded.doc.htm',[],function(){return'<% if (data.file != null) {%>\n<li>\n  <i class="icon-file"></i>\n  <a href="<%- data.file.url %>"><%- data.file.name %></a>\n  <em>(<%- data.file.size %>)</em>\n</li>\n<% } %>\n'}),define('text!templates/dashboard/selected.uploaded.img.htm',[],function(){return'<% if (data.file != null) {%>\n<li>\n  <img src="<%- data.file.url %>&amp;thumb=true"></img>\n  <a href="<%- data.file.url %>"><%- data.file.name %></a>\n  <em>(<%- data.file.size %>)</em>\n</li>\n<% } %>\n'}),define('text!templates/dashboard/contestReviewReceived.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> provided feedback for completing <a class=\'trunc\' target=\'_blank\' href = \'<[- data.seoUrl ]>\'><[- data.name ]> </a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<% if ( typeof state == \'undefined\') { %>\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <li class="first">\n        <a id=\'feedbackButton\'><i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n        <span class="loading" style="display: none;">\n          <img src="/img/dashboard-loading.gif" />&nbsp;&nbsp;<%- T_("Loading...") %>\n        </span>\n      </li>\n    </ul>\n  </div>\n<% } else if ( typeof state != \'undefined\' || state == "") { %>\n  <div class="alert alert-success" id="action_history">\n    <div class="actions tabbable">\n      <ul class="nav nav-tabs">\n        <% if ( typeof state !== \'undefined\' && (state == \'complete\' || state == \'completed\')) { %>\n        <li class="first">\n          <i class="icon-ok"></i>&nbsp;<strong><%-T_("Feedback Provided") %></strong>\n        </li>\n        <% } %>\n      </ul>\n    </div>\n  </div>\n<% } %>\n'}),define('text!templates/dashboard/reviewPosted.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n\n<% if ( (data.projIsHourly == false || data.invoice_id == null)) { %>\n<h2><strong><%= T_("<a href=\'/u/<[- data.userName ]>.html\'><[- data.userName ]></a></strong> provided feedback for completing <a class=\'trunc\' target=\'_blank\' href = \'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]> </a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<% } else { %>\n<h2><strong><%= T_("<a href=\'/u/<[- data.userName ]>.html\'><[- data.userName ]></a></strong> provided feedback for <a class=\'trunc\' target=\'_blank\' href = \'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]> </a> <span class=\'noTrunc\'><span style=\'font-style:italic\'>(Invoice #<[- data.invoice_id ]>)</span>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n<% } %>\n\n<p id=\'expiredNotice\'><%= T_("Give feedback to let others know what it was like to work with them. (<span id=\'timeleft\'></span>)")%></p>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state != \'undefined\' && (state == \'completed\' || state == \'complete\')) { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%- T_("Feedback Provided") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n<%if(typeof state == \'undefined\') {%>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if ( (data.projIsHourly == false || data.invoice_id == null)) { %>\n    <li class = "first">\n      <a target="_blank" href="/users/review/rate.php?id=<%- data.id%>&to_user=<%- data.fromUserId%>" > <i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n    </li>\n    <% } else { %>\n    <li class = "first">\n      <a target="_blank" href="/users/review/rate.php?id=<%- data.id%>&to_user=<%- data.fromUserId%>&invoice_id=<%- data.invoice_id%>&type=hourly" > <i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n<%}%>\n'}),define('text!templates/dashboard/rehireOption.htm',[],function(){return'<div class="alert" id="rehireArea">\n    <div class="ns_pad clickable" id=\'rehirecheck\' >\n        <input style=\'vertical-align: middle; margin:-2px 3px 0 7px;\' type="checkbox" id="chkbx_rehire" name="chkbx_rehire" class="ns_left">\n        <%= T_("<span>I would like to rehire them for ongoing work</span>\n        <input type=\'hidden\' id=\'rehire-commitment\' data-name=\'commitment\' class=\'span1 margin-l20 number-only\' value=\'5\'>\n        for USD $\n        <input type=\'text\' data-name=\'hourly rate\' style=\'display:inline\' id=\'rehire-hourlyrate\' class=\'form-inline span1 number-only\'>\n        /hr.</span>", {data:data}) %> <span class="tipQuestion" id="rehireTip"></span>\n    </div>\n</div>\n<div>\n    <span class="hint error-msg"></span>\n</div>\n'}),define('text!templates/dashboard/reviewPostedNew.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n\n<% if ( (data.projIsHourly == false || data.invoice_id == null)) { %>\n<h2><strong><%= T_("<a href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a></strong> provided feedback for completing <a class=\'trunc\' target=\'_blank\' href = \'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]> </a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<% } else { %>\n<h2><strong><%= T_("<a href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a></strong> provided feedback for <a class=\'trunc\' target=\'_blank\' href = \'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]> </a> <span class=\'noTrunc\'><span style=\'font-style:italic\'>(Invoice #<[- data.invoice_id ]>)</span>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n<% } %>\n\n<p id=\'expiredNotice\'><%= T_("Give feedback to let others know what it was like to work with them. (<span id=\'timeleft\'></span>)")%></p>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state != \'undefined\' && (state == \'completed\' || state == \'complete\')) { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%- T_("Feedback Provided") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n<%if(typeof state == \'undefined\') {%>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if ( (data.projIsHourly == false || data.invoice_id == null)) { %>\n    <li class = "first">\n      <a id=\'feedbackButton\'><i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n    </li>\n    <% } else { %>\n    <li class = "first">\n      <a id=\'feedbackButton\'><i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n<%}%>\n'}),define('text!templates/dashboard/completeContestReview.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]>\'s</a> feedback has been published for <a class=\'trunc\' href=\'<[- data.seoUrl ]>\'><[- data.name]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<ul class="news-list">\n  <li class="news-item last">\n    <blockquote>\n      <i class="icon-quote"></i>\n      <%- data.message %>\n    </blockquote>\n    <span class="Rating Rating--labeled"\n         data-star_rating="<%- parseFloat(data.rating).toFixed(1) %>">\n        <span class="Rating-total">\n            <span class="Rating-progress"></span>\n        </span>\n    </span>\n  </li>\n</ul>\n'}),define('text!templates/dashboard/completeReview.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n\n<% if ( (data.projIsHourly == false || data.invoice_id == null)) { %>\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]>\'s</a> feedback has been published for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<% } else { %>\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]>\'s</a> feedback has been published for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name]></a> <span class=\'noTrunc\'><span style=\'font-style:italic\'>(Invoice #<[- data.invoice_id ]>)</span>", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n<% } %>\n\n<ul class="news-list">\n  <li class="news-item last">\n    <blockquote>\n      <i class="icon-quote"></i>\n      <%- data.message %>\n    </blockquote>\n    <span class="Rating Rating--labeled"\n         data-star_rating="<%- parseFloat(data.rating).toFixed(1) %>">\n        <span class="Rating-total">\n            <span class="Rating-progress"></span>\n        </span>\n    </span>\n  </li>\n</ul>\n\n<% if(typeof data.myRating != \'undefined\' && data.myRating > 4.5 && data.rating > 4.5) {%>\n<% if (data.isEmployer) { %>\n<p class="margin-t20 margin-b20"><%= T_("Thank you for rating your freelancer and giving them <[- data.myRating ]> stars! We want to hear more about your experience so join the conversation on social media. Tweet us or post about your project on Facebook!", {data: data}) %> </p>\n<% } else { %>\n<p class="margin-t20 margin-b20"><%= T_("Great work! Your employer was very impressed! Show off your great work and tell us about it on social media. This is also a great way to build up your personal brand!</p>", {data: data}) %>\n<% } %>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a target=\'_blank\' class="shareFacebook"> <i class="icon-share-alt"></i>&nbsp; Share on Facebook</a>\n    </li>\n    <li>\n      <a target=\'_blank\' class="shareTwitter"> <i class="icon-share-alt"></i>&nbsp; Share on Twitter</a>\n    </li>\n    <% if (data.isEmployer == false && (typeof data.private === \'undefined\' || typeof data.private !== \'undefined\' && data.private === false)) { %>\n    <li>\n      <a target=\'_blank\' href="/showcase/<%- data.tsId %>/edit#mine"> <i class="icon-share-alt"></i>&nbsp; Showcase your work</a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n\n<%}%>\n'}),define('text!templates/dashboard/freelancerShareMessages.htm',[],function(){return'<% if (message == 0) { %>\n<%= T_("I just got <[- data.rating ]> stars for my latest job on <[- data.site_name]>!", {data: data}) %>\n<% } else if (message == 1) { %>\n<%= T_("Hey <[- data.site_name]>! My employer gave me <[- data.rating ]> stars and said <[- data.message ]>", {data: data}) %>\n<% } else if (message == 2) { %>\n<%= T_("I just finished a project on <[- data.site_name]> and the employer could not be happier. Check it out!", {data: data}) %>\n<% } else if (message == 3) { %>\n<%= T_("Kicking goals on <[- data.site_name]>! Just finished my project for <[- data.publicName || data.userName ]> and received <[- data.rating ]> stars for my work!", {data: data}) %>\n<% } else if (message == 4) { %>\n<%= T_("Wow! Another happy client! I was just awarded <[- data.rating ]> out of <[- data.rating ]> on <[- data.site_name]>.", {data: data}) %>\n<% }  %>\n'}),define('text!templates/dashboard/employerShareMessages.htm',[],function(){return'<% if (message == 0) { %>\n<%= T_("Today I finished my project on <[- data.site_name]> with the help of <[- data.publicName || data.userName ]> who did an incredible job. I am already thinking of what my next project will be!", {data: data}) %>\n<% } else if (message == 1) { %>\n<%= T_("<[- data.publicName || data.userNamee ]> just finished my project on <[- data.site_name]> and I could not be happier! <[- data.myRating ]> stars!", {data: data}) %>\n<% } else if (message == 2) { %>\n<%= T_("Thank you  <[- data.publicName || data.userName ]> for doing an outstanding job on my project on <[- data.site_name]>! You rock!", {data: data}) %>\n<% } else if (message == 3) { %>\n<%= T_("I posted a project to <[- data.name]> on <[- data.site_name]>! <[- data.publicName || data.userName ]> completed my project on time and on budget! I could not be happier.", {data: data}) %>\n<% } else if (message == 4) { %>\n<%= T_("I love my freelancer <[- data.publicName || data.userName ]>! They just finished my project on <[- data.site_name]> and it could not have been easier.", {data: data}) %>\n<% }  %>\n'}),define('text!templates/dashboard/pmbPublic.htm',[],function(){return'<div id="pmb_public_<%- data.project_id %>">\n  <div id = "status"></div>\n  <ul class="news-list news-list-avatar pmbPublicList">\n    <li id="pageBar" class="view-all" style="display:none;">\n      <a id="viewAll"><i class="icon-plus-sign"></i><span>&nbsp;<%-T_("View all")%></span></a>\n      <div id = "scrollBar" style="display:none">\n        <a id="scrollUp"><i class="icon-plus-sign"></i>&nbsp;<%-T_("View previous clarifications")%></a>\n        <span id="scrollPage" style="margin-right:15px; margin-top: -20px; float:right"></span>\n      </div>\n    </li>\n    <li class="news-item first" id="loadingAll">\n      <div id="loading">\n        <p>\n          <%- T_("Loading...") %>\n        </p>\n      </div>\n      <div id="loadingFail" style="display:none">\n        <p>\n          <%- T_("We were unable to load your clarifications.") %>&nbsp;&nbsp;<a id="tryAgain"><%- T_("Try again") %></a>\n        </p>\n      </div>\n\n    </li>\n    <!-- insert each clarification here from pmbPublic.min template -->\n\n    <!-- hide the ability to post new clarifications when the project is not active -->\n    <% if ( typeof state == \'undefined\' || (typeof state == \'undefined\' && state !== \'closed\')) { %>\n      <li class="news-item new_message">\n        <form class="form-search">\n          <div class="profile-pic-wrapper currentUser">\n            <span class="profile-pic"><img src="<%- currentUserImg %>"  alt="profile pic" title="<%- currentUserName %>" class="profile-pic"></span>\n          </div>\n          <textarea type="text" style="resize: none;" class="multiple-row" id = "new_message" placeholder="<%- T_("Write a clarification") %>"></textarea>\n          <input type="hidden" id="project_id" value="<%- data.project_id %>" />\n          <div class="message_throbber" style="display: none; "> <img src="/img/dashboard-pending.gif"> </div>\n          <br>\n          <span class = "hint"> </span>\n        </form>\n      </li>\n    <% } %>\n\n  </ul>\n</div>\n\n<div class="modal hide" id="pmbPublicModal" style="width:360px;">\n  <div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n      &times;\n    </button>\n    <h3><%- T_("Report Message Violation") %></h3>\n  </div>\n  <div class="modal-body">\n    <p>\n      <strong><%- T_("Are you sure you want to report this message?") %></strong>\n    </p>\n    <br>\n    <p>\n      <strong><%- T_("Please select which reason:") %></strong>\n    </p>\n\n    <input type="hidden" id="msg_id"/>\n\n    <select id="message-violation-reason">\n      <% if(typeof data.project_isFulltime != \'undefined\' && data.project_isFulltime == true) {%>\n      <option value="contacts"><%- T_("Contains contact details") %></option>\n      <%}%>\n      <option value="advertising"><%- T_("Does not match brief") %></option>\n      <option value="harassment"><%- T_("Inappropriate or abusive language") %></option>\n      <option value="other"><%- T_("Other") %></option>\n    </select>\n\n    <br>\n    <p>\n      <strong>Detail Violation: </strong>\n    </p>\n    <textarea id="message-violation-comments" style="height: 54px; min-width:300px; max-width: 300px" name="comments"></textarea>\n    <span class = "hint"></span>\n\n  </div>\n  <div class="modal-footer">\n    <a class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></a>\n    <a class="btn btn-info" id=\'modalSubmit\'><%- T_("Report") %></a>\n  </div>\n</div>\n'}),define('text!templates/dashboard/pmbPublicHeader.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' id=\'username1st\' href=\'/u/<[- data.userName ]>.html\'><[- data.userName ]></a><span id=\'numOfOthers\'></span> posted clarification for <a onclick=\'javascript:_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedClarification&quot;]);\' class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n'}),define('text!templates/dashboard/pmbPublic.min.htm',[],function(){return'<li class="news-item" id="<%- data.id %>" data-time="<%- timestamp %>" >\n  <div id = "original">\n    <div class="profile-pic-wrapper">\n      <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n    </div>\n    <h3><a class=\'font-bold\' id=\'username\' href="/u/<%- data.userName %>"><%- data.userName %></a><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h3>\n    <div class="descr-long" style="word-wrap: break-word;">\n      <p id =\'needToShorten\' data-origin = "<%- data.message %>">\n        <%- data.message %>\n      </p>\n      <a id=\'seeMore\'><%- T_("see more") %></a>\n    </div>\n    <% if(data.userName != currentUserName){ %>\n        <div class="close-btn-group btn-group">\n            <a class="close" title="Hide or Report" class="dropdown-toggle" data-toggle="dropdown"><%- T_("Close") %></a>\n            <ul class="dropdown-menu">\n                <li><a id="abusive"><%- T_("report it as abusive") %></li>\n            </ul>\n        </div>\n    <% } %>\n  </div>\n</li>\n'}),define('text!templates/dashboard/pcbPublic.htm',[],function(){return'<div id="pcb_public_<%- contestId %>" class="pcb_notif">\n  <div class="status"></div>\n  <ul class="news-list news-list-avatar pcb_container">\n    <li class="view-all hide">\n        <a class="viewAll">\n          <i class="icon-plus-sign"></i>\n          <span>&nbsp;<%-T_("View all messages")%></span>\n        </a>\n    </li>\n\n    <li class="news-item first loadingAll">\n      <div class="loading">\n        <p>\n          <%- T_("Loading...") %>\n        </p>\n      </div>\n      <div class="loadingFail hide">\n        <p>\n          <%- T_("We were unable to load your messages.") %> <a class="reload-messages"><%- T_("Try again.") %></a>\n        </p>\n      </div>\n    </li>\n\n    <!--insert messages here -->\n\n    <li class="news-item">\n      <form class="form-search">\n        <div class="profile-pic-wrapper currentUser">\n          <span class="profile-pic">\n            <img src="<%- currentUserImg %>"  alt="profile pic"\n              title="<%- currentUserName %>" class="profile-pic">\n          </span>\n        </div>\n        <textarea type="text" class="multiple-row new_message textArea0" name="comment" placeholder="<%- T_("Write a clarification") %>"></textarea>\n        <input type="hidden" name="project_id"  value="<%- contestId %>" />\n        <div class="message_throbber0 hide" >\n          <img src="<%= cdn_url(\'/img/dashboard-pending.gif\') %>">\n        </div>\n        <br>\n        <span class="error-container error0"></span>\n      </form>\n    </li>\n  </ul>\n\n  <div class="modal-container"></div>\n</div>\n'}),define('text!templates/dashboard/pcbMessage.htm',[],function(){return'<li id="pcb-item-<%- msg_id %>" class="news-item pcb-item trunc\n  <% if (!parentId && i >= threadDisplaySize) { %>hide<% } %>"\n  data-msg-id="<%- msg_id %>"\n  data-time="<%- timestamp %>"\n  <% if (parentId) { %>data-parent-id="<%- parentId %>"<%}%> >\n  <div id = "original">\n    <div class="profile-pic-wrapper">\n      <span class="profile-pic"><img src="<%- profile_logo_url %>"\n        alt="profile pic" title="<%- publicUserName %>" class="profile-pic"></span>\n    </div>\n    <h3 class="profile-name">\n      <a class=\'font-bold\' id=\'username\' href="<%- user_url %>">\n        <%- publicUserName %>\n      </a>\n      <em class="timestamp time_text"><%- formattedDate %></em>\n    </h3>\n    <div class="descr-long">\n      <p id =\'needToShorten\' data-origin = "<%- formattedComment %>">\n        <%= formattedComment  %>\n      </p>\n      <a id=\'seeMore\' class=\'seeMore\'><%- T_("more") %></a>\n    </div>\n    <div class="dropdown x-options">\n      <a data-toggle="dropdown">&times;</a>\n      <ul class="dropdown-menu msg-hover">\n        <li>\n            <a class="delete-message" data-target="delete-message" href="javascript:void(0)">\n                <%- T_("Delete") %>\n            </a>\n        </li>\n        <li>\n            <a class="report-message" data-target="report-message" href="javascript:void(0)">\n                <%- T_("Report as abuse") %>\n            </a>\n        </li>\n      </ul>\n    </div>\n    <a class=\'reply-link <% if (!showReply) { %>hide<% } %>\'>\n      <i class="icon-share-alt"></i>&nbsp;<%- T_("Reply") %>\n    </a>\n  </div>\n\n  <% if (!parentId) { %>\n    <ol class="child-thread unstyled contest-replies" data-target="child-thread">\n      <% if (numMessagesExtra > 0) { %>\n        <div class="showExtraMessages">\n          <a class="show-extra-messages" data-msg-id="<%- msg_id %>" >\n            <i class="icon-plus-sign"></i> <%- T_("<[=extra]> replies", {\'extra\': numMessagesExtra}) %>\n          </a>\n        </div>\n      <% } %>\n\n      <!--insert messages here -->\n\n      <li class="news-item pcb-reply hide">\n        <form class="form-search">\n          <div class="profile-pic-wrapper currentUser">\n            <span class="profile-pic">\n              <img src="<%- currentUserImg %>"  alt="profile pic"\n                title="<%- currentUserName %>" class="profile-pic">\n            </span>\n          </div>\n          <textarea type="text" class="multiple-row new_message textArea<%- msg_id %>"\n            name="comment"\n            data-msg-id="<%- msg_id %>"\n            placeholder="<%- T_("Write a reply") %>"></textarea>\n          <input type="hidden" name="parent_id" value="<%- msg_id %>" />\n          <input type="hidden" name="project_id" value="<%- contestId %>" />\n          <div class="message_throbber<%- msg_id %> hide" >\n            <img src="<%= cdn_url(\'/img/dashboard-pending.gif\') %>">\n          </div>\n          <br>\n          <span class="error-container error<%- msg_id %>"></span>\n        </form>\n        <a class="close-reply">\n          &times;\n        </a>\n      </li>\n    </ol>\n  <% } %>\n</li>\n'}),define('text!templates/dashboard/pcbPublicHeader.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- imgUrl %>"\n        alt="profile pic" title="<%- username %>" class="profile-pic"></span>\n</div>\n<h2>\n    <span class=\'numOfOthers\'></span>\n    <%= T_("<[= linkedUser ]> posted on the clarification board for <[= linkedContest ]>", {\'linkedUser\': linkedUser, \'linkedContest\': linkedContest}) %>\n    <em class="timestamp time_text">\n        <%- lib_datetime_relative_date(time) %>\n    </em>\n</h2>\n'}),define('text!templates/contestView/contestMessageModal.htm',[],function(){return'<div id="contest-message-violation" class="modal hide contest-message-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n      <h3><%- T_("Report Message Violation") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to report this message?")%>\n        </strong>\n      </p>\n      <p>\n        <%- T_("Please select which reason:") %>\n      </p>\n      <select id="message-violation-reason">\n          <option value="1"><%- T_("Spam") %></option>\n          <option value="2"><%- T_("Contains contact details") %></option>\n          <option value="3"><%- T_("Inappropriate or abusive language") %></option>\n      </select>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-loading hide" >\n        <img src="<%= cdn_url(\'/img/dashboard-pending.gif\') %>">\n      </div>\n      <div class="error-msg"></div>\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <button class="btn btn-info contest-report-message-violation"\n        data-target="message-report"\n        data-msg-id="<%- msgId %>"\n        data-hash="<%- hash %>"\n      >\n        <%- T_("Report") %>\n      </button>\n    </div>\n</div>\n\n<div id="contest-message-delete" class="modal hide contest-message-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n      <h3><%- T_("Delete Message") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to delete this message?")%>\n        </strong>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-loading hide" >\n        <img src="<%= cdn_url(\'/img/dashboard-pending.gif\') %>">\n      </div>\n      <div class="error-msg"></div>\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <button class="btn btn-info confirm-message-delete"\n        data-target="confirm-delete"\n        data-msg-id="<%- msgId %>"\n        data-hash="<%- hash %>"\n      >\n        <%- T_("Delete") %>\n      </button>\n    </div>\n</div>\n\n<div id="contest-message-delete-thread" class="modal hide contest-message-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n      <h3><%- T_("Delete Message Thread") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to delete this message as well as all replies to this message?")%>\n        </strong>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-loading hide" >\n        <img src="<%= cdn_url(\'/img/dashboard-pending.gif\') %>">\n      </div>\n      <div class="error-msg"></div>\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <button class="btn btn-info confirm-message-thread-delete"\n        data-target="confirm-delete"\n        data-msg-id="<%- msgId %>"\n        data-hash="<%- hash %>"\n      >\n        <%- T_("Delete") %>\n      </button>\n    </div>\n</div>\n'}),define('text!templates/dashboard/milestone.part.released.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> partially released a milestone payment of <strong><[= data.currencysign ]><[- data.amount ]> <[= data.currencycode ]></strong> (<[= data.currencysign ]><[- data.leftAmount ]> <[= data.currencycode ]> left)\nfor <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-info">\n  <strong><%- T_("Milestone details:") %> </strong><%- data.otherReason %>\n</div>\n\n<!-- hide the request to release button if the transcation id is null, for backward compatibility -->\n<% if (data.tranId) {%>\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "" || state == "released" || state == "partialReleased") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && state == \'accept\') { %>\n      <li class="first">\n        <a href=\'<%- data.linkUrl %>#milestones_<%- data.bidId %>\' class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Release Requested") %></a>\n      </li>\n      <%}%>\n      <% if ( typeof state !== \'undefined\' && state == \'released\') { %>\n      <li class="first">\n        <a href=\'<%- data.linkUrl %>#milestones_<%- data.bidId %>\' class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Milestone Released") %></a>\n      </li>\n      <%}%>\n      <% if ( typeof state !== \'undefined\' && state == \'partialReleased\') { %>\n      <li class="first">\n        <a href=\'<%- data.linkUrl %>#milestones_<%- data.bidId %>\' class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Partially Released") %></a>\n      </li>\n      <%}%>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n      <%\n      if(typeof state === \'undefined\' || state == "" ) {%>\n      <a id=\'requestToReleaseBtn\' > <i class="icon-share-alt"></i>&nbsp;<%- T_("Request to Release") %></a>\n      <% } %>\n    </li>\n  </ul>\n</div>\n\n<div class="tab-content">\n  <div class="tab-pane active">\n  </div>\n</div>\n<% } %>\n'}),define('text!templates/dashboard/project.review.active.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<% if (typeof state != \'undefined\' && state == \'rejected\'){ %>\n<h2> <%= T_("Your project <a onclick=\'javascript:_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedCongratsPosted&quot;]);\' class=\'trunc\' href = \'/buyers/draft.php?id=<[- data.id]>\'><[- data.name]> </a><span class=\'noTrunc\'> has been posted ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n<% } else { %>\n<h2> <%= T_("Your project <a onclick=\'javascript:_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedCongratsPosted&quot;]);\' class=\'trunc\' href = \'/projects/<[- data.seoUrl]>.html\'><[- data.name]> </a><span class=\'noTrunc\'> has been posted ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n<% } %>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n      <% if (typeof state != \'undefined\' && state == "rejected") {%>\n          <a href="/buyers/draft.php?id=<%- data.id %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Edit Project") %></a>\n      <% } else { %>\n          <a href="/projects/<%= data.seoUrl %>.html" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashProjectNav\', \'Project_NewsFeedCongratsPosted\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Project") %></a>\n      <% } %>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/quickHireProject.posted.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2> <%= T_("<a class=\'font-bold\' href=\'/u/<[-data.quickhireFreelancerUsername]>\'><[-data.quickhireFreelancerPublicName || data.quickhireFreelancerUsername]></a> has received your project offer for <a class=\'trunc\' href = \'/projects/<[- data.seoUrl]>.html\'><[- data.name]></a> ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<p>\n  <%= T_("Discuss your project offer with them using instant chat. You will be notified when <a href=\'/u/<[-data.quickhireFreelancerUsername]>\'><[-data.quickhireFreelancerPublicName || data.quickhireFreelancerUsername]></a> has accepted your project.", {data: data}) %>\n</p>\n\n<!-- awarded case alert bar-->\n<div class="alert alert-success" id="action_history" style="display:<%- typeof state === \'undefined\' ? \'none\' : \'block\'%>" >\n    <div class="actions tabbable">\n      <ul class="nav nav-tabs">\n        <% if(typeof state !== \'undefined\' && state.indexOf(\'milestoneCreated\')!=-1) {%>\n        <li id="milestone-created-flag">\n          <a href="/projects/<%= data.seoUrl %>.html" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Milestone Created") %></a>\n        </li>\n        <% } %>\n      </ul>\n    </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if(typeof data.currencyId !== \'undefined\') {%>\n    <li class="first" id="create-milestone-tab" >\n      <a id = "btn_create_milestone"> <i class="icon-share-alt"></i>&nbsp;\n        <span id="btn_create_milestone_label">\n          <% if (!data.isMilestoneCreated && (data.isAutomaticPayments || data.isHourly)) { %>\n            <%- T_("Setup Billing") %>\n          <% } else { %>\n            <%- T_("Create Milestone") %>\n          <% } %>\n        </span>\n      </a>\n    </li>\n    <% } %>\n    <li>\n      <a href="/projects/<%= data.seoUrl %>.html" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashProjectNav\', \'Project_NewsFeedQuickHirePosted\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Project") %></a>\n    </li>\n    <li class="last" id="send-message">\n      <a id = "messaging" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Award_DashBidFreelancer\', \'Project_NewsFeed\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Send Message") %></a>\n    </li>\n  </ul>\n</div>\n\n<% if(typeof data.currencyId !== \'undefined\') {%>\n<div class="tab-content">\n    <form class="form-search" id ="milestone-create-form" style="display:none;">\n        <div class = "well" >\n            <label for="milestone-amount" class = "control-label" id="currencyLabel"><%- typeof data.currencySign !== \'undefined\' ? data.currencySign : \'\'%></label>\n            <input type="text" id="milestone-amount" class="form-inline span1" value="" />\n            <input type="text" id="milestone-descr" name="milestone-descr" title="" placeholder="<%- T_("Enter a milestone description") %>"\n            class="milestone-descr-short" maxlength="40" >\n            </input>\n            <div class="form-btn-wrapper">\n                <a class="btn btn-info btn-mini" id = "createMilestone"><%- T_("Create Milestone") %></a>\n                <a class="btn btn-mini" id= "cancelMilestone"><%- T_("Cancel") %></a>\n            </div>\n\n            <span class="hint-milestone error-msg" style="display: none; "></span>\n        </div>\n    </form>\n</div>\n<% } %>\n'}),define('text!templates/dashboard/inlineRehireProject.posted.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2> <%= T_("You have chosen to rehire <a class=\'font-bold\' href=\'/u/<[-data.quickhireFreelancerUsername]>\'><[-data.quickhireFreelancerPublicName || data.quickhireFreelancerUsername]></a> with an hourly project. They have received your project offer for <a class=\'trunc\' href = \'/projects/<[- data.seoUrl]>.html\'><[- data.name]></a> ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="well">\n  <p>\n    <%= T_("You can use this hourly project for any ongoing work that you have for <a href=\'/u/<[-data.quickhireFreelancerUsername]>\'><[-data.quickhireFreelancerPublicName || data.quickhireFreelancerUsername]></a>. <br>Offering them an hourly project is free!", {data: data}) %>\n    <% if(!data.notShowEmployerFee) { %>\n      <span class="tipQuestion" id="rehireTip"></span>\n    <% } %>\n  </p>\n</div>\n<p>\n  <%= T_("Discuss your project offer with them using instant chat. You will be notified when <a href=\'/u/<[-data.quickhireFreelancerUsername]>\'><[-data.quickhireFreelancerPublicName || data.quickhireFreelancerUsername]></a> has accepted your project.", {data: data}) %>\n</p>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n      <a href="/projects/<%= data.seoUrl %>.html" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashProjectNav\', \'Project_NewsFeedQuickHirePosted\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Project") %></a>\n    </li>\n    <li class="last" id="send-message">\n      <a id = "messaging" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Award_DashBidFreelancer\', \'Project_NewsFeed\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Send Message") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/project.review.reject.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<!-- dont have a reason -->\n<% if ( (typeof data.rejectReasonConfig === "undefined" || data.rejectReasonConfig == null) && (data.addtionalMsg == null || data.addtionalMsg =="") ) {%>\n<h2> <%= T_("Your project <a class=\'trunc\' href=\'/buyers/draft.php?id=<[- data.id]>\'><strong><[- data.name]></strong></a><span class=\'noTrunc\'> has been rejected.", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n<% } else {%>\n<h2> <%= T_("Your project <a class=\'trunc\' href=\'/buyers/draft.php?id=<[- data.id]>\'><strong><[- data.name]></strong></a><span class=\'noTrunc\'> has been rejected for the following reason: ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n<ul class="news-list">\n  <li class="news-item last">\n\n      <%\n      if(typeof data.rejectReasonConfig !== "undefined" && data.rejectReasonConfig != null) { %>\n      <p>\n      <%\n        jQuery.each(data.rejectReasonConfig, function(index, value) {\n      %>\n        * <%= value.descr %>\n        <br>\n      <% });%>\n      </p>\n      <% } %>\n\n    <% if (data.addtionalMsg != null && data.addtionalMsg !=""){ %>\n    <p>\n      <strong><%- T_("Additional Reason: ") %></strong><%- data.addtionalMsg %>\n    </p>\n    <% } %>\n  </li>\n</ul>\n\n<% } %>\n'}),define('text!templates/dashboard/directTransferDone.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> provided a direct payment of <strong><[= data.currencysign ]><[- data.amount ]> <[= data.currencycode ]></strong><[ if(data.id != null) { ]> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a><[ } ]> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-info">\n  <strong><%- T_("For: ") %></strong> <%- data.otherReason %>\n</div>\n'}),define('text!templates/dashboard/requestToRelease.htm',[],function(){return's<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> requested you release the milestone of <strong><[= data.currencysign ]><[- data.amount ]> <[= data.currencycode ]></strong> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-info">\n  <strong><%- T_("Milestone details:") %> </strong><%- data.descr %>\n</div>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <li class="first">\n        <% if(typeof state !== \'undefined\') {%>\n        <% if (state == "accept") {%>\n        <!-- display the bookmark has only when the data.bidId is available, for backward compatibility  -->\n        <a href="/projects/<%- data.seoUrl %>.html<% if(data.bidId) { %>#milestones_<%- data.bidId %><% } %>"\n            class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%-T_("Milestone Released")%></a>\n        <% } else {%>\n        <a href="/projects/<%- data.seoUrl %>.html<% if(data.bidId) { %>#milestones_<%- data.bidId %><% } %>"\n            class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Partially Released")%></a>\n        <% } }%>\n      </li>\n    </ul>\n  </div>\n</div>\n\n<% if(typeof state === \'undefined\' || state == "") {%>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a id="showReleaseBox"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Release Milestone") %></a>\n    </li>\n\n  </ul>\n\n  <div class="tab-content">\n    <form class="form-search">\n      <div class="well" id="releaseBox" style=" display: none;">\n        <p for="milestone-amount" style=\'display:inline\' class="control-label"><%- T_("Confirm the amount to release as payment: ") %> <%= data.currencysign %></p>\n        <input type="text" style=\'display:inline\' name="milestone-amount" class="form-inline span1"  value="<%- data.amount %>">\n        <span style=\'font-size: 13px;color: #666;border: none;\'><%= data.currencycode %></span>\n        <div class="form-btn-wrapper">\n          <a id="accept" class="btn btn-info btn-mini"><%- T_("Release") %></a>\n          <a id="reject" class="btn btn-mini"><%- T_("Cancel") %></a>\n        </div>\n        <span class = "hint"></span>\n      </div>\n    </form>\n  </div>\n</div>\n\n<%}%>\n'}),define('text!templates/dashboard/selected.denied.htm',[],function(){return'<div id="denied_bid_<%- data.projectId %>">\n  <div id="status">\n    <div class="profile-pic-wrapper">\n      <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n    </div>\n    <h2> <%= T_("Unfortunately, <a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- user ]></a> has declined your offer for <a class=\'trunc\' onclick=\'javascript:_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedSelectedDenied&quot;]);\' href=\'<[- data.linkUrl ]>\'><[- data.name ]>.</a>", {user : (typeof(data.publicName) !== \'undefined\') ? data.publicName : data.userName, data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n  </div>\n\n  <% if (typeof data.reason !== \'undefined\' && data.reason.length !=0 ) {%>\n  <div id="reasonTag" class = "descr-long alert alert-info">\n    <strong><%- T_("Reason: ")%></strong>\n    <span id =\'needToShorten\' data-origin = "<%- data.reason %>"> <%- data.reason %> </span>\n    <a id=\'seeMore\' style = "display:none" ><%- T_("see more")%></a>\n  </div>\n  <%}%>\n\n  <% if(data.projectType == \'hireMe\') {%>\n  <div id="recommendedFreelancers"></div>\n  <%} else {%>\n  <div id="awardOthers">\n    <p class="awardOthersText">\n    </p>\n  </div>\n  <!-- insert other bids here-->\n  <div id=\'allBids\'></div>\n  <% } %>\n</div>\n'}),define('text!templates/dashboard/recommendedFreelancers-item.htm',[],function(){return'<li class="<%- index == 0 ? \'first\' : "" %>">\n  <div class="container-fluid" style="padding:0px 10px 0px 10px;margin:10px 0px 0px 0px">\n    <div class="user_thumbnail span1 margin-0" style="margin:0px 10px 5px 10px;">\n      <a href="/u/<%- username%>"><img class="thumbnail pull-left"  height="32px" width="32px" src="<%- profile_logo_url %>"></a>\n    </div>\n    <div class="span5 row margin-l5" >\n      <a class="font-bold" href="/u/<%- username%>"><%- username %></a><img style="margin-left:10px;" src="<%- window.location.origin+\'/\'+flag_icon %>" alt="<%- country %>">\n      <div class="bidder-reputation-stars">\n        <div class="rating-wrap on-page-display margin-0 span2">\n          <span class="Rating">\n              <span class="Rating-total">\n                  <span class="Rating-progress" style="width:<%- typeof stars !== \'undefined\' ? stars * 20 : 0 %>%"></span>\n              </span>\n          </span>\n        </div>\n        <span class="left margin-l5"> <a href=""> <span><%- typeof stars !== \'undefined\' ? stars.toFixed(1) : \'\' %></span> </a> </span>\n      </div>\n      <div class="earnings-container small span2 margin-l20">\n        <span class="pull-left margin-r5">$</span>\n        <div class="earnings">\n          <div class="active-earnings" style="width:<%- earning_percentage %>%;"></div>\n        </div>\n        <span class="ratings-num margin-l5">\n          <%- earning %>\n        </span>\n      </div>\n      <div class="margin-l20">\n        <a href="/u/<%- username%>">(<%- review_count %> <%- T_("reviews") %>)</a>\n      </div>\n    </div>\n    <div class="hireme-wrap span2 margin-0">\n      <a onclick="javascript:_ttref.push([\'_setCookie\',\'HireMe_RejectNewsfeedButton\']);" href="/u/<%- username%>&hireme=true&project_id=<%- projectId %>" class="btn fl-bt-skin project-bidder-hireme"><span class="fl-icon-bird"></span><%- T_("Hire Me") %></a>\n      <p style="text-align:center">\n        <strong>$<%- hourlyrate %> USD/hr </strong>\n      </p>\n    </div>\n    <div class="clear"></div>\n    <p>\n      <strong><%- T_("Top Skills:") %></strong>&nbsp;\n      <% for(var i = 0; i < top_skills.length; i++){%>\n      <%- top_skills[i].name + (i != top_skills.length-1 ? ", " : "") %>\n      <% }%>\n    </p>\n  </div>\n</li>\n'}),define('text!templates/dashboard/recommendedFreelancers.htm',[],function(){return'<div id="recommendedFreelancerArea">\n    <p>\n        <%- T_("We recommend you hire one of the following Freelancers instead:") %>\n    </p>\n    <ul class="news-list news-list-avatar news-list-ratings freelancer-list">\n        <li class=" first">\n            <p class= "rf-loading" style="text-align:center;margin:5px;0;5px;0"><img style="margin-right: 8px;" src="/img/dashboard-loading.gif" />Loading...\n            </p>\n            <p class="errorLoading" style="text-align:center;margin:5px;0;5px;0;display:none">\n                Sorry, Loading fails, Please <a id="tryAgainLoadingRecommandedFreelancers">Try again</a>.\n            </p>\n        </li>\n    </ul>\n    <br>\n</div>\n<p>\n    <%- T_("You may also find another freelancer from more than 7 million users on our website. Alternatively, you may repost this project and receive bids from interested freelancers.") %>\n</p>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href = "<%- typeof data.jobsURL === \'string\'? \'/freelancers/skills\'+data.jobsURL+\'?utm_campaign=hireme_award_rejected&utm_medium=newsfeed&utm_source=findfreelancer&utm_content=employer\': \'/freelancers/\' %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Find Another Freelancer") %></a>\n        </li>\n        <li>\n            <a href = "/buyers/repost.php?id=<%- data.id %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Repost this Project") %></a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/hiremeOpenToBidding.htm',[],function(){return'<ul class="news-list">\n    <li class="news-item last">\n        <p>\n            <%= T_("We recommend opening this project up for bidding instead. There are millions of available freelancers waiting to get your work done right away! Freelancers will be notified and you will <strong>start receiving bids within minutes!</strong>") %>\n        </p>\n    </li>\n</ul>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href = "/buyers/repost.php?id=<%- data.id %>&ttref=<%- ttref %>&utm_campaign=hireme_award_<%-eventType%>&utm_medium=newsfeed&utm_source=opentobidding&utm_content=employer" > <i class="icon-share-alt"></i>&nbsp;<%- T_("Open to bidding!") %></a>\n        </li>\n    </ul>\n</div>\n'}),typeof define=='function'&&define.amd?define('hireme/hiremeABTest',[],hiremeABTest):window.HiremeABTest=new hiremeABTest,define('text!templates/dashboard/hireMe.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<% if (data.projIsHourly !=null && data.projIsHourly == true) { %>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> offered to hire you for <[ if (data.bid) { ]><strong><[- data.currencySign]><[- data.bid.sum ]> <[- data.currencyCode ]>/hr (<[- data.bid.period]> hrs/week)</strong><[ } ]> for <a class=\'trunc\' onclick=\'_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedOfferToHireMe&quot;]);\' href=\'<[- data.linkUrl ]>\'><[- data.name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<% } else { %>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> offered to hire you for <[ if (data.bid) { ]><strong><[- data.currencySign]><[- data.bid.sum ]> <[- data.currencyCode ]> to complete in <[- data.bid.period ]><[ if (data.bid.period == 1) { ]> day<[ } else { ]> days<[ } ]></strong><[ } ]> for <a class=\'trunc\' onclick=\'_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedOfferToHireMe&quot;]);\' href=\'<[- data.linkUrl ]>\'><[- data.name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<%}%>\n<% if (data.featured !=null && (data.featured == true || data.featured == \'true\')) { %>\n<ul class="promotions"><li data-promotion="featured">featured</li></ul>\n<%}%>\n<ul class="news-list">\n    <li class="news-item last">\n        <div>\n            <p>\n                <Strong><%- T_("Description:") %></Strong>\n                <span id =\'needToShorten\' data-origin=\'<%- data.appended_descr %>\'> <%- data.appended_descr %> </span>\n            </p>\n            <a id=\'seeMore\' style = "display:none" ><%- T_("see more") %></a>\n        </div>\n        <p>\n            <strong><%- T_("Skills:") %></strong>\n            <%- data.jobString %>\n        </p>\n\n        <!-- action history-->\n        <div class="alert alert-success <%- (typeof state !== \'undefined\' && state === \'counteroffer_rejected\')?\'alert-info\':\'\' %>" id="action_history" style="display:<% if(typeof state === \'undefined\' || state == \'\') {%> none <% } %>" >\n            <div class="actions tabbable">\n                <ul class="nav nav-tabs">\n                    <% if ( typeof state !== \'undefined\') { %>\n                    <li class="first">\n                        <a href="<%- data.linkUrl %>" class="action-state"> <i class="icon-ok"></i>&nbsp;\n                        <% if (state == \'accept\') {%>\n                          <%- T_("Project Accepted") %>\n                        <%} else if (state == \'reject\') {%>\n                          <%- T_("Project Rejected") %>\n                        <%} else if (state == \'counteroffer_accepted\') {%>\n                          <%- T_("Counteroffer Accepted") %>\n                        <%} else if (state == \'counteroffer_rejected\') {%>\n                          <%- T_("Your counteroffer was rejected by the employer") %>\n                        <%} else if (state == \'counteroffer_pending\') {%>\n                          <%- T_("Pending Counteroffer") %>\n                        <%}%> </a>\n                    </li>\n                    <%}%>\n                </ul>\n            </div>\n            <% if(typeof state !== \'undefined\' && (state == "counteroffer_pending" || state == "counteroffer_accepted" || state == "counteroffer_rejected") ) {%>\n            <div id="counterOfferHistoryBox" style="margin: 5px 0 0 22px;">\n\n                <p>\n                    <strong><%= T_("Original offer")%></strong>:&nbsp;\n                    <% if(data.projIsHourly) { %>\n                      <%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.bid.sum]>/hr in <[-data.bid.period]> hrs/week",{data:data}) %>\n                    <% } else { %>\n                      <%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.bid.sum]> in <[-data.bid.period]> days",{data:data}) %>\n                    <% } %>\n                </p>\n                <p>\n                    <strong><%= T_("Your counteroffer")%></strong>:&nbsp;\n                    <% if(data.projIsHourly) { %>\n                      <%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-sellerCounterOffer.newAmount]>/hr in <[-sellerCounterOffer.newPeriod]> hrs/week",{data:data,sellerCounterOffer:data}) %>\n                    <% } else { %>\n                      <%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-sellerCounterOffer.newAmount]> in <[-sellerCounterOffer.newPeriod]> days",{data:data,sellerCounterOffer:data}) %>\n                    <% } %>\n                </p>\n                <% if(data.comment) {%>\n                <p>\n                    <i>"<%- data.comment %>"</i>\n                </p>\n                <% } %>\n            </div>\n            <% } %>\n        </div>\n\n        <div id="action-links" class="actions tabbable">\n            <ul class="nav nav-tabs">\n                <li class="first pmb-start" id="send-message">\n                    <a id = "messaging"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Send Message") %></a>\n                </li>\n                <% if (typeof state !== \'undefined\' && state == \'accept\' && data.projIsHourly ) {%>\n                <li class="">\n                    <a id="downloadTimeTrackerBtn" href="<%= desktopAppInstallerUrl %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Download <[- desktopAppName ]>", {\'desktopAppName\': desktopAppName}) %></a>\n                </li>\n                <span class="tipQuestion" id="downloadBtnTip"></span>\n                <% }%>\n            </ul>\n        </div>\n\n        <% if(typeof state === \'undefined\' || state == "") {%>\n        <div class="well">\n            <div id="rejectConfirmModal" class="modal hide fade LiteModal">\n                <div class="LiteModal-inner">\n                    <div class="LiteModal-icon">\n                        <%= loadSvg(\'flicon-warning\') %>\n                    </div>\n                    <h4 class="LiteModal-title">\n                        <%- T_("Warning: a Milestone Payment has been created for you") %>\n                    </h4>\n                    <div class="LiteModal-details">\n                        <p class="LiteModal-description">\n                            <%- T_("Accepting projects with Milestone Payments is one of the easiest ways to maintain a good bid ranking. Repeatedly rejecting projects can lead to incremental penalties.") %>\n                            <a target="_blank" href="/community/articles/the-freelancer-com-bid-ranking-guide">\n                                <%- T_("Learn more.") %>\n                            </a>\n                        </p>\n                    </div>\n                    <div class="LiteModal-footer">\n                        <div class="LiteModal-footerItem">\n                            <button id="acceptOnRejectBtn"\n                                class="btn btn-success"><%- T_("Accept") %></button>\n                        </div>\n                        <div class="LiteModal-footerItem">\n                            <a id="rejectOnRejectBtn"\n                                class="LiteModal-cancelAction"><%- T_("Reject") %></a>\n                        </div>\n                    </div>\n                    <a data-dismiss="modal" class="LiteModal-close">\n                        <%= loadSvg(\'flicon-close\') %>\n                    </a>\n                </div>\n            </div>\n            <div id="acceptBox">\n                <p class="options">\n                    <% if(typeof data.hoursLeftStr === "undefined"){ %>\n                    <%= T_("Accept the offer and start working on the project?") %>\n                    <% } else { %>\n                    <% if (data.hoursLeftStr == null) {%>\n                    <%= T_("Accept the offer and start working on the project?") %>\n                    <% } else { %>\n                    <%= T_("You have <strong><[- data.hoursLeftStr]></strong> to accept the offer and begin work on this project.",{data:data}) %>\n                    <% if(data.projIsHourly) { %>\n                      <div class="alert alert-success">\n                        <%= T_("As this is an hourly project you will only be charged fees when money is released to you. <strong>Accepting this project is free!</strong>") %>\n                      </div>\n                    <% } else { %>\n                      <p class="small"><%= T_("You will be charged a <strong>project fee in accordance with our <a href=\'/feesandcharges\' target=\'_blank\'>Fees and Charges</a> if you accept this project.</strong>") %></p></strong>\n                    <% } %>\n                    <% } %>\n                    <% } %>\n                </p>\n                <a id = "accept" class="btn btn-info btn-mini"><%- T_("Accept") %></a>\n                <a id = "rejectBtn" class="btn btn-mini"><%- T_("Reject") %></a>\n            </div>\n\n            <div id="rejectBox" style="display:none;">\n                <p>\n                    <%- T_("Are you sure you wish to reject the Awarded Project?") %>\n                </p>\n                <textarea id="reasonArea" class="ns_half" placeholder="<%- T_("Provide a reason (optional)") %>" style="min-height:90px; width:468px; max-width:468px; margin:5px 0 5px 0;"/>\n                <a class="btn btn-info btn-mini" id = "reject"><%- T_("Reject Awarded") %></a>\n                <a class="btn btn-mini"  id = "cancel-reject"><%- T_("Cancel") %></a>\n            </div>\n\n            <div id="counterOfferBox" style="display:none;">\n                <a class="close close-seller-counter-offer-form">&times;</a>\n                <span class="bold"><%- T_("Are you sure you want to reject this project offer?") %></span>\n                <span class="text-dark"><%- T_("If you are interested in working on this project but require a larger project budget, you can make a counter offer now:") %></span>\n                <div class="clear"></div>\n                <div class="seller-counter-offer-form text-dark">\n                    <div class="form-inline">\n                        <div class="control-group margin-t10 inline-block" style="vertical-align:top">\n                            <div class="controls">\n                                <div class="input-prepend input-append">\n                                    <span class="add-on currency-sign"><%= data.currencySign%></span>\n                                    <input class="input-mini counter-offer-new-amount" type="text">\n                                    <span class="add-on currency-code margin-r5"><%- data.currencyCode%></span>\n                                    <% if (!data.projIsHourly) { %>\n                                    <%- T_("to complete in ") %>\n                                    <% } else { %>\n                                    <%- T_("per hour for") %>\n                                    <% } %>\n                                    <span class="help-block margin-0 smaller" style="display:none"></span>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="control-group inline-block margin-t10 margin-l5" style="vertical-align:top">\n                            <div class="controls">\n                                <input type="text" class="counter-offer-new-period input-mini margin-r5">\n                                <% if (!data.projIsHourly) { %>\n                                <%- T_("days") %>\n                                <% } else { %>\n                                <%- T_("hours per week") %>\n                                <% } %>\n                                <span class="help-block margin-0 smaller" style="display:none"></span>\n                            </div>\n                        </div>\n                        <div class="clear"></div>\n                        <div class="control-group inline-block">\n                            <div class="controls">\n                                <textarea class="counter-offer-comment" placeholder="<%- T_("Message to employer (optional)") %>" style="min-height:90px; min-width:450px;max-width:450px;"></textarea>\n                                <span class="help-block margin-0 smaller" style="display:none"></span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="control-group submit-group">\n                        <div class="controls">\n                            <a href="#" onclick="return false;" class="btn btn-info btn-mini margin-r5" id="btn-create-seller-counter-offer"><%- T_("Make a Counteroffer") %></a>\n                            <img src="<%= cdn_url(\'/img/ajax-loader.gif\') %>" style="display:none" class="loader"/>\n                            <a href="#" onclick="return false;" class="btn btn-mini lnk-reject-project-from-seller-counter-offer-form margin-r5" id ="rejectBtnInCounterofferBox" ><%- T_("Reject this project") %></a>\n                            <a class="btn btn-mini"  id = "cancel-reject"><%- T_("Cancel") %></a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <%} %>\n            <span class = "hint"></span>\n\n    </li>\n</ul>\n'}),define('text!templates/dashboard/newDispute.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> has lodged a dispute against you for project <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.name ]></a>.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<!-- backward compatibility, though reason is mandatory -->\n<% if (typeof data.reason != \'undefined\' && data.reason != null ) { %>\n<div class="alert alert-info">\n  <strong><%- T_("Reason:") %></strong>&nbsp;\n    <% if (data.reason.length < 160) {%>\n      <%- data.reason %>\n    <% } else {  %>\n      <%- data.reason.substr(0,150) %>...\n    <% }%>\n</div>\n<% } %>\n\n<ul class="news-list">\n  <li class="news-item last">\n    <p>\n      <%= T_("<strong>Note:</strong> Failure to take action on this dispute will result in the favour of <a href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a>. <span id = \'restTime\'> </span>", {data: data}) %>\n    </p>\n\n  </li>\n</ul>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a href="/dispute/disputestage.php?id=<%- data.dispute_id%>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Dispute") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/escalateDispute.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> has escalated the dispute to arbitration.\n<br>\nFailure to take action on this dispute will result in the favour of <a href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a>. <span id = \'restTime\'> </span>", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="last">\n      <a href="/dispute/disputestage.php?id=<%- data.dispute_id%>"> <i class="icon-share-alt"></i> <%- T_("View Dispute") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/emailChange.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<div class="alert alert-error request-error hide" data-default="<%- T_("There is an error on your request. Please try again.") %>"></div>\n<h2><%= T_("To complete your change of email request, please verify the email sent to <a href = \'/users/email-change/complete.php?requestId=<[- data.requestId]>\'><[- data.new_email]></a>", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a href="/users/email-change/complete.php?requestId=<%- data.requestId %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Verify Email") %></a>\n    </li>\n    <li >\n      <a href class="resend-code" data-request="<%- data.requestId %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Resend Email ") %></a>\n    </li>\n    <li class="last">\n      <a href="/users/change-password-email.php"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Change Email Address ") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/buyFreeMarketService.htm',[],function(){return'<div class="profile-pic-wrapper"><span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("Marketplace Service purchased. You will be notified when <a href = \'/users/<[- data.userName]>.html\'><[- data.userName]></a> accepts and starts work on <a class=\'trunc\' href = \'/projects/<[- data.projectid]>.html\'><[- data.name]></a>.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n'}),define('text!templates/dashboard/freeMarketServiceExpired.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2><%= T_("Your Marketplace Service <a class=\'trunc\' href=\'/marketplace/product/<[- data.seo_url]>.html\'><[- data.name]></a><span class=\'noTrunc\'> is about to expire.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a id = \'renewService\' href="/marketplace/store.php?filter=approved"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Renew Service") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/freeMarketServiceIsExpired.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("You Marketplace Service <a class=\'trunc\' href=\'/marketplace/product/<[- data.seo_url]>.html\'><[- data.name]></a><span class=\'noTrunc\'> has expired.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a id = \'renewService\' href="/marketplace/store.php?filter=approved"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Renew Service") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/sellFreeMarketService.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href = \'/users/<[- data.userName]>.html\'><[- data.userName]></a> purchased your service <a class=\'trunc\' onclick=\'_ttref.push([&quot;_clearEntrypoint&quot;, &quot;Project&quot;], [&quot;_setEntrypoint&quot;, &quot;Project_NewsFeedFreemarketServices&quot;]);\' href = \'/projects/<[- data.id]>.html\'><[- data.name]></a>.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<ul class="news-list">\n  <li class="news-item last">\n    <div class="well">\n      <div id = "acceptBox">\n        <p class="options">\n          <%= T_("Accept to start work on <a href=\'/u/<[- data.userName ]>\'><[- data.userName ]></a>\'s project?", {data: data}) %>\n        </p>\n        <a id = "accept" class="btn btn-info btn-mini"><%- T_("Accept") %></a>\n        <a id = "rejectBox" class="btn btn-mini"><%- T_("Reject") %></a>\n      </div>\n\n      <div id="rejectArea" style="display:none;">\n        <p>\n          <%- T_("Are you sure you wish to reject the Project?") %>\n        </p>\n        <textarea id="reasonArea" class="ns_half" placeholder="<%- T_("Provide a reason (optional)") %>" style="min-height:90px; width:464px; max-width:464px; margin:5px 0 5px 0;"></textarea>\n        <a class="btn btn-info btn-mini" id = "reject"><%- T_("Reject Awarded") %></a>\n        <a class="btn btn-mini"  id = "cancel-reject"><%- T_("Cancel") %></a>\n      </div>\n      <span class = "hint"></span>\n\n    </div>\n  </li>\n</ul>\n'}),define('text!templates/dashboard/verifyPhone.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%- T_("You have successfully completed phone verification for your account.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n'}),define('text!templates/dashboard/adminForceVarifyPhone.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2><%= T_("Phone verification required. Due to recent activity, your account has been protected for your benefit and requires phone verification to confirm its security.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == \'\' ) {%> none <% } %>" >\n   <div class="actions tabbable">\n     <ul class="nav nav-tabs">\n       <% if(typeof state != \'undefined\' && state == \'verified\') {%>\n       <li class="first">\n         <a href="<%- data.linkUrl %>" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%- T_("Phone Verified") %></a>\n       </li>\n       <% } %>\n     </ul>\n   </div>\n </div>\n\n<% if(typeof state == \'undefined\' || state == null) {%>\n<div class="action tabbable">\n   <ul class="nav nav-tabs">\n     <li class="last">\n       <a href="/users/phoneverify.php">\n       <i class="icon-share-alt"></i><%- T_("Verify Now") %></a>\n     </li>\n   </ul>\n</div>\n<% } %>\n'}),define('text!templates/dashboard/yahooMailAlert.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"> <img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"> </span>\n</div>\n\n<h2><%- T_("Please be aware that Yahoo has been delaying mail delivery for some Freelancer users. We recommend using an alternate email account if you have been affected.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<ul class="nav nav-tabs">\n  <li class="first">\n    <a href="/users/change-password-email.php"><i class="icon-share-alt"></i>&nbsp;<%= T_("Change Email") %></a>\n  </li>\n</ul>\n'}),define('text!templates/dashboard/adminWarningUserBidRestriction.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"> <img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2>\n    <%if (typeof data.warning !== \'undefined\' && typeof data.warning.reason !== \'undefined\' && data.warning.reason !== \'\'){%>\n        <%if (data.warning.reason_name == \'High dispute rate\'){%>\n            <p><%- T_("A system check on your account indicates an unusually high dispute rate. This is not beneficial for your profile as this represents negative experience to users on our site.") %></p>\n            <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n            <% if(typeof data.additionaltxt !== \'undefined\' && data.additionaltxt.trim().length >0 ) {%>\n                <p><%- data.additionaltxt %></p>\n            <%}%>\n            <%if (data.warning.penalty == \'Email Warning\') {%>\n                <p><%- T_("We are eager to see you grow on our site and see you succeed with your freelancing career. Therefore, we kindly urge you to strive and give the best services you are capable of. Successful users on our site ensure that they commit to every proposal they submit for every project.") %></p>\n                <p><%- T_("No actions will be held against your account. We remind you to improve your standing and to avoid any sanctions that can be held against your account if your dispute rate increases henceforth.") %></p>\n            <%} else if (data.warning.penalty == \'Bids Restriction\') {%>\n                <p><%= T_("This notification serves as a 2nd warning regarding the increase of dispute count on your profile. A restriction on the number of bids you can place has been assigned as a penalty until the <strong><[- data.date_expired]></strong>. Further infractions may result in your account being suspended or closed as per our terms of service, should the number of disputed projects on your account increase.", {data: data}) %></p>\n            <%}%>\n        <%} else{ %>\n            <p><%= T_("You have been issued a warning for <strong><[- data]></strong>", {data: data.warning.reason}) %></p>\n        <%} %>\n    <%} else{ %>\n        <%- T_("You have been issued a warning.") %>\n    <%} %>\n\n    <%if (data.warning.reason_name != \'High dispute rate\' ) {%>\n        <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n        <% if(typeof data.additionaltxt !== \'undefined\' && data.additionaltxt.trim().length >0 ) {%>\n            <p><%- data.additionaltxt %></p>\n        <%}%>\n        <%if (data.warning.penalty != \'Work Restriction\' && data.warning.penalty != \'Full Restriction\'){%><p>\n            <%if (data.warning.penalty == \'Bids Restriction\') {%>\n                <%= T_(" A restriction on the number of bids you can place has been issued as a penalty until <strong><[- data.date_expired]></strong>.", {data: data}) %>\n            <%}%>\n            <%= T_("Further infractions may result in your account being suspended or closed as per our <a target=\'_blank\' href=\'/about/terms\'>terms of service</a>.") %></p>\n        <%}%>\n    <%} %>\n\n    <%if (data.warning.penalty == \'Work Restriction\' || data.warning.penalty == \'Full Restriction\') {%>\n        <p>\n        <%- T_("A restriction on your account has been assigned as a penalty.") %>\n        <%if (data.warning.penalty == \'Work Restriction\') {%>\n            <%- T_("You can still work on your currently awarded projects and receive/release payments, but you cannot bid on/post new projects.") %>\n        <%} else {%>\n            <%- T_("You can continue your currently awarded projects, but you will not be able to withdraw funds/transfer payments.") %></p>\n            <p><%- T_("We encourage you to cooperate with your employer/freelancer and resolve the issue as soon as possible. The penalty on your account will only be lifted once your current issue is resolved.") %>\n        <%}%>\n        </p>\n\n        <p><%- T_("If you have any further questions, please do not hesitate to contact support.") %></p>\n    <%}%>\n'}),define('text!templates/dashboard/contestEntryRated.htm',[],function(){return'<div class="contest-entry">\n  <div id = "status"></div>\n  <div id="content">\n    <ul class="news-list">\n      <li class="news-item first">\n        <div id="loadingAll">\n          <img src="/img/dashboard-loading.gif" /><%- T_("Loading entries...") %>\n        </div>\n        <ul class = "gallery clearfix">\n          <li id="spaceHolder" style="display:none;"></li>\n          <li id="bottomHolder" style="display:none;"></li>\n          <div class=\'clear\'></div>\n          <div id="pageBar" class="view-all last">\n            <ul class="nav nav-tabs">\n              <li class="first" id="viewMore">\n                <a><i style="margin-top: 1px;" class="icon-plus-sign"></i>&nbsp;<%- T_("View More Entries") %></a>\n              </li>\n              <li id="viewAll">\n                <a href="<%- data.contestSeoUrl %>"><i class="icon-share-alt"></i>&nbsp;<%- T_("View Contest") %></a>\n              </li>\n            </ul>\n          </div>\n        </ul>\n      </li>\n    </ul>\n  </div>\n</div>\n'}),define('text!templates/dashboard/contestEntryRated.header.htm',[],function(){return'<div id = "status">\n  <div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%= data.employerImg.profile_logo_url %>"  alt="profile pic" title="<%- data.employerName %>" class="profile-pic"></span>\n  </div>\n  <h2><%= T_("<a class=\'font-bold\' id=\'username1st\' href=\'/u/<[- data.employerName ]>\'><[- data.employerPublicName || data.employerName ]></a> rated your <span id=\'numOfOthers\'>entry</span> for <a class=\'trunc\' href=\'<[- data.contestSeoUrl ]>\'><[- data.contestName]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n</div>\n'}),define('text!templates/dashboard/contestEntryRated.img.htm',[],function(){return'<li class="ct_entry ct_freelancer" data-time = \'<%- timestamp %>\'>\n  <a href="<%- data.entryUrl %>">\n    <div class="entry_img">\n      <div class="hover_group">\n        <ul class="btn-group">\n          <li class="btn btn-info btn-mini ct_action" style=\'display:none\'\n            title="<%- T_("Handover") %>" data-entry-id="<%- data.entryId %>">\n            <div class="ct_award">\n              <span id="hd_do">\n                <i class="icon-handover"></i>\n              <div class="ct_description"></div>\n              </span>\n            </div>\n          </li>\n          <li class="btn btn-info btn-mini ct_action" title="<%- T_("Withdraw") %>">\n            <div class="ct_withdraw" data-entry-id="<%- data.entryId %>">\n              <span id="wd_do">\n                <i class="icon-repeat icon-white"></i>\n              <div class="ct_description"></div>\n              </span>\n              <span id="rs_undo" style=\'display:none\'>\n                <i class="icon-refresh icon-white"></i>\n              <div class="ct_description"></div>\n              </span>\n            </div>\n          </li>\n        </ul>\n      </div>\n      <img class="ct_thumb" src="<%- data.entryThumb %>"></img>\n    </div>\n  </a>\n\n  <div class="bottom-cap">\n    <div class="center">\n      <div class="Rating"\n           data-star_rating="<%- data.rating %>">\n          <span class="Rating-total">\n              <span class="Rating-progress"></span>\n          </span>\n      </div>\n    </div>\n    <div class="right">\n      <p class="ct_status"></p>\n    </div>\n  </div>\n  <div class="num top-info" ><%- data.entryNumber %></div>\n</li>\n'}),define('text!templates/dashboard/contestAwardedToEmployer.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"> <img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2>\n  <% if(isBought) { %>\n    <%= T_("Congratulations on buying <a class=\'font-bold\' href = \'/u/<[- data.userName]>\'><[- data.publicName || data.userName]>\'s</a> entry for <strong><a class=\'trunc\' href=\'<[- data.contestSEOURL]>\'><[- data.contestName]></a></strong>.", {data: data}) %>\n  <% } else { %>\n    <%= T_("Congratulations on awarding <a class=\'font-bold\' href = \'/u/<[- data.userName]>\'><[- data.publicName || data.userName]>\'s</a> entry for <strong><a class=\'trunc\' href=\'<[- data.contestSEOURL]>\'><[- data.contestName]></a></strong>.", {data: data}) %>\n  <% } %>\n   <span class=\'noTrunc\'><%- T_(" Complete the contest handover to own it legally now")%> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span>\n</h2>\n\n<% if(typeof data.entryCount !== "undefined" && typeof data.freelancerCount !== "undefined" && typeof data.currencySign !== "undefined" ) {%>\n<ul class="nav nav-tabs" >\n  <li class="first handover_btn_employer">\n  </li>\n</ul>\n<div class="row-fluid">\n  <div class="span5 entry_thumb">\n    <a href="<%- data.contestSEOURL%>">\n      <img alt="<%- T_("Contest Winner")%>" src="<%- data.thumb %>" >\n    </a>\n  </div>\n  <div class="span4 margin-l50"> <%- T_("Your contest details:")%>\n    <ul class="margin-t20">\n      <% if(typeof data.entry_number !== "undefined") {%>\n      <li style="line-height: 30px;"><i class="icon-picture margin-r10"></i>\n        <%- T_("Entry")%>&nbsp;#<%- data.entry_number %>\n      </li>\n      <% } %>\n      <li style="line-height: 30px;"><i class="icon-user margin-r10"></i>\n        <%- data.publicName || data.userName %>\n      </li>\n      <li style="line-height: 30px;"><i class="icon-ok margin-r10"></i> <%- data.currencySign %><%- prize %> <%- data.currencyCode %></li>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n        <a href="/contest/handover.php?entry_id=<%- data.entry_id %>">\n          <i class="icon-share-alt"></i>\n          &nbsp;<%- typeof state === \'undefined\' ? T_("Start Contest Handover") : T_("Go to Handover") %>\n        </a>\n    </li>\n  </ul>\n</div>\n<% } %>\n\n<% if(typeof data.entryCount === "undefined" && typeof data.freelancerCount === "undefined" && typeof data.currencySign === "undefined" ) {%>\n\n<% if(typeof state == \'undefined\') {%>\n<p><%- T_("Complete the design handover to own it.", {data: data}) %></p>\n<ul class="nav nav-tabs">\n  <li class="first">\n    <a href="/contest/handover.php?entry_id=<%- data.entry_id%>"><i class="icon-share-alt"></i>&nbsp;<%- T_("Design Handover")%></a>\n  </li>\n</ul>\n<% } %>\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && (state == \'complete\' || state == \'completed\')) { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%-T_("Handover Completed") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n<% } %>\n'}),define('text!templates/dashboard/contestAwardedToFreelancer.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"> <img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2>\n    <%= T_(" <a class=\'font-bold\' href = \'/u/<[- data.userName]>\'><[- data.publicName || data.userName]></a> awarded you <strong><a class=\'trunc\' href=\'<[- data.contestSEOURL]>\'><[- data.contestName]></a></strong>! ", {data: data}) %>\n    <span class=\'noTrunc\'><%- T_(" Complete the contest handover to receive your prize")%></span>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n\n<% if(typeof data.entryCount !== "undefined" && typeof data.freelancerCount !== "undefined" && typeof data.currencySign !== "undefined" ) {%>\n<ul class="nav nav-tabs" >\n  <li class="first handover_btn_employer">\n  </li>\n</ul>\n\n<div class="row-fluid">\n  <div class="span5 entry_thumb">\n    <a href="<%- data.contestSEOURL%>">\n      <img alt="<%- T_("Contest Winner")%>" src="<%- data.thumb %>" >\n    </a>\n  </div>\n  <div class="span4 margin-l50"> <%- T_("The contest details:")%>\n    <ul class="margin-t20">\n      <% if(typeof data.entry_number !== "undefined") {%>\n      <li style="line-height: 30px;"><i class="icon-picture margin-r10"></i>\n        <%- T_("Entry")%>&nbsp;#<%- data.entry_number %>\n      </li>\n      <% } %>\n      <li style="line-height: 30px;"><i class="icon-user margin-r10"></i>\n        <%- data.publicName || data.userName %>\n      </li>\n      <li style="line-height: 30px;"><i class="icon-ok margin-r10"></i> <%- data.currencySign %><%- prize %> <%- data.currencyCode %></li>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n        <a href="/contest/handover.php?entry_id=<%- data.entry_id %>">\n          <i class="icon-share-alt"></i>\n          &nbsp;<%- typeof state === \'undefined\' ? T_("Start Contest Handover") : T_("Go to Handover") %>\n        </a>\n    </li>\n  </ul>\n</div>\n<% } %>\n\n<% if(typeof data.entryCount === "undefined" && typeof data.freelancerCount === "undefined" && typeof data.currencySign === "undefined" ) {%>\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && (state == \'complete\' || state == \'completed\')) { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%-T_("Handover Completed") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n<% if(typeof state == \'undefined\') {%>\n<p><%- T_("Complete the design handover to receive your prize.", {data: data}) %></p>\n<ul class="nav nav-tabs">\n  <li class="first">\n    <a href="/contest/handover.php?entry_id=<%- data.entry_id%>"><i class="icon-share-alt"></i>&nbsp;<%- T_("Design Handover")%></a>\n  </li>\n</ul>\n<% }} %>\n'}),define('text!templates/dashboard/hiremeAutoRepost.htm',[],function(){return'<div id="auto_repost_<%- data.autoRepostProjectId %>">\n  <div id="status">\n    <div class="profile-pic-wrapper">\n      <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n    </div>\n    <h2> <%= T_("Your project \'<span class=\'italic\'><[- data.name ]></span>\' is now open to receive bids.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n  </div>\n\n  <p>\n    <%= T_("Unfortunately <a class=\'font-bold\' href=\'/u/<[-data.userName]>\'><[-data.userName]></a> was unable to accept your project, \'<span class=\'italic\'><[- data.name ]></span>\'. To help you find a freelancer, we have now opened your project for bidding. Within minutes you&#39;ll receive bids from freelancers who are interested to work on your project. To see their bids, view your project now.", {data: data}) %>\n  </p>\n\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <li class="first">\n        <a href="/projects/<%- data.autoRepostProjectId %>.html" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashProjectNav\', \'Project_NewsFeedHiremeAutoRepost\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Project Now") %></a>\n      </li>\n    </ul>\n  </div>\n</div>\n'}),define('text!templates/dashboard/membership.downgradeToFreeMembership.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"> <img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2><%= T_("You have stopped your <strong><span class=\'capitalize\'><[- data.membershipPackage.toLowerCase() ]></span> Membership</strong> which will end on <[- data.ed]>.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<ul class="nav nav-tabs">\n  <li class="first">\n    <a href="/membership/index.php?ref=dashboard_event"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Continue or Change Membership") %></a>\n  </li>\n</ul>\n'}),define('text!templates/dashboard/membership.specialLoyaltyDiscountOffer.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"> <img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2><%= T_("You\'ve successfully extended your <strong><span class=\'capitalize\'><[- data.package_name ]></span> Membership</strong> at <strong>50% off</strong> the normal price for your next month! Your membership will renew on <[- data.end ]> for just <[= data.currencySign]><[- data.price ]> <[- data.currencyCode]>.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n'}),define('text!templates/dashboard/removeUserFromDirectory.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2><%- T_("Improve your profile to be relisted on the Freelancer Directory and avoid bid restrictions.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<ul class="news-list">\n  <li class="news-item last">\n    <p>\n      <%- T_("Ensure that your profile has a quality display picture, display name, sub-heading and summary.", {data: data}) %>\n    </p>\n  </li>\n</ul>\n\n<div class="actions tabbable">\n\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a href="/users/<%- data.userId %>.html"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Update Profile") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/banUserFromBidding.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2><%- T_("Improve your profile to remove bid restrictions and to be relisted on the Freelancer Directory.", {data: data}) %>\n  <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n\n<ul class="news-list">\n  <li class="news-item last">\n    <p>\n      <%- T_("Ensure that your profile has a quality display picture, display name, sub-heading and summary.", {data: data}) %>\n    </p>\n    <div class="actions tabbable">\n      <ul class="nav nav-tabs">\n        <li class="last">\n          <a href="/users/<%- data.userId %>.html">\n            <i class="icon-share-alt"></i>&nbsp;<%- T_("Update Profile") %></a>\n        </li>\n      </ul>\n    </div>\n  </li>\n</ul>\n'}),define('text!templates/dashboard/contestCreated.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- portraitObj.imgUrl %>"  alt="profile pic" title="<%- portraitObj.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("Your contest <a class=\'trunc\' href=\'<[- data.contest_url ]>\'><[- data.contest_name ]></a> has been posted", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a href="<%- data.contest_url %>"><i class="icon-share-alt"></i>&nbsp;<%- T_("View contest") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/contestUpsellFeaturedUpgrade.htm',[],function(){return'<div class="contest-upsell-featured">\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic">\n            <img src="<%- portraitObj.imgUrl %>" width="32" height="32" alt="profile pic" title="<%- portraitObj.userName %>" class="profile-pic">\n        </span>\n    </div>\n    <h2>\n        <%= T_("Receive more entries by featuring your contest <a href=\'<[- data.contestUrl ]>\'><[- data.contestName ]></a>. Upgrade now to see the benefits!", {data: data}) %>\n        <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n    </h2>\n    <!-- action history-->\n    <div class="alert alert-success <% if(typeof state == \'undefined\'){%>hide<%}%>" id="action_history">\n        <div class="actions tabbable">\n            <ul class="nav nav-tabs">\n                <li class="first">\n                    <a href="<%- data.contestUrl %>" class="action-state"> <i class="icon-ok"></i>&nbsp;\n                      <span><%- T_("Contest Upgraded") %></span></a>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div id="upsellFeatured">\n        <ul class="news-list">\n            <li class="news-item first pad row-fluid dashboard-upsell-container">\n                <div class="span2">\n                    <span class="upgrade featured"></span>\n                </div>\n                <div class="span6 dashboard-upsell-desc">\n                    <%= T_("Featured Contests attract up to <strong><[- data.entriesFeaturedPercentage ]>%* more entries</strong> than regular contests by appearing prominently in the \'Featured Jobs and Contests\' page.", {data: data}) %>\n                </div>\n                <div class="span3">\n                    <div><%- data.currencyDetails.sign %><%- data.currencyFee %> <%- data.currencyDetails.code %></div>\n                    <span class="process-upgrade hide">\n                        <img src="<%- cdn_url(\'/img/dashboard-loading.gif\', \'//\') %>">\n                        <span class="processing-text"><%- T_("Processing...") %></span>\n                    </span>\n                    <a id="btn-contest-upgrade-featured" class="btn btn-primary btn-mini"><%- T_("Upgrade Now!")%></a>\n                    <span class = "hint"></span>\n                </div>\n                <div class="footnote">\n                    <%- T_("<[- data.featuredBaseData ]>", {data: data}) %>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n'}),define('text!templates/dashboard/contestExpired.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%-companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("It&#39;s time to choose a winning entry for your contest <a class=\'trunc\' href=\'<[-data.contest_url]>\'><[-data.contest_name]></a>",{data:data})%><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<% if((curTimestamp <= timestamp + twoWeeks) && typeof state == \'undefined\'){ %>\n<p class=\'time_left_flag\'><%= T_("You have <strong> <span class = \'time_left\'><[- timeLeft]></span> </strong> to award your contest.", {timeLeft:lib_datetime_relative_date(timestamp + twoWeeks)})%>\n</p>\n<% } %>\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && state.indexOf(\'extended\') != -1) { %>\n      <li class="first">\n        <a href = "<%- data.contest_url %>" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%-T_("Contest Extended") %></a>\n      </li>\n      <% } else if ( typeof state !== \'undefined\' && state == \'awarded\') { %>\n      <li class="first">\n        <a href = "<%- data.contest_url %>" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%-T_("Contest Awarded") %></a>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a href="<%- data.contest_url%>"><i class="icon-share-alt"></i> <%- T_("View Contest") %></a>\n    </li>\n    <% if ( typeof state === \'undefined\' && data.isExtended != 1) { %>\n    <li>\n      <a <% if(curTimestamp >= timestamp + threeDays) { %> style="display:none" <% } %>href="/contest/contest.php?project_id=<%- data.contest_id%>#upgrade" ><i class="icon-share-alt"></i> <%- T_("Extend Contest") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/winningDesignReadyForReview.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%-data.imgUrl %>"  alt="profile pic" title="<%- data.winner_name %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href=\'<[- data.winner_profile_url ]>\'><[- data.winner_publicName || data.winner_name ]></a> has uploaded your design files for <strong><a class=\'trunc\' href=\'<[- data.contest_url ]>\'><[- data.contest_name ]></a></strong><span class=\'noTrunc\'> to download and review.", {data:data})%><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && (state == \'complete\' || state == \'completed\')) { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%-T_("File Reviewed") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n<% if(typeof state == \'undefined\') {\nif((curTimestamp <= timestamp + data.autoLockTime) && typeof data.state == \'undefined\'){ %>\n<p class=\'time_left_flag\'><%= T_("You have <strong> <span class = \'time_left\'><[- timeLeft]></span> </strong> to review the files before the prize is released.", {timeLeft:lib_datetime_relative_date(timestamp + data.autoLockTime)})%>\n</p>\n<% }} %>\n<% if(typeof state == \'undefined\') { %>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a href="/contest/handover.php?entry_id=<%- data.entry_id%>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Review Files")%></a>\n    </li>\n  </ul>\n</div>\n<% } %>\n'}),define('text!templates/dashboard/contestComplete.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%-data.imgUrl %>"  alt="profile pic" title="<%- data.user_name %>" class="profile-pic"></span>\n</div>\n<% if(data.to_freelancer) { %>\n<h2><%= T_("You completed <a class=\'font-bold\' href=\'/u/<[- data.user_name ]>\'><[- data.public_name || data.user_name ]>\'s</a> contest <a class=\'trunc\' href=\'<[- data.contest_url ]>\'><[- data.contest_name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<% } else { %>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.user_name ]>\'><[- data.public_name || data.user_name ]></a> completed <a class=\'trunc\' href=\'<[- data.contest_url ]>\'><[- data.contest_name ]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<% } %>\n\n<% if (typeof review != \'undefined\') { %>\n  <ul class="news-list">\n    <li class="news-item last">\n      <blockquote>\n        <i class="icon-quote"></i>\n        <%- review.descr %>\n      </blockquote>\n      <span class="Rating Rating--labeled"\n           data-star_rating="<%- (review.score / 2).toFixed(1) %>">\n          <span class="Rating-total">\n              <span class="Rating-progress"></span>\n          </span>\n      </span>\n    </li>\n  </ul>\n<% } else if ( typeof state == \'undefined\') { %>\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <li class="first">\n        <a id=\'feedbackButton\'><i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n        <span class="loading" style="display: none;">\n          <img src="/img/dashboard-loading.gif" />&nbsp;&nbsp;<%- T_("Loading...") %>\n        </span>\n      </li>\n    </ul>\n  </div>\n<% } else if ( typeof state != \'undefined\' || state == "") { %>\n  <div class="alert alert-success" id="action_history">\n    <div class="actions tabbable">\n      <ul class="nav nav-tabs">\n        <% if ( typeof state !== \'undefined\' && (state == \'complete\' || state == \'completed\')) { %>\n        <li class="first">\n          <i class="icon-ok"></i>&nbsp;<strong><%-T_("Feedback Provided") %></strong>\n        </li>\n        <% } %>\n      </ul>\n    </div>\n  </div>\n<% } %>\n\n<div class="error-box">\n</div>\n'}),define('text!templates/dashboard/contest-complete-sell-entry-upsell.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- portraitObj.imgUrl %>" width="32" height="32" alt="profile pic" title="<%- portraitObj.userName %>" class="profile-pic"/>\n    </span>\n</div>\n<h2>\n    <%- T_("Congratulations, Contest Handover is complete. But wait! You still have some awesome entries left on your contest. Buy and own these now!") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n<div class="buy-more-entries contest-entry">\n    <div class="loading">\n      <img src="<%- cdn_url(\'/img/dashboard-loading.gif\') %>" /><%- T_("Loading entries...") %>\n    </div>\n    <ul class="gallery clearfix">\n      <div class=\'clear\'></div>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/contestEntryCreated.min.htm',[],function(){return'<li class="ct_entry" data-time = \'<%- timestamp %>\'>\n  <a href="<%- data.entryUrl %>" target="_blank">\n    <div class="entry_img">\n      <div class="hover_group" data-entry-id="<%- data.entryId %>">\n        <ul class="btn-group">\n            <li href="#entry_award<%- data.entryId %>" class="btn btn-info btn-mini award_trigger" title="<%- T_("Award") %>"\n              data-entry-id="<%- data.entryId %>">\n              <div class="ct_award ct_button" data-entry-id="<%- data.entryId %>">\n                <% if (!data.hasWinner) { %>\n                  <span id="ad_do">\n                    <%- T_("Select winner") %>\n                    <div class="ct_description"></div>\n                  </span>\n                <% } else if (data.hasWinner && !data.isBought && !data.isWinner) {%>\n                  <span>\n                    <%- T_("Buy for <[- sign]><[- price]> <[- code]>", {\'sign\': data.currencySign, \'price\': data.sellPrice, \'code\': data.currencyCode})%>\n                    <div class="ct_description"></div>\n                  </span>\n                <% } else { %>\n                  <span id="hd_do">\n                    <i class="icon-handover"></i>\n                    <div class="ct_description"></div>\n                  </span>\n                <% } %>\n              </div>\n            </li>\n\n        </ul>\n      </div>\n      <img class="ct_thumb" src="<%- data.entryThumb %>">\n    </div>\n  </a>\n  <div class="bottom-cap">\n    <div class="left entry_user_link_div">\n      <a href="/u/<%- data.userName %>" title="<%- data.publicName || data.userName %>" class="ns_color-blue entry_user_link" data-user-id="<%- data.userId %>"><%- data.publicName || data.userName %></a>\n    </div>\n    <div class="right">\n      <div class=\'radio_option\' >\n        <input type="radio" name="entry_rating" value="1" title = "<%- T_("Rate 1 star")%>" class="star" />\n        <input type="radio" name="entry_rating" value="2" title = "<%- T_("Rate 2 stars")%>" class="star" />\n        <input type="radio" name="entry_rating" value="3" title = "<%- T_("Rate 3 stars")%>" class="star" />\n        <input type="radio" name="entry_rating" value="4" title = "<%- T_("Rate 4 stars")%>" class="star" />\n        <input type="radio" name="entry_rating" value="5" title = "<%- T_("Rate 5 stars")%>" class="star" />\n        <div style=\'display:none\' data-entry-id="<%- data.entryId %>" id="entry_rating_<%- data.entryId %>"><img id="rating-loader" src="/img/dashboard-pending.gif"></div>\n      </div>\n    </div>\n    <div class="right">\n      <p class="ct_status"></p>\n    </div>\n  </div>\n  <div class="num top-info"><%- data.entryNumber %></div>\n  <div class="ct_action">\n    <div class="ct_reject top-info" data-entry-id="<%- data.entryId %>">\n      <span class="rj_do">\n        <%- T_("Reject") %>\n      <div class="ct_description"></div>\n      </span>\n      <span class="rj_undo" style=\'display:none\'>\n        <%- T_("Reconsider") %>\n      <div class="ct_description"></div>\n      </span>\n    </div>\n  </div>\n</li>\n<div id="contest-response-container"></div>\n'}),define('text!templates/dashboard/prizeDispersedEmployer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%-companyLogo %>" width="32" height="32" alt="profile pic" class="profile-pic">\n    </span>\n</div>\n\n<% if (data.hasWinner) { %>\n    <h2>\n        <%= T_("The prize for your contest <a class=\'trunc\' href=\'<[-data.contest_url]>\'><[-data.contest_name]></a> has been released to <a href=\'<[-data.freelancer_url]>\'><[- data.freelancer_publicname || data.freelancer_username]></a>.", {data: data}) %>\n        <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n    </h2>\n    <p>\n        <%- T_("The handover was not completed within the 30 days provided.")%>\n    </p>\n<% } else {%>\n    <h2>\n        <%= T_("The prize for your contest <a class=\'trunc\' href=\'<[-data.contest_url]>\'><[-data.contest_name]></a> has been released to the top entries and freelancers.", {data: data}) %>\n        <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n    </h2>\n    <p>\n        <%- T_("You did not select a winning entry within the 30 days provided.")%>\n    </p>\n<% }%>'}),define('text!templates/dashboard/prizeDispersedFreelancer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%-data.pic_url %>" width="32" height="32" alt="profile pic" title="<%- data.employer_name %>" class="profile-pic">\n    </span>\n</div>\n\n<h2>\n    <%= T_("The contest <a class=\'trunc\' href=\'<[- data.contest_url ]>\'><[- data.contest_name ]></a> has been locked for 30 or more days. You have received prize money for participating. Congratulations!", {data: data}) %>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n'}),define('text!templates/dashboard/contestLockedEmployer.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%-companyLogo %>"  alt="profile pic" class="profile-pic"></span>\n</div>\n\n<h2>\n  <%= T_("Your contest <strong><a class=\'trunc\' href=\'<[-data.contest_url]>\'><[-data.contest_name]></a></strong> is now locked as you did not select a winning entry within 14 days of the contest closing.",{data:data})%>\n  <em class="timestamp time_text">\n    <%- lib_datetime_relative_date(timestamp) %>\n  </em>\n</h2>\n<% if(typeof data.guaranteed != \'undefined\') { %>\n<p>\n  <%- T_("If you do not award the prize within 14 days <[ if (time_remaining) { ]>(<[-time_remaining]> remaining) <[ } ]>your prize will be shared between top Freelancers based on your ratings.", {time_remaining: lib_datetime_relative_within_time(data.fourteen_day_timestamp)})%>\n</p>\n<% } %>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && state == \'unlocked\') { %>\n      <li class="first">\n        <a href = "<%- data.contest_url %>" class=\'action-state\'> <i class="icon-ok"></i>&nbsp;<%-T_("Unlocked") %></a>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n    <% if ( typeof state === \'undefined\') { %>\n        <a class="unlock"><i class="icon-share-alt"></i>&nbsp;<%- T_("Unlock Contest") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/contestLockedFreelancer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.pic_url %>"\n        alt="profile pic" title="<%- data.employer_name %>" class="profile-pic">\n    </span>\n</div>\n\n<h2><%= T_("<a class=\'font-bold\' href=\'<[- data.employer_profile_url ]>\'><[- data.employer_publicName || data.employer_name ]></a>\'s contest <strong><a class=\'trunc\' href=\'<[- data.contest_url ]>\'><[- data.contest_name ]></a></strong> is now locked as they did not select a winner within 14 days of the contest closing.", {data: data}) %>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n\n<% if(typeof data.guaranteed != \'undefined\') { %>\n\n<p>\n  <%= T_("If the prize is not awarded within 14 days <[ if (time_remaining) { ]>(<[-time_remaining]> remaining) <[ } ]> the prize will be shared between top freelancers based on design ratings.", {time_remaining: lib_datetime_relative_within_time(data.fourteen_day_timestamp)})%>\n</p>\n\n<% } %>\n'}),define('text!templates/dashboard/invoice.acceptedPartial.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> accepted the partial invoice payment of <strong><[= data.currencySign ]><[- data.amount ]> <[- data.currencyCode ]></strong> for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n        <a id="viewInvoice" target="_blank"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Invoice") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/milestone.updated.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> updated the milestone request for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a><span class=\'noTrunc\'> from\n<[= data.currencySign ]><[- data.old_amount ]> <[- data.currencyCode ]> to of <[= data.currencySign ]><[- data.amount ]> <[- data.currencyCode ]> ", {data: data}) %>\n<em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n\n<div class="alert alert-info">\n  <strong><%- T_("Milestone details:") %> </strong><em><%- message %></em>\n</div>\n\n<!-- action history-->\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\') { %>\n      <li class="first">\n        <a href="/projects/<%- data.seoUrl %>.html#milestones_<%- data.bidId %>" class="action-state"> <i class="icon-ok"></i>&nbsp;<% if (state == \'accept\') {%><%- T_("Milestone Created") %>\n        <%} else if (state == \'reject\') {%><%- T_("Request Rejected") %><%}%> </a>\n      </li>\n      <%}%>\n    </ul>\n  </div>\n</div>\n\n<% if(typeof state === \'undefined\' || state == "") {%>\n<div class="actions">\n  <div class="well">\n    <div id = "rejectForm">\n      <p>\n        <%- T_("Do you want to create a milestone payment of") %> <strong><%= data.currencySign %><%- data.amount %> <%= data.currencyCode %></strong>?\n      </p>\n      <div class = "form-btn-wrapper">\n        <a class="btn btn-info btn-mini" id="create" title="Confirm"><%- T_("Confirm") %></a>\n        <a class="margin-l10" id="reject" title="Reject"><%- T_("Reject") %></a>\n      </div>\n    </div>\n    <form id = "rejectBox" style="display: none;">\n\n      <h3><%- T_("Are you sure you wish to reject the Milestone Request?") %></h3>\n      <label for="request-reject-reason"></label>\n      <textarea cols="50" name="request-reject-reason" class="milestone-updated-message ns_half span7" placeholder="<%- T_("Send Personal Message: (Optional)")%>"></textarea>\n      <a class="btn btn-info btn-mini" id="btn-reject-milestone-request"><%- T_("Reject Milestone") %></a>\n      <a class="btn btn-mini" id="btn-cancel-request-rejection"><%- T_("Cancel") %></a>\n      <br>\n    </form>\n    <span class = "hint"></span>\n  </div>\n</div>\n<%}%>\n'}),define('text!templates/dashboard/invoice.paid.part.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n\n<!-- display if the partial payment is pending acceptance -->\n<h2 id="pending-text"> <%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.publicName || data.userName ]></a> partially paid your invoice of <strong><[= data.currencySign ]><[- data.amountReceived ]> <[= data.currencyCode ]></strong> (<[= data.currencySign ]><[- data.amountUnpaid ]> <[= data.currencyCode ]> outstanding) for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> ", {data: data}) %> <em style="display:inline;" class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && state == \'accept\') { %>\n      <li class="first">\n        <a class="action-state" ><i class="icon-ok"></i>&nbsp;<%=T_("Payment Accepted") %></a>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if(typeof state === \'undefined\' || state == "") {%>\n      <li class="first" id="accept-payment">\n        <a class="accept"><i class="icon-share-alt"></i>&nbsp;<%=T_("Accept Payment") %></a>\n      </li>\n    <% } %>\n    <li class="<% if(typeof state !== \'undefined\' && state == \'accept\') {%> first <%}%>">\n      <a href = "/payments/view-invoice.php?invoice_id=<%- data.invoiceId%> " class="award" target="_blank"><i class="icon-share-alt"></i>&nbsp;<%=T_("View Invoice") %></a>\n    </li>\n  </ul>\n</div>\n\n<div id="partialPaymentConfirm" style="display:none;" class="well">\n  <p>\n    <%= T_("You will <strong>ONLY receive <[= data.currencySign ]><[- data.amountReceived ]> <[- data.currencyCode ]></strong> as payment if you accept, please confirm.", {data: data}) %>\n  </p>\n  <a id="accept" class="btn btn-info btn-mini" > <%- T_("Confirm") %> </a>\n  <a id="cancel" class="btn btn-mini"> <%- T_("Cancel") %> </a>\n  <span class="hint" style=""></span>\n</div>\n'}),define('text!templates/dashboard/project.review.pending.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<% if (typeof state != \'undefined\' && state == \'rejected\'){ %>\n<h2> <%= T_("Your project <a class=\'trunc\'\n                             data-newstrack-label=\'GoToDraftProject\'\n                             data-newstrack-section=\'Review\'\n                             href=\'/buyers/draft.php?id=<[- data.id]>\'><[- data.name]></a>\n    <span class=\'noTrunc\'>\n        has been sent to our staff to be reviewed. The process takes only a few minutes and you\n        will be informed once the project\'s status is updated", {data: data}) %>&nbsp;\n        <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n    </span>\n</h2>\n<% } else { %>\n<h2> <%= T_("Your project <a class=\'trunc\'\n                             data-newstrack-label=\'GoToDraftProject\'\n                             data-newstrack-section=\'Review\'\n                             href=\'/projects/<[- data.seoUrl]>.html\'><[- data.name]></a>\n    <span class=\'noTrunc\'\n            > has been sent to our staff to be reviewed. The process takes only a few minutes and\n        you will be informed once the project\'s status is updated", {data: data}) %>&nbsp;\n        <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n    </span>\n</h2>\n<% } %>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <li class="first">\n        <a href=\'/projects/<%- data.seoUrl%>.html\'\n           class=\'action-state\'\n           data-newstrack-label="GoToPVP"\n           data-newstrack-section="LiveProject"> <i class="icon-ok"></i>&nbsp;<%- T_("Project Live") %></a>\n      </li>\n    </ul>\n  </div>\n</div>\n\n<div class="actions tabbable" data-newstrack-section="ActionsTable">\n  <ul class="nav nav-tabs">\n    <% if (typeof state != \'undefined\' && state == \'rejected\'){ %>\n    <li class="first">\n      <a href=\'/buyers/draft.php?id=<%- data.id%>&action=edit\'\n      data-newstrack-label="GoToDraftProject"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Edit Project")%></a>\n    </li>\n    <%} else if (typeof state == \'undefined\' || (typeof state != \'undefined\' && state != \'live\')) { %>\n      <li class="first">\n        <a id="send-it-live"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Send it Live")%></a>\n      </li>\n      <li class="last">\n        <a id="upgrade-project" href=\'/buyers/trial.php?id=<%- data.id %>\'\n        data-newstrack-label="GoToTrial"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Upgrade Project")%></a>\n      </li>\n    <% } %>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/pmb.htm',[],function(){return'<div id="pmb_public_<%- data.project_id %>">\n  <div id = "status"></div>\n  <ul class="news-list news-list-avatar">\n    <li class="view-all" style="display:none;">\n      <a id="viewAll"><i class="icon-comment"></i><span>&nbsp;<%-T_("View all")%></span></a>\n      <div id = "scrollBar" style="display:none">\n        <a id="scrollUp"><i class="icon-comment"></i>&nbsp;<%-T_("View more")%></a>\n        <span id="scrollPage" style="margin-right:15px; margin-top: -24px; float:right"></span>\n      </div>\n    </li>\n    <!-- insert each clarification here from pmb.min template -->\n\n    <li class="news-item new_message">\n      <form class="form-search">\n        <div class="profile-pic-wrapper">\n          <span class="profile-pic"><img src="<%- currentUserImg %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n        </div>\n        <textarea rows="1" cols="" id="new_message" placeholder="<%- T_("Write a reply...") %>"></textarea>\n        <span class="message_throbber" style="display: none; "> <img src="/img/dashboard-pending.gif"> </span>\n        <br>\n        <span class = "hint"> </span>\n      </form>\n    </li>\n\n  </ul>\n</div>\n'}),define('text!templates/dashboard/pmbHeader.htm',[],function(){return'<div id = "status">\n  <div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n  </div>\n  <h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>.html\'><[- data.userName ]></a><span id=\'numOfOthers\'></span> sent a private messaget for <a href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.projectName]></a>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n</div>\n'}),define('text!templates/dashboard/pmb.min.htm',[],function(){return'<li class="news-item" id="<%- data.id %>" time="<%- timestamp%>" >\n  <div id = "original">\n    <div class="profile-pic-wrapper">\n      <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n    </div>\n    <h3><a class=\'font-bold\' id=\'username\' href="/u/<%- data.userName %>"><%- data.userName %></a><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h3>\n    <div class="descr-long">\n      <p id =\'needToShorten\' data-origin = "<%- data.text %>">\n        <%- data.text %>\n      </p>\n      <a id=\'seeMore\' class="seeMore"><%- T_("see more") %></a>\n    </div>\n  </div>\n</li>\n'}),define('text!templates/dashboard/invoiceFeedback.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="<%- data.freelancerUsername %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("Leave feedback for <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[- data.name ]></a> <span class=\'noTrunc\'><span style=\'font-style:italic\'>(Invoice #<[- data.invoiceId ]>)</span>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <% if ( typeof state !== \'undefined\' && (state == \'complete\' || state == \'completed\')) { %>\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%-T_("Feedback Provided") %></strong>\n      </li>\n      <% } %>\n    </ul>\n  </div>\n</div>\n\n<% if (getUserIdfromCookie() == data.accountId) { %>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if ( typeof state === \'undefined\') { %>\n    <li class = "first">\n      <a id=\'feedbackButton\'><i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n<% } else { %>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <% if ( typeof state === \'undefined\') { %>\n    <li class = "first">\n      <a id=\'feedbackButton\'><i class="icon-share-alt"></i>&nbsp;<%- T_("Give Feedback") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n<% } %>\n'}),define('text!templates/dashboard/dispute.newMessage.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> posted a message regarding your dispute for <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.name ]></a>.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<ul class="news-list">\n  <li class="news-item last">\n    <div class="descr-long">\n      <p>\n        <Strong><%- T_("Message: ") %></Strong>\n        <span id=\'needToShorten\' data-origin=\'<%- data.message %>\'> <%- data.message %> </span>\n      </p>\n      <a id=\'seeMore\' style = "display:none" ><%- T_("see more") %></a>\n    </div>\n  </li>\n</ul>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a href="/dispute/disputestage.php?id=<%- data.dispute_id %>"> <i class="icon-share-alt"></i> <%- T_("View Dispute") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/dispute.makeOffer.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.publicName || data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> updated their offer regarding your dispute for <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.name ]></a>.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<%if (data.currency) {\nvar verbPhrase = data.sender_role == \'Employer\' ? T_("offer you") : T_("receive") %>\n<div class="alert alert-info">\n   <%= T_("<[- data.sender_role ]> is willing to <[- verb ]>: <strong><[= data.currency.sign ]><[- data.amount ]> <[- data.currency.code ]> Total</strong>.", {verb: verbPhrase, data: data}) %>\n</div>\n<% } %>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a  href="/dispute/disputestage.php?id=<%- data.dispute_id %>"> <i class="icon-share-alt"></i> <%- T_("View Dispute") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/dispute.acceptOffer.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("Your dispute with <a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> has been resolved for <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.name ]></a>.", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a  href="/dispute/disputestage.php?id=<%- data.dispute_id %>"> <i class="icon-share-alt"></i> <%- T_("View Dispute") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/membership.upgradeToNonFreeMembership.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2>\n    <% var mFlag = false; %>\n    <% if (data.type == "continue") { %>\n       <%= T_("You have successfully continued your <strong><[- data.newPlan]> Membership</strong> which will be renewed on <[- data.end]>.", {data: data}) %>\n    <% } else { %>\n        <% if (data.tax) { %>\n            <% if (data.start == data.end || data.isDowngrade) { mFlag = true; %>\n                <% if (data.isDowngrade) { %>\n                    <%= T_("You have successfully downgraded to <strong><[- data.newPlan]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month incl. GST) starting <[- data.start]>. Your current <strong><[- data.currentPlan ]> Membership</strong> will continue until then.", {data: data}) %>\n                <% } else { %>\n                    <%= T_("You have successfully updated to <strong><[- data.newPlan]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month incl. GST) starting <[- data.start]>. Your current <strong><[- data.currentPlan ]> Membership</strong> will continue until then.", {data: data}) %>\n                <% } %>\n            <% } else if (typeof data.freeTrial != \'undefined\' && data.freeTrial) { %>\n                <%= T_("You have successfully upgraded to a <strong><[- data.trialDays ]> day free trial</strong> of <[- data.newPlan ]> Membership. It will automatically renew at <[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month (incl. GST), starting <[- data.end ]> unless you cancel it before then.", {data: data}) %>\n            <% } else if (data.time < ((new Date).getTime()) && data.refundedAmount > 0) { %>\n                <%= T_("You have successfully upgraded to <strong><[- data.newPlan ]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month incl. GST), which will be renewed on <[- data. end ]>. We have refunded the remainder of your <[- data.currentPlan]> Membership fee (<[= data.currencySign ]><[- data.refundedAmount ]> <[- data.currencyCode]>) to your account.", {data: data}) %>\n            <% } else if (data.time < ((new Date).getTime()) && data.refundedAmount == 0) { %>\n                <%= T_("You have successfully upgraded to <strong><[- data.newPlan ]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month incl. GST), which will be renewed on <[- data. end ]>.", {data: data}) %>\n            <% } %>\n        <% } else { %>\n            <% if (data.start == data.end || data.isDowngrade) { mFlag = true; %>\n                <% if (data.isDowngrade) { %>\n                    <%= T_("You have successfully downgraded to <strong><[- data.newPlan]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month) starting <[- data.start]>. Your current <strong><[- data.currentPlan ]> Membership</strong> will continue until then.", {data: data}) %>\n                <% } else { %>\n                    <%= T_("You have successfully updated to <strong><[- data.newPlan]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month) starting <[- data.start]>. Your current <strong><[- data.currentPlan ]> Membership</strong> will continue until then.", {data: data}) %>\n                <% } %>\n            <% } else if (typeof data.freeTrial != \'undefined\' && data.freeTrial) { %>\n                <%= T_("You have successfully upgraded to a <strong><[- data.trialDays ]> day free trial</strong> of <[- data.newPlan ]> Membership. It will automatically renew at <[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month, starting <[- data.end ]> unless you cancel it before then.", {data: data}) %>\n            <% } else if (data.time < ((new Date).getTime()) && data.refundedAmount > 0) { %>\n                <%= T_("You have successfully upgraded to <strong><[- data.newPlan ]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month), which will be renewed on <[- data. end ]>. We have refunded the remainder of your <[- data.currentPlan]> Membership fee (<[= data.currencySign ]><[- data.refundedAmount ]> <[- data.currencyCode]>) to your account.", {data: data}) %>\n            <% } else if (data.time < ((new Date).getTime()) && data.refundedAmount == 0) { %>\n                <%= T_("You have successfully upgraded to <strong><[- data.newPlan ]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per month), which will be renewed on <[- data. end ]>.", {data: data}) %>\n            <% } %>\n        <% } %>\n    <% } %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n</h2>\n\n<% if (data.showBiddingPromotion) { %>\n<div class="plus-membership-upsell">\n    <img src="<%- cdn_url(\'/static/css/images/membership/get-bids.png\') %>" width="141" height="137" class="plus-membership-upsell-start-bidding-icon" />\n    <ul class="plus-membership-upsell-list">\n        <li class="plus-membership-upsell-items"><%= T_("You now have <strong><[- data.remainingBids ]> bids</strong> to use! We recommend that you bid as much as you can, as the more quality bids you use, the better the chances of being awarded projects.", {\'data\':data}) %></li>\n    </ul>\n    <a class="btn btn-success large plus-membership-upsell-cta" onclick="triggerQTS()" href="<%- data.ctaUrl %>">\n        <%= T_("Start Bidding!") %>\n    </a>\n</div>\n<% } %>\n\n<% if(mFlag == true) { %>\n<ul class="nav nav-tabs">\n  <li class="first">\n    <a href="/membership/index.php?ref=dashboard_event"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Continue or Change Membership") %></a>\n  </li>\n</ul>\n<% } %>\n\n<script type="text/javascript">\nfunction triggerQTS() {\n    _lt.push([\'user_action\', {\n    section: \'Dashboard\',\n    sub_section: \'UpgradeNewsfeed\',\n    label: \'Bidding\'\n    }]);\n}\n</script>\n'}),define('text!templates/dashboard/membership.upgradeToNonFreeMembership-v2.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2>\n<% if (data.type === \'downgrade\') { %>\n    <% if (data.tax) { %>\n        <%= T_("You have successfully downgraded to <strong><[- data.newPlan]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per <[- data.timeUnit ]> incl. GST) starting <[- data.start]>. Your current <strong><[- data.currentPlan ]> Membership</strong> will continue until then.", {data: data}) %>\n    <% } else { %>\n        <%= T_("You have successfully downgraded to <strong><[- data.newPlan]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per <[- data.timeUnit ]>) starting <[- data.start]>. Your current <strong><[- data.currentPlan ]> Membership</strong> will continue until then.", {data: data}) %>\n    <% } %>\n<% } else if (data.type === \'cancel_downgrade\') { %>\n    <%= T_("You have successfully continued your <strong><[- data.newPlan]> Membership</strong> which will be renewed on <[- data.end]>.", {data: data}) %>\n<% } else if (data.type === \'upgrade\' && data.freeTrial){ %>\n    <% if (data.tax) { %>\n        <%= T_("You have successfully upgraded to a free trial</strong> of <[- data.newPlan ]> Membership. It will automatically renew at <[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per <[- data.timeUnit ]> (incl. GST), starting <[- data.start ]> unless you cancel it before then.", {data: data}) %>\n    <% } else { %>\n        <%= T_("You have successfully upgraded to a free trial</strong> of <[- data.newPlan ]> Membership. It will automatically renew at <[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per <[- data.timeUnit ]>, starting <[- data.start ]> unless you cancel it before then.", {data: data}) %>\n    <% } %>\n<% } else if (data.type === \'upgrade\' && data.refundedAmount === 0){ %>\n    <% if (data.tax) { %>\n        <%= T_("You have successfully upgraded to <strong><[- data.newPlan ]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per <[- data.timeUnit ]> incl. GST), which will be renewed on <[- data.start ]>.", {data: data}) %>\n    <% } else { %>\n        <%= T_("You have successfully upgraded to <strong><[- data.newPlan ]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per <[- data.timeUnit ]>), which will be renewed on <[- data.start ]>.", {data: data}) %>\n    <% } %>\n<% } else { %>\n    <% if (data.tax) { %>\n        <%= T_("You have successfully upgraded to <strong><[- data.newPlan ]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per <[- data.timeUnit ]> incl. GST), which will be renewed on <[- data.start ]>. We have refunded the remainder of your <[- data.currentPlan]> Membership fee to your account.", {data: data}) %>\n    <% } else { %>\n        <%= T_("You have successfully upgraded to <strong><[- data.newPlan ]> Membership</strong> (<[= data.currencySign ]><[- data.price ]> <[- data.currencyCode]> per <[- data.timeUnit ]>), which will be renewed on <[- data.start ]>. We have refunded the remainder of your <[- data.currentPlan]> Membership fee to your account.", {data: data}) %>\n    <% } %>\n<% } %>\n<em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n\n<% if (data.showBiddingPromotion && data.remainingBids !== 0) {%>\n<div class="plus-membership-upsell">\n    <img src="<%- cdn_url(\'/static/css/images/membership/get-bids.png\') %>" width="141" height="137" class="plus-membership-upsell-start-bidding-icon" />\n    <ul class="plus-membership-upsell-list">\n        <li class="plus-membership-upsell-items"><%= T_("You now have <strong><[- data.remainingBids ]> bids</strong> to use! We recommend that you bid as much as you can, as the more quality bids you use, the better the chances of being awarded projects.", {\'data\':data}) %></li>\n    </ul>\n    <a class="btn btn-success large plus-membership-upsell-cta" onclick="triggerQTS()" href="/jobs/myskills/1/">\n        <%- T_("Start Bidding!") %>\n    </a>\n</div>\n<% } %>\n\n<% if (data.type === \'downgrade\') { %>\n<!--downgrade log create -->\n<ul class="nav nav-tabs">\n  <li class="first">\n    <a href="/membership/index.php?ref=dashboard_event"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Continue or Change Membership") %></a>\n  </li>\n</ul>\n<% } %>\n\n<script type="text/javascript">\nfunction triggerQTS() {\n    _lt.push([\'user_action\', {\n    section: \'Dashboard\',\n    sub_section: \'UpgradeNewsfeed-v2\',\n    label: \'Bidding\'\n    }]);\n}\n</script>\n'}),define('text!templates/dashboard/project.draft.post.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2> <%= T_("Your project <a class=\'trunc\' href = \'/buyers/draft.php?id=<[- data.projectId]>\'><[- data.projectName]></a><span class=\'noTrunc\'> is almost ready to go live! ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n      <a href="/buyers/draft.php?id=<%= data.projectId %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Post Project Now!") %></a>\n    </li>\n    <li class = "last">\n      <a href="/buyers/draft.php?id=<%= data.projectId %>&action=edit"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Edit Project") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/projectAwaitingFeedback.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2> <%- T_("You have completed projects that require you to leave feedback.") %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n      <a href="/dashboard/feedback.php" target=\'_blank\'> <i class="icon-share-alt"></i>&nbsp;<%- T_("Leave Feedback") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/inviteFriends.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2>\n    <%= T_("See who you already know on Freelancer.com. Import your email contacts and connect with your friends.") %>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n</div>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n      <a href="/invite/"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Continue") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/customAdminNotification.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= data.noti_text %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<p><%= data.noti_description %></p>\n\n<% if (data.link_url && data.link_text) { %>\n    <div class="actions tabbable">\n      <ul class="nav nav-tabs">\n        <li class="first">\n          <a target=\'_blank\' href="<%- data.link_url %>"> <i class="icon-share-alt"></i>&nbsp;<%- data.link_text %></a>\n        </li>\n      </ul>\n    </div>\n<% } %>\n'}),define('text!templates/dashboard/customAdminNotification/connectFacebook.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= data.noti_text %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<div class="alert alert-success" id="action_history" style="display:none">\n  <div class="actions tabbable">\n    <ul class="nav nav-tabs">\n      <li class="first">\n        <i class="icon-ok"></i>&nbsp;<strong><%- T_("You are now connected with Facebook")%></strong>\n      </li>\n    </ul>\n  </div>\n</div>\n\n<div class=\'facebook\'>\n    <%if(typeof data.initialised == "undefined" || data.initialised.length == 0) { %>\n    <div id="loadingAll"><img style="margin-right: 8px;" src="/img/dashboard-loading.gif" /><%= T_("Loading...") %></div>\n    <% } else {%>\n    <%= data.initialised %>\n    <% } %>\n</div>\n'}),define('text!templates/dashboard/contestEntryCreated.htm',[],function(){return'<div class="contest-entry">\n  <div id = "status"></div>\n  <div id="content">\n    <ul class="news-list">\n      <li class="news-item first">\n        <div id="loadingAll">\n          <img src="/img/dashboard-loading.gif" /><%= T_("Loading entries...") %>\n        </div>\n        <ul class="gallery clearfix">\n          <li id="spaceHolder" style="display:none;"></li>\n          <li id="bottomHolder" style="display:none;"></li>\n          <div class=\'clear\'></div>\n          <div id="pageBar" class="view-all last actions tabbable">\n            <ul class="nav nav-tabs">\n              <li class="first" id="viewMore">\n                <a><i style="margin-top: 1px;" class="icon-plus-sign"></i>&nbsp;<%- T_("View More Entries") %></a>\n              </li>\n              <li id="viewAll">\n                <a href="<%- data.contestSeoUrl %>"><i class="icon-share-alt"></i>&nbsp;<%- T_("View Contest") %></a>\n              </li>\n            </ul>\n          </div>\n        </ul>\n      <!--minViews are inserted between this space holder and bottom holder. -->\n      </li>\n    </ul>\n  </div>\n</div>\n'}),define('text!templates/dashboard/contestEntryCreated.header.htm',[],function(){return'<div id = "status">\n  <div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.freelancerImg.profile_logo_url %>"  alt="profile pic" title="<%- data.freelancerName %>" class="profile-pic"></span>\n  </div>\n  <h2><%= T_("<a class=\'font-bold\' id=\'username1st\' href=\'/u/<[- data.freelancerName ]>\'><[- data.freelancerPublicName || data.freelancerName ]></a><span id=\'numOfOthers\'> submitted entry </span>for <a class=\'trunc\' href=\'<[- data.contestSeoUrl ]>\'><[- data.contestName]></a>", {data: data})%> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n  </h2>\n</div>\n'}),define('text!templates/contestView/award-winner.htm',[],function(){return'<div class="modal hide confirm-award">\n    <div class="modal-header">\n        <a id="award-single-entry-close" class="close" data-dismiss="modal">&times;</a>\n        <h3>\n            <% if (hasEntryWinner) { %>\n                <%- T_("Authorise Payment") %>\n            <% } else { %>\n                <%- T_("Award Prize for this Entry") %>\n            <% } %>\n        </h3>\n    </div>\n    <div class="modal-body">\n        <p>\n        <%= T_("Are you sure you wish to award the prize to <a title=\'<[- username ]>\' href=\'/u/<[- username ]>\'><[- publicUserName ]></a> for entry #<[- number ]>?", {username: username, number: number, publicUserName: publicUserName}) %>\n        </p>\n        <div class="contest-item-picked">\n            <img class="contest-item-picked--image" alt="<%- T_("Award as winner?")%>" src="<%- thumb %>">\n        </div>\n        <% if (hasEntryWinner) { %>\n            <p>\n                <strong><%- T_("Amount to be paid:") %></strong> <%= prizeFormatted %>\n            </p>\n            <div class="award-payment-options"></div>\n        <% } else { %>\n            <p>\n                <%= T_("You will then be taken to the Entry Handover process to transfer ownership and receive files") %>\n            </p>\n        <% } %>\n    </div>\n    <div class="modal-footer">\n        <button type="button" id="award-single-entry-confirm" class="btn btn-info award-confirm-btn" data-loading-text="<%- T_("Awarding...") %>">\n            <%- T_("Award Now") %>\n        </button>\n        <button type="button" id="award-single-entry-cancel" class="btn award-cancel-btn" data-dismiss="modal">\n            <%- T_("Cancel") %>\n        </button>\n    </div>\n</div>\n'}),define('contest/award-confirmation',['jquery-wrapper','underscore-wrapper','payments/module-payments-source','text!templates/contestView/award-winner.htm'],function(a,b,c,d){function e(a){if(!a)return;var b=f(a);b.modal('show')}function f(e){j=e;var f={amount:j.prize,currencyDetails:{id:j.currency.id,sign:j.currency.sign,code:j.currency.code}},h=a(b.template(d,j));return h.appendTo(i().first()),c.init(f,a(h.find('.award-payment-options'))),i().first().off('click','.award-confirm-btn'),i().first().on('click','.award-confirm-btn',g),h}function g(){var b=a(this);b.button('loading'),typeof j.entryId!='undefined'&&j.confirmPickFn(j.entryId)}function h(b){k=a(b)}function i(){return k&&k.length?k:l}var j,k,l=a('.gaf-container');return{showModal:e,renderModal:f,setContainer:h}}),function(a){if(typeof a.validator=='function')return;a.extend(a.expr[':'],{blank:function(b){return!a.trim(''+b.value)},filled:function(b){return!!a.trim(''+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return arguments.length===1?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp('\\{'+a+'\\}','g'),c)}),b)},a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn('nothing selected, can\'t validate, returning nothing');return}var c=a.data(this[0],'validator');if(c)return c;this.attr('novalidate','novalidate'),c=new a.validator(b,this[0]),a.data(this[0],'validator',c);if(c.settings.onsubmit){var d=this.find('input, button');d.filter('.cancel').click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&d.filter(':submit').click(function(){c.submitButton=this}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a('<input type=\'hidden\'/>').attr('name',c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})}return c},valid:function(){if(a(this[0]).is('form'))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,'validator').settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case'add':a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case'remove':if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}var i=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required,i=a.extend({required:j},i)}return i}}),a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:'error',validClass:'valid',errorElement:'label',focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:':hidden',ignoreTitle:!1,onfocusin:function(a,b){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,b){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a,b){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a,b){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){b.type==='radio'?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){b.type==='radio'?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:T_('This field is required.'),remote:T_('Please fix this field.'),email:T_('Please enter a valid email address.'),url:T_('Please enter a valid URL.'),date:T_('Please enter a valid date.'),dateISO:T_('Please enter a valid date (ISO).'),number:T_('Please enter a valid number.'),digits:T_('Please enter only digits.'),creditcard:T_('Please enter a valid credit card number.'),equalTo:T_('Please enter the same value again.'),accept:T_('Please enter a value with a valid extension.'),maxlength:a.validator.format(T_('Please enter no more than {0} characters.')),minlength:a.validator.format(T_('Please enter at least {0} characters.')),rangelength:a.validator.format(T_('Please enter a value between {0} and {1} characters long.')),range:a.validator.format(T_('Please enter a value between {0} and {1}.')),max:a.validator.format(T_('Please enter a value less than or equal to {0}.')),min:a.validator.format(T_('Please enter a value greater than or equal to {0}.'))},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,'validator'),d='on'+b.type.replace(/^validate/,'');c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c=this.groups={};a.each(this.settings.groups,function(b,d){a.each(d.split(/\s/),function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)}),a(this.currentForm).validateDelegate('[type=\'text\'], [type=\'password\'], [type=\'file\'], select, textarea, [type=\'number\'], [type=\'search\'] ,[type=\'tel\'], [type=\'url\'], [type=\'email\'], [type=\'datetime\'], [type=\'date\'], [type=\'month\'], [type=\'week\'], [type=\'time\'], [type=\'datetime-local\'], [type=\'range\'], [type=\'color\'] ','focusin focusout keyup',b).validateDelegate('[type=\'radio\'], [type=\'checkbox\'], select, option','click',b),this.settings.invalidHandler&&a(this.currentForm).bind('invalid-form.validate',this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler('invalid-form',[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b)),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(':visible').focus().trigger('focusin')}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var b=this,c={};return a(this.currentForm).find('input, select, textarea').not(':submit, :reset, :image, [disabled]').not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error('%o has no name assigned',this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+'.'+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var c=a(b).rules(),d=!1;for(var e in c){var f={method:e,parameters:c[e]};try{var g=a.validator.methods[e].call(this,b.value.replace(/\r/g,''),b,f.parameters);if(g=='dependency-mismatch'){d=!0;continue}d=!1;if(g=='pending'){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!g)return this.formatAndAdd(b,f),!1}catch(h){throw this.settings.debug&&window.console&&console.log('exception occurred when checking element '+b.id+', check the \''+f.method+'\' method',h),h}}if(d)return;return this.objectLength(c)&&this.successList.push(b),!0},customMetaMessage:function(b,c){if(!a.metadata)return;var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a];return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],'<strong>Incorrect '+b.name+'</strong>')},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;typeof c=='function'?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,'{$1}'),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(var a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr('generated')&&d.html(c)):(d=a('<'+this.settings.errorElement+'/>').attr({'for':this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||''),this.settings.wrapper&&(d=d.hide().show().wrap('<'+this.settings.wrapper+'/>').parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(''),typeof this.settings.success=='string'?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr('for')==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case'select':return a('option:selected',c).length;case'input':if(this.checkable(c))return this.findByName(c.name).filter(':checked').length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{'boolean':function(a,b){return a},string:function(b,c){return!!a(b,c.form).length},'function':function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&'dependency-mismatch'},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&this.pendingRequest==0&&this.formSubmitted&&(a(this.currentForm).triggerHandler('invalid-form',[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,'previousValue')||a.data(b,'previousValue',{old:null,valid:!0,message:this.defaultMessage(b,'remote')})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr('class');return d&&a.each(d.split(' '),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={},d=a(b);for(var e in a.validator.methods){var f;e==='required'&&typeof a.fn.prop=='function'?f=d.prop(e):f=d.attr(e),f?c[e]=f:d[0].getAttribute('type')===e&&(c[e]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,'validator').settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,'validator');return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1){delete b[d];return}if(e.param||e.depends){var f=!0;switch(typeof e.depends){case'string':f=!!a(e.depends,c.form).length;break;case'function':f=e.depends.call(c,c)}f?b[d]=e.param!==undefined?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(['minlength','maxlength','min','max'],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(['rangelength','range'],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if(typeof b=='string'){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=d!=undefined?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return'dependency-mismatch';switch(c.nodeName.toLowerCase()){case'select':var e=a(c).val();return e&&e.length>0;case'input':if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return'dependency-mismatch';var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d=typeof d=='string'&&{url:d}||d;if(this.pending[c.name])return'pending';if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:'abort',port:'validate'+c.name,dataType:'json',data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()}else{var i={},j=d||f.defaultMessage(c,'remote');i[c.name]=e.message=a.isFunction(j)?j(b):j,f.showErrors(i)}e.valid=g,f.stopRequest(c,g)}},d)),'pending'},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){var e=this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^([\w\-\+!#%\*\=\?\^\{\}\|~]+(?:\.[\w\-\+!#%\*\=\?\^\{\}\|~]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,10}(?:\.[a-z]{2})?)$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return'dependency-mismatch';if(/[^0-9 -]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,'');for(var f=a.length-1;f>=0;f--){var g=a.charAt(f),d=parseInt(g,10);e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return c%10==0},accept:function(a,b,c){return c=typeof c=='string'?c.replace(/,/g,'|'):'png|jpe?g|gif',this.optional(b)||a.match(new RegExp('.('+c+')$','i'))},equalTo:function(b,c,d){var e=a(d).unbind('.validate-equalTo').bind('blur.validate-equalTo',function(){a(c).valid()});return b==e.val()}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){var e=a.port;a.mode=='abort'&&(b[e]&&b[e].abort(),b[e]=d)});else{var c=a.ajax;a.ajax=function(d){var e=('mode'in d?d:a.ajaxSettings).mode,f=('port'in d?d:a.ajaxSettings).port;return e=='abort'?(b[f]&&b[f].abort(),b[f]=c.apply(this,arguments)):c.apply(this,arguments)}}}(jQuery),function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:'focusin',blur:'focusout'},function(b,c){function d(b){return b=a.event.fix(b),b.type=c,a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,!0)},teardown:function(){this.removeEventListener(b,d,!0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);if(e.is(b))return d.apply(e,arguments)})}})}(jQuery),define('jquery.validate',function(){}),define('text!templates/contestView/edit-entry.htm',[],function(){return'<!-- modal begins-->\n<div id="edit-entry-modal" class="edit-entry-modal modal hide" tabindex="-1" role="dialog"\n    aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n        <h3>\n            <% if (price && price > 0) { %>\n                <%- T_("Edit Price") %>\n            <% } else { %>\n                <%- T_("Sell Entry") %>\n            <% } %>\n        </h3>\n    </div>\n    <div class="pinky-template" data-load="forms/default-form">\n        <form class="fl-form" onsubmit="return false;">\n            <div class="modal-body">\n                <div class=\'form-errors alert alert-error hide\'>\n                </div>\n                <input type=\'hidden\' name="id"\n                    id="input-id" value=\'<%- id %>\'>\n                <div class=\'sell-instructions\'>\n                    <%- T_("Set a price for your entry and if you don\'t win, you will have a second chance for the contest holder to buy your entry!") %>\n                </div>\n                <strong class="input-price-label">\n                    <%- T_("Sell entry price:") %>\n                </strong>\n                <span class="input-group input-group-price">\n                    <span class="add-on"><%- symbol %></span>\n                    <input id="input-price" class="addoned-field default-input"\n                        name="price"\n                        value=\'<%- price %>\' type="text"\n                        min="1" max="<%- prize %>">\n                    <span class="add-on"><%- code %></span>\n                </span>\n            </div>\n            <div class="modal-footer">\n                <button id="contest-entry-edit-confirm" class="btn btn-info" aria-hidden="true">\n                    <%- T_("Confirm") %>\n                </button>\n                <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %>\n                </button>\n            </div>\n        </form>\n    </div>\n</div>\n<!-- modal ends-->\n'}),define('text!templates/contestView/contestErrorModal.htm',[],function(){return'<div id="contest-error-modal" class="modal above-quickview hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n        <h3><%- T_("Error") %></h3>\n    </div>\n    <div class="modal-body">\n        <div class="alert alert-error">\n            <p><%= errorMessage %></p>\n        </div>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Close") %></button>\n    </div>\n</div>\n'}),define('contest/sell-entry',['jquery-wrapper','underscore-wrapper','jquery.validate','payments/module-payments-source','text!templates/contestView/edit-entry.htm','text!templates/contestView/contestErrorModal.htm','payments/module-fixed-amount-payment-modal'],function(a,b,c,d,e,f,g){var h=b.template(e),i=b.template(f),j={enabled:!0,options:{container:a('.contest-entry-wrapper'),modalContainer:a('#contest-response-container'),minSellPrice:0,prize:10,currency:{code:'USD',sign:'$'}}};return j.init=function(b){a.extend(j.options,b||{}),typeof b.enabled!='undefined'&&(j.enabled=b.enabled);if(!j.enabled)return;j.options.container.on('click','.entry-edit-price',function(a){a.stopPropagation(),j.openEditModal(a.target)}),j.options.modalContainer.on('click','#contest-entry-edit-confirm',function(){j.submitEdit()})},j.openEditModal=function(b){var c=a(b).parents('.contest-entry'),d={symbol:j.options.currency.sign,code:j.options.currency.code,id:c.attr('data-entry-id'),price:c.attr('data-price'),prize:j.options.prize};j.options.modalContainer.find('#edit-entry-modal').remove(),j.options.modalContainer.append(h(d));var e=j.options.modalContainer.find('#edit-entry-modal');e.modal('show');var f=e.find('.fl-form');f.validate({rules:{id:{required:!0},price:{required:!0,digits:!0,range:[j.options.minSellPrice,j.options.prize]}},errorPlacement:function(){return!0}})},j.submitEdit=function(){var b=j.options.modalContainer.find('#edit-entry-modal');b.find('button').attr('disabled','disabled');var c=b.find('.fl-form');if(c.valid()){var d={entry_id:c.find('#input-id').val(),sell_price:c.find('#input-price').val()},e=a('.contest-entry[data-entry-id="'+d.entry_id+'"]');e.attr('data-price',d.sell_price),a.ajax({type:'POST',data:d,url:'/ajax/contest/editEntryPrice.php',dataType:'json',success:function(a){a&&(a.status==='success'?b.modal('hide'):(b.find('.form-errors').show(),b.find('.form-errors').html(a.errors),b.find('button').removeAttr('disabled')))},error:function(){b.find('.form-errors').show(),b.find('.form-errors').html(T_('Failed to edit price.')),b.find('button').removeAttr('disabled')}})}else b.find('.form-errors').show(),b.find('.form-errors').html(T_('Please enter an amount from <%- currencySign %><%- minSellPrice %> to <%- currencySign %><%- prize %>',{prize:j.options.prize,minSellPrice:j.options.minSellPrice,currencySign:j.options.currency.sign})),b.find('button').removeAttr('disabled')},j.openBuyEntryModal=function(a){var c={amount:a.sellPrice,currencyDetails:{id:a.currency.id,sign:a.currency.sign,code:a.currency.code}},d={show:!0,buttonText:T_('Buy Now')},e={show:!0,buttonText:T_('Cancel')},f=b.template('<div style="text-align: center"><img src="<%- thumb %>"></div>',{thumb:a.thumb});a.publicUserName=a.publicUserName||a.username;var h={description:window.T_('Are you sure you want to buy <a title="<[- username ]>" href="/u/<[- username ]>"><[- publicUserName ]></a>\'s entry #<[- number ]>?',{username:a.username,number:a.number,publicUserName:a.publicUserName})+f};return g.initModal(c,function(){j.buyEntry(a)},null,null,null,d,e,h),g.getModal()},j.buyEntry=function(b){var c=b.entryId,d={entry_id:c,isAjax:!0};a.ajax({type:'GET',url:'/contest/projectAction/buy.php',data:d,cache:!1,dataType:'json',success:function(a){if(a.result==='redirect')window.location.href=a.redirect;else{var b=T_('Failed to buy entry, please try again');j.errorMessagePopup(b)}},error:function(){var a=T_('Server Error. Failed to buy entry.');j.errorMessagePopup(a)}})},j.errorMessagePopup=function(b){var c={errorMessage:b};return a('#contest-response-container').html(i(c)),a('#contest-error-modal').modal('show')},{init:j.init,openBuyEntryModal:j.openBuyEntryModal,errorMessagePopup:j.errorMessagePopup}}),define('contest/view-page/errorModal',['jquery-wrapper','underscore-wrapper','text!templates/contestView/contestErrorModal.htm'],function(a,b,c){var d={container:a('#contest_popup-container'),message:''},e=function(){var a=this;this.options.container.append(this.modal),this.modal.on('hidden.bs.modal',function(){a.modal.remove()}),this.modal.modal('show')},f=function(f){this.options=a.extend(!0,{},d,f),this.modal=a(b.template(c,{errorMessage:this.options.message})),e.call(this)};return f}),define('contest/view-page/services/contestApi',['jquery-wrapper'],function(a){var b=function(){};return b.prototype.getContestHolderReputation=function(b){var c={type:'get',url:'/ajax/reputation-employer-on-hover-content.php',dataType:'json'};return a.extend(!0,b,c),a.ajax(b)},b.prototype.getUsersPlanToJoin=function(b){var c={type:'GET',url:'/contest/projectAction/getContestJoins.php',dataType:'json'};return a.extend(!0,b,c),a.ajax(b)},b.prototype.joinContest=function(b){var c={type:'POST',url:'/contest/projectAction/joinContest.php',dataType:'json'};return a.extend(!0,b,c),a.ajax(b)},b.prototype.bookMark=function(b){var c={type:'POST',url:'/contest/watch.php',dataType:'json'};return a.extend(!0,b,c),a.ajax(b)},b.prototype.upgradeContest=function(b){var c={type:'POST',url:'/ajax/contest/update.php',dataType:'json'};return a.extend(!0,b,c),a.ajax(b)},b.prototype.getExtendFees=function(b){var c={type:'POST',url:'/contest/projectAction/getExtendedFees.php',dataType:'json'};return a.extend(!0,b,c),a.ajax(b)},b.prototype.getUserPaymentMethodInfo=function(b){var c={type:'POST',url:'/ajax/payment/getUserPaymentMethodInfo.php',dataType:'json'};return a.extend(!0,b,c),a.ajax(b)},b.prototype.getFirstWinner=function(b){return a.extend(!0,b,{type:'GET',url:'/contest/projectAction/getFirstWinner.php',cache:!1,dataType:'json'}),a.ajax(b)},b.prototype.getEngagementData=function(b){return a.extend(!0,b,{type:'GET',url:'/ajax/contest/getEngagementData.php',dataType:'json'}),a.ajax(b)},b.prototype.unlockEntries=function(b){return a.extend(!0,b,{type:'GET',url:'/contest/projectAction/unlockEntries.php',dataType:'json'}),a.ajax(b)},b}),define('payments/new-module-fixed-amount-payment-modal',['jquery-wrapper','underscore-wrapper','contest/view-page/errorModal','contest/view-page/services/contestApi','text!templates/payments/new-fixed-amount-payment-modal.htm'],function(a,b,c,d,e){var f=a('#contest_popup-container'),g=new d,h=function(a){return new c({container:f,message:a})},i=function(a){var b=this;this.modal.on('click','#paymentModalConfirmButton',function(){b.modal.modal('hide'),a.value==='MakePayment'?a.name='Deposit':a.section==='ContestPostModal'?a.name='Post':a.subsection==='UpgradeContest'||a.subsection==='EditContest'?a.name='Upgrade':a.name='Award',m.call(b,a),b.options.callbacks.confirm()}),this.modal.on('click','#paymentModalCloseButton',function(){a.name='Cancel',m.call(b,a),b.options.callbacks.close()}),this.modal.on('shown.bs.modal',function(){a.name='ShowModal',m.call(b,a)})},j=function(){var a=this,b=this.options.modalData.chargeTotal;if(typeof b=='undefined'||b===null){h.call(a,window.T_('Total amount must be provided'));return}var c=parseFloat(b);if(isNaN(c)){h.call(a,window.T_('Invalid total amount'));return}c<=0&&this.options.callbacks.confirm(),Object.keys(this.options.retrievedPaymentMethodInfo).length===0?k.call(this).done(function(b){a.options.retrievedPaymentMethodInfo=b}).done(n.bind(a)).fail(function(b){h.call(a,b)}):n.call(a)},k=function(){var b=this,c=new a.Deferred;return g.getUserPaymentMethodInfo({data:{currency:b.options.modalData.currency.id},success:function(a){c.resolve(a)},error:function(){c.reject(window.T_('Server error. Please try again.'))}}),c.promise()},l=function(){a('#expanded-payment-modal').modal('hide').remove()},m=function(a){var b={label:'PaymentConfirmationModal',reference:'contest_id',reference_id:this.options.modalData.contestId},c=Object.assign({},b,a);window._lt.push(['user_action',c])},n=function(){var c=!1;if(this.options.retrievedPaymentMethodInfo.firstAvailablePaymentMethod||parseInt(this.options.retrievedPaymentMethodInfo.totalBalance.currency.id||0,10)===parseInt(this.options.modalData.currency.id||0,10)&&parseFloat(this.options.retrievedPaymentMethodInfo.totalBalance.amount||0)>=parseFloat(this.options.modalData.chargeTotal||0))c=!0;l.call(this),c?a.extend(!0,this.options.modalData,this.options.modalData.spiels.hasEnoughBalanceOrPaymentMethod):a.extend(!0,this.options.modalData,this.options.modalData.spiels.noBalanceOrPaymentMethod),this.modal=a(b.template(e,this.options.modalData)).appendTo('.pinky-template:first'),this.options.trackingData.value=c?'ConfirmPayment':'MakePayment',i.call(this,this.options.trackingData),this.modal.modal({backdrop:'static',keyboard:!0}),this.options.callbacks.onQuickViewShow(this.modal)},o=function(b){this.modal=null,this.options={modalData:{chargeTotal:null,chargeDetails:[],currency:{id:null,sign:null,code:null},includesGST:!1,spiels:{hasEnoughBalanceOrPaymentMethod:{heading:window.T_('Confirm Payment'),headingSubtext:null,subHeading:window.T_('Product Details'),text:null,footerText:window.T_('This will be debited from your available balances, then if required we will attempt to process this payment from your verified payment methods.'),buttonLabel:window.T_('Confirm Payment'),showCharges:!0},noBalanceOrPaymentMethod:{heading:window.T_('Your contest is ready to go live!'),headingSubtext:null,subHeading:null,text:window.T_('To start getting entries from our talented freelancers, make a payment of <span class="ModalPayment-descriptionText-totalCost"><[- currencySign ]><[- amountToPay ]> <[- currencyCode ]></span> to finish posting your contest.',{amountToPay:b.modalData.chargeTotal.toFixed(2),currencySign:b.modalData.currency.sign,currencyCode:b.modalData.currency.code}),footerText:null,buttonLabel:window.T_('Make Payment'),showCharges:!1}},heading:null,headingSubtext:null,subHeading:null,text:null,buttonLabel:null,showCharges:!0,contestId:null},callbacks:{confirm:a.noop,close:a.noop,onQuickViewShow:a.noop},experiments:{enableMultiAward:!1,entryCount:0},trackingData:{section:'ContestPostModal',subsection:'PostContest'},retrievedPaymentMethodInfo:{}},a.extend(!0,this.options,b),j.call(this)};return o.prototype.show=function(){this.modal&&this.modal.modal('show')},o}),define('text!templates/dashboard/projectHireMeExpired.htm',[],function(){return'<div id="denied_bid_<%- data.id %>">\n  <div id="status">\n    <div class="profile-pic-wrapper">\n      <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" alt="" title="<%- data.userName %>" class="profile-pic" /></span>\n    </div>\n    <h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> was unable to work on your project <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.name ]></a>", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n  </div>\n  <div>\n    <div id="recommendedFreelancers"></div>\n  </div>\n</div>\n'}),define('text!templates/dashboard/generic.htm',[],function(){return'<div class="profile-pic-wrapper">\n<!--   <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span> -->\n<%- msg %>\n</div>\n<H2>\n    <%= data.text %>\n    <span class=\'noTrunc\'> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span>\n</H2>\n'}),define('text!templates/dashboard/contest.invited.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.buyerName %>" class="profile-pic"></span>\n</div>\n\n<h2><%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.buyerName ]>\'><[- data.buyerPublicName || data.buyerName ]></a> has invited you to enter their contest <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.title ]></a> ", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<ul class="news-list">\n  <li class="news-item last">\n    <p>\n      <strong><%- T_("Prize:")%></strong> <%- data.currencysign%><%- data.prize%>\n      <%- data.currencycode%>\n    </p>\n    <div class="descr-long">\n      <p>\n        <Strong><%- T_("Contest Description:") %></Strong>\n        <span id =\'needToShorten\' data-origin=\'<%- data.description %>\'> <%- data.description %> </span>\n      </p>\n      <a id=\'seeMore\' style ="display:none" ><%- T_("see more") %></a>\n    </div>\n    <p>\n      <strong><%- T_("Recommended Skills:") %></strong> <%- data.contest_recommended_skills %>\n    </p>\n  </li>\n</ul>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class ="first">\n      <a href="<%- data.linkUrl %>"> <i class="icon-share-alt"></i>&nbsp;<%- T_("Enter Contest Now !") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/kyc.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n</div>\n<h2>\n    <% if(data.status == "approved") { %>\n        <span><%-T_("You are now a Freelancer.com Verified member of our community. Thank you for helping to keep Freelancer.com a trusted and secure marketplace!") %></span>\n            <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n    <% } else if (data.status == "declined") { %>\n        <div class="alert alert-error" id="action_history" style=" display:">\n            <span><%-T_("We require that you provide further information to assist us in verifying your identity. Please visit the Verification Center for more information.") %></span>\n            <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n        </div>\n    <% } else if (data.status == "pending") { %>\n        <span><%-T_("You have successfully submitted your request to verify your identity. Please allow up to 2-3 business days for our Verification Team to review your details. We\'ll be in touch soon!") %></span>\n            <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n    <% } else if (data.status == "required") { %>\n            <span><%-T_("To process your withdrawal request, we require you to verify your identity to ensure your account\'s security. To verify your identity now, please visit the Verification Center.") %></span>\n            <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n    <% } else if (data.status == "recommended") { %>\n            <span><%-T_("We recommend that you verify your identity before your next withdrawal. By verifying your identity, you’ll have the added benefit of faster processing of payments and faster resolution of account issues and disputes.") %></span>\n            <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n    <% } %>\n    <% if(data.status == "declined" || data.status == "pending" || data.status == "required" || data.status == "recommended") { %>\n        <div class="actions tabbable">\n            <ul class="nav nav-tabs">\n                <li class="first">\n                    <% if(data.isCorporate == "true") { %>\n                        <a href = "<%= ssl_base_url %>/users/kyc/verificationCenter.php?type=corporate<% if(data.country) { %>&location=<%- data.country %><% } %>">\n                    <% } else { %>\n                        <a href = "<%= ssl_base_url %>/users/kyc/verificationCenter.php">\n                    <% } %>\n                    <i class="icon-share-alt"></i>\n                    <%=T_("Visit the Verification Center") %></a>\n                </li>\n            </ul>\n        </div>\n    <% } %>\n</h2>\n'}),define('text!templates/dashboard/membership.bidsRunningOut.htm',[],function(){return'<div>\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic">\n            <a>\n                <img src="/img/freelancer_32_32.png"  alt="profile pic" title="Freelancer" class="profile-pic freelancer" onerror="this.src=\'/img/unknown.png\'">\n            </a>\n        </span>\n    </div>\n\n<% if (data.lowBids) { %>\n    <% if (data.tax) { %>\n        <% if (data.isFreeTrialAvailable) { %>\n            <%= T_("You have used 70% of your bids for this month. To keep bidding, we would like to <strong>offer you a free upgrade to <[- data.newPlanName]> membership for 30 days</strong> (valued at <[= data.currency]><[- data.amount]> <[- data.currencyCode]> incl. GST per month). You\'ll receive these great features:", {data: data}) %> <em class="timestamp time_text">Just now</em></h2>\n        <% } else {%>\n            <%= T_("You have used 70% of your bids for this month. Upgrade to <strong> <[- data.newPlanName]> Membership</strong> now for only <[= data.currency]><[- data.amount]> <[- data.currencyCode]>/month (incl. GST) and receive an additional <[- data.bidsLimitDiff]> bids to use immediately. As a <[- data.newPlanName]> member you\'ll receive these great features:", {data: data}) %> <em class="timestamp time_text">Just now</em>\n        <% } %>\n    <% } else { %>\n        <% if (data.isFreeTrialAvailable) { %>\n            <%= T_("You have used 70% of your bids for this month. To keep bidding, we would like to <strong>offer you a free upgrade to <[- data.newPlanName]> membership for 30 days</strong> (valued at <[= data.currency]><[- data.amount]> <[- data.currencyCode]>  per month). You\'ll receive these great features:", {data: data}) %> <em class="timestamp time_text">Just now</em></h2>\n        <% } else { %>\n            <%= T_("You have used 70% of your bids for this month. Upgrade to <strong> <[- data.newPlanName]> Membership</strong> now for only <[= data.currency]><[- data.amount]> <[- data.currencyCode]>/month and receive an additional <[- data.bidsLimitDiff]> bids to use immediately. As a <[- data.newPlanName]> member you\'ll receive these great features:", {data: data}) %> <em class="timestamp time_text">Just now</em>\n        <% } %>\n    <% } %>\n<% } else { %>\n    <% if (data.tax) { %>\n        <% if (data.isFreeTrialAvailable) { %>\n            <%= T_("You have used all your allocated bids for this month. To keep bidding, we would like to <strong>offer you a free upgrade to <[- data.newPlanName]> membership for 30 days</strong> (valued at <[= data.currency]><[- data.amount]> <[- data.currencyCode]> incl. GST per month). You\'ll receive these great feautres:", {data: data}) %> <em class="timestamp time_text">Just now</em></h2>\n        <% } else { %>\n            <%= T_("You have used all your allocated bids for this month. The good news is that you dont have to wait to bid on your next project! Upgrade to <strong> <[- data.newPlanName]> Membership</strong> now for only <[= data.currency]><[- data.amount]> <[- data.currencyCode]>/month (incl. GST) and receive an additional <[- data.bidsLimitDiff]> bids to use immediately. As a <[- data.newPlanName]> member you\'ll receive these great features:", {data: data}) %> <em class="timestamp time_text">Just now</em>\n        <% } %>\n    <% } else { %>\n        <% if (data.isFreeTrialAvailable) { %>\n            <%= T_("You have used all your allocated bids for this month. To keep bidding, we would like to <strong>offer you a free upgrade to <[- data.newPlanName]> membership for 30 days</strong> (valued at <[= data.currency]><[- data.amount]> <[- data.currencyCode]> per month). You\'ll receive these great features:", {data: data}) %> <em class="timestamp time_text">Just now</em></h2>\n        <% } else {%>\n            <%= T_("You have used all your allocated bids for this month. The good news is that you dont have to wait to bid on your next project! Upgrade to <strong> <[- data.newPlanName]> Membership</strong> now for only <[= data.currency]><[- data.amount]> <[- data.currencyCode]>/month and receive an additional <[- data.bidsLimitDiff]> bids to use immediately. As a <[- data.newPlanName]> member you\'ll receive these great features:", {data: data}) %> <em class="timestamp time_text">Just now</em>\n        <% } %>\n    <% } %>\n<% } %>\n<% if (data.isFreeTrialAvailable) { %>\n    <ul class="news-list">\n        <% if (data.newInternalName == "plan15") { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>15 Bids Per Month</strong> - Bid on more projects!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>30 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades!</li>\n        <% } else if (data.newInternalName == "plan20") { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>50 Bids Per Month</strong> - Bid on more projects!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>50 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n        <% } else if (data.newInternalName == "plan25") { %>\n            <% if (data.isFreeTrialAvailable){ %>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>100 Bids Per Month</strong> - Bid on more projects!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>80 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>5 External Invoices Per Month</strong> - Send invoices to any client on the internet!</li>\n            <% } else { %>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>100 Bids Per Month</strong> - Bid on more projects!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>80 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>5 External Invoices Per Month</strong> - Send invoices to any client on the internet!</li>\n            <% } %>\n        <% } else if (data.newInternalName == "plan30") { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>150 Bids Per Month</strong> - Bid on more projects!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>100 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>5% Freelancer Fee</strong> - Save 50% on the freelancer fee comparing to Plus Membership!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>15 External Invoices Per Month</strong> - Send invoices to any client on the internet!</li>\n        <% } else if (data.newInternalName == "plan50") {%>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>500 Bids Per Month</strong> - Bid on more projects!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>250 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>3% Freelancer Fee</strong> - Save 40% on the freelancer fee comparing to Standard Membership!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>Unlimited External Invoices Per Month</strong> - Send invoices to any client on the internet!</li>\n        <% } %>\n        <li class="news-item first">+ many more benefits!</li>\n        <% if (data.lowBids) { %>\n                <li><a style="margin-top: -5px;margin-left: 10px;margin-bottom: 5px;" class="btn btn-primary btn-mini" href="/payments/verify.php?TrialUpsell2=true&ref=dashboard_low_bid_trial"><%= T_("Claim it now for Free") %></a></li>\n                <li class="news-item first"><span style="font-size:11px; color:#636363;"><%= T_("You can cancel at any time before the end of your 30 day trial period at no extra cost.") %> </span></li>\n        <% } else { %>\n                <li><a style="margin-top: -5px;margin-left: 10px;margin-bottom: 5px;" class="btn btn-primary btn-mini" href="/payments/verify.php?TrialUpsell2=true&ref=dashboard_exhausted_bid_trial"><%= T_("Claim it now for Free") %></a></li>\n                <li class="news-item first"><span style="font-size:11px; color:#636363;"><%= T_("You can cancel at any time before the end of your 30 day trial period at no extra cost.") %> </span></li>\n        <% } %>\n    </ul>\n<% } else { %>\n    <ul class="news-list">\n        <% if (data.newInternalName == "plan15") { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>15 Bids Per Month</strong> - Bid on more projects!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>30 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades!</li>\n        <% } else if (data.newInternalName == "plan20") { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>50 Bids Per Month</strong> - Bid on more projects!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>50 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n        <% } else if (data.newInternalName == "plan25") { %>\n            <% if (data.isFreeTrialAvailable){ %>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>100 Bids Per Month</strong> - Bid on more projects!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>80 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>5 External Invoices Per Month</strong> - Send invoices to any client on the internet!</li>\n            <% } else { %>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>100 Bids Per Month</strong> - Bid on more projects!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>80 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n                <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>5 External Invoices Per Month</strong> - Send invoices to any client on the internet!</li>\n            <% } %>\n        <% } else if (data.newInternalName == "plan30") { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>150 Bids Per Month</strong> - Bid on more projects!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>100 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>5% Freelancer Fee</strong> - Save 50% on the freelancer fee comparing to Plus Membership!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>15 External Invoices Per Month</strong> - Send invoices to any client on the internet!</li>\n        <% } else if (data.newInternalName == "plan50") {%>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>500 Bids Per Month</strong> - Bid on more projects!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>250 Skills on your Profile</strong> - Apply for more projects across multiple categories!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>3% Freelancer Fee</strong> - Save 40% on the freelancer fee comparing to Standard Membership!</li>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <strong>Unlimited External Invoices Per Month</strong> - Send invoices to any client on the internet!</li>\n        <% } %>\n        <li class="news-item first" style="margin-bottom: -5px">+ many more benefits!</li>\n        <% if (data.lowBids) { %>\n            <li><p><a style="margin-top: 5px;margin-left: 10px;margin-bottom: 10px;" class="btn btn-primary btn-mini" id="show-upgrade"><%= T_("Upgrade to <[- data.newPlanName]> now!", {data: data}) %></a><a class="font-bold" href="/membership/index.php?ref=dashboard_low_bid" style="margin-left: 10px;"><%= T_("Learn More") %></a></p></li>\n        <% } else { %>\n            <li><p><a style="margin-top: 5px;margin-left: 10px;margin-bottom: 10px;" class="btn btn-primary btn-mini" id="show-upgrade"><%= T_("Upgrade to <[- data.newPlanName]> now!", {data: data}) %></a><a class="font-bold" href="/membership/index.php?ref=dashboard_exhausted_bid" style="margin-left: 10px;"><%= T_("Learn More") %></a></p></li>\n        <% } %>\n    </ul>\n    <ul class="confirmation">\n        <li style="margin-bottom: 10px;">\n            <%= T_("Upgrade your membership now for <[= data.currency]><[- data.amount]> <[- data.currencyCode]>?", {data: data}) %>\n        </li>\n        <li>\n            <% if (data.lowBids) { %>\n                <a href="<%= data.membershipUrl %>" class="btn btn-info btn-mini">Confirm</a>\n                <a class="btn btn-no btn-mini" id="hide-upgrade">Cancel</a>\n            <% } else { %>\n                <a href="<%= data.membershipUrl %>" class="btn btn-info btn-mini" id="hide-upgrade">Confirm</a>\n                <a class="btn btn-no btn-mini" id="hide-upgrade">Cancel</a>\n            <% } %>\n        </li>\n    </ul>\n<% } %>\n\n\n</div>\n'}),define('text!templates/dashboard/counterOffer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("<b>You\'ve received a counteroffer. </b><a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- user ]></a> is interested in working on your project <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.projName ]></a>, <span class=\'notrunc\'>but wants to make these changes to the project budget.</span>", {data: data, user: data.publicName || data.userName}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<div class="alert alert-info">\n    <p>\n        <%- T_("Your original project budget")%>:&nbsp;\n        <b> <% if(data.projIsHourly) { %>\n        <%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.bid.sum]>/hr in <[-data.bid.period]> hrs/week",{data:data}) %>\n        <% } else { %>\n        <%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.bid.sum]> in <[-data.bid.period]> days",{data:data}) %>\n        <% } %> </b>\n    </p>\n    <p>\n        <%= T_("<a href=\'/u/<[-userName]>\'><[-user]></a>\'s counteroffer",{userName: data.userName, user: data.publicName || data.userName})%>:&nbsp; <b> <% if(data.projIsHourly) { %>\n        <%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.sellerCounterOffer.newAmount]>/hr in <[-data.sellerCounterOffer.newPeriod]> hrs/week",{data:data}) %>\n        <% } else { %>\n        <%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.sellerCounterOffer.newAmount]> in <[-data.sellerCounterOffer.newPeriod]> days",{data:data}) %>\n        <% } %> </b>\n    </p>\n    <p>\n        <b><%- T_("Message")%></b>: <%- data.sellerCounterOffer.comment %>\n    </p>\n</div>\n<!-- action history-->\n<div class="alert alert-success" id="action_history" style=" display:<% if(typeof state === \'undefined\' || state == "") {%> none <% } %>" >\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <% if ( typeof state !== \'undefined\') { %>\n            <li class="first">\n                <a href="<%- data.linkUrl %>" class="action-state"> <i class="icon-ok"></i>&nbsp;<% if (state == \'accept\') {%><%- T_("Counteroffer Accepted") %>\n                <%} else if (state == \'reject\') {%><%- T_("Counteroffer Rejected") %><%}%> </a>\n            </li>\n            <%}%>\n        </ul>\n    </div>\n</div>\n\n<% if(typeof state === \'undefined\' || state == "") {%>\n<div class="well margin-t5">\n    <p class="bold">\n        <%-T_("Do you want to accept their counteroffer?")%>\n    </p>\n    <div id="acceptBox">\n        <a id = "acceptBtn" class="btn btn-info btn-mini"><%- T_("Accept") %></a>\n        <a id = "rejectBtn" class="btn btn-mini"><%- T_("Reject") %></a>\n    </div>\n    <span class = "hint"></span>\n</div>\n<%} %>\n'}),define('text!templates/dashboard/suggestionForFreelancerAfterReceiveReview.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("Congratulations on completing <a class=\'trunc\' href=\'/projects/<[- data.seoUrl ]>.html\'><[-data.projectName]></a>! <span class=\'notrunc\'>Keep the work coming your way by following these steps to promote your profile:</span>", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<ul  class="news-list getMoreWorkList">\n  <li class="news-item" id="inDirectory">\n    <div class="content" id="completeProfileTask">\n      <p>\n      1. <%= T_("<b>Get listed in the Freelancer Directory</b>. Complete your profile to get listed so employers can hire you for their work.")%>\n      </p>\n    </div>\n    <a class="action" id="completeProfileTaskLink" href="/u/<%-currentUserName%>"><%- T_("Complete Profile")%></a>\n    <span class="action action-success" id="completeProfileTaskSuccess" style="display:none"><i class="icon-ok"></i> <%- T_("Complete")%></span>\n  </li>\n  <li class="news-item" disabled style="opacity:0.75">\n    <p class="content" id="completeProfileTask">\n      2. <%= T_("<b>Sponsor Directory Listing</b>. Sponsor your listing to get displayed on the first page of the directory, for any of your skills.")%>\n    </p>\n    <a class="action" href="/freelancers/"><%- T_("Sponsor Listing")%></a>\n  </li>\n  <li class="news-item" disabled style="opacity:0.75">\n    <p class="content" id="completeProfileTask">\n      3. <%= T_("<b>External HireMe Buttons</b>. Promote your profile on external sites to attract job offers from across the internet.")%>\n    </p>\n    <a class="action" href="/hireme/"><%- T_("Promote Profile")%></a>\n  </li>\n</ul>\n'}),define('text!templates/dashboard/upsellIntro.htm',[],function(){return'<div>\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.username %>" class="profile-pic"></span>\n    </div>\n    <% if (data.with_GST) { %>\n    <h2><%= T_("Try the Intro Membership Plan, the most economical way to get the benefits of membership. Only <[- data.currency_sign ]><[- data.price ]> <[- data.currency_code ]> including GST a month.", {\'data\':data}) %></h2>\n    <% } else { %>\n    <h2><%= T_("Try the Intro Membership Plan, the most economical way to get the benefits of membership. Only <[- data.currency_sign ]><[- data.price ]> <[- data.currency_code ]> a month.", {\'data\':data}) %></h2>\n    <% } %>\n    <ul class="news-list">\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- data.membership.bids_limit ]> Bids per month</strong> - Increase your chances of winning more projects", {\'data\':data}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- data.membership.skills_limit ]> Skills</strong> - Work in more categories", {\'data\':data}) %></li>\n        <li class="news-item first"><!-- padding --></li>\n        <li><a style="margin-top: -5px;margin-left: 10px;margin-bottom: 15px;" class="btn btn-info btn-mini" href="<%- data.signup_url %>"><%= T_("Upgrade Now!") %></a></li>\n    </ul>\n    <p class="small margin-t5 margin-b0"><%= T_("You can cancel at any time for no extra cost.") %></p>\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class="first"><a href="<%- data.signup_url %>" target="_blank"><i class="icon-share-alt"></i> <%= T_("Upgrade Now!") %></a></li>\n        </ul>\n    </div>\n</div>\n'}),define('text!templates/dashboard/upsellBasicTrial.htm',[],function(){return'<div>\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.username %>" class="profile-pic"></span>\n    </div>\n    <% if (data.with_GST) { %>\n    <h2><%= T_("We trust you are enjoying using Freelancer. To help you continue to be successful, we would like to offer you a <strong>free 7 day upgrade to Basic Membership</strong> (valued at <[- data.currency_sign ]><[- data.price ]> <[- data.currency_code ]> including GST). You\'ll receive these great benefits:", {\'data\':data}) %></h2>\n    <% } else { %>\n    <h2><%= T_("We trust you are enjoying using Freelancer. To help you continue to be successful, we would like to offer you a <strong>free 7 day upgrade to Basic Membership</strong> (valued at <[- data.currency_sign ]><[- data.price ]> <[- data.currency_code ]>). You\'ll receive these great benefits:", {\'data\':data}) %></h2>\n    <% } %>\n    <ul class="news-list">\n    <% if (data.isBoth) { %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- data.membership.bids_limit ]> Bids Per Month</strong> - Bid on more projects!", {\'data\':data}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- data.membership.skills_limit ]> Skills on your Profile</strong> - Apply for more projects across multiple categories!", {\'data\':data}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Priority Projects</strong> - Skip support and send your projects live instantly!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Design Studio</strong> - Easily review work and provide feedback.") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades.") %></li>\n    <% } if (data.isFreelancer) { %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- data.membership.bids_limit ]> Bids Per Month</strong> - Bid on more projects!", {\'data\':data}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- data.membership.skills_limit ]> Skills on your Profile</strong> - Apply for more projects across multiple categories!", {\'data\':data}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades!") %></li>\n    <% } if (data.isEmployer) { %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Priority Projects</strong> - Skip support and send your projects live instantly!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Design Studio</strong> - Easily review work and provide feedback.") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades.") %></li>\n    <% } %>\n        <li class="news-item first"><%= T_("+ many more benefits!") %></li>\n        <li><a style="margin-top: -5px;margin-left: 10px;margin-bottom: 15px;" class="btn btn-primary btn-mini" href="<%- data.claim_url %>"><%= T_("Claim it now for Free!") %></a></li>\n    </ul>\n    <p class="small margin-t5 margin-b0"><%= T_("After your free trial, your membership will renew each month for only <[- data.currency_sign ]><[- data.price ]> <[- data.currency_code ]>, unless cancelled. You can downgrade your membership at any time for no extra cost.", {\'data\':data}) %></p>\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class="first"><a href="<%- data.claim_url %>" target="_blank"><i class="icon-share-alt"></i> <%= T_("Claim it now for free!") %></a></li>\n        </ul>\n    </div>\n</div>\n'}),define('text!templates/dashboard/upsellPlusTrial.htm',[],function(){return'<% if (data.trialPackage) { %>\n<div>\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.username %>" class="profile-pic"></span>\n    </div>\n    <% if (data.with_GST) { %>\n        <h2>\n            <%= T_("To help you get started, we would like to offer you a <strong>free upgrade to our <[- data.trialPackage.package.upper_name ]> Membership</strong> for 30 days (valued at <[- data.trialPrice ]> including GST). You\'ll receive these great benefits:", {\'data\':data}) %>\n        </h2>\n    <% } else { %>\n        <h2>\n            <%= T_("To help you get started, we would like to offer you a <strong>free upgrade to our <[- data.trialPackage.package.upper_name ]> Membership</strong> for 30 days (valued at <[- data.trialPrice ]>). You\'ll receive these great benefits:", {\'data\':data}) %>\n        </h2>\n    <% } %>\n    <ul class="news-list">\n    <% if (data.isBoth) { %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- benefits.bids_limit.benefit_value ]> Bids Per Month</strong> - Bid on more projects!", {\'benefits\': data.trialBenefits}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- benefits.skills_limit.benefit_value ]> Skills on your Profile</strong> - Apply for more projects across multiple categories!", {\'benefits\': data.trialBenefits}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Priority Projects</strong> - Skip support and send your projects live instantly!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Project Extensions</strong> - Increase the time your project can receive bids.") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades.") %></li>\n    <% } if (data.isFreelancer) { %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- benefits.bids_limit.benefit_value ]> Bids Per Month</strong> - Bid on more projects!", {\'benefits\': data.trialBenefits}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- benefits.skills_limit.benefit_value ]> Skills on your Profile</strong> - Apply for more projects across multiple categories!", {\'benefits\': data.trialBenefits}) %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong><[- benefits.offsite_invoice.benefit_value ]> External Invoices Per Month</strong> - Send invoices to any client on the internet!", {\'benefits\': data.trialBenefits}) %></li>\n    <% } if (data.isEmployer) { %>\n        <% if (data.with_GST) { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Project Extensions</strong> - Increase the time your project can receive bids (save <[- data.extendPrice ]> with GST per extension).", {\'data\': data}) %></li>\n        <% } else { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Project Extensions</strong> - Increase the time your project can receive bids (save <[- data.extendPrice ]> per extension).", {\'data\': data}) %></li>\n        <% } %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades.") %></li>\n    <% } %>\n        <li class="news-item first"><%= T_("+ many more benefits!") %></li>\n        <li><a\n        data-newstrack-label="GoToClaimFreeUpgrade"\n        data-newstrack-section="Main"\n        style="margin-top: -5px;margin-left: 10px;margin-bottom: 15px;"\n        class="btn btn-primary btn-mini"\n        href="<%- data.claim_url %>"><%- T_("Claim it now for Free!")%></a></li>\n    </ul>\n    <p class="small margin-t5 margin-b0"><%= T_("After your free trial, your membership will renew each month for only <[- data.trialPrice ]>, unless cancelled. You can downgrade your membership at any time for no extra cost.", {\'data\':data}) %></p>\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class="first"><a\n            data-newstrack-label="GoToClaimFreeUpgrade"\n            data-newstrack-section="Body"\n            href="<%- data.claim_url %>" target="_blank"><i class="icon-share-alt"></i> <%- T_("Claim it now for free!") %></a></li>\n        </ul>\n    </div>\n</div>\n<% } else { %>\n    <%- data %>\n<div>\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.username %>" class="profile-pic"></span>\n    </div>\n    <% if (data.with_GST) { %>\n        <h2>\n            <%= T_("To help you get started, we would like to offer you a <strong>free upgrade to our Plus Membership</strong> for 30 days (valued at <[- data.currency_sign ]><[- data.price ]> <[- data.currency_code ]> including GST). You\'ll receive these great benefits:", {\'data\':data}) %>\n        </h2>\n    <% } else { %>\n        <h2>\n            <%= T_("To help you get started, we would like to offer you a <strong>free upgrade to our Plus Membership</strong> for 30 days (valued at <[- data.currency_sign ]><[- data.price ]> <[- data.currency_code ]>). You\'ll receive these great benefits:", {\'data\':data}) %>\n        </h2>\n    <% } %>\n    <ul class="news-list">\n    <% if (data.isBoth) { %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>100 Bids Per Month</strong> - Bid on more projects!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>80 Skills on your Profile</strong> - Apply for more projects across multiple categories!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Priority Projects</strong> - Skip support and send your projects live instantly!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Project Extensions</strong> - Increase the time your project can receive bids.") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades.") %></li>\n    <% } if (data.isFreelancer) { %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>100 Bids Per Month</strong> - Bid on more projects!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>80 Skills on your Profile</strong> - Apply for more projects across multiple categories!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades!") %></li>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>5 External Invoices Per Month</strong> - Send invoices to any client on the internet!") %></li>\n    <% } if (data.isEmployer) { %>\n        <% if (data.with_GST) { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Project Extensions</strong> - Increase the time your project can receive bids (save <[- data.extendPrice ]> with GST per extension).", {\'data\': data}) %></li>\n        <% } else { %>\n            <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Free Project Extensions</strong> - Increase the time your project can receive bids (save <[- data.extendPrice ]> per extension).", {\'data\': data}) %></li>\n        <% } %>\n        <li class="news-item first padding-b0"><i class="icon-16-green-tick margin-r5"></i> <%= T_("<strong>Freelancer Rewards</strong> - Unlock rewards and earn free upgrades.") %></li>\n    <% } %>\n        <li class="news-item first"><%= T_("+ many more benefits!") %></li>\n        <li><a\n        data-newstrack-label="GoToClaimFreeUpgrade"\n        data-newstrack-section="Main"\n        style="margin-top: -5px;margin-left: 10px;margin-bottom: 15px;"\n        class="btn btn-primary btn-mini"\n        href="<%- data.claim_url %>"><%- T_("Claim it now for Free!")%></a></li>\n    </ul>\n    <p class="small margin-t5 margin-b0"><%= T_("After your free trial, your membership will renew each month for only <[- data.currency_sign ]><[- data.price ]> <[- data.currency_code ]>, unless cancelled. You can downgrade your membership at any time for no extra cost.", {\'data\':data}) %></p>\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class="first"><a\n            data-newstrack-label="GoToClaimFreeUpgrade"\n            data-newstrack-section="Body"\n            href="<%- data.claim_url %>" target="_blank"><i class="icon-share-alt"></i> <%- T_("Claim it now for free!") %></a></li>\n        </ul>\n    </div>\n</div>\n<% } %>\n'}),define('text!templates/dashboard/tombstone.htm',[],function(){return'<% if(typeof data !== \'undefined\'){%>\n<div class="profile-pic-wrapper hide">\n  <span class="profile-pic"><img src="/img/freelancer_32_32.png" alt="Freelancer" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%- data.title %> </h2>\n<div>\n    <div class="tombstone-details-container">\n        <div id="tombstoneCarousel" class="carousel slide">\n            <!-- Carousel items -->\n            <div class="carousel-inner">\n                <% _.each(data.projects, function(element, index) { %>\n                    <% if (index === 0) { %>\n                        <div class="active item" data-index="<%- index %>">\n                    <% } else { %>\n                        <div class="item" data-index="<%- index %>">\n                    <% } %>\n                            <div class="project-details">\n                                <span class="project-title"><%=element.title%></span>\n                                <span class="project-price"><strong>$<%=element.payment%> USD</strong></span>\n                                <span class="project-duration"><%=T_("in <[- duration ]>",{duration:element.duration})%></strong></span>\n                            </div>\n                            <img src="<%- element.img %>" alt="<%=element.title%> <%=T_("by <[- name ]>",{name:element.freelancer_name})%>">\n                            <div class="hover-box">\n                                <div class="hover-box-inner">\n                                    <p class="project-feedback offset1 span3"><strong>"<%=element.review_desc_short%>"</strong></p>\n                                    <p class="project-owner offset1">--<%-element.employer_name%>--</p>\n                                    <a href="<%-element.seo_url%>" class="project-link offset1" target="_blank" onclick="_ttref.push([\'_setCookie\',\'<%-element.ttrefPrefix%>_TombstoneNewsfeed\']);"><%-T_("View project details")%></a>\n                                    <a target="_blank" href="<%-element.repostUrl%>" class="btn btn-large btn-primary repost-btn" type="button" onclick="_ttref.push([\'_setCookie\',\'<%-element.ttrefPrefix%>_TombstoneNewsfeed\']);"><%-T_("Post a job like this")%></a>\n                                </div>\n                            </div>\n                        </div>\n                <% })%>\n            </div>\n        </div>\n    </div><div class="tombstone-gallery">\n        <% _.each(data.projects, function(element, index, list) { %>\n            <div class="tombstone-img-container" data-index="<%-index%>">\n                <img src="<%- element.img %>" class="grayscale">\n                <div class="tombstone-img-container-hl" data-target="tombstone-thumb"></div>\n            </div>\n        <% })%>\n    </div>\n    <div class="clearfix"></div>\n</div>\n<%} else { %>\n    <div id="loadingAll" class="loading-spinner">\n      <img src="<%-cdn_url(\'/img/dashboard-loading.gif\',\'//\')%>" /> <%= T_("Loading Recommended Projects ...") %>\n    </div>\n<%}%>\n'}),define('text!templates/dashboard/upsellFeatureUpgrade.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2> <%= T_("You haven\'t awarded <a class=\'trunc\' href = \'/projects/<[- data.seoUrl]>.html\'><[- data.name]></a><span class=\'noTrunc\'> Consider attracting more, high quality freelancers by upgrading to a featured project.", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n<!-- action history-->\n<div class="alert alert-success" style="<% if(typeof state == \'undefined\'){%>display:none<%}%>" id="action_history">\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class="first">\n                <a href="<%- data.linkUrl %>" class="action-state"> <i class="icon-ok"></i>&nbsp;\n                  <%- T_("Project Upgraded") %></a>\n            </li>\n        </ul>\n    </div>\n</div>\n<div id="content" style="<% if(typeof state != \'undefined\' && state == \'upgraded\'){%>display:none<%}%>">\n  <ul class="news-list news-list-avatar news-list-ratings">\n    <li class="news-item first pad row-fluid" id="loadingAll" style="text-align:center;padding:20px;">\n        <div class="span2" style="">\n            <span class="upgrade featured"></span>\n        </div>\n        <div class="span6" style="margin-left:25px;text-align:left;">\n            <%- T_("Featured Projects attract more high quality bids than regular projects by appearing prominently in project listings.") %>\n        </div>\n        <div class="span3" style="">\n            <div><%- data.featured_price_string%></div>\n            <a id="btn-upgrade-featured" class="btn btn-info btn-mini"><%- T_("Upgrade Now!")%></a>\n            <span class = "hint"></span>\n        </div>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/upsellAssistedUpgrade.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2> <%= T_("Need help getting started on ") %><a class=\'noTrunc\' href = \'/projects/<%- data.seoUrl%>.html\'><%- data.name%></a>?\n    <div class=\'noTrunc\'><%= T_("Let us help you with the hiring with a \'Recruiter Project\'!") %>\n        <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n    </div>\n</h2\n<!-- action history-->\n<div class="alert alert-success" style="<% if(typeof state == \'undefined\'){%>display:none<%}%>" id="action_history">\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class="first">\n                <a href="<%- data.linkUrl %>" class="action-state"> <i class="icon-ok"></i>&nbsp;\n                  <%- T_("Project Upgraded") %></a>\n            </li>\n        </ul>\n    </div>\n</div>\n<div id="content" style="<% if(typeof state != \'undefined\' && state == \'upgraded\'){%>display:none<%}%>">\n  <ul class="news-list news-list-avatar news-list-ratings">\n    <li class="news-item first pad row-fluid" id="loadingAll" style="text-align:center;padding:20px;">\n        <div class="span2" style="">\n            <span class="upgrade assisted"></span>\n        </div>\n        <div class="span6" style="margin-left:25px;text-align:left;">\n            <%- T_("Our hands on recruitment service ensures you get the best results from your project.") %>\n            <%- T_("Our recruiters personally review your proposals saving you time vetting freelancers.") %>\n            <%- T_("Let us find you the right person for the job.") %>\n        </div>\n        <div class="span3" style="">\n            <a id="btn-upgrade-assisted" class="btn btn-info btn-mini"><%- T_("Upgrade Now!")%></a>\n            <span class = "hint"></span>\n            <div style="margin-top: 9px;position: relative;text-align: center;">\n                <%- data.assisted_price_string %>\n            </div>\n        </div>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/awardReminder.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("Not sure who to award your project? We\'ve found the best freelancer for <a class=\'trunc\' href=\'/projects/<[- data.seo_url ]>.html\'><[-data.name]></a><span class=\'noTrunc\'>. Award them now to get started!", {data: data}) %> <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n'}),define('text!templates/dashboard/tombstoneNotiEmployer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("Your freelancer(s) have requested your approval to showcase the work they have completed for you. Once approved, their work will be highlighted to all users.") %></h2>\n\n<div class="new-list" id="tombstoneList"></div>\n<div id="loadingAll">\n    <img src="/img/dashboard-loading.gif" /><%= T_("Loading entries...") %>\n</div>\n<a href="/showcase#mine"><i class="icon-share-alt"></i>&nbsp;<%= T_("View More") %></a>\n<div id="loadingFail" style="display:none"><p><%- T_("We were unable to load your project showcase.") %></p></div>\n<div id="loadingEmpty" style="display:none"><p><%- T_("No pending project showcase.") %></p></div>\n'}),define('text!templates/dashboard/tombstoneNotiEmployer.min.htm',[],function(){return'<div class="newsfeed-tombstone">\n    <div class="newsfeed-tombstone-image">\n        <img src="<%- data.img %>">\n    </div>\n    <div class="newsfeed-tombstone-description">\n        <h4 style="">\n            <a href="/showcase/<%- data.tsId %>/review#mine"><%- data.title %></a>\n        </h4>\n        <div class="newsfeed-tombstone-username">By <strong><%- data.freelancer_name %></strong></div>\n        <p>\n            <div><%= T_("Project Summary") %>:</div>\n            <div><%- data.project_summary %></div>\n        </p>\n    </div>\n    <div class="newsfeed-tombstone-action">\n        <h4 class="tombstone-budget"><%- data.payment %></h4>\n        <div class="tombstone-duration"><%- data.duration %></div>\n        <a href="/showcase/<%- data.tsId %>/review#mine" class="btn btn-info btn-mini"><%- T_("Review") %></a>\n    </div>\n</div>\n'}),define('text!templates/dashboard/tombstoneNotiFreelancer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("We have received your request to showcase your work. Once approved by admin and your employer, your work will be highlighted to all users.") %></h2>\n\n<div class="news-list" id="tombstoneList">\n</div>\n\n<div id="loadingAll">\n    <img src="/img/dashboard-loading.gif" /><%= T_("Loading entries...") %>\n</div>\n<a href="/showcase#mine"><i class="icon-share-alt"></i>&nbsp;<%= T_("View More") %></a>\n<div id="loadingFail" style="display:none"><p><%- T_("We were unable to load your project showcase.") %></p></div>\n<div id="loadingEmpty" style="display:none"><p><%- T_("No pending project showcase.") %></p></div>\n'}),define('text!templates/dashboard/tombstoneNotiFreelancer.min.htm',[],function(){return'<div class="newsfeed-tombstone">\n    <div class="newsfeed-tombstone-image">\n        <img src="<%- data.img %>">\n        <% if (data.newsfeed_type == \'rejected_expire\' || data.newsfeed_type == \'rejectFromAdmin\' || data.newsfeed_type == \'rejectFromEmp\') { %>\n            <div class="newsfeed-tombstone-status status-negative">\n                <span class="fl-icon-close"></span>\n            </div>\n        <% } %>\n        <% if (data.newsfeed_type == \'approved\') { %>\n            <div class="newsfeed-tombstone-status status-success">\n                <span class="fl-icon-tick"></span>\n            </div>\n        <% } %>\n        <% if (data.newsfeed_type == \'new\') { %>\n            <div class="newsfeed-tombstone-status status-pending">\n                <span class="fl-icon-time"></span>\n            </div>\n        <% } %>\n    </div>\n    <div class="newsfeed-tombstone-description">\n        <h4>\n            <a href=\'/showcase/<%- data.tsId %>/edit/#mine\'><%- data.title %></a>\n             <% if (data.newsfeed_type == \'new\') { %>\n            <span class="label label-info"><%- T_("Pending") %></span>\n            <% } %>\n            <% if (data.newsfeed_type == \'rejected_expire\') { %>\n                <span class="label label-inverse"><%- T_("Expired") %></span>\n            <% } %>\n            <% if (data.newsfeed_type == \'approved\') { %>\n                <span class="label label-success"><%- T_("Approved") %></span>\n            <% } %>\n            <% if (data.newsfeed_type == \'rejectFromAdmin\' || data.newsfeed_type == \'rejectFromEmp\') { %>\n                <span class="label label-important"><%- T_("Needs Review") %></span>\n            <% } %>\n        </h4>\n        <div class="newsfeed-tombstone-username">By <strong><%- data.freelancer_name %></strong></div>\n        <p>\n        <% if (data.newsfeed_type == \'new\') { %>\n            <%- data.project_summary %>\n        <% } %>\n        <% if (data.newsfeed_type == \'rejected_expire\') { %>\n            <%= T_("Your submission to showcase your work has expired since it has not been reviewed by your employer <[- employer_name ]> after 30 days.", {employer_name: data.employer_name}) %>\n        <% } %>\n        <% if (data.newsfeed_type == \'approved\') { %>\n            <%- data.project_summary %>\n        <% } %>\n        <% if (data.newsfeed_type == \'rejectFromAdmin\') { %>\n            <%- T_("Feedback from admin") %><br/>\n            <% if (data.admin_reason != \'\') { %><%- data.admin_reason %>:&nbsp;<% } %>\n            <%- data.admin_other_reason %>\n        <% } %>\n        <% if (data.newsfeed_type == \'rejectFromEmp\') { %>\n            <%- T_("Feedback from employer") %><br/>\n            <%-  data.emp_reason %>\n        <% } %>\n        </p>\n    </div>\n    <div class="newsfeed-tombstone-action">\n        <div class="newsfeed-tombstone-info" id="newsfeed-tombstone-action-edit">\n            <h4 class="tombstone-budget"><%- data.payment %></h4>\n            <div class="tombstone-duration"><%- data.duration %></div>\n            <a href=\'/showcase/<%- data.tsId %>/edit#mine\' class="btn btn-info btn-mini" id="newsfeed-tombstone-edit-btn"><%- T_("Edit") %></a>\n        </div>\n    </div>\n</div>\n'}),define('text!templates/dashboard/tombstoneNoti.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%= T_("Your project <strong><[- data.title ]></strong> has been deleted by your employer <strong><[- data.employerName ]></strong>. This project can no longer be accessed or showcased, but your feedback can still be viewed from your profile.", {data: data}) %></h2>\n'}),define('text!templates/dashboard/communityPromoNoti.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- companyLogo %>" alt="profile pic" title="Freelancer" class="profile-pic">\n    </span>\n</div>\n<h2>\n    <%= T_("<[- count ]> new articles published on <a target=\'_blank\' href=\'/community\'>Freelancer Community</a>", {count: data.count}) %>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n<p>\n    <%- T_("Freelancer Community is the place for you to hang out between projects, learn top tips to improve your career, share your freelancing experiences, and learn from your peers.") %>\n</p>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a target="_blank" href="/community">\n                <i class="icon-share-alt"></i> <%- T_("Read articles and learn something new") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/expertsPromoNoti.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- companyLogo %>" alt="profile pic" title="Freelancer" class="profile-pic">\n    </span>\n</div>\n<h2>\n    <%- T_("Have a question for an expert freelancer?") %>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n<p>\n    <%- T_("Got any questions about marketing, web development, design, business or freelancing in general? View our Q&A section to have your questions answered.") %>\n</p>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a target="_blank" href="/community/experts">\n                <i class="icon-share-alt"></i> <%- T_("Go to Community Experts") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/membership.firstEarning.htm',[],function(){return'<div>\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic">\n            <a>\n                <img src="/img/freelancer_32_32.png"  alt="profile pic" title="Freelancer" class="profile-pic freelancer" onerror="this.src=\'/img/unknown.png\'">\n            </a>\n        </span>\n    </div>\n\n    <% if (!data.isPremium) { %>\n        <%= T_("Congratulations on your first earnings! To help you stay on your winning trajectory, here are a couple of secret tips to increase your future earnings:", {data: data}) %><em class="timestamp time_text">Just now</em>\n    <% } else { %>\n        <%= T_("Congratulations on your first earnings! To help you stay on your winning trajectory, here is a secret tip to help you increase your future earnings:", {data: data}) %><em class="timestamp time_text">Just now</em>\n    <% } %>\n\n    <table border="0" cellpadding="10">\n        <tr>\n          <td>\n            <table border="0" cellspacing="0" cellpadding="0">\n                <% if(!data.isPremium) { %>\n                <tr>\n                    <td width="5"><img src="/img/blank.gif" width="10"alt=""></td>\n                    <td align="center" width="244"><img src="/img/email-images/first-cash/membership.png" width="150" alt="membership-icon"></td>\n                    <td width="10"><img src="/img/blank.gif" width="15"alt=""></td>\n                    <td>\n                        <% if (data.isFreeElig) { %>\n                            <h3 style="font-family:Arial; font-size:13px; margin-bottom:5px; color:#333333">\n                                <%= T_("Get 30 days Free Plus membership!", {data: data}) %>\n                            </h3>\n                            <p style="font-family:Arial; font-size:13px; margin-bottom:10px; margin-top:0px;color:#333333">\n                                <% if(data.tax) { %>\n                                    <%= T_("Plus membership gives you access to 100 bids per month and 80 skills to work on. You can also unlock rewards, send external invoices, and use our express withdrawal service. We are pleased to offer you 30 days of Free Plus membership (valued at <[- data.price.currency]><[- data.price.amount]> <[- data.price.currency_code]>/month incl. GST)! You can cancel at any time before the end of the trial period at no extra cost.", {data: data}) %>\n                                <% } else { %>\n                                    <%= T_("Plus membership gives you access to 100 bids per month and 80 skills to work on. You can also unlock rewards, send external invoices, and use our express withdrawal service. We are pleased to offer you 30 days of Free Plus membership (valued at <[- data.price.currency]><[- data.price.amount]> <[- data.price.currency_code]>/month)! You can cancel at any time before the end of the trial period at no extra cost.", {data: data}) %>\n                                <% } %>\n                            </p>\n                        <% } else { %>\n                            <% if (data.isFreeNotEligOrBasicOrPlus) { %>\n                                <h3 style="font-family:Arial; font-size:13px; margin-bottom:5px; color:#333333">\n                                    <%= T_("Upgrade to Standard Membership!", {data: data}) %>\n                                </h3>\n                                <p style="font-family:Arial; font-size:13px; margin-bottom:10px; margin-top:0px;color:#333333">\n                                    <%= T_("Standard membership is our most popular plan. With this plan, you can <b>reduce your project fee by up to 50%</b>. In addition, you will get 150 bids per month, 100 skills to work on and many other benefits!", {data: data}) %>\n                                </p>\n                            <% } else if (data.isStandard) { %>\n                                <h3 style="font-family:Arial; font-size:13px; margin-bottom:5px; color:#333333">\n                                    <%= T_("Upgrade to Premium Membership!", {data: data}) %>\n                                </h3>\n                                <p style="font-family:Arial; font-size:13px; margin-bottom:10px; margin-top:0px;color:#333333">\n                                    <%= T_("With our Premium membership, you can <b> save on project fees by up to 40%</b> compared with your current Standard membership. In addition, you will get 500 bids per month, 250 skills to work on and many other benefits!", {data: data}) %>\n                                </p>\n                            <% } %>\n                        <% } %>\n                    </td>\n                </tr>\n\n                <tr>\n                <% if (data.isFreeElig) { %>\n                    <td colspan="4" align="right">\n                        <a href=\'<%= T_("<[- data.trialPackageUrl]>", {data: data}) %>\' class="btn btn-success btn-mini">\n                                <%= T_("Claim it now!", {data: data}) %>\n                        </a>\n                    </td>\n                <% } else { %>\n                    <td colspan="4" align="right">\n                        <a href=\'<%= T_("<[- data.packageUrl]>", {data: data}) %>\' class="btn btn-success btn-mini">\n                                <%= T_("Upgrade now!", {data: data}) %>\n                        </a>\n                    </td>\n                <% } %>\n                </tr>\n\n                <tr>\n                    <td height="15" colspan="4" align="center" width=100% style="border-bottom:1px solid #cccccc;"><img src="/img/blank.gif" width="10"alt=""></td>\n                </tr>\n                <tr>\n                    <td height="10" colspan="4" align="center" width=100%><img src="/img/blank.gif" width="10"alt=""></td>\n                </tr>\n\n                <% } %>\n\n                <tr>\n                    <td width="5"><img src="/img/blank.gif" width="5"alt=""></td>\n                    <td align="center" valign="top"><img src="/img/email-images/first-cash/exam.png" width="150" alt="exam-icon"></td>\n                    <td><img src="/img/blank.gif" width="20"alt=""></td>\n                    <td>\n                        <h3 style="font-family:Arial; font-size:13px; margin-bottom:5px; color:#333333;"><%= T_("Take an Exam!", {data: data}) %> </h3>\n                        <p style="font-family:Arial; font-size:13px; margin-bottom:10px; margin-top:0px;color:#333333">\n                            <%= T_("Get ahead and distinguish yourself from the crowd with an Exam badge! Freelancers with exam badges are more likely to be awarded a project and will earn a staggering *181% more on average. To improve your award rate, we recommend you take an exam:") %>\n                        </p>\n                        <table cellpadding="0" cellspacing="0">\n                            <tr>\n                                <td width="165">\n                                    <a onclick="javascript:_ttref.push([\'_setEntrypoint\', \'Exams_NewsFeedFirstEarning\']);" href=\'<%= T_("<[- data.link_exam]>", {data: data}) %>\' style="font-family:Arial, Helvetica, sans-serif; font-size:13px; color:#0093d0;"><%= T_("<[- data.recommended_exam.name]>", {data: data}) %></a>\n                                </td>\n                                <td width="220" align="right">\n                                    <a onclick="javascript:_ttref.push([\'_setEntrypoint\', \'Exams_NewsFeedFirstEarning\']);" href=\'<%= T_("<[- data.link_exam]>", {data: data}) %>\' style=" text-align:right; font-family:Arial, Helvetica, sans-serif; font-size:12px;font-weight:bold;color:white;border:1px solid #0D851B;background:#15981E;text-decoration:none;padding:5px 16px"><strong><%= T_("Take Exam", {data: data}) %></strong></a>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td style="padding-top: 5px; font-size: 12px;" colspan="3">\n                                    <%= T_("*based on September 2013 data") %>\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n             </table>\n          </td>\n        </tr>\n    </table>\n\n</div>\n'}),define('text!templates/dashboard/serviceSubmitted.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>"  alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <% if (data.is_created) { %>\n        <%= T_("We have received your submission to post a service.") %>\n    <% } else { %>\n        <%= T_("We have received your submission to update your service.") %>\n    <% } %>\n    <%= T_("Once reviewed, we will provide feedback to optimize your service listing or approve your service to make it available for order.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="service-preview row-fluid">\n    <div class="span5">\n        <a class="service-image-wrapper" href="<%- data.service_url %>">\n            <img src="<%- data.service_img %>" alt="<%- data.service_name %>" />\n        </a>\n    </div>\n    <div class="span7">\n        <a href="<%- data.service_url %>" class="service-name"><%- data.service_name %></a>\n        <div class="row-fluid">\n            <span class="service-cost span5">\n                <%- data.currency_sign %><%- data.service_cost %> <%- data.currency_code %>\n            </span>\n            <span class="service-duration span5">\n                <span class="icon-clock"></span>\n                <% if (data.service_duration == 1) { %>\n                    <%= T_("1 day") %>\n                <% } else { %>\n                    <%= T_("<[- service_duration ]> days", data) %>\n                <% } %>\n            </span>\n        </div>\n    </div>\n</div>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="/services/dashboard.php">\n                <span class="icon-share-alt"></span>\n                <%- T_("View My Services") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/serviceApproved.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>"  alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations, your service has been approved! Promote your service now to start receiving orders from employers!") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="service-preview row-fluid">\n    <div class="span5">\n        <a class="service-image-wrapper" href="<%- data.service_url %>">\n            <img src="<%- data.service_img %>" alt="<%- data.service_name %>" />\n        </a>\n    </div>\n    <div class="span7">\n        <a href="<%- data.service_url %>" class="service-name"><%- data.service_name %></a>\n        <div class="row-fluid">\n            <span class="service-cost span5">\n                <%- data.currency_sign %><%- data.service_cost %> <%- data.currency_code %>\n            </span>\n            <span class="service-duration span5">\n                <span class="icon-clock"></span>\n                <% if (data.service_duration == 1) { %>\n                    <%= T_("1 day") %>\n                <% } else { %>\n                    <%= T_("<[- service_duration ]> days", data) %>\n                <% } %>\n            </span>\n        </div>\n    </div>\n</div>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.service_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("View this Service") %>\n            </a>\n        </li>\n        <li>\n            <a href="https://facebook.com/sharer/sharer.php?u=<%- data.base_url %><%- data.service_url %>" target="_blank">\n                <span class="icon-share-fb"></span>\n                <%- T_("Share on Facebook") %>\n            </a>\n        </li>\n        <li>\n            <a href="https://twitter.com/intent/tweet?status=<%- data.tweet_status %>" target="_blank">\n                <span class="icon-share-twit"></span>\n                <%- T_("Share on Twitter") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/serviceRejected.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>"  alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("We have provided feedback to optimize your service.") %>\n    <%= T_("Please update your service and submit it again for review.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="service-preview row-fluid">\n    <div class="span5">\n        <a class="service-image-wrapper" href="<%- data.service_url %>">\n            <img src="<%- data.service_img %>" alt="<%- data.service_name %>" />\n        </a>\n    </div>\n    <div class="span7">\n        <a href="<%- data.service_url %>" class="service-name"><%- data.service_name %></a>\n        <div class="row-fluid">\n            <span class="service-cost span5">\n                <%- data.currency_sign %><%- data.service_cost %> <%- data.currency_code %>\n            </span>\n            <span class="service-duration span5">\n                <span class="icon-clock"></span>\n                <% if (data.service_duration == 1) { %>\n                    <%= T_("1 day") %>\n                <% } else { %>\n                    <%= T_("<[- service_duration ]> days", data) %>\n                <% } %>\n            </span>\n        </div>\n    </div>\n</div>\n\n<div class="service-rejected">\n    <%= T_("Feedback:") %>\n    <ul class="service-reasons">\n        <% _.each(data.issues, function(issue) {%>\n            <li><%- issue.title %></li>\n        <% }) %>\n    </ul>\n</div>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.service_edit_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Update this Service") %>\n            </a>\n        </li>\n        <li>\n            <a href="/services/dashboard.php" >\n                <span class="icon-share-alt"></span>\n                <%- T_("View My Services") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/serviceClosed.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>"  alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Unfortunately, your service has been rejected as it does not meet the standard we are looking for.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="service-preview row-fluid">\n    <div class="span5">\n        <a class="service-image-wrapper" href="<%- data.service_url %>">\n            <img src="<%- data.service_img %>" alt="<%- data.service_name %>" />\n        </a>\n    </div>\n    <div class="span7">\n        <a href="<%- data.service_url %>" class="service-name"><%- data.service_name %></a>\n        <div class="row-fluid">\n            <span class="service-cost span5">\n                <%- data.currency_sign %><%- data.service_cost %> <%- data.currency_code %>\n            </span>\n            <span class="service-duration span5">\n                <span class="icon-clock"></span>\n                <% if (data.service_duration == 1) { %>\n                    <%= T_("1 day") %>\n                <% } else { %>\n                    <%= T_("<[- service_duration ]> days", data) %>\n                <% } %>\n            </span>\n        </div>\n    </div>\n</div>\n\n<div class="service-closed-reminder">\n    <%= T_("This does not mean we will never accept you as a service provider but we recommend familiarising yourself with the quality of services already in our listings before submitting a service again. We look forward to seeing more services from you soon!") %>\n</div>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="/services/dashboard.php">\n                <span class="icon-share-alt"></span>\n                <%- T_("View My Services") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/serviceProjectPostedSeller.min.htm',[],function(){return'<div class="service-order-wrapper clearfix">\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic">\n            <img src="<%- data.buyer_img_url %>"  alt="profile pic" title="<%- data.buyer_name %>" class="profile-pic"/>\n        </span>\n    </div>\n    <div class="service-order-details">\n        <p class="service-order-employer"><a href="/u/<%- data.buyer_name %>"><%- data.buyer_name %></a></p>\n        <p>\n            <%- T_("Ordered <[- order_start_date ]>:", data) %>\n        </p>\n        <ul class="service-order-milestones">\n            <% _.each(data.milestones, function(i) { %>\n                <li><%= i %></li>\n            <% }); %>\n        </ul>\n    </div>\n    <div class="service-order-info">\n        <div class="service-order-cost"><%- data.currency_sign %><%- data.project_cost %> <%- data.currency_code %></div>\n        <div class="service-order-due"><%- data.due_text %></div>\n        <div class="service-order-link">\n            <a class="btn btn-mini" href="<%- data.project_url %>" target="_blank"><%= T_("View Order") %></a>\n        </div>\n    </div>\n</div>\n'}),define('text!templates/dashboard/serviceProjectPostedSeller.htm',[],function(){return'<div>\n    <div id="status"></div>\n    <div id="content">\n        <div class="service-orders">\n            <div id="orders"></div>\n            <div id="loadingAll">\n                <div id="loading">\n                    <img src="/img/dashboard-loading.gif" />\n                    <%= T_("Loading orders...") %>\n                </div>\n                <div id="loadingFail" style="display:none">\n                    <%- T_("We were unable to load your orders.") %>\n                    <a id="tryAgain"><%- T_("Try again.") %></a>\n                </div>\n                <div id="loadingEmpty" style="display:none">\n                    <%- T_("You do not have active orders for this service.") %>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class="first">\n                <a id="viewMore" href="#">\n                    <span class="icon-plus-sign"></span>\n                    <%- T_("View More Orders") %>\n                </a>\n            </li>\n            <li>\n                <a href="<%- data.service_url %>">\n                    <span class="icon-share-alt"></span>\n                    <%- T_("View this Service") %>\n                </a>\n            </li>\n            <li>\n                <a href="/services/dashboard.php">\n                    <span class="icon-share-alt"></span>\n                    <%- T_("View My Services") %>\n                </a>\n            </li>\n        </ul>\n    </div>\n</div>\n'}),define('text!templates/dashboard/serviceProjectPostedSeller.header.htm',[],function(){return'<div id="status">\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic">\n            <img src=""  alt="profile pic" title="" class="profile-pic"/>\n        </span>\n    </div>\n\n    <h2>\n        <%= T_("You have received <span id=\'orderCount\'></span> order(s) for your service <a href=\'<[- service_url ]>\'><[- service_name ]></a>.", data) %>\n        <%= T_("You can view your services and all orders from your My Services page.") %>\n        <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n    </h2>\n</div>\n'}),define('text!templates/dashboard/serviceProjectPostedBuyer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- data.seller_img_url %>"  alt="profile pic" title="<%- data.seller_name %>" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("<a href=\'/u/<[- seller_name ]>\'><[- seller_name ]></a> received your order for their service <a href=\'<[- service_url ]>\'><[- service_name ]></a>.", data) %>\n    <%- T_("Your order should be delivered on <[- order_end_date ]>.", data) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="service-order">\n    <div class="service-order-head row-fluid">\n        <div class="span9"><%= T_("Item") %></div>\n        <div class="span2 service-order-currency"><%= T_("Price") %> (<%- data.currency_code %>)</div>\n    </div>\n    <% if (data.project_milestones && typeof data.project_milestones === \'object\') { %>\n        <% _.each(data.project_milestones, function(milestone) { %>\n            <div class="service-order-item row-fluid">\n                <div class="span9"><%- milestone.description %></div>\n                <div class="span2 subtotal"><%- data.currency_sign %><%- milestone.cost %></div>\n            </div>\n        <% }); %>\n    <% } else { %>\n        <div class="service-order-item row-fluid">\n            <div class="span9"><%- data.service_name %></div>\n            <div class="span2 subtotal"><%- data.currency_sign %><%- data.project_cost %></div>\n        </div>\n    <% } %>\n    <div class="service-order-foot row-fluid">\n        <div class="span11 total"><%- T_("Total") %>&nbsp;&nbsp;&nbsp;&nbsp;<%- data.currency_sign %><%- data.project_cost %></div>\n    </div>\n</div>\n<div class="service-order-reminder">\n    <%= T_("Your payment has been deposited securely as a <a href=\'<[= project_url ]>\' target=\'_blank\'>Milestone Payment</a>. Once you are happy with the work delivered, you can release these funds to the freelancer for the work received.", data) %>\n</div>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.project_url %>"><span class="icon-share-alt"></span>&nbsp;<%- T_("View Order Page") %></a>\n        </li>\n        <li>\n            <a href="<%- data.project_url %>#messages_<%- data.bid_id %>"><span class="icon-share-alt"></span>&nbsp;<%- T_("Contact <[- seller_name ]>", data) %></a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/serviceProjectEndingSeller.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src=""  alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <% if (data.hours_remaining <= 0) { %>\n        <%= T_("This is a reminder that you have an order due now.") %>\n    <% } else if (data.hours_remaining === 1) { %>\n        <%= T_("This is a reminder that you have an order due within 1 hour.") %>\n    <% } else { %>\n        <%= T_("This is a reminder that you have an order due within <[- hours_remaining ]> hours.", data) %>\n    <% } %>\n    <%= T_("<a href=\'<[- project_url ]>\'><[- service_name ]></a> ordered by <a href=\'/u/<[- buyer_name ]>\'><[- buyer_name ]></a> on <[- order_start_date ]>.", data) %>\n    <br/><br/>\n    <%= T_("If you have already delivered your service, <a href=\'<[- project_url ]>#messages_<[- bid_id ]>\'>contact <[- buyer_name ]></a> to confirm they are satisfied with the work delivered and kindly request they release payment.", data) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.project_url %>"><span class="icon-share-alt"></span>&nbsp;<%- T_("View order") %></a>\n        </li>\n        <li>\n            <a href="<%- data.project_url %>#messages_<%- data.bid_id %>"><span class="icon-share-alt"></span>&nbsp;<%- T_("Contact <[- buyer_name]>", data) %></a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/serviceProjectEndedSeller.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src=""  alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Warning! You have not delivered the work ordered by <a href=\'/u/<[- buyer_name ]>\'><[- buyer_name ]></a> for <a href=\'<[- project_url ]>\'><[- service_name ]></a>.", data) %>\n    <%= T_("If you have provided your service, make sure they are happy with your work then kindly request that they release funds.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.project_url %>"><span class="icon-share-alt"></span>&nbsp;<%- T_("View order") %></a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/serviceProjectEndedBuyer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src=""  alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("It seems that your order for <a href=\'/u/<[- seller_name ]>\'><[- seller_name ]>\'s</a> service <a href=\'<[-project_url ]>\'><[- service_name ]></a> is taking a little longer than expected to deliver. We recommend you <a href=\'<[-project_url ]>#messages_<[- bid_id ]>\'>contact <[- seller_name ]></a> to check up on their progress. If you have already received their work and are satisfied with their service, you can <a href=\'<[-project_url ]>\'>release payment</a> to them now to complete this project.", data) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.project_url %>"><span class="icon-share-alt"></span>&nbsp;<%- T_("Release payment") %></a>\n        </li>\n        <li>\n            <a href="<%- data.project_url %>#messages_<%- data.bid_id %>"><span class="icon-share-alt"></span>&nbsp;<%- T_("Contact <[- seller_name ]>", data) %></a>\n        </li>\n        <li>\n            <a href="/dispute/newdispute.php?project_id=<%- data.project_id %>"><span class="icon-share-alt"></span>&nbsp;<%- T_("Dispute payment") %></a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingDraft.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Reminder: <a href=\'<[- view_url ]>\'><[- url ]></a> may have buyers waiting!", data.listing) %>\n    <%= T_("Start selling by completing the posting process today.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.edit_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Complete posting") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingActivated.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations, your listing <a href=\'<[- view_url ]>\'><[- url ]></a> is now available for bids!", data.listing) %>\n    <%= T_("You should receive bids and messages from potential buyers soon.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("View listing") %>\n            </a>\n        </li>\n        <li>\n            <a href="<%- data.listing.edit_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Upgrade listing") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingReserveAchieved.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations, your listing <a href=\'<[- view_url ]>\'><[- url ]></a> has reached the reserve price!", data.listing) %>\n    <%= T_("Keep engaging potential buyers to gain more interest and maximize your sale price.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("View listing") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingReserveAchievedBidder.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("With your next bid, <a href=\'<[- view_url ]>\'><[- url ]></a> will meet the reserve price!", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Place a bid now") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingClosing.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Your listing <a href=\'<[- view_url ]>\'><[- url ]></a> will be closed in less than 24 hours.", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="sites-closing-tips">\n<% if (data.listing.reserve_met) { %>\n    <%- T_("As the reserve price has been met, there will be a handover stage with the highest bidder once the auction has closed.") %>\n    <%- T_("Stay engaged with your buyers to maximize your sale price!") %>\n<% } else { %>\n    <%- T_("As the reserve price has not been met, there will not be a sale.") %>\n    <%- T_("Here are some tips to make a successful sale:") %>\n    <ul>\n        <li><%- T_("Upgrade your listing to reach more buyers.") %></li>\n        <li><%- T_("Drop the reserve price to stay competitive against other listings.") %></li>\n        <li><%- T_("Add a Buy It Now price so buyers can quickly close the deal.") %></li>\n    </ul>\n    <%- T_("Good luck!") %>\n<% } %>\n</div>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("View listing") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingClosingBidder.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Only 24 hours left to win <a href=\'<[- view_url ]>\'><[- url ]></a>!", data.listing) %>\n    <%= T_("The current price is <strong><[- fmt_price ]></strong>, so keep bidding to secure your victory.", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Place a bid now") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingClosed.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Your listing <a href=\'<[- view_url ]>\'><[- url ]></a> has ended, but the reserve price was not met.", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.repost_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Relist for sale") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingClosedBidder.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("The listing <a href=\'<[- view_url ]>\'><[- url ]></a> has just ended and unfortunately you did not win.", data.listing) %>\n    <%= T_("Keep bidding on our active listings; we are sure that you will find many interesting ones!") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="/sites/featured/">\n                <span class="icon-share-alt"></span>\n                <%- T_("View featured listings") %>\n            </a>\n        </li>\n        <li class="first">\n            <a href="/sites/new/">\n                <span class="icon-share-alt"></span>\n                <%- T_("View new listings") %>\n            </a>\n        </li>\n        <li class="first">\n            <a href="/sites/popular/">\n                <span class="icon-share-alt"></span>\n                <%- T_("View popular listings") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingCompleted.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations, your listing <a href=\'<[- view_url ]>\'><[- url ]></a> was successful!", data.listing) %>\n    <%= T_("Here are the details") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="sites-bid-info">\n    <ul>\n        <li><%= T_("Buyer = <[- username ]>", data.listing.bidder) %></li>\n        <li><%= T_("Price = <[- fmt_price ]>", data.listing) %></li>\n    </ul>\n</div>\n\n<p><%- T_("You can complete this sale in the handover page.") %></p>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.handover_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Visit Handover") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingCompletedBidder.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations, you have won the auction for <a href=\'<[- view_url ]>\'><[- url ]></a>!", data.listing) %>\n    <%= T_("Here are the details") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="sites-bid-info">\n    <ul>\n        <li><%= T_("Seller = <[- username ]>", data.listing.seller) %></li>\n        <li><%= T_("Price = <[- fmt_price ]>", data.listing) %></li>\n    </ul>\n</div>\n\n<p><%- T_("Now complete the transaction by receiving the item and transferring the payment.") %></p>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.handover_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Visit Handover") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesBinRejected.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Unfortunately the seller of <a href=\'<[- view_url ]>\'><[- url ]></a> has not accepted your Buy It Now offer.", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Keep bidding") %>\n            </a>\n        </li>\n        <li class="first">\n            <a href="/sites/for-sale">\n                <span class="icon-share-alt"></span>\n                <%- T_("Find other listings") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesOutbid.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Someone outbid you for <a href=\'<[- view_url ]>\'><[- url ]></a>! There’s still time to bid again and win the auction.", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Bid now") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingFundsReceived.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Your buyer <a href=\'/u/<[- bidder_name ]>\'><[- bidder_name ]></a> has deposited <[- fmt_price ]> for your sale <a href=\'<[- view_url ]>\'><[- url ]></a>.", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.handover_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Visit handover page") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingFundsReleased.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations! <a href=\'/u/<[- bidder_name ]>\'><[- bidder_name ]></a> has released <[- fmt_price ]> for <a href=\'<[- view_url ]>\'><[- url ]></a>.", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n'}),define('text!templates/dashboard/sitesListingFundsReleasedBidder.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations for completing the transaction!") %>\n    <%= T_("Your seller <a href=\'/u/<[- seller_name ]>\'><[- seller_name ]></a> has received the funds <[- fmt_price ]> for <a href=\'<[- view_url ]>\'><[- url ]></a>.", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n'}),define('text!templates/dashboard/sitesListingFeedbackReminder.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations again for successfully selling <a href=\'<[- view_url ]>\'><[- url ]></a>!", data.listing) %>\n    <%= T_("Let us know how the sale went.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.feedback_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Provide Feedback") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesListingFeedbackReminderBidder.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Congratulations again for winning <a href=\'<[- view_url ]>\'><[- url ]></a>!", data.listing) %>\n    <%= T_("Let us know how the transaction went with the seller.") %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.feedback_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("Provide Feedback") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/sitesBinCreated.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- data.imgUrl %>" width="32" height="32" alt="profile pic" title="<%- data.bid.bidder.username %>" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("You have received a Buy It Now offer for your listing <a href=\'<[- view_url ]>\'><[- url ]></a>", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="sites-bid-info">\n    <ul>\n        <li><%= T_("Buyer = <[- username ]>", data.bid.bidder) %></li>\n        <li><%= T_("Price = <[- fmt_price ]>", data.bid) %></li>\n    </ul>\n</div>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>" class="sites-bin-modal-trigger"\n                data-bin="<%- data.bid.id %>"\n                data-user="<%- data.bid.bidder.username %>"\n                data-accept="1">\n                <span class="icon-share-alt"></span>\n                <%- T_("Accept Offer") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/sites/binModal.htm',[],function(){return'<div class="sites-bin-modal modal hide" id="sites-bin-modal-<%- listing.id %>">\n    <div class="modal-header">\n        <%- T_("Buy It Now Offer") %>\n        <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>\n    </div>\n    <div class="modal-body">\n        <%- T_("You received a Buy It Now offer") %>\n        <ul>\n            <li>\n                <%- T_("Buyer:") %>\n                <a class="sites-bin-modal-user" href="#" target="_blank"></a>\n            </li>\n            <li>\n                <%- T_("Amount:") %>\n                <%- listing.buy_now_price %>\n            </li>\n        </ul>\n        <p class="sites-bin-modal-accept">\n            <%= T_("By accepting this offer, you indicate that you agree to sell <strong><[- url ]></strong> to this buyer and complete the handover process", listing) %>\n        </p>\n        <p class="sites-bin-modal-reject">\n            <%= T_("Are you sure you want to reject this Buy It Now offer for <strong><[- url ]></strong>?", listing) %>\n        </p>\n    </div>\n    <div class="modal-footer">\n        <form class="sites-bin-modal-accept" method="post" action="/sites/respondToOffer.php">\n            <input type="hidden" name="csrf_token" value="<%- token %>">\n            <input type="hidden" name="id" value="<%- listing.id %>">\n            <input type="hidden" name="bin_id" value="" class="sites-bin-modal-bin">\n            <input type="hidden" name="accept" value="1">\n            <button type="submit" class="btn btn-primary"><%- T_("Accept") %></button>\n            <button type="button" class="btn" data-dismiss="modal"><%- T_("Cancel") %></button>\n        </form>\n\n        <form class="sites-bin-modal-reject" method="post" action="/sites/respondToOffer.php">\n            <input type="hidden" name="csrf_token" value="<%- token %>">\n            <input type="hidden" name="id" value="<%- listing.id %>">\n            <input type="hidden" name="bin_id" value="" class="sites-bin-modal-bin">\n            <input type="hidden" name="accept" value="0">\n            <button type="submit" class="btn btn-danger"><%- T_("Reject") %></button>\n            <button type="button" class="btn" data-dismiss="modal"><%- T_("Cancel") %></button>\n        </form>\n    </div>\n</div>\n'}),define('text!templates/sites/offerModal.htm',[],function(){return'<div class="sites-offer-modal modal hide" id="sites-offer-modal-<%- listing.id %>">\n    <div class="modal-header">\n        <%- T_("Custom Offer") %>\n        <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>\n    </div>\n    <div class="modal-body">\n        <%- T_("You received an offer") %>\n        <ul>\n            <li>\n                <%- T_("Buyer:") %>\n                <a class="sites-offer-modal-user" href="#" target="_blank"></a>\n            </li>\n            <li class="payment">\n                <%- T_("Amount:") %>\n                <span class="amount">\n                    <%- listing.buy_now_price %>\n                </span>\n            </li>\n        </ul>\n        <p class="sites-offer-modal-accept">\n            <%= T_("By accepting this offer, you indicate that you agree to sell <strong><[- url ]></strong> to this buyer and complete the handover process", listing) %>\n        </p>\n        <p class="sites-offer-modal-reject">\n            <%= T_("Are you sure you want to reject this Buy It Now offer for <strong><[- url ]></strong>?", listing) %>\n        </p>\n    </div>\n    <div class="modal-footer">\n        <form class="sites-offer-modal-accept" method="post" action="/sites/respondToOffer.php">\n            <input type="hidden" name="csrf_token" value="<%- token %>">\n            <input type="hidden" name="offer_type" value="custom">\n            <input type="hidden" name="id" value="<%- listing.id %>">\n            <input type="hidden" name="bin_id" value="" class="sites-offer-modal-bin">\n            <input type="hidden" name="accept" value="1">\n            <button type="submit" class="btn btn-primary"><%- T_("Accept") %></button>\n            <button type="button" class="btn" data-dismiss="modal"><%- T_("Cancel") %></button>\n        </form>\n        <form class="sites-offer-modal-reject" method="post" action="/sites/respondToOffer.php">\n            <input type="hidden" name="token" value="<%- token %>">\n            <input type="hidden" name="offer_type" value="custom">\n            <input type="hidden" name="id" value="<%- listing.id %>">\n            <input type="hidden" name="bin_id" value="" class="sites-offer-modal-bin">\n            <input type="hidden" name="accept" value="0">\n            <button type="submit" class="btn btn-danger"><%- T_("Reject") %></button>\n            <button type="button" class="btn" data-dismiss="modal"><%- T_("Cancel") %></button>\n        </form>\n    </div>\n</div>\n'}),define('sites/bin',['jquery-wrapper','underscore-wrapper','text!templates/sites/binModal.htm','text!templates/sites/offerModal.htm'],function(a,b,c,d){var e=function(e,h,i){var j=a('#fm-pinky-container');j.length===0&&(j=a('.gaf-container')),j=j.first();var k=a(b.template(c,{listing:h,token:i})),l=a(b.template(d,{listing:h,token:i}));k.appendTo(j),l.appendTo(j),a(e).on('click','.js-bin-modal-trigger',function(b){b.preventDefault();var c=a(this).data('bin'),d=a(this).data('user'),e=parseInt(a(this).data('accept'),10),g=a(this).data('is-bin'),i=a(this).data('amount');f(h,c,d,e,g,i)}),g(e)},f=function(b,c,d,e,f,g){var h=a('#sites-bin-modal-'+b.id),i=a('#sites-offer-modal-'+b.id);d&&(f?(h.modal('hide'),h.find('form, p').hide(),h.find('.sites-bin-modal-'+(e?'accept':'reject')).show(),h.find('.sites-bin-modal-user').text(d).attr('href','/u/'+d),h.find('.sites-bin-modal-bin').val(c),h.modal('show')):(i.modal('hide'),i.find('form, p').hide(),i.find('.sites-offer-modal-'+(e?'accept':'reject')).show(),i.find('.sites-offer-modal-user').text(d).attr('href','/u/'+d),i.find('.sites-offer-modal-bin').val(c),i.find('.payment .amount').text(g),i.modal('show')))},g=function(b){a(b).find('.js-sites-view-more-offers').on('click',function(c){c.preventDefault(),a(b).find('.sites-view-bin ul li').show(),a(this).hide()})};return{init:e}}),define('text!templates/dashboard/sitesBidCreated.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- cdn_url(\'/img/freelancer_32_32.png\') %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n\n<h2>\n    <%= T_("Here are your bid details for <a href=\'<[- view_url ]>\'><[- url ]></a>", data.listing) %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n\n<div class="sites-bid-info">\n    <ul>\n        <li><%= T_("Bid Price = <[- fmt_price ]>", data.bid) %></li>\n        <% if (!data.error) { %>\n            <li><%= T_("Bid Status = <[- status_text ]>", data.bid) %></li>\n            <li><%= T_("Auction Price = <[- current_price ]>", data.listing) %></li>\n            <li><%= T_("Auction Status = <[- status_text ]>", data.listing) %></li>\n        <% } %>\n    </ul>\n</div>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="<%- data.listing.view_url %>">\n                <span class="icon-share-alt"></span>\n                <%- T_("View listing") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('qtsbinds',['jquery-wrapper'],function(a){window.qtsv={timeout:!1,defaults:{},page:{},nav:{}},window.qtsv.defaults={pageContainer:'.gaf-container:first',navContainer:'.header-and-nav'};var b=function(a,b){if(typeof b=='boolean'&&b)for(var c in a)window.qtsv.nav[c]=a[c];else for(var c in a)window.qtsv.page[c]=a[c];window.qtsv.timeout=!1},c=function(a,b,c){var d=window.qtsv;if(!d.timeout){var e=typeof c=='undefined'?JSON.parse(JSON.stringify(d.page)):JSON.parse(JSON.stringify(d.nav));if(typeof a=='object')for(var f in a)f!='eventName'&&(e[f]=a[f]);else typeof a=='string'&&(e.label=a);typeof a.eventName!='undefined'?_t.push([a.eventName,e]):_t.push(['user_action',e]),setTimeout(function(){typeof b=='string'&&(window.location=b)},1e3),setTimeout(function(){d.timeout=!1},100),d.timeout=!0}},d=function(b,c,d){var e=window.qtsv;c=c||{};var f=e.defaults.pageContainer,g='[data-qts]';typeof b=='string'?g=b:typeof b=='object'&&(g=b.id,a(g).attr('data-qtcon',b.con),a(g).attr('data-qt0',b.falsy),a(g).attr('data-qt1',b.truthy)),typeof d=='string'?f=d:typeof d=='boolean'&&d==1&&(f=e.defaults.navContainer),a(f).on('click',g,function(b){b.preventDefault();var f=typeof d=='undefined'?JSON.parse(JSON.stringify(e.page)):JSON.parse(JSON.stringify(e.nav)),g=a(b.currentTarget),h=!1;typeof g.attr('href')!='undefined'&&(h=!0);if(!window.qtsv.timeout){for(var i in c)i!='eventName'&&(f[i]=c[i]);var j=g.data('qts');typeof g.data('qts')!='undefined'&&(f.label=g.data('qts'),typeof f.label!='undefined'?f.label=g.data('qts'):c.label=='undefined'&&(f.label=g.data('qts')));var k=typeof g.data('qtcon')!='undefined'?!0:!1;k&&(g.data('qtcon')==0?(f.label=g.data('qt1'),g.data('qtcon',!0)):(f.label=g.data('qt0'),g.data('qtcon',!1))),typeof f.action=='undefined'&&(f.action='click'),typeof j!=''&&(typeof c.eventName!='undefined'?_t.push([c.eventName,f]):_lt.push(['user_action',f])),window.qtsv.timer=setTimeout(function(){window.qtsv.timeout=!1,h&&(window.location=g.attr('href'))},1e3),window.qtsv.timeout=!0,window.qtsv.timerRun=0,window.qtsv.timer}})};return window.qtsv.push=c,{init:b,bind:d,push:c}}),define('text!templates/dashboard/activateFreelancer.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2>\n    <%= T_("You are almost ready to start earning money as a freelancer, simply complete the following steps:") %>\n</h2>\n\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <% if (data.verifiedEmail == \'false\')  { %>\n            <li>\n                <a class="activateFreelancerVerifyEmail" href="<%- ssl_base_url %>/users/verify.php?id=<%- data.id %>&key=<%- data.key %>">\n                    <i class="icon-share-alt"></i>&nbsp;<%- T_("Verify your email") %>\n                </a>\n            </li>\n        <% } %>\n        <% if (data.updatedProfile == \'false\')  { %>\n            <li>\n                <a class="activateFreelancerUpdateProfile" href="<%- ssl_base_url %>/me">\n                    <i class="icon-share-alt"></i>&nbsp;<%- T_("Update your profile") %>\n                </a>\n            </li>\n        <% } %>\n        <li>\n            <a class="activateFreelancerPlaceBid" href="<%- ssl_base_url %>/jobs/myskills/">\n                <i class="icon-share-alt"></i>&nbsp;<%- T_("Place your first bid") %>\n            </a>\n        </li>\n    </ul>\n\n</div>\n\n<h2>\n    <%= T_("Be sure to check out our <a href=\'/community/articles/tips-for-new-freelancers\'>Tips for New Freelancers</a> guide which explains the best way to find work on <[- siteName ]>", {\'siteName\': flns.config.site_name}) %>\n</h2>\n'}),define('text!templates/dashboard/promoteContest.htm',[],function(){return'<div class="promote-contest-container">\n\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic">\n            <img src=""  alt="profile pic" title="" class="profile-pic"/>\n        </span>\n    </div>\n\n    <h2><%- T_("Start a contest to get the perfect design for your business!") %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n    <div class="promote-contest-gallery">\n        <ul class="row-fluid">\n            <li class="promote-logo-design span6">\n                <div class="promote-hover">\n                    <a data-contest-id="41294" data-repost="true" class="btn btn-primary btn-small ttref-button">\n                        <%- T_("Post a contest like this") %>\n                    </a>\n                </div>\n                <div class="promote-thumb">\n                    <img src="<%- cdn_url(\'/static/css/images/contests/upsell/logo-design.png\') %>" class="promote_img"/>\n                </div>\n                <p class="promote-text"><%- T_("Logo Design") %><span>$30</span></p>\n            </li>\n            <li class="promote-business-card span6">\n                <div class="promote-hover">\n                    <a data-contest-id="54905" data-repost="true" class="btn btn-primary btn-small ttref-button">\n                        <%- T_("Post a contest like this") %>\n                    </a>\n                </div>\n                <div class="promote-thumb">\n                    <img src="<%- cdn_url(\'/static/css/images/contests/upsell/business-card.jpg\') %>" class="promote_img"/><br>\n                </div>\n               <p class="promote-text"><%- T_("Business Card Design") %><span>$50</span></p>\n            </li>\n        </ul>\n        <ul class="row-fluid">\n            <li class="promote-website-design span6">\n                <div class="promote-hover">\n                    <a data-contest-id="58181" data-repost="true" class="btn btn-primary btn-small ttref-button">\n                        <%- T_("Post a contest like this") %>\n                    </a>\n                </div>\n                <div class="promote-thumb">\n                    <img src="<%- cdn_url(\'/static/css/images/contests/upsell/website-design.jpg\') %>" class="promote_img"/>\n                </div>\n                <p class="promote-text"><%- T_("Website Design") %><span>$100</span></p>\n            </li>\n            <li class="promote-flyer-design span6">\n                <div class="promote-hover">\n                    <a data-contest-id="52690" data-repost="true" class="btn btn-primary btn-small ttref-button">\n                        <%- T_("Post a contest like this") %>\n                    </a>\n                </div>\n                <div class="promote-thumb">\n                    <img src="<%- cdn_url(\'/static/css/images/contests/upsell/flyer-design.jpg\') %>" class="promote_img"/>\n                </div>\n                <p class="promote-text"><%- T_("Flyer Design") %><span>$30</span></p>\n            </li>\n        </ul>\n    </div>\n\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class ="first">\n                <a data-contest-id="" class="ttref-button" data-repost="false">\n                    <i class="icon-share-alt"></i>&nbsp;<%- T_("Post a contest") %>\n                </a>\n            </li>\n        </ul>\n    </div>\n\n</div>\n'}),define('text!templates/dashboard/remindUseBids.htm',[],function(){return'<div>\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>" width="32" height="32" alt="profile pic" title="<%- data.username %>" class="profile-pic"></span>\n    </div>\n    <h2><%= T_("We hope that you are enjoying and getting value out of the Plus Membership Trial. You only have 15 days left in the trial, and we\'ve noticed that you still have <[- data.bids_remaining ]> bids left. In general, members that bid more frequently are getting awarded more projects. So use up your bids before they expire!", {\'data\':data}) %>\n    </h2>\n    <div class="actions tabbable">\n        <ul class="nav nav-tabs">\n            <li class="first"><a data-membership-id="<%- data.membership_package_id %>" id="remindUseBidsAnchor" href="/campaign/0MEA10002/?l=/jobs/myskills/1/" onclick="triggerQTS()"><i class="icon-share-alt"></i> <%= T_("Bid on qualified projects now!") %></a></li>\n        </ul>\n    </div>\n</div>\n<script>\nfunction triggerQTS() {\n    _t.push([\'user_action\', {\n    section: \'Dashboard\',\n    sub_section: \'Newsfeed\',\n    label: \'Bidding\'\n    }]);\n}\n</script>\n'}),define('text!templates/dashboard/draftContest.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- portraitObj.imgUrl %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n<h2>\n    <%= T_("Your contest <a class=\'trunc\' href=\'<[- data.contestUrl ]>\'><[- data.contestName ]></a> is almost ready to go live!", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <button id="postDraft" class="btn btn-orange small" data-href="<%- data.contestUrl %>">\n                <%- T_("Post Contest Now!") %>\n            </button>\n        </li>\n        <li>\n            <button id="editDraft" class="btn small" data-href="<%- data.contestEditUrl %>">\n                <%- T_("Edit Contest") %>\n            </button>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/draftContestPublished.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- portraitObj.imgUrl %>" width="32" height="32" alt="profile pic" title="" class="profile-pic"/>\n    </span>\n</div>\n<h2>\n    <%= T_("Your contest <a class=\'trunc\' href=\'<[- data.contestUrl ]>\'><[- data.contestName ]></a> is almost ready to go live!", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <div class="alert alert-success draft-published" role="alert">\n                <span class="icon-ok"></span>&nbsp;<%- T_("Contest posted") %>\n            </div>\n        </li>\n        <li>\n            <a id="viewContest" href="<%- data.contestUrl %>">\n                <span class="icon-share-alt"></span>&nbsp;<%- T_("View Contest") %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/contactsAutoAddedSender.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>" width="32" height="32" alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%- T_("Connect with your friends on Freelancer.com") %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<p>\n<% if (data.friend_count == 1) { %>\n<%- T_("You previously invited 1 friend to Freelancer.com and they have now been added to your contact list") %>\n<% } else { %>\n<%- T_("You previously invited <[- friend_count ]> friends to Freelancer.com and they have now been added to your contact list", {friend_count: data.friend_count}) %>\n<% } %>\n</p>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a target=\'_blank\' href="/invite/?ttref=FriendInviter_FriendImportNewsfeed"> <i class="icon-share-alt"></i>&nbsp;<%- T_("See Who Else You Know") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/contactsAutoAddedReceiver.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>" width="32" height="32" alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2><%- T_("Connect with your friends on Freelancer.com") %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n\n<p><%- T_("You were previously invited to Freelancer.com by <[- sender_username ]> and they have now been added to your contact list.", {sender_username: data.sender_username}) %></p>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a target=\'_blank\' href="/invite/?ttref=FriendInviter_FriendImportNewsfeed"> <i class="icon-share-alt"></i>&nbsp;<%- T_("See Who Else You Know") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/secondBidPlusTrialUpsell.htm',[],function(){return'<div>\n    <div class="profile-pic-wrapper">\n        <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>" width="32" height="32" alt="profile pic" title="<%- data.username %>" class="profile-pic"></span>\n    </div>\n    <h2><%= T_("Congratulations on placing your second bid on Freelancer! You\'re on track! To continue, we recommend that you bid as much as you can. Research shows that the more you bid, the better your chances of getting awarded projects.") %></li>\n    </h2>\n    <div class="plus-membership-upsell">\n        <img src="<%- cdn_url(\'/static/css/images/membership/get-bids.png\') %>" width="141" height="137" class="plus-membership-upsell-start-bidding-icon" />\n        <ul class="plus-membership-upsell-list">\n            <li class="plus-membership-upsell-items"><%= T_("To help you out with bidding, we offer a free, <strong><[- data.trialDays ]>-day trial of Plus Membership</strong>. You will not be billed for a membership until the renewal after the <[- data.trialDays ]>-day trial period, and can cancel at any time. This gives you <[- data.trialBids ]> bids to use over <[- data.trialDays ]> days. So what are you waiting for?", {\'data\':data}) %></li>\n        </ul>\n        <a class="btn btn-success large plus-membership-upsell-cta" href="<%- data.ctaUrl %>">\n            <%= T_("Get <[- data.trialBids ]> Bids for Free", {\'data\':data}) %>\n        </a>\n    </div>\n</div>\n'}),define('text!templates/dashboard/article-comment.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- data.imgUrl %>" width="32" height="32" alt="profile pic" title="<%- data.publicName || data.user %>" class="profile-pic"/>\n    </span>\n</div>\n<h2>\n    <% if (typeof data.author != \'undefined\' && typeof data.comment_by != \'undefined\') { %>\n        <% if (data.author == user_id) { %>\n          <%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.user ]>\'><[- data.publicName || data.user ]></a> has responded to your <[- data.article_type ]>, <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.article_name ]></a>.", {data: data}) %>\n        <% } else { %>\n          <%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.user ]>\'><[- data.publicName || data.user ]></a> has responded to the <[- data.article_type ]>, <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.article_name ]></a>.", {data: data}) %>\n        <% } %>\n      <% } else { %>\n        <%= T_(" <a class=\'font-bold\' href=\'/u/<[- data.user ]>\'><[- data.publicName || data.user ]></a> has responded to the <[- data.article_type ]>, <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.article_name ]></a>.", {data: data}) %>\n    <% } %>\n    <time class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></time>\n</h2>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a href="<%- data.linkUrl %>"><i class="icon-share-alt"></i>&nbsp;<%- T_("Reply now") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/editAwardedBidRequest.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("You\'ve received a request from <a class=\'font-bold\' href=\'/u/<[- data.userName ]>\'><[- data.publicName || data.userName ]></a> to change their bid on the project <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.projName ]></a>", {data:data}) %></h2>\n\n<div class="alert alert-info">\n    <p>\n        <%- T_("Original budget") %>:&nbsp;\n        <b><%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.bid.sum]> in <[-data.bid.period]> days",{data:data}) %> </b>\n    </p>\n    <p>\n        <%- T_("Proposed Changes")%>:&nbsp;\n        <b><%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.editBidDetails.newAmount]> in <[-data.editBidDetails.newPeriod]> day(s)",{data:data}) %> </b>\n    </p>\n    <p>\n        <%= T_("Please visit the <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'>project page</a> to respond to request.", {data:data}) %>\n    </p>\n</div>\n'}),define('text!templates/dashboard/editAwardedBidAccepted.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("Your employer <a class=\'font-bold\' href=\'/u/<[- data.buyerName ]>\'><[- data.buyerPublicName || data.buyerName ]></a> accepted your request to change the bid for the project <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><b><[- data.projName ]></b></a>", {data:data}) %></h2>\n\n<div class="alert alert-info">\n    <p>\n        <%= T_("Please complete the project according to the new agreement.") %>\n    </p>\n    <p>\n        <%- T_("New Details")%>:&nbsp;\n        <b><%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.editBidDetails.newAmount]> in <[-data.editBidDetails.newPeriod]> day(s)",{data:data}) %> </b>\n    </p>\n</div>\n'}),define('text!templates/dashboard/editAwardedBidDeclined.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic"><img src="<%- data.img.profile_logo_url %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic"></span>\n</div>\n<h2><%= T_("Your employer <a class=\'font-bold\' href=\'/u/<[- data.buyerName ]>\'><[- data.buyerPublicName || data.buyerName ]></a> declined your new bid for the project <a class=\'trunc\' href=\'<[- data.linkUrl ]>\'><[- data.projName ]></a>", {data:data}) %></h2>\n\n<div class="alert alert-info">\n    <p>\n        <%- T_("Declined Offer")%>:&nbsp;\n        <b><%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.editBidDetails.newAmount]> in <[-data.editBidDetails.newPeriod]> day(s)",{data:data}) %> </b>\n    </p>\n    <p>\n     <%- T_("Current Bid Details") %>:&nbsp;\n     <b><%- T_("<[-data.currencyCode]> <[-data.currencySign]><[-data.bid.sum]> in <[-data.bid.period]> days",{data:data}) %> </b>\n    </p>\n    <p>\n    <%= T_("Please contact your employer if you still wish to change the bid for project <a class=\'trunc\' href=\'<[-data.linkUrl]>\'><[- data.projName ]></a>", {data:data}) %>\n    </p>\n</div>\n'}),define('text!templates/dashboard/requestEndProject.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic">\n    <img src="<%- data.imgUrl %>"  alt="profile pic" title="<%- data.userName %>" class="profile-pic">\n  </span>\n</div>\n<h2><%= T_("<a class=\'font-bold\' href=\'/u/<[- data.userName ]>\' onclick=\'javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashProjectNav\', \'Project_NewsFeedRequestEndProject\', \'user_action\', \'click\');\'><[- data.userName ]></a> has requested to end the project <a class=\'trunc\' href=\'<[- data.linkUrl  ]>\'><[- data.name ]></a>", {data: data}) %>\n</h2>\n<p>\n  <%= T_("If this is an inappropriate time to end your project, please ask\n  <a class=\'font-bold\' href=\'/u/<[- data.userName ]>\' onclick=\'javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashProjectNav\', \'Project_NewsFeedRequestEndProject\', \'user_action\', \'click\');\'><[- data.userName ]></a> to withdraw their request, otherwise this will be closed in <b><[- data.dayCount ]> days\'</b> time.", {data: data}) %>\n  <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</p>\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n        <a id="endProject" href="<%= data.linkUrl %>" onclick="javascript:_ttref.pushToTracking(\'Project\',\'TTREF_Project_DashProjectNav\', \'Project_NewsFeedRequestEndProject\', \'user_action\', \'click\');"> <i class="icon-share-alt"></i>&nbsp;<%- T_("End Project") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/pendingFunds.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="/img/freelancer_32_32.png" alt="profile pic" title="Freelancer" class="profile-pic">\n    </span>\n</div>\n<h2>\n    <%- data.message %>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n<div>\n    <p><strong><%- T_("Transaction:") %></strong> <%= data.descr %></p>\n    <p><strong><%- T_("Reason:") %></strong> <%- data.reason %></p>\n    <p><strong><%- T_("Amount:") %></strong> <%- data.currencysign %><%- data.amount %> <%- data.currencycode %></p>\n</div>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n          <a href="/payments/transactions.php?tab=pending"><i class="icon-share-alt"></i><%- T_("View pending transactions") %></a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/examPassedUpsell.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="/img/freelancer_32_32.png" alt="profile pic" title="Freelancer" class="profile-pic">\n    </span>\n</div>\n<h2>\n    <strong><%-T_("Congratulations on passing <[-type]> - level <[-level]>\n    ", {\'type\': data.exam_type, \'level\': data.exam_level_passed})%></strong>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n<div>\n    <p><%-T_("You\'ve passed <[-type]> - level <[-level]>, well done! The badge and result will be viewable on your\n    profile and on the bid list helping you to stand out. Did you know that we have a higher level to help you\n    stand out even more?",{\'type\': data.exam_type, \'level\': data.exam_level_passed})%></p>\n</div>\n<div class="news-list-exam-progress-bar">\n    <ol class="StepsProgressBar"></ol>\n</div>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="/exam/exams/buy.php?id=<%=data.exam_id_next%>&ttref=<%=data.exam_ttref%>">\n                <i class="icon-share-alt"></i>\n                <%-T_("Check out <[-type]> - level <[-level]>",{\'type\': data.exam_type, \'level\': data.exam_level_next})%>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/exams/step-progress-bar-level.htm',[],function(){return'<li class="StepsProgressBar-level <%if(passed){%>is-StepsProgressBar-level-completed<%}%>"\n        data-target="level-<%-level%>">\n    <span class="StepsProgressBar-number"><%-level%></span>\n    <div class="StepsProgressBar-progress">\n        <span class="StepsProgressBar-lockedIcon"><%= loadSvg(\'flicon-lock\') %></span>\n    </div>\n</li>\n'}),define('exams/step-progress-bar',['jquery-wrapper','underscore-wrapper','text!templates/exams/step-progress-bar-level.htm'],function(a,b,c){var d=function(b,c){a.ajax({url:'/ajax/exam/getExamLevelProgress.php',type:'post',data:{exam_id:b},dataType:'json',success:function(a){if(a&&a.status==='success'){var b=a.data.results,d=e(b);c.append(d);return}}})},e=function(a){var d=[];for(var e=0;e<a.length;e++){var f=e+1,g=b.template(c,{passed:a[e],level:f});d[e]=g}return d};return{init:d}}),define('text!templates/dashboard/examRetakingDiscount.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="/img/freelancer_32_32.png" alt="profile pic" title="Freelancer" class="profile-pic">\n    </span>\n</div>\n<h2>\n    <strong><%-T_("Retake <[-type]> - level <[-level]> with 20% off\n    ", {\'type\': data.exam_type, \'level\': data.exam_level_failed})%></strong>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n<div>\n    <p><%-T_("We\'re sorry you failed the <[-type]> - level <[-level]> skills test but did you know you can try it again? We\'re giving you 20% off retaking the <[-type]> - level <[-level]> skills test so you can stand out to prospective employers. This offer will expire after 7 days.",{\'type\': data.exam_type, \'level\': data.exam_level_failed})%></p>\n</div>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a href="/exam/exams/buy.php?id=<%=data.exam_id%>&ttref=Exams_DashboardFailed&retaking=true">\n                <i class="icon-share-alt"></i>\n                <%-T_("Get 20% off <[-type]> - level <[-level]>",{\'type\': data.exam_type, \'level\': data.exam_level_failed})%>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/dashboard/localJobsActivation.htm',[],function(){return'<div class="profile-pic-wrapper">\n    <span class="profile-pic">\n        <img src="<%- companyLogo %>" alt="profile pic" title="Freelancer" class="profile-pic">\n    </span>\n</div>\n<h2>\n    <%= T_("Local Jobs") %> <% if (data.has_location) { %> - <%= data.vicinity %> <% } %>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em>\n</h2>\n<p>\n<% if (data.project_count > 0) { %>\n    <%= T_("Hi <[-display_name]>, there are <[-project_count]> project(s) in your area waiting for your bid.", {\'display_name\': data.display_name, \'project_count\': data.project_count}) %>\n<% } else if (data.has_location) {%>\n    <%= T_("Hi <[-display_name]>, We have your location saved as <[-vicinity]>.", {\'display_name\': data.display_name, \'vicinity\': data.vicinity}) %>\n<% } else if (!data.has_location) {%>\n    <%= T_("Hi <[-display_name]>, We don\'t have a location stored for you.", {\'display_name\': data.display_name}) %>\n<% } %>\n</p>\n<div class="actions tabbable">\n    <ul class="nav nav-tabs">\n        <li class="first">\n            <a target="_blank" href="#" id="lj-activation-button">\n                <i class="icon-share-alt"></i>\n                <% if (data.project_count > 0) { %>\n                    <%- T_("Click here to view nearby jobs") %>\n                <% } else {%>\n                    <%- T_("Update location") %>\n                <% } %>\n            </a>\n        </li>\n    </ul>\n</div>\n'}),define('text!templates/local-jobs/updateLocationModal.htm',[],function(){return'<div class="lj-update-location-modal modal hide" id="lj-update-location-modal">\n    <div class="modal-header">\n        <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h3><%- titleText %></h3>\n    </div>\n    <div class="modal-body">\n        <div class="alert alert-error message-error is-hidden">\n            <span><%- T_("Invalid location")%></span>\n        </div>\n        <div class="alert alert-success message-success is-hidden">\n            <span><%- successMessageText %></span>\n        </div>\n        <div>\n            <span><%- messageText %></span>\n        </div>\n        <br/>\n        <form class="update-location-modal-form">\n            <div class="input-append">\n                <input type="text" class="input-location input-xlarge" id="<%- geoInputId %>"\n                    placeholder="<%- placeholderText %>" autocomplete="off" style="width: 75%; padding:5px">\n                <a id="<%- geocodeElementId %>" class="add-on" style="cursor:pointer;">\n                    <span class="icon-map-marker"></span>\n                </a>\n                <div class="help-inline small profile"></div>\n                <br>\n                <% if (hasEmailOption) { %>\n                    <input type="checkbox" class="input-location input-xlarge subscribeCheckBox" checked>\n                    <%- checkBoxText %>\n                <% } %>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <% if (typeof closeButtonText !== \'undefined\' && closeButtonText) { %>\n            <button type="button" class="btn lj-update-location-modal-close"><%- closeButtonText %></button>\n        <% } %>\n        <button type="button" class="btn btn-primary lj-update-location-modal-save"><%- saveButtonText %></button>\n    </div>\n</div>\n'}),define('async',[],function(){function c(a){var b,c;b=document.createElement('script'),b.type='text/javascript',b.async=!0,b.src=a,c=document.getElementsByTagName('script')[0],c.parentNode.insertBefore(b,c)}function d(b,c){var d=/!(.+)/,e=b.replace(d,''),f=d.test(b)?b.replace(/.+!/,''):a;return e+=e.indexOf('?')<0?'?':'&',e+f+'='+c}function e(){return b+=1,'__async_req_'+b+'__'}var a='callback',b=0;return{load:function(a,b,f,g){if(g.isBuild)f(null);else{var h=e();window[h]=f,c(d(b.toUrl(a),h))}}}}),define('googlemaps',['async'],function(a){function e(){}var b=this,c={load:function(a,b,c,e){var f,g=e||{};if(g.isBuild){c(null);return}f=new d(b,c,g.googlemaps||{}),f.load()}},d=function(b,c,f){this.require_=b,this.onload_=c||e,this.baseUrl_=f.url||d.DEFAULT_BASE_URL,this.async_=f.async||a,this.params_=this.normalizeParams_(f.params)};return d.prototype.load=function(){this.isGoogleMapsLoaded_()?this.resolveWith_(this.getGlobalGoogleMaps_()):this.loadGoogleMaps_()},d.prototype.loadGoogleMaps_=function(){var a=this,b=function(){a.resolveWithGoogleMaps_(a)};b.onerror=this.onload_.onerror,this.async_.load(this.getGoogleUrl_(),this.require_,b,{})},d.prototype.getGoogleUrl_=function(){return this.baseUrl_+'?'+this.serializeParams_()},d.prototype.resolveWithGoogleMaps_=function(){if(!this.isGoogleMapsLoaded_()){this.reject_();return}this.resolveWith_(this.getGlobalGoogleMaps_())},d.prototype.serializeParams_=function(){var a=[];for(var b in this.params_)if(this.params_.hasOwnProperty(b)){var c=this.params_[b],d=typeof c=='object',e=encodeURIComponent(b)+'='+encodeURIComponent(c),f=d?this.serializeParams_(c,b):e;a.push(f)}return a.join('&')},d.prototype.normalizeParams_=function(a){var b={sensor:!1};return a||(a={}),a.sensor=a.sensor==void 0?b.sensor:a.sensor,a},d.prototype.isGoogleMapsLoaded_=function(){return b.google&&b.google.maps},d.prototype.getGlobalGoogleMaps_=function(){return b.google?b.google.maps:undefined},d.prototype.resolveWith_=function(a){this.onload_.apply(b,arguments)},d.prototype.reject_=function(a){var c=a||new Error('Failed to load Google Maps library.');if(!this.onload_.onerror)throw c;this.onload_.onerror.call(b,c)},d.DEFAULT_BASE_URL='https://maps.googleapis.com/maps/api/js',c});var googlemapsParams=require.s.contexts._.config.googlemaps.params;googlemapsParams.language='en',require.config({googlemaps:{params:googlemapsParams}}),define('local-jobs/geocoding',['jquery-wrapper','underscore-wrapper','googlemaps!'],function(a,b,c){var d=function(){var b={config:{}},d;return b.init=function(e){b.config=e,d=new c.places.Autocomplete(document.getElementById(b.config.autoCompleteElement),{}),c.event.addListener(d,'place_changed',function(){typeof b.config.autoCompleteCallback=='function'&&b.config.autoCompleteCallback(b.getSelectedAddressGeoInfo())}),typeof b.config.reverseGeocodingElement!='undefined'&&a('#'+b.config.reverseGeocodingElement).off('click').on('click',function(a){a.preventDefault();if('geolocation'in navigator){var c={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};navigator.geolocation.getCurrentPosition(function(a){b.getReverseGeoInfo(a.coords.latitude,a.coords.longitude)},function(a){typeof b.config.reverseGeocodingErrorCallback=='function'&&b.config.reverseGeocodingErrorCallback('Failed to determine current location: '+a.toString())},c)}})},b.formatGeoInfo=function(a){var b={administrative_area_level_1:'',country:'',formatted_address:'',lat:'',lng:'',vicinity:''},c={administrative_area_level_1:'short_name',country:'long_name',locality:'long_name'};for(var d=0;d<a.address_components.length;d++){var e=a.address_components[d].types[0];c[e]&&(b[e]=a.address_components[d][c[e]])}return b.formatted_address=a.formatted_address,b.lat=a.geometry.location.lat(),b.lng=a.geometry.location.lng(),b.vicinity=a.vicinity||b.locality||b.administrative_area_level_1||b.country||'',b},b.getSelectedAddressGeoInfo=function(){var a=d.getPlace();return b.formatGeoInfo(a)},b.getReverseGeoInfo=function(d,e){var f=new c.Geocoder,g=new c.LatLng(d,e);f.geocode({latLng:g},function(d,e){if(e===c.GeocoderStatus.OK){var f=b.formatGeoInfo(d[0]);a('#'+b.config.autoCompleteElement).val(f.formatted_address),typeof b.config.reverseGeocodingSuccessCallback=='function'&&b.config.reverseGeocodingSuccessCallback(f)}else typeof b.config.reverseGeocodingErrorCallback=='function'&&b.config.reverseGeocodingErrorCallback(e)})},{init:b.init}};return{create:d}}),define('local-jobs/updateLocationModal',['jquery-wrapper','underscore-wrapper','text!templates/local-jobs/updateLocationModal.htm','local-jobs/geocoding','jquery.validate'],function(a,b,c,d){var e=function(){function j(){a('.update-location-modal-form',e).validate({highlight:function(){},success:function(){},errorPlacement:function(){}});var b='hasLocation'+Math.random().toString(36).substr(2,10);a.validator.addMethod(b,function(){return typeof h.geoInfo!='undefined'&&h.geoInfo!==null&&h.geoInfo.lat!==null&&h.geoInfo.lng!==null?!0:!1});var c={required:!0};c[b]=[],a('#'+h.geoInput,e).rules('add',c)}function k(a){p(),h.geoInfo=a}function o(b){if(b===undefined||b==='')return;var c={section:h.section,sub_section:'local-jobs/updateLocationModal',label:b};typeof h.user_id!='undefined'&&(c.user_id=h.user_id),typeof h.project_id!='undefined'&&(c.project_id=h.project_id);if(h.hasEmailOption){var d=a('.subscribeCheckBox',e),f=d.val()==='on'&&d.is(':checked');c.value=JSON.stringify({is_subscribed:f})}a.extend(c,h.geoInfo||{}),window._t.push(['user_action',c])}function p(){a('.message-success',e).addClass('is-hidden'),a('.message-error',e).addClass('is-hidden')}function q(b){a('.message-error span',e).text(b),a('.message-success',e).addClass('is-hidden'),a('.message-error',e).removeClass('is-hidden')}function r(){a('.message-success',e).removeClass('is-hidden'),a('.message-error',e).addClass('is-hidden')}var e,f,g,h={geoInput:'local-location-modal-input'+Math.random().toString(36).substr(2,10),geocodeElement:'local-location-reverse-geocode-modal-btn'+Math.random().toString(36).substr(2,10),geoInfo:null,checkBoxText:T_('Email me when a new project is posted in my area'),titleText:T_('You need to be within a 150km radius of this job'),messageText:T_('Only users based within 150km radius of this job may bid on it. Please confirm your location below.'),saveButtonText:T_('Confirm'),saveButtonAction:null,closeButtonText:null,successMessageText:T_('You have successfully updated your location.'),hasEmailOption:!1,autoExecuteCallbackTimeout:null},i=function(i){a.extend(h,i||{});var l=a('#pinky-container'),q=h.placeholderText?h.placeholderText:T_('Enter a location');e=a(b.template(c,{titleText:h.titleText,messageText:h.messageText,saveButtonText:h.saveButtonText,closeButtonText:h.closeButtonText,placeholderText:q,successMessageText:h.successMessageText,checkBoxText:h.checkBoxText,hasEmailOption:h.hasEmailOption,geoInputId:h.geoInput,geocodeElementId:h.geocodeElement})),e.appendTo(l);var r=d.create();r.init({autoCompleteElement:h.geoInput,autoCompleteCallback:k,reverseGeocodingElement:h.geocodeElement,reverseGeocodingSuccessCallback:k}),a('.lj-update-location-modal-save',e).click(function(a){a.preventDefault(),typeof h.saveButtonAction=='function'?(h.saveButtonAction(h.geoInfo),o('customSave'),f()):n(h.geoInfo)}),a('.lj-update-location-modal-close',e).click(function(a){a.preventDefault(),typeof g=='number'&&clearTimeout(g),typeof f!='undefined'?f.call(h.geoInfo):m()}),j(),a('#'+h.geoInput,e).keypress(function(a){a.stopPropagation(),h.geoInfo=null,p()})},l=function(b,c){p(),a('.lj-update-location-modal-save',e).removeClass('is-hidden'),g=null,a.extend(h,b||{}),f=c,h.geoInfo&&h.geoInfo.formatted_address.length>0&&a('#'+h.geoInput,e).val(h.geoInfo.formatted_address),e.modal('show');var d=e.css('z-index');a('.pac-container').css('z-index',d),o('view',h.geoInfo)},m=function(){e.modal('hide')},n=function(b){var c={attribute:'location',setLocalJobUser:'true',value:b},d=a('.subscribeCheckBox',e);d.val()==='on'&&(c.subscribeEmail=a('.subscribeCheckBox',e).is(':checked')),a('.message-success',e).addClass('is-hidden'),a('.message-error',e).addClass('is-hidden'),a('.update-location-modal-form',e).valid()?(a('.lj-update-location-modal-save',e).attr('disabled','disabled'),a.ajax({url:'/users/profile/onUpdateInfo.php',data:c,dataType:'JSON',method:'POST',success:function(b){return a('.lj-update-location-modal-save',e).attr('disabled',null),a('.lj-update-location-modal-save',e).addClass('is-hidden'),a('.lj-update-location-modal-close',e).removeClass('is-hidden'),b.status==='success'?(o('save'),r(),!isNaN(h.autoExecuteCallbackTimeout)&&h.autoExecuteCallbackTimeout>0&&typeof f!='undefined'&&(g=setTimeout(function(){f.call(h.geoInfo)},h.autoExecuteCallbackTimeout)),!0):(q(T_('Please select a location from the dropdown')),!1)},error:function(){return a('.lj-update-location-modal-save',e).attr('disabled',null),q(T_('Unable to save location.')),!1}})):q(T_('Please select a location from the dropdown'))};return{init:i,showModal:l,hideModal:m}};return{create:e}}),define('text!templates/dashboard/projectSharedWithYou.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n\n<h2> <%= T_("<[- data.employerPublicName || data.employerUsername ]> has shared their project <a class=\'trunc\' href = \'/projects/<[- data.projectId]>.html\'><[- data.projectName]></a> with you.<span class=\'noTrunc\'>", {data: data}) %><em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></span></h2>\n\n<div class="actions tabbable">\n  <ul class="nav nav-tabs">\n    <li class = "first">\n      <a href="/projects/<%- data.projectId %>.html"> <i class="icon-share-alt"></i>&nbsp;<%- T_("View Project") %></a>\n    </li>\n  </ul>\n</div>\n'}),define('dashboard/views/dashboardParams',function(){}),define('text!templates/dashboard/welcome.htm',[],function(){return'<div class="profile-pic-wrapper">\n  <span class="profile-pic"><img src="<%- companyLogo %>"  alt="profile pic" title="Freelancer" class="profile-pic"></span>\n</div>\n<h2>\n    <% if (!accountSetup) { %>\n    <%= T_("Welcome to <[- data.siteName ]>. This is where you\'ll receive updates for project and account activity. Select an option below to get started.", {data: data}) %>\n    <% }  else {%>\n    <%- T_("This is where you\'ll receive updates for project and account activity. Select an option below to get started.") %>\n    <% } %>\n    <em class="timestamp time_text"><%- lib_datetime_relative_date(timestamp) %></em></h2>\n<div class="actions tabbable">\n\n  <ul class="nav nav-tabs">\n    <li class="first">\n      <a\n      data-newstrack-label=\'GoToPostProject\'\n      href = "/post-project" > <i class="icon-share-alt"></i>&nbsp;<%-T_("Post a Project") %></a>\n    </li>\n    <li class="last">\n      <a\n      data-newstrack-label=\'GoToBrowseProject\'\n      href = "/jobs/myskills/1/" > <i class="icon-share-alt"></i>&nbsp;<%-T_("Browse Projects") %></a>\n    </li>\n    <% if (!accountSetup) { %>\n     <li class="last">\n      <a\n      data-newstrack-label=\'GoToSetupAccountDetails\'\n      href = "/users/changeuserinfo.php" > <i class="icon-share-alt"></i>&nbsp;<%-T_("Setup Account Details") %></a>\n    </li>\n    <% } %>\n  </ul>\n</div>\n'}),define('text!templates/dashboard/membershipUpsellBanner.htm',[],function(){return'<div id="memb-trial-banner" class="PageDashboard-banner">\n    <a class="Banner Banner--light" style="background-image: url(<%= cdn_url(\'/build/img/membership-bids-upsell-banner/background2.png\') %>)">\n        <div class="Banner-content">\n            <h2 class="Banner-heading"><%- T_("Claim <[- bids ]> Bids for Free", {\'bids\': bids}) %></h2>\n            <div class="Banner-body">\n                <%= T_("Get started with a FREE TRIAL for <[- bids ]> bids and more!", {\'bids\': bids}) %>\n            </div>\n        </div>\n        <div class="Banner-image">\n            <img src="<%= cdn_url(\'/build/img/membership-bids-upsell-banner/membership-badge2.png\') %>" alt="Membership Badge" role="presentation">\n        </div>\n    </a>\n</div>\n'}),define('text!templates/dashboard/membershipEidCampaignBanner.htm',[],function(){return'<div id="memb-eid-banner" class="PageDashboard-banner">\n    <a class="Banner Banner--light PageDashboard-banner-eid">\n        <div class="Banner-content">\n            <h2 class="Banner-heading"><%- T_("Eid Mubarak!") %></h2>\n            <div class="Banner-body PageDashboard-banner-body">\n                <%= T_("To celebrate the blessings of Eid we\'ve taken 40% off our Annual Memberships.") %>\n            </div>\n        </div>\n    </a>\n</div>'}),define('text!templates/paytm/paytmBanner.htm',[],function(){return'<div id="paytm-banner" class="fl-banner PageDashboard-banner">\n    <% if (useBannerXL) { %>\n        <a class="Banner Banner--light" style="background-image: url(<%= cdn_url(\'/build/img/membership/paytm/membership-3m-upsell-banner-bg-xl.png\') %>)">\n    <% } else { %>\n        <a class="Banner Banner--light" style="background-image: url(<%= cdn_url(\'/build/img/membership/paytm/membership-3m-upsell-banner-bg.png\') %>)">\n    <% } %>\n        <button id="paytm-banner-close" class="Banner-close">\n            <span class="Icon Icon--light">\n                <svg class="Icon-image" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n                    <path d="M20.707 4.707l-1.414-1.414L12 10.586 4.707 3.293 3.293 4.707 10.586 12l-7.293 7.293 1.414 1.414L12 13.414l7.293 7.293 1.414-1.414L13.414 12"/>\n                </svg>\n            </span>\n        </button>\n        <div class="Banner-content">\n            <h2 class="Banner-heading"><%- T_("Earn more with a Membership") %></h2>\n            <div class="Banner-body">\n                <%= T_("Now with PAYTM, it\'s never been easier to get started →") %>\n            </div>\n        </div>\n    </a>\n</div>\n'}),define('text!templates/dashboard/givegetBanner.htm',[],function(){return'<a href="/give" class="PageDashboard-banner" title="<%- T_("Give $20, Get $20") %>" id="give-get-banner"\n    data-qtsb-section="dashboard"\n    data-qtsb-subsection="give-get-banner"\n    data-qtsb-label="link-give">\n    <div class="Banner Banner--light PageDashboard-banner-giveget">\n        <div class="Banner-content PageDashboard-banner-content">\n            <h2 class="Banner-heading"><%- T_("Give $20, Get $20") %></h2>\n            <div class="Banner-body">\n                <%- T_("Refer a friend to Freelancer and you\'ll both get $20 USD towards your next project.") %>\n            </div>\n        </div>\n    </div>\n</a>\n'}),define('text!templates/dashboard/25mBanner.htm',[],function(){return'<a href="/25" class="PageDashboard-banner" title="<%- T_("25 Million Lives Changed") %>" id="25m-banner"\n    data-qtsb-section="dashboard"\n    data-qtsb-subsection="25m-banner"\n    data-qtsb-label="link-25m">\n    <div class="Banner Banner--light PageDashboard-banner-25m">\n        <div class="Banner-content PageDashboard-banner-content">\n            <h2 class="Banner-heading"><%- T_("25 Million Lives Changed") %></h2>\n            <div class="Banner-body">\n                <%- T_("Come and celebrate the journey of Freelancer.com") %>\n            </div>\n        </div>\n    </div>\n</a>\n'}),define('text!templates/dashboard/quotesBanner.htm',[],function(){return'<a href="/about/quotes" class="PageDashboard-banner" title="<%- T_("Post Your Quote") %>" id="quotes-banner"\n    data-qtsb-section="dashboard"\n    data-qtsb-subsection="quotes-banner"\n    data-qtsb-label="link-quotes">\n    <div class="Banner Banner--light PageDashboard-banner-quotes">\n        <div class="Banner-content PageDashboard-banner-content">\n            <h2 class="Banner-heading"><%- T_("Post Your Quote") %></h2>\n            <div class="Banner-body">\n                <%- T_("Tell us how Freelancer has changed your life today") %>\n            </div>\n        </div>\n    </div>\n</a>\n'}),define('text!templates/dashboard/exposeLogoBanner.htm',[],function(){return'<a href="/contest/challenges/exposeourlogo2017" class="PageDashboard-banner" title="<%- T_("Expose Our Logo To Win $25,000") %>" id="expose-logo-banner"\n    data-qtsb-section="dashboard"\n    data-qtsb-subsection="expose-logo-banner"\n    data-qtsb-label="link-expose-logo">\n    <div class="Banner">\n        <img src="<%- cdn_url(\'/static/img/dashboard/banner-expose-logo.png\') %>" alt="Expose Our Logo To Win $25,000">\n    </div>\n</a>\n'}),define('text!templates/dashboard/recentProjectsWidget/container.htm',[],function(){return'<section class="Card PageDashboard-card recent-projects-section">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title">\n            <a href="/dashboard/projects.php" class="PageDashboard-card-title-link"><%- T_("Recent Projects") %></a>\n        </h3>\n        <a href="/dashboard/projects.php" class="recent-projects-section-cta-link"><%- T_("View All") %></a>\n    </div>\n    <ul class="recent-projects-list"><!-- Filled by JS --></ul>\n</section>\n'}),define('text!templates/dashboard/recentProjectsWidget/createProjectCard.htm',[],function(){return'<li class="project-snapshot project-snapshot-add is-vacant">\n    <a href="/post-project" class="project-snapshot-content">\n        <span class="fl-icon-plus"></span>\n        <h4 class="create-project-heading"><%- T_("Create a New Project") %></h4>\n        <p><%- T_("Millions of talented freelancers are ready to help you do amazing things.") %></p>\n    </a>\n</li>\n'}),define('text!templates/dashboard/recentProjectsWidget/openProjectCard.htm',[],function(){return'<li class="project-snapshot project-snapshot-open project-snapshot--roundCorner" data-project-id="<%- id %>">\n    <div class="project-snapshot-content">\n        <div class="project-snapshot-menu">\n            <% if (projectCardCTA) { %>\n                <p class="project-snapshot-status project-snapshot-status-border"><%- T_("Award your project") %></p>\n            <% } else if (showProjectCardMilestone) { %>\n                <p class="project-snapshot-status project-snapshot-status-border"><%- T_("Create a Milestone") %></p>\n            <% } else { %>\n                 <% if (abtestFLS685.onTest && upgrades.assisted !== 1) { %>\n                    <p class="project-snapshot-status project-snapshot-status-border"><%- T_("Open") %></p>\n                <% } else { %>\n                    <p class="project-snapshot-status project-snapshot-status--open"><%- T_("Open") %></p>\n                <% } %>\n            <% } %>\n            <div class="project-snapshot-dropdown">\n                <a class="project-snapshot-dropdown-toggle" data-toggle="dropdown" title="<% T_("Options menu") %>">\n                    <span class="Icon">\n                        <%= loadSvg(\'ui-show-more\') %>\n                    </span>\n                </a>\n                <ul class="project-snapshot-dropdown-menu">\n                    <li>\n                        <a class="hide-project-card" data-qtsb-section="newsfeed" data-qtsb-subsection="feed" data-qtsb-label="hide item">\n                            <%- T_("Hide this item") %>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n        <h4 class="project-snapshot-heading">\n            <a class="project-snapshot-heading-link" href="/projects/<%= seo_url %>.html" target="_blank" onmousedown="pushTtrefOpenProjectCard(<%- id %>)"><%- name %></a>\n        </h4>\n\n        <% if (showProjectCardMilestone) { %>\n            <div class="FreelancerBid">\n                <p class="FreelancerBid-description">\n                    <%= T_("Your project is missing a milestone. Let\'s <a class=\'create-milestone-project-card\' data-project-id=\'<[- projectId ]>\' data-freelancer-id=\'<[- freelancerId ]>\' data-seo-url=\'<[= seoUrl ]>\' data-bid-id=\'<[- bidId ]>\'>create the first milestone</a>. That way <strong><[- username ]></strong> can accept your project and start working on it.", {projectId: id, freelancerId: selectedBid.users_id, seoUrl: seo_url, bidId: selectedBid.id, username: selectedBid.user.username}) %>\n                </p>\n            </div>\n\n            <div class="FreelancerBid-footer">\n                <span class="FreelancerBid-details">\n                    <figure class="ImageThumbnail ImageThumbnail--small">\n                        <img class="ImageThumbnail-image"\n                            src="<%- selectedBid.user.profile_logo_url %>"\n                            alt="<%- T_("Profile Picture of <[- username ]>", {username: selectedBid.user.username}) %>">\n                    </figure>\n                    <%- T_("<[- username ]> requested a <[= currencySign ]><[- amount ]> <[- currencyCode ]> Milestone", {username: selectedBid.user.username, currencySign: milestoneRequest.sign, amount: milestoneRequest.amount, currencyCode: milestoneRequest.code}) %>\n                </span>\n\n                <button class="btn btn-small btn-success create-milestone-project-card"\n                    data-project-id="<%- id %>"\n                    data-freelancer-id="<%- selectedBid.users_id %>"\n                    data-seo-url="<%= seo_url %>"\n                    data-bid-id="<%- selectedBid.id %>">\n                    <%- T_("Create Milestone") %>\n                </button>\n            </div>\n        <% } else if (projectCardCTA) { %>\n            <div class="FreelancerBid">\n                <a href="/projects/<%- projectDetails.id %>.html?#/proposals">\n                <figure class="ImageThumbnail ImageThumbnail--small">\n                    <img class="ImageThumbnail-image"\n                            src="<%- recommendedBid.user.profile_logo_url %>"\n                            alt="<%- T_("Profile Picture of <[- username ]>", {username: recommendedBid.user.username}) %>">\n                </figure>\n                </a>\n                <div class="FreelancerBid-user">\n                    <span class="FreelancerBid-user-text"><%- T_("Recommended Bid") %></span>\n                    <a class="FreelancerBid-user-name" href="/projects/<%- projectDetails.id %>.html?#/proposals">\n                        <%- recommendedBid.user.username %>\n                    </a>\n\n                </div>\n                <div class="FreelancerBid-stats">\n                    <span class="Rating Rating--labeled"\n                          data-star_rating="<%- recommendedBid.user.seller_rating.avg.toFixed(1) %>">\n                        <span class="Rating-total">\n                            <span class="Rating-progress"></span>\n                        </span>\n                    </span>\n                    <div class="Earnings" data-user_earnings="<%- recommendedBid.user.seller_rating.earning_score %>">\n                        <span class="Earnings-label">\n                            <%- recommendedBid.user.seller_rating.earning_score %>\n                        </span>\n                        <span class="Earnings-icon"></span>\n                        <span class="Earnings-total">\n                            <span class="Earnings-progress"\n                                  style="width:<%- recommendedBid.user.seller_rating.earning_score * 10 %>%">\n                            </span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n\n            <span class="FreelancerBid-details">\n                <% if (!projectDetails.isHourly) { %>\n                    <% if (recommendedBid.period > 1) { %>\n                        <%- T_("Completed for <[= currencySign ]><[- sum ]> in <[- period ]>\n                            Days", {currencySign: projectDetails.currencyDetails.sign, sum: recommendedBid.sum, period: recommendedBid.period}) %>\n                    <% } else { %>\n                        <%- T_("Completed for <[= currencySign ]><[- sum ]> in <[- period ]>\n                            Day", {currencySign: projectDetails.currencyDetails.sign, sum: recommendedBid.sum, period: recommendedBid.period}) %>\n                    <% } %>\n                <% } else { %>\n                    <%- T_("<[= currencySign ]><[- sum ]> per hour", {currencySign: projectDetails.currencyDetails.sign, sum: recommendedBid.sum}) %>\n                <% } %>\n            </span>\n\n            <div class="FreelancerBid-footer">\n                <button class="btn btn-small btn-success FreelancerBid-award" id="award-project-card"\n                    data-project-id="<%- id %>"\n                    data-bid-id="<%- recommendedBid.id %>"\n                    data-freelancer-id="<%- recommendedBid.users_id %>">\n                    <%- T_("Award Project") %>\n                </button>\n                <button class="btn btn-small btn-default" id="view-all-project-card"\n                    data-project-id="<%- id %>">\n                    <%- T_("View All Bids") %>\n                </button>\n            </div>\n        <% } else if (abtestFLS685.onTest && upgrades.assisted !== 1) { %>\n            <p class="project-snapshot-error alert is-hidden"></p>\n            <a class="ProjectSnapshotBanner ProjectSnapshotBanner--recruiter abtest-upgrade" data-project-id="<%- id %>" id="abtest-upgrade">\n                <img src="<%- cdn_url(\'/static/img/recruiter-upgrade-widget-img.png\') %>" alt="Recruiter Upgrade" class="ProjectSnapshotBanner-image">\n                <div class="ProjectSnapshotBanner-content">\n                    <p class="ProjectSnapshotBanner-copy"><%- T_("We can find you the best freelancer") %></p>\n                    <span class="ProjectSnapshotBanner-cta"><%- T_("Use a Recruiter") %> &rarr;</span>\n                </div>\n            </a>\n        <% } else { %>\n            <ul class="project-snapshot-bidders-list clearfix">\n                <% _.each(threads, function(thread, index) { %>\n                    <li>\n                        <figure class="ImageThumbnail ImageThumbnail--large">\n                            <a href="#" class="project-snapshot-bidder"\n                                data-user-id="<%- thread.bidder_id %>"\n                                data-username="<%- thread.bidder %>"\n                                data-thread-id="<%- thread.thread.id %>">\n                                <img src="<%= thread.bidder_logo %>" class="ImageThumbnail-image" alt="avatar pic of <%- thread.bidder %>">\n                                <% if (thread.message_unread_count > 0) { %>\n                                    <span class="project-snapshot-bidder-messages"><%- thread.message_unread_count %></span>\n                                <% } %>\n                            </a>\n                        </figure>\n                    </li>\n                <% }); %>\n                <% for (var x = 0; x < blankThreads; x++) { %>\n                    <li></li>\n                <% } %>\n            </ul>\n            <a href="/projects/<%= seo_url %>.html" target="_blank" onmousedown="pushTtrefOpenProjectCard(<%- id %>)"><%- T_("View Project") %></a>\n        <% } %>\n    </div>\n\n    <!-- "Hide Message" -->\n    <div class="project-snapshot-hide-msg">\n        <p><%= T_("You are about to hide \'<[- name ]>\' from your dashboard", {name: name}) %></p>\n        <div class="project-snapshot-error hide alert alert-error"></div>\n        <ul class="project-snapshot-user-actions-list">\n            <li><a href="#" class="accept-hide-project-card"><%- T_("Accept") %></a></li>\n            <li><a href="#" class="undo-hide-project-card"><%- T_("Undo") %></a></li>\n        </ul>\n    </div>\n</li>\n'}),define('text!templates/dashboard/oneclick-banner-buttons.htm',[],function(){return'<div class="BannerOneClick project-snapshot is-vacant">\n    <div class="BannerOneClick-title" data-uitest-target="banner-one-click-title">\n        <%- T_("Hire a freelancer in seconds") %>\n    </div>\n    <div class="BannerOneClick-tagline">\n        <%- T_("Click a button below to get a job done") %>\n    </div>\n    <div class="BannerOneClick-cards" data-uitest-target="banner-one-click-cards">\n        <% for (var i = 0; i < projectTemplates.length; i++) { %>\n            <div class="BannerOneClick-card" data-uitest-target="banner-one-click-card">\n                <button class="btn btn-link BannerOneClick-cta Card"                    \n                    data-one-click-banner-btn="button-<%- i %>"\n                    data-index="<%- i %>">\n                    <%- projectTemplates[i].name %>\n                </button>\n            </div>\n        <% } %>\n    </div>\n    <form id="one-click-banner-form" method="POST" action="/buyers/onverifycreate.php">\n        <input type="hidden" name="project_name">\n        <input type="hidden" name="one_click_post" value="true">\n        <input type="hidden" name="budget_set" value="false">\n        <input type="hidden" name="csrf_token" value="<%- csrf_token %>">\n        <input type="hidden" name="page_name" value="DashboardBanner">\n    </form>\n</div>\n'}),define('text!templates/dashboard/services-banner-buttons.htm',[],function(){return'<div class="BannerOneClick project-snapshot is-vacant">\n    <div class="BannerOneClick-title" data-uitest-target="banner-one-click-title">\n        <%- T_("Hire a freelancer in seconds") %>\n    </div>\n    <div class="BannerOneClick-tagline">\n        <%- T_("Click a button below to get a job done") %>\n    </div>\n    <div class="BannerOneClick-cards" data-uitest-target="banner-one-click-cards">\n        <div class="BannerOneClick-card" data-uitest-target="banner-one-click-card">\n            <a href="/services/Build-a-Personal-Portfolio-Website-56763.html"\n                target="_blank" class="btn btn-link BannerOneClick-cta Card">\n                <%- T_("Get a personal website - $80") %>\n            </a>\n        </div>\n        <div class="BannerOneClick-card" data-uitest-target="banner-one-click-card">\n            <a href="/services/Logo-Design-56753.html"\n                target="_blank" class="btn btn-link BannerOneClick-cta Card">\n                <%- T_("Design a logo - $30") %>\n            </a>\n        </div>\n        <div class="BannerOneClick-card" data-uitest-target="banner-one-click-card">\n            <a href="/services/500-word-article-in-any-niche-56752.html"\n                target="_blank" class="btn btn-link BannerOneClick-cta Card">\n                <%- T_("Write an article - $30") %>\n            </a>\n        </div>\n        <div class="BannerOneClick-card" data-uitest-target="banner-one-click-card">\n            <a href="/services/Generate-an-SEO-Report-for-your-website-56762.html"\n                target="_blank" class="btn btn-link BannerOneClick-cta Card">\n                <%- T_("Get an SEO report - $40") %>\n            </a>\n        </div>\n    </div>\n    <a href="/services" target="_blank" class="BannerOneClick-link"><%- T_("Browse More") %></a>\n</div>\n'}),define('text!templates/dashboard/recentProjectsWidget/inProgressProjectCard.htm',[],function(){return'<li class="project-snapshot project-snapshot-progress" data-project-id="<%- id %>">\n    <div class="project-snapshot-content">\n        <div class="project-snapshot-menu">\n            <p class="project-snapshot-status project-snapshot-status--progress"><%- T_("In Progress") %></p>\n            <div class="project-snapshot-dropdown">\n                <a class="project-snapshot-dropdown-toggle" data-toggle="dropdown" title="<% T_("Options menu") %>">\n                    <span class="Icon">\n                        <%= loadSvg(\'ui-show-more\') %>\n                    </span>\n                </a>\n                <ul class="project-snapshot-dropdown-menu">\n                    <li>\n                        <a class="hide-project-card" data-qtsb-section="newsfeed" data-qtsb-subsection="feed" data-qtsb-label="hide item">\n                            <%- T_("Hide this item") %>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <h4 class="project-snapshot-heading">\n            <a class="project-snapshot-heading-link" href="/projects/<%= seo_url %>.html" target="_blank"><%- name %></a>\n        </h4>\n        <div class="FreelancerBid-footer">\n            <div class="project-snapshot-awardee">\n                <a href="#" class="project-snapshot-bidder" data-username="<%- freelancer.username %>"\n                    data-user-id="<%- freelancer.id %>" data-thread-id="<% if (thread) { print(thread.thread.id); } %>">\n                    <img src="<%= freelancer.logo %>" class="project-snapshot-bidder-avatar" alt="avatar pic of <%- freelancer.username %>">\n                    <% if (thread && thread.message_unread_count > 0) { %>\n                        <span class="project-snapshot-bidder-messages"><%- thread.message_unread_count %></span>\n                    <% } %>\n                </a>\n                <p class="project-snapshot-awardee-status"><%- T_("Awarded to") %></p>\n                <p class="project-snapshot-awardee-name"><a href="/u/<%- freelancer.username %>"><%- freelancerPublicName %></a></p>\n            </div>\n            <a href="/projects/<%= seo_url %>.html" target="_blank"><%- T_("View Project") %></a>\n        </div>\n    </div>\n\n    <!-- "Hide Message" -->\n    <div class="project-snapshot-hide-msg">\n        <p><%= T_("You are about to hide \'<[- name ]>\' from your dashboard", {name: name}) %></p>\n        <div class="project-snapshot-error hide alert alert-error"></div>\n        <ul class="project-snapshot-user-actions-list">\n            <li><a href="#" class="accept-hide-project-card"><%- T_("Accept") %></a></li>\n            <li><a href="#" class="undo-hide-project-card"><%- T_("Undo") %></a></li>\n        </ul>\n    </div>\n</li>\n'}),define('membership/abtest-api',['jquery-wrapper'],function(a){var b={testSubjectActivate:function(b,c){var d=2,e=getCookie('GETAFREE_AUTH_HASH_V2')||getCookie('GETAFREEST_AUTH_HASH_V2'),f=getUserIdfromCookie();a.ajax({url:'/api/abtest/0.1/enrollments/',method:'PUT',data:JSON.stringify({id_type:d,id:parseInt(f,10),experiment_name:b,variation:c}),contentType:'application/json',headers:{'Freelancer-Auth-V2':f+';'+e}})}};return b}),define('dashboard/recent-projects',['jquery-wrapper','underscore-wrapper','text!templates/dashboard/membershipUpsellBanner.htm','text!templates/dashboard/membershipEidCampaignBanner.htm','text!templates/paytm/paytmBanner.htm','text!templates/dashboard/givegetBanner.htm','text!templates/dashboard/25mBanner.htm','text!templates/dashboard/quotesBanner.htm','text!templates/dashboard/exposeLogoBanner.htm','text!templates/dashboard/recentProjectsWidget/container.htm','text!templates/dashboard/recentProjectsWidget/createProjectCard.htm','text!templates/dashboard/recentProjectsWidget/openProjectCard.htm','text!templates/dashboard/oneclick-banner-buttons.htm','text!templates/dashboard/services-banner-buttons.htm','text!templates/dashboard/recentProjectsWidget/inProgressProjectCard.htm','payments/module-fixed-amount-payment-modal','membership/abtest-api'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=2,s=4,t,u,v,w='.project-snapshot',x='is-project-hidden',y='is-project-shown',z=window.abtestFLS685,A={PROJECT_UPGRADE_INSUFFICIENT_FUNDS:'ProjectExceptionCodes.PROJECT_UPGRADE_INSUFFICIENT_FUNDS'},B=function(){a.ajax({type:'GET',dataType:'json',url:'/ajax/dashboard/getRecentProjects.php',success:function(a){a.status==='success'?(u=a.projects,J(a.projects)):t.remove()},error:function(){t.remove()}})},C=function(a){if(u.length>0){var b=u.filter(function(b){return Number(b.id)===a});return b[0]}return!1},D=function(b){var c=a('.project-snapshot[data-project-id='+b.id+'] .project-snapshot-error'),d={id:b.id,upgrades:['recruiter']};a.ajax({url:'/ajax/getEncodedBackUrl.php',type:'POST',headers:{'Freelancer-Auth-V2':window.getCookie('USER_ID')+';'+window.getCookie('AUTH_HASH_V2')},data:d,success:function(a){window.location.replace('/payments/deposit/choose.php?amount='+b.upgradePrices.assisted_price+'&currency='+b.currencyDetails.id+'&id='+b.id+'&back='+a.back_url+'&refAction=upgrade')},error:function(a){c.addClass('alert-warning').removeClass('is-hidden').text(a.responseJSON.error)}})},E=function(){a('#expanded-payment-modal .modal').modal('hide'),a('#expanded-responsive-modal').remove()},F=function(b){var c={action:'upgrade',upgrades:['recruiter'],compact:!0},d=a('.project-snapshot[data-project-id='+b.id+'] .project-snapshot-error'),e=a('.abtest-upgrade');a('#paymentModalConfirmButton').attr('disabled','true'),e.attr('disabled','true'),a.ajax({url:'/api/projects/0.1/projects/'+b.id,type:'PUT',dataType:'json',headers:{'Freelancer-Auth-V2':window.getCookie('USER_ID')+';'+window.getCookie('AUTH_HASH_V2')},data:c,cache:!1,success:function(){E(),window.location.href='/projects/'+b.seo_url+'.html#assistedCongrats'},error:function(a){E(),a.responseJSON.error_code===A.PROJECT_UPGRADE_INSUFFICIENT_FUNDS&&D(b),d.addClass('alert-warning').removeClass('is-hidden').text(a.responseJSON.message)},complete:function(){e.removeAttr('disabled')}})},G=function(a,b){window._t.push(['user_action',{section:'ProjectUpgrade',subsection:'Dashboard Upgrades',label:b,action:'click',name:'Upgrade Type',value:'recruiter',reference:'project_id',reference_id:a}])},H=function(){t.on('click','.abtest-upgrade',function(b){b.preventDefault();if(a(this).attr('disabled'))return!1;var c=a(this),d=c.data('project-id'),e=C(d),f=a('.project-snapshot[data-project-id='+e.id+'] .project-snapshot-error');f.removeClass('alert-warning').removeClass('alert-error').addClass('is-hidden').text(''),G(d,'submit');if(e.free_assisted_upgrade)return F(e);var g={amount:e.upgradePrices.assisted_price,chargeTotal:e.upgradePrices.assisted_price,chargeDetails:[{label:window.T_('Recruiter'),amount:e.upgradePrices.assisted_price}],currencyDetails:e.currencyDetails,includesGST:e.withGST,heading:window.T_('Recruiter Upgrade'),headingSubtext:window.T_('Our expert Recruiters know the best candidate for your job.This upgrade will save you time and make it easy to find the right freelancer.'),subHeading:window.T_('Upgrades'),showCharges:!0};p.initModal(g,function(){G(d,'confirm_payment'),F(e)},{},{},{},{},{},{},function(){G(d,'close')},{},function(){a('#expanded-payment-modal').addClass('pinky-template'),f.removeClass('alert-warning').removeClass('alert-error').addClass('is-hidden').text('')},!0)}),t.on('click','.hide-project-card',function(b){b.preventDefault(),a(this).closest(w).removeClass(y).addClass(x)}),t.on('click','.undo-hide-project-card',function(b){b.preventDefault(),a(this).closest(w).removeClass(x).addClass(y)}),t.on('click','.accept-hide-project-card',function(a){a.preventDefault(),S(this)}),t.on('click','.project-snapshot-bidder',function(a){a.preventDefault(),T(this)}),t.on('click','#award-project-card',function(){var b=a(this),c=b.data('project-id'),d=b.data('bid-id'),e=b.data('freelancer-id');window._ttref.push(['_clearEntrypoint','ProjectAward']),window._ttref.push(['_setCookie','ProjectAward_RecentProjectsCard']),window._ttref.push(['_trackEvent','ProjectAward','Award','RecentProjectsCard','project_id',c,'freelancer_id',e]),window.location='/projects/'+c+'.html?awardBid='+d+'#/proposals'}),t.on('click','#view-all-project-card',function(){var b=a(this),c=b.data('project-id');window._ttref.push(['_clearEntrypoint','ProjectAward']),window._ttref.push(['_setCookie','ProjectAward_RecentProjectsCard']),window._ttref.push(['_trackEvent','ProjectAward','PVPRedirect',c,'project_id',c]),window.location='/projects/'+c+'.html?#/proposals'}),t.on('click','.create-milestone-project-card',function(){var b=a(this),c=b.data('seo-url'),d=b.data('bid-id'),e=b.data('project-id'),f=b.data('freelancer-id');window._t.push(['user_action',{section:'RecentProjectCard',name:'CreateMilestone',value:e+','+f}]),window.location='/projects/'+c+'.html#milestones_'+d})},I=function(){var k=a('.dashboard-tab-content'),l=b.template(j,{});v=[],currentUserType==='B'&&(k.prepend(l),t=a('.recent-projects-section'),B(),H());if(window.showGiveGetBanner){var m=b.template(f)();k.prepend(m),_t.push(['user_action',{section:'dashboard',label:'give-get-banner',action:'load-giveget-banner'}])}if(window.randomBanner){var n=null;switch(window.randomBanner){case'25-million':n=g;break;case'expose-logo':n=i;break;case'quotes':n=h;break;default:n=null}if(n){var o=b.template(n)();k.prepend(o),_t.push(['user_action',{section:'dashboard',label:window.randomBanner+'-banner',action:'load-'+window.randomBanner+'-banner'}])}}if(showEidBanner){var p=b.template(d);k.prepend(p),_ttref.push(['_clearEntrypoint','Membership']),_ttref.push(['_setEntrypoint','dashboard']),_ttref.push(['_trackEvent','Membership','eid-banner-view']);var q=document.getElementById('memb-eid-banner');q.addEventListener('click',function(){_ttref.push(['_trackEvent','Membership','eid-banner-click']),window.location.href='/membership/index.php?ref=eid-banner'})}if(membershipTrialBanner){var r=300,s=b.template(c)({bids:r});k.prepend(s);var u=document.getElementById('memb-trial-banner');u.addEventListener('click',function(){var a='8.3.7';oneWeekTrialEligible?(_ttref.push(['_clearEntrypoint','Membership']),_ttref.push(['_setEntrypoint','dashboard']),_ttref.push(['_trackEvent','Membership','dashboard-upsell-banner-click',currentUserType,'trial-package',a,'current-memb-package','current-memb-package',null]),typeof window.showDashboardSmartUpsell!='undefined'&&window.showDashboardSmartUpsell('dashboardBanner')):(_ttref.push(['_clearEntrypoint','Membership']),_ttref.push(['_setEntrypoint','dashboard']),_ttref.push(['_trackEvent','Membership','dashboard-upsell-banner-click',currentUserType,'trial-package',a,'current-memb-package','current-memb-package','8.3.14']),window.location.href='/payments/verify.php?TrialUpsell2=true&package=8&trial=8.3.14&ref=dashboard_banner')})}else if(showPaytmBanner){var w=b.template(e)({useBannerXL:!1});k.prepend(w);var x=document.getElementById('paytm-banner'),y=document.getElementById('paytm-banner-close'),z=!1;y.addEventListener('click',function(){x.classList.add('is-hidden'),z=!0}),x.addEventListener('click',function(){z||(window.location.href='/membership/paytm/index.php?ref=dashboard')})}},J=function(b){var c=t.find(w+'.is-vacant').length>0;L()<r&&(typeof b!='undefined'&&b&&b.length>0?(a.each(b,function(a,b){if(L()>=r)return!1;var d=t.find(w+'[data-project-id='+b.id+']');v.indexOf(b.id)===-1&&d.length===0&&(c&&(M(),c=!1),R(b))}),J()):c||R())},K=function(a){for(var b=0;b<u.length;b=b){var c=u[b];c.id==a?(v.push(c.id),u.splice(b,1)):v.indexOf(c.id)!==-1?u.splice(b,1):b+=1}u.length>0?J(u):B()},L=function(){return t.find(w+':not(.is-vacant)').length},M=function(){t.find(w+'.is-vacant').remove()},N=[{name:T_('Get a Website Built'),skills:[3,335,17,20]},{name:T_('Get a Design'),skills:[20]},{name:T_('Get Data Entry Done'),skills:[39,55]},{name:T_('Get Articles Written'),skills:[174]}],O=function(){return b.template(m)({csrf_token:window.getCSRFToken?window.getCSRFToken():'',projectTemplates:N})},P=function(a){var b=document.getElementById('one-click-banner-form'),c=document.querySelectorAll('[data-one-click-banner-btn]');Array.prototype.forEach.call(c,function(c){var d=c.getAttribute('data-index'),e=N[d],f=e.skills,g=e.name;if(!e||!e.skills)return;c.addEventListener('click',function(){window._t.push(['user_action',{section:'Dashboard',subsection:'OneClickBanner',label:'PostProjectNow',reference_type:'project_name',reference_value:g}]),d==='1'?(window._t.push(['user_action',{name:'GoToPostContest',section:'Dashboard',subsection:'OneClickBanner',value:'Post',label:'GetADesign'}]),window._ttref.push(['_clearEntrypoint','PostContest']),window._ttref.push(['_setCookie','PostContest_DashboardOneClickBanner']),window._ttref.push(['_trackEvent','PostContest','PCPRedirect']),window.location='/contest/create.php?skill_category=4&skill_subcategory=79'):a?d==='0'?window.location='/post-project?project_title=Build+A+Website&skill_category=1&skill_subcategory=1':d==='2'?window.location='/post-project?project_title=Hire+a+Data+Entry+Clerk&job_id=39':d==='3'&&(window.location='/post-project?project_title=Write+some+Articles&job_id=174'):(b.project_name.value=g,f.forEach(function(a){var c=document.createElement('input');c.setAttribute('type','hidden'),c.setAttribute('name','job_'+a),c.setAttribute('value','on'),b.appendChild(c)}),b.submit())})})},Q=function(){return b.template(n)},R=function(c){var d;if(typeof c=='undefined')if(window.oneClickBannerButtons&&L()===0)if(window.serviceOrderButtons)d=Q();else{switch(window.abtestVIR814){default:case'control':d=O();break;case'ppp_link':d=O();break;case'create_new_project':d=b.template(k,{});break;case'no_banner':document.querySelector('.recent-projects-section').classList.add('is-hidden')}q.testSubjectActivate('VIR-814-one-click-dashboard-banner',window.abtestVIR814)}else d=b.template(k,{});else if(c.is_open)c.abtestFLS685=z,z.onExperiment&&c.upgrades.assisted!==1&&!c.projectCardCTA&&!c.showProjectCardMilestone&&q.testSubjectActivate('FLS-685-recruiter-project-widget-experiment-retry',z.variant),c.maxThreads=s,c.blankThreads=s-c.threads.length,d=b.template(l,c);else{if(!c.in_progress)return;d=b.template(o,c)}a('.dashboard-tab-content .recent-projects-section .recent-projects-list').append(d),P(window.abtestVIR814==='ppp_link')},S=function(b){var c=a(b).closest(w);if(c.data('deleting'))return;var d=c.data('project-id');a.ajax({type:'POST',url:'/ajax/dashboard/hideRecentProject.php',dataType:'json',data:{project_id:d,csrf_token:getCSRFToken()},beforeSend:function(){c.data('deleting',!0),c.find('.project-snapshot-error').addClass('hide')},success:function(a){a.status==='success'?(c.addClass('is-removed'),setTimeout(function(){c.find('.project-snapshot-hide-msg').animate({width:'0px',padding:'20px 0'},300,'linear',function(){c.remove(),K(d)})},800)):c.find('.project-snapshot-error').removeClass('hide').text(a.message)},error:function(){var a=T_('Unable to hide project from dashboard. Please try again after a few minutes');c.find('.project-snapshot-error').removeClass('hide').text(a)},complete:function(){c.data('deleting',!1)}})},T=function(b){if(!window.liveChat)return;var c=a(b),d=c.data('username'),e=c.data('user-id'),f=c.data('thread-id'),g=c.closest(w).data('project-id');f||(f=undefined),window.liveChat.startChat([e],'private_chat','recentProjects',{type:'project',id:g}),c.find('.project-snapshot-bidder-messages').hide()};return{init:I}}),define('text!templates/dashboard/local-jobs-banner.htm',[],function(){return'<a href="/local/campaigns/" class="fl-banner local-jobs-banner" title="<%- T_("Earn more money doing local jobs in your area") %>">\n    <figure class="fl-banner-image">\n        <img class="fl-banner-image-content" src="<%= cdn_url(\'/static/css/images/dashboard/banner-local-jobs.jpg\') %>"\n        alt="<%- T_("Make more money doing local jobs") %>">\n    </figure>\n    <div class="fl-banner-content">\n        <svg class="fl-banner-content-side" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"\n        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49.5 99" enable-background="new 0 0 49.5 99"\n        xml:space="preserve" preserveAspectRatio="none">\n            <polygon points="50,0 50,100 0,100 "></polygon>\n        </svg>\n        <span class="fl-banner-heading"><%- T_("Make money doing local jobs in your area") %></span>\n        <span class="fl-banner-text">\n            <%- T_("Hey <[- name ]>, are you looking for another way to earn some extra money?\n            Find out here how you can earn more doing Freelancer local jobs", { \'name\': fullName}) %>\n        </span>\n        <button class="fl-banner-button">\n            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n            x="0px" y="0px" viewBox="0 0 12 12" enable-background="new 0 0 12 12" xml:space="preserve" class="flicon-chevron-right">\n                <polyline fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"\n                points=" 2.714,11.75 9.285,6 2.714,0.25 "></polyline>\n            </svg>\n        </button>\n        <aside class="fl-banner-fineprint"><%- T_("* Terms and Conditions apply.") %></aside>\n        <button id="eol-banner-close" class="fl-banner-close local-jobs-banner" title="<%- T_("Close") %>">&times;</button>\n    </div>\n</a>\n'}),define('dashboard/views/localJobsBanner',['jquery-wrapper','underscore-wrapper','backbone-wrapper','local-jobs/updateLocationModal','text!templates/dashboard/local-jobs-banner.htm'],function(a,b,c,d,e){var f=d.create(),g=c.View.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render'),this.model.bind('change',this.render)},render:function(){var b=this.model,c=b.isClosed();if(c){a(this.el).text('');return}var d={titleText:T_('Add your location to hear about jobs in your area'),messageText:T_('Once you have added your location we will tell you about jobs posted in your area'),placeholderText:T_('Start Typing your address and post code'),saveButtonText:T_('Tell me about jobs in my area'),successMessageText:T_('Thanks, you have successfully updated your location. We will update you about jobs available in your area.')};f.init(d),a(this.el).html(this.compileTemplate(b.toJSON()));if(jQuery('.newsfeed-nav').length>0){var e=jQuery('#local-jobs-banner');e.length>0&&e.css({top:'90px'})}a(this.el).on('click','.local-jobs-banner #eol-banner-close',function(){return _t.push(['user_action',{section:'Dashboard',sub_section:'LocalJobsBanner',label:'close'}]),b.setClosed(!0),!1}),a(this.el).on('click','.local-jobs-banner',function(){var a={csrfToken:window.csrfToken};return _t.push(['user_action',{section:'Dashboard',sub_section:'LocalJobsBanner',label:'click',action:'showUpdateLocationModal'}]),f.showModal(a),!1})}});return g}),define('dashboard/models/localJobsBanner',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=!1,e=c.Model.extend({url:'/ajax/dashboard/showLocalJobsBanner.php',setClosed:function(b){b=b===!0;var c=this.has('closed')?this.get('closed'):null;c!==b&&(d=b,this.set({closed:b,fullName:fullName}),b&&a.post(this.url,{eolBannerClosed:b}))},isClosed:function(){if(this.has('closed'))return this.get('closed');var a=d;if(!a){a=!0;var b=this.fetch(),c=this;b.then(function(a){var b=!a.showEolBanner;b?c.set({closed:b},{silent:!0}):c.setClosed(b)})}return a}});return e}),define('text!templates/dashboard/create-milestone-alert.htm',[],function(){return'<div class="DashboardAlert">\n    <figure class="DashboardAlert-figure">\n        <img class="DashboardAlert-image"\n        src="<%- cdn_url(\'/static/css/images/alert-createmilestone.svg\')%>"\n        alt="Create Milestone Illustration"/>\n    </figure>\n    <div class="DashboardAlert-content">\n        <h4 class="DashboardAlert-title"><%- T_("Your Project is Missing its First Milestone") %></h4>\n        <div class="DashboardAlert-details">\n            <p class="DashboardAlert-desc">\n\n                 <%- T_("Your project ")%><a href="#" class="dashboard-alert-project-name">\n                 <span class=\'DashboardAlert-highlighted\'><%= project.name %></span></a>\n                 <%- T_("is missing a milestone. Let\'s create one so that <[- seller_name ]>\n                can start working on it.",{\'seller_name\':project.seller_name}) %>\n\n            </p>\n            <div class="DashboardAlert-action">\n                <button class="DashboardAlert-btn btn btn-success dashboard-alert-create-milestone">\n                    <%- T_("Create Milestone") %>\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define('dashboard/views/createMilestoneAlert',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/create-milestone-alert.htm'],function(a,b,c,d){var e=c.View.extend({compileTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a);var b=this;this.model.fetch().done(function(){b.render()})},render:function(){var b=this.model,c;if(b.toJSON().project){c=b.toJSON().project;if(!this.options||!this.options.contactsTemplate)a(this.el).html(this.compileTemplate(b.toJSON())),a(this.el).on('click','.dashboard-alert-project-name',function(){_t.push(['user_action',{section:'DashboardBanner',name:'CreateMilestone',value:c.id+','+c.seller_id}]),window.location.href='/projects/'+c.seo_url+'/#/management'}),a(this.el).on('click','.dashboard-alert-create-milestone',function(){_t.push(['user_action',{section:'DashboardBanner',name:'CreateMilestone',value:c.id+','+c.seller_id}]),window.location.href='/projects/'+c.seo_url+'/?create_milestone=true#/management'})}}});return e}),define('dashboard/models/createMilestoneAlert',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.Model.extend({url:'/ajax/dashboard/getProjectsWithoutMilestones.php'});return d}),define('text!templates/corporate/corporateUpsellBanner.htm',[],function(){return'<div id="corporate-upsell-banner" class="PageDashboard-banner">\n    <a href="/corporate/index.php?ref=Db" class="Banner Banner--light" style="background-image: url(<%- cdn_url(\'/build/img/corporate-upsell-banner/corp-dash-banner-bg.jpg\') %>)">\n        <button id="corporate-upsell-banner-close" class="Banner-close">\n            <span class="Icon Icon--light">\n                <svg class="Icon-image" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n                    <path d="M20.707 4.707l-1.414-1.414L12 10.586 4.707 3.293 3.293 4.707 10.586 12l-7.293 7.293 1.414 1.414L12 13.414l7.293 7.293 1.414-1.414L13.414 12"/>\n                </svg>\n            </span>\n        </button>\n        <div class="Banner-content">\n            <h2 class="Banner-heading light"><%= T_("Introducing Freelancer Corporate") %></h2>\n            <p class="Banner-small"><%= T_("Discover your new Bid Card and Corporate Profile Page with upgraded portfolio, badge, featured reviews, and more.") %></p>\n            <button id="corporate-upsell-redirect" class="btn hireme-btn Banner-cta" type="button" >\n                <span class="Button-icon Icon Icon--light">\n                    <icons/ui-corporate-alt>\n                </span></span><%- T_("Join Corporate Now") %>\n            </button>\n        </div>\n        <div class="Banner-image">\n            <img src="<%- cdn_url(\'/build/img/corporate-upsell-banner/corp-dash-banner-computer.png\') %>" alt="<%- T_("computer") %>" role="presentation">\n        </div>\n    </a>\n</div>\n'}),define('dashboard/views/corporateUpsellBanner',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/corporate/corporateUpsellBanner.htm'],function(a,b,c,d){var e=c.View.extend({compileTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render'),this.model.bind('change',this.render)},render:function(){var b=this.model,c=b.isClosed();if(c){a(this.el).text('');return}a(this.el).html(this.compileTemplate(b.toJSON())),_ttref.push(['_trackEvent','Membership','View-corporate-banner-new',corporateUpsellBannerTtref.label,'','',corporateUpsellBannerTtref.name,corporateUpsellBannerTtref.value]);if(jQuery('.newsfeed-nav').length>0){var d=jQuery('#corporate-upsell-banner');d.length>0&&d.css({top:'90px'})}a(this.el).on('click','#corporate-upsell-banner',function(b){a(b.target).closest('#corporate-upsell-banner-close').length===0&&_ttref.push(['_trackEvent','Membership','Click-corporate-banner-new',corporateUpsellBannerTtref.label,'','',corporateUpsellBannerTtref.name,corporateUpsellBannerTtref.value])}),a(this.el).on('click','#corporate-upsell-banner-close',function(a){a.preventDefault(),_ttref.push(['_trackEvent','Membership','Close-corporate-banner-new',corporateUpsellBannerTtref.label,'','',corporateUpsellBannerTtref.name,corporateUpsellBannerTtref.value]),b.setClosed(!0)})}});return e}),define('dashboard/models/corporateUpsellBanner',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=!1,e=c.Model.extend({url:'/ajax/dashboard/showCorporateUpsellBanner.php',setClosed:function(b){b=b===!0;var c=this.has('closed')?this.get('closed'):null;c!==b&&(d=b,this.set({closed:b}),b&&a.post(this.url,{bannerClosed:b}))},isClosed:function(){if(this.has('closed'))return this.get('closed');var a=d;if(!a){a=!0;var b=this.fetch(),c=this;b.then(function(a){var b=!a.showBanner;b?c.set({closed:b},{silent:!0}):c.setClosed(b)})}return!1}});return e}),define('dashboard/models/project',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.Model.extend({});return d}),define('dashboard/collections/projects',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/project'],function(a,b,c,d){var e=c.Collection.extend({model:d,limit:20,applyFilter:function(a){this.filter_state=a},applyFilterType:function(a){this.filter_type=a},applySort:function(a){this.sort=a},applyOffset:function(a){this.offset=a},applyLimit:function(a){this.limit=a},applyQuery:function(a){this.letters=a},url:function(){var a=(new Date).getTime(),b='/ajax/dashboard/projects.php?t='+a+'&category='+this.filter_state;return this.sort&&(b+='&sort='+this.sort),this.filter_type&&(b+='&type='+this.filter_type),this.limit&&(b+='&num='+this.limit),this.offset&&(b+='&start='+this.offset),this.length&&(b+='&start='+this.length),this.letters&&(b+='&query='+this.letters),b},search:function(a){if(a=='')return this;var c=new RegExp(a,'gi');return b(this.filter(function(a){return c.test(a.get('lower_name'))}))}});return e}),define('dashboard/collections/projectCollectionFactory',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/collections/projects'],function(a,b,c,d){var e={},f=!1,g=function(){if(f)return f;f=this};return g.prototype.generate=function(a,b,c,f){if(typeof f=='undefined'||f=='')return e[a]||(e[a]={},e[a][b]={}),e[a][b]||(e[a][b]={}),e[a][b][c]?(e[a][b][c].trigger('rebound'),e[a][b][c]):(e[a][b][c]=new d,e[a][b][c].applyFilter(a),e[a][b][c].applyFilterType(b),e[a][b][c].applySort(c),e[a][b][c].fetch(),e[a][b][c]);var g=new d;return g.applyFilter(a),g.applyFilterType(b),g.applySort(c),g.applyQuery(f),g.fetch(),g},g}),define('text!templates/dashboard/smallProjectList.htm',[],function(){return'<div class="Card PageDashboard-card WidgetMyProjects">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title">\n            <%- T_("My Projects") %>\n            <a href="/dashboard/projects.php" class="view-all PageDashboard-card-expand" title="view all">\n                <span class="Icon Icon--small">\n                    <%= loadSvg(\'ui-plus-thin\') %>\n                </span>\n            </a>\n        </h3>\n    </div>\n    <ul id="small_project_list" class="WidgetMyProjects-list"></ul>\n</div>\n'}),define('text!templates/dashboard/smallProject.htm',[],function(){return'<% if (state === \'D\') { %>\n<a class="WidgetMyProjects-link" href="/buyers/draft.php?id=<%- id %>">\n<%} else {%>\n<a class="WidgetMyProjects-link" href="/projects/<%= urlPart %>" onclick="javascript:_ttref.push([\'_clearEntrypoint\', \'Project\'], [\'_setEntrypoint\', \'Project_DashboardSmallProjectList\']);">\n<% } %>\n    <p class="WidgetMyProjects-name"><%- name %></p>\n    <p class="WidgetMyProjects-details">\n        <span class="WidgetMyProjects-status project-snapshot-status\n            <% if (state === \'A\') { %>project-snapshot-status--open<% } /* Open/Active */ %>\n            <% if (closed_cancelled || frozen_bidtimeout) { %>project-snapshot-status--closed<% } /* Closed */ %>\n            <% if ((state === \'F\' && !frozen_waiting) || (state === \'C\' && !closed_accepted) || state === \'D\' || state === \'P\') {\n                %>project-snapshot-status--default<%\n            } /* !Awarded/!In Progress/Draft/Pending */ %>">\n            <%= state_f %>\n        </span>\n        <time class="WidgetMyProjects-timestamp timestamp">\n        <% if ((state === \'C\' && closed_accepted) && user_data instanceof Array && lib_datetime_relative_date_widget(user_data[0].timeLeft)) { %>\n            <% if(user_data[0].timeLeft < (new Date).getTime()/1000) { %>\n                <%- T_("Ended") %>  <!-- prepend if the events is completed  -->\n            <% } %>\n            <%- lib_datetime_relative_date_widget(user_data[0].timeLeft) %>\n        <% } %>\n        <% if (state !== \'D\' && state !== \'P\' && !(state === \'C\' && (closed_accepted || closed_expired)) && lib_datetime_relative_date_widget(bidEndTime)) { %>\n            <% if(bidEndTime < (new Date).getTime()/1000) { %>\n                <%- T_("Ended") %>  <!-- prepend if the events is completed  -->\n            <% } %>\n            <%- lib_datetime_relative_date_widget(bidEndTime) %>\n        <% } %>\n        </time>\n    </p> <!-- prepend Ended to finished events, for this page only -->\n</a>\n<a class="bookmark-btn selected" title="Remove from bookmarks"></a>\n'}),define('text!templates/dashboard/smallContest.htm',[],function(){return'<a class="WidgetMyProjects-link" href="<%= url %>">\n    <p class="WidgetMyProjects-name"><%- contestName %></p>\n    <p class="WidgetMyProjects-details">\n        <span class="WidgetMyProjects-status project-snapshot-status\n            <% if (status == 2 || status == 5) {  %>project-snapshot-status--open<% } /* STATUS_ACTIVE/STATUS_ACTIVE_NOT_EXPIRED */ %>\n            <% if (status == 4) {  %>project-snapshot-status--closed<% } /* STATUS_CLOSED */ %>\n            <% if (status == 1 || status == 3) {  %>project-snapshot-status--default<% } /* STATUS_INACTIVE/STATUS_PENDING */ %>">\n            <%= status_text %>\n        </span>\n        <% if(time_remaining) {%>\n            <time class="WidgetMyProjects-timestamp timestamp">\n                <%- T_("Ends in <[- time ]>", {time: time_remaining})%>\n            </time>\n        <% } %>\n    </p>\n</a>\n<a href="#" class="bookmark-btn selected" title="Remove from bookmarks"></a>\n'}),define('dashboard/views/smallProjectRow',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/smallProject.htm','text!templates/dashboard/smallContest.htm'],function(a,b,c,d,e){var f=c.View.extend({events:{'click .bookmark-btn':'bookmark'},projectTemplate:b.template(d),contestTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return this.model.get('type')=='contest'?a(this.el).html(this.contestTemplate(this.model.toJSON())):a(this.el).html(this.projectTemplate(this.model.toJSON())),this},bookmark:function(){var b,c;return b=this,c={csrf_token:getCSRFToken(),project_id:this.model.get('id'),action:'on'},a.ajax({type:'POST',url:'/projects/watch.php',data:c,cache:!1,success:function(a){b.confirmation.hide(),b.trigger('bookmarked',a)}}),this}});return f}),define('text!templates/dashboard/smallProjectListBlankState.htm',[],function(){return'<li>\n    <p>You have no current projects in progress:</p>\n    <p>\n        <a onclick="javascript:_ttref.push([\'_setCookie\', \'PostProject_Dashboard\']);"\n            href="/post-project" id="post-project" class="btn btn-primary btn-mini">\n            Post a Project\n        </a>\n    </p>\n    <p>or</p>\n    <p>\n        <a href="/sellers/">Browse Projects</a>\n    </p>\n</li>\n'}),define('dashboard/views/smallProjectListBlankState',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/smallProjectListBlankState.htm'],function(a,b,c,d){var e=c.View.extend({compileTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render'),this.render()},render:function(){return a(this.el).html(this.compileTemplate()),this.el}});return e}),function(a){jQuery.fn.extend({slimScroll:function(b){var c={width:'auto',height:'250px',size:'7px',color:'#000',position:'right',distance:'1px',start:'top',opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:'#333',railOpacity:.2,railDraggable:!0,railClass:'slimScrollRail',barClass:'slimScrollBar',wrapperClass:'slimScrollDiv',allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:'7px',railBorderRadius:'7px'},d=a.extend(c,b);return this.each(function(){function c(b){if(!j)return;var b=b||window.event,c=0;b.wheelDelta&&(c=-b.wheelDelta/120),b.detail&&(c=b.detail/3);var f=b.target||b.srcTarget||b.srcElement;a(f).closest('.'+d.wrapperClass).is(v.parent())&&e(c,!0),b.preventDefault&&!u&&b.preventDefault(),u||(b.returnValue=!1)}function e(a,b,c){u=!1;var e=a,f=v.outerHeight()-A.outerHeight();b&&(e=parseInt(A.css('top'))+a*parseInt(d.wheelStep)/100*A.outerHeight(),e=Math.min(Math.max(e,0),f),e=a>0?Math.ceil(e):Math.floor(e),A.css({top:e+'px'})),p=parseInt(A.css('top'))/(v.outerHeight()-A.outerHeight()),e=p*(v[0].scrollHeight-v.outerHeight());if(c){e=a;var g=e/v[0].scrollHeight*v.outerHeight();g=Math.min(Math.max(g,0),f),A.css({top:g+'px'})}v.scrollTop(e),v.trigger('slimscrolling',~~e),h(),i()}function f(){window.addEventListener?(this.addEventListener('DOMMouseScroll',c,!1),this.addEventListener('mousewheel',c,!1)):document.attachEvent('onmousewheel',c)}function g(){o=Math.max(v.outerHeight()/v[0].scrollHeight*v.outerHeight(),s),A.css({height:o+'px'});var a=o==v.outerHeight()?'none':'block';A.css({display:a})}function h(){g(),clearTimeout(m);if(p==~~p){u=d.allowPageScroll;if(q!=p){var a=~~p==0?'top':'bottom';v.trigger('slimscroll',a)}}else u=!1;q=p;if(o>=v.outerHeight()){u=!0;return}A.stop(!0,!0).fadeIn('fast'),d.railVisible&&z.stop(!0,!0).fadeIn('fast')}function i(){d.alwaysVisible||(m=setTimeout(function(){(!d.disableFadeOut||!j)&&!k&&!l&&(A.fadeOut('slow'),z.fadeOut('slow'))},1e3))}var j,k,l,m,n,o,p,q,r='<div></div>',s=30,u=!1,v=a(this);if(v.parent().hasClass(d.wrapperClass)){var w=v.scrollTop();A=v.parent().find('.'+d.barClass),z=v.parent().find('.'+d.railClass),g();if(a.isPlainObject(b)){if('height'in b&&b.height=='auto'){v.parent().css('height','auto'),v.css('height','auto');var x=v.parent().parent().height();v.parent().css('height',x),v.css('height',x)}if('scrollTo'in b)w=parseInt(d.scrollTo);else if('scrollBy'in b)w+=parseInt(d.scrollBy);else if('destroy'in b){A.remove(),z.remove(),v.unwrap();return}e(w,!1,!0)}return}d.height=d.height=='auto'?v.parent().height():d.height;var y=a(r).addClass(d.wrapperClass).css({position:'relative',overflow:'hidden',height:d.height});v.css({overflow:'hidden',width:d.width,height:d.height});var z=a(r).addClass(d.railClass).css({width:d.size,height:'100%',position:'absolute',top:0,display:d.alwaysVisible&&d.railVisible?'block':'none','border-radius':d.railBorderRadius,background:d.railColor,opacity:d.railOpacity,zIndex:90}),A=a(r).addClass(d.barClass).css({background:d.color,width:d.size,position:'absolute',top:0,opacity:d.opacity,display:d.alwaysVisible?'block':'none','border-radius':d.borderRadius,BorderRadius:d.borderRadius,MozBorderRadius:d.borderRadius,WebkitBorderRadius:d.borderRadius,zIndex:99}),B=d.position=='right'?{right:d.distance}:{left:d.distance};z.css(B),A.css(B),v.wrap(y),v.parent().append(A),v.parent().append(z),d.railDraggable&&A.bind('mousedown',function(b){var c=a(document);return l=!0,t=parseFloat(A.css('top')),pageY=b.pageY,c.bind('mousemove.slimscroll',function(a){currTop=t+a.pageY-pageY,A.css('top',currTop),e(0,A.position().top,!1)}),c.bind('mouseup.slimscroll',function(a){l=!1,i(),c.unbind('.slimscroll')}),!1}).bind('selectstart.slimscroll',function(a){return a.stopPropagation(),a.preventDefault(),!1}),z.hover(function(){h()},function(){i()}),A.hover(function(){k=!0},function(){k=!1}),v.hover(function(){j=!0,h(),i()},function(){j=!1,i()}),v.bind('touchstart',function(a,b){a.originalEvent.touches.length&&(n=a.originalEvent.touches[0].pageY)}),v.bind('touchmove',function(a){u||a.originalEvent.preventDefault();if(a.originalEvent.touches.length){var b=(n-a.originalEvent.touches[0].pageY)/d.touchScrollStep;e(b,!0),n=a.originalEvent.touches[0].pageY}}),g(),d.start==='bottom'?(A.css({top:v.outerHeight()-A.outerHeight()}),e(0,!0)):d.start!=='top'&&(e(a(d.start).position().top,null,!0),d.alwaysVisible||A.hide()),f()}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),define('jquery-slimscroll',function(){}),define('dashboard/views/smallProjectList',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/collections/projectCollectionFactory','text!templates/dashboard/smallProjectList.htm','dashboard/views/smallProjectRow','dashboard/views/smallProjectListBlankState','jquery-slimscroll'],function(a,b,c,d,e,f,g){var h=c.View.extend({compileTemplate:b.template(e),collection:null,subViews:[],initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','addAll','addOne','filter'),this.filter(this.options.filter)},filter:function(a){this.collection&&(this.collection.unbind('add',this.addOne),this.collection.unbind('all',this.render),this.collection.unbind('refresh',this.addAll),this.collection.unbind('rebound',this.render)),this.collection=(new d).generate(a,'all','latest'),this.collection.bind('add',this.addOne),this.collection.bind('all',this.render),this.collection.bind('refresh',this.addAll),this.collection.bind('rebound',this.render),this.options.filter=a},addAll:function(){var b=this;if(this.collection&&this.collection.length>0){this.collection.each(function(a){b.addOne(a)}),this.subViews.length>=10&&this.addSeeAllLink();for(var c=0;c<this.subViews.length;c++){var d=this.subViews[c];a(d.el).find('.trunc').truncateProjectNameForWidget()}}else{var e=new g,f=e.render();a(this.el).find('#small_project_list').append(f)}},removeSmallProjectList:function(){a(this.el).remove()},addOne:function(b){b.attributes.user_data!=null&&b.attributes.user_data.length>0&&b.attributes.user_data.sort(function(a,b){return b.timeLeft-a.timeLeft});var c=new f({model:b,el:'<li class="WidgetMyProjects-item"></li>'});this.subViews.push(c),a(this.el).find('#small_project_list').append(c.render().el)},addSeeAllLink:function(){var b='<li><a href="/dashboard/projects.php" class="btn btn-block btn-mini">See All</a></li>';a(this.el).find('#small_project_list').append(b)},render:function(){a(this.el).html(this.compileTemplate({filter:this.options.filter}));if(this.collection&&this.collection.length>0){var b=72,c=b*2+'px';switch(this.collection!=null&&this.collection.length){case 1:c=b+'px';break;case 2:c=b*2+'px'}a('#small_project_list').slimScroll({height:c})}this.collection.length==0?this.removeSmallProjectList():this.addAll()}});return h}),define('text!templates/dashboard/userDetails.htm',[],function(){return'<div class="Card PageDashboard-card WidgetUserDetails">\n    <div class="WidgetUserDetails-info">\n        <figure class="ImageThumbnail ImageThumbnail--xlarge WidgetUserDetails-avatar online">\n            <a class="ImageThumbnail-link" href="/users/changeuserinfo.php" title="View Profile">\n                <img class="ImageThumbnail-image" src="<%- user.profile_logo_url %>" alt="Profile Picture">\n            </a>\n        </figure>\n\n        <h4 class="WidgetUserDetails-title">\n            <%= T_("Welcome back, <br><a class=\'WidgetUserDetails-username\' href=\'/u/<[- user.username ]>\'><[- user.publicName ]></a>", {user: user}) %>\n        </h4>\n        <a href="/membership/index.php?ref=dashboard_welcomeback" class="membership" title="<%- user.membershipDisplay %> Membership">\n            <% if (user.membershipClass !== \'free\') { %>\n                <span class="membership-badge MembershipBadge MembershipBadge--<%- user.membershipClass %>"></span>\n            <% } %>\n            <span><%- T_("<[- membershipDisplay ]> Member", {\'membershipDisplay\': user.membershipDisplay}) %></span>\n        </a>\n        <% if (user.showMembershipUpgradeButton) { %>\n            <% if(oneWeekTrialEligible) {%>\n                <button class="btn btn-success btn-small" id="one-week-trial-btn"><%-T_("Start Free Trial")%></button>\n            <%} else if(user.trialPackage !== null) {%>\n                <a href="/payments/verify.php?TrialUpsell2=true&package=<%- user.trialPackage.package.id %>&ref=dashboard_welcomeback" class="btn btn-success btn-small"><%-T_("Upgrade now")%></a>\n            <%} else {%>\n                <a href="/membership/index.php?ref=dashboard_upgrade" class="btn btn-success btn-small"><%-T_("Upgrade now")%></a>\n            <%}%>\n        <%}%>\n    </div>\n\n    <% if(showDashboardWelcomeBackUpsell) {%>\n        <% if(oneWeekTrialEligible) {%>\n            <div class="WidgetUserDetails-trialUpsell">\n                <%= T_("<h5 class=\'WidgetUserDetails-trialUpsell-text\'><a id=\'one-week-trial-link\' class=\'WidgetUserDetails-trialUpsell-link\'>Claim Your Free Trial and Get 300 Free Bids<a class=\'WidgetUserDetails-trialUpsell-link\'></a></h5>") %>\n            </div>\n        <% } else if (!user.hideTrialUpsell && user.trialPackage !== null && user.trialPackage.duration.type === 5 && user.trialPackage.duration.cycle === 1) { %>\n            <div class="WidgetUserDetails-trialUpsell" id="dashboard-trial-upsell">\n                <%= T_("<h5 class=\'WidgetUserDetails-trialUpsell-text\'>You are <a class=\'WidgetUserDetails-trialUpsell-link\' href=\'/payments/verify.php?TrialUpsell2=true&package=<[- package.id ]>&ref=dashboard_welcome_trial\'>eligible for a FREE 30 day trial</a> of <[- package.upper_name ]> Membership! Get features to help grow your business. <a class=\'WidgetUserDetails-trialUpsell-link\' href=\'/payments/verify.php?TrialUpsell2=true&package=<[- package.id ]>&ref=dashboard_welcome_trial\'>Get started!</a></h5>", {\'package\': user.trialPackage.package}) %>\n            </div>\n        <% } %>\n    <% } %>\n\n    <% if ( user.bidPromotion ) {%>\n    <!-- Bid Promotion AB test -->\n        <div class="dashboard-bid-promotion">\n            <div class="dashboard-bid-promotion-counter">\n                <% for (var i=0; i < user.bidsRemainingArray.length; i++) {%>\n                    <div class="dashboard-bid-promotion-counter-number"><%= user.bidsRemainingArray[i] %></div>\n                <% } %>\n            </div>\n            <% if (user.bidsRemaining == 1) { %>\n                <span class="dashboard-bid-promotion-counter-label"><%=T_("bid left")%></span>\n                <a href="/jobs/myskills/1/" data-membership-id="<%- user.membershipPackageId %>" class="btn btn-success dashboard-bid-promotion-counter-button"><%=T_("Bid now!")%></a>\n            <% } else if (user.bidsRemaining == 0) { %>\n                <span class="dashboard-bid-promotion-counter-label"><%=T_("bids left")%></span>\n                <a href="/membership/index.php?ref=Membership_bidcounter" class="btn btn-success dashboard-bid-promotion-counter-button"><%=T_("Upgrade now")%></a>\n            <% } else { %>\n                <span class="dashboard-bid-promotion-counter-label"><%=T_("bids left")%></span>\n                <a href="/jobs/myskills/1/" data-membership-id="<%- user.membershipPackageId %>" class="btn btn-success dashboard-bid-promotion-counter-button"><%=T_("Bid now!")%></a>\n            <% } %>\n        </div>\n    <!-- // end Bid Promotion AB test -->\n    <% } %>\n\n    <div class="WidgetUserDetails-progress">\n        <h5 class="WidgetUserDetails-progress-title"><%= T_("Setup your account", {percentage: percentage}) %></h5>\n        <div class="progress progress-info WidgetUserDetails-progress-bar">\n            <div class="bar bar--aligned" style="width: <%- percentage %>%;">\n                <%- percentage %>% <span class="access">complete</span>\n            </div>\n        </div>\n        <p class="WidgetUserDetails-progress-suggestion">\n            <%= hint.replace(\'+\', \'\') %>\n        </p>\n        <% if ( showNoCommissionLink ) {%>\n            <div class="WidgetUserDetails-referralLink">\n                <a href="/no-commission/no-commission-invitation.php" data-qtsb-section="dashboard" data-qtsb-subsection="user-widget" data-qtsb-label="link-no-commission">\n                  <%- T_("My Referrals") %>\n                </a>\n            </div>\n        <% }  else if ( showReferralLink ) {%>\n            <div class="WidgetUserDetails-referralLink">\n                <a href="/give/" data-qtsb-section="dashboard" data-qtsb-subsection="user-widget" data-qtsb-label="link-referrals">\n                  <%- T_("My Referrals ") %>\n                  <% if ( givegetInvitationsSent ) { %>\n                    (<%- givegetInvitationsSent %>/50)\n                  <% } %>\n                </a>\n\n            </div>\n        <% } %>\n    </div>\n</div>\n'}),define('dashboard/views/userDetails',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/userDetails.htm'],function(a,b,c,d){var e=c.View.extend({events:{'click #one-week-trial-btn':'showNpvSmartUpsell','click #one-week-trial-link':'showNpvSmartUpsell'},compileTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render'),this.model.bind('change',this.render)},showNpvSmartUpsell:function(){typeof window.showDashboardSmartUpsell!='undefined'&&window.showDashboardSmartUpsell('userDetails')},render:function(){var b=this.model.toJSON();b.oneWeekTrialEligible=window.oneWeekTrialEligible,b.showDashboardWelcomeBackUpsell=window.showDashboardWelcomeBackUpsell,b.showReferralLink=this.options.showReferralLink,b.showNoCommissionLink=this.options.showNoCommissionLink,b.givegetInvitationsSent=this.options.givegetInvitationsSent,a(this.el).html(this.compileTemplate(b)),a(document.body).on('click','.dashboard-bid-promotion-counter-button',function(){_t.push(['user_action',{section:'Dashboard',sub_section:'WelcomeBack',label:'Bidding'}])})}});return e}),define('text!templates/dashboard/poll.htm',[],function(){return'<span class="fl-icon-question-sign poll-question-icon"></span>\n<div class="question-copy">\n    <p><strong><%-question%></strong></p>\n</div>\n<div class="clearfix"></div>\n\n<form id="poll_form" class="poll-form">\n    <input type="hidden" name="id" value="<%-poll_id%>">\n    <input type="hidden" name="back" value="ajax">\n    <ul>\n        <% if (options != null) { %>\n            <% if (poll_type == \'single\') { %>\n                <% _.each(options, function(option, index, list) { %>\n                    <% if (option.answer) { %>\n                        <li class="first">\n                            <% if (option.other == \'1\') { %>\n\n                                <label for="val_<%-option.id%>" class="poll-form-label <%-answer_type%>">\n                                    <input type="<%-answer_type%>" id="val_<%-option.id%>" class="showOther poll-form-input" name="val_<% if (answer_type == \'checkbox\') { %><%-option.id%><% }%>" data-value="<%-option.id%>"value="<%-option.id%>">\n                                    <%-option.answer%>\n                                </label>\n                                <span id="hide_other_<%-option.id%>" class="hide">\n                                    <input type="text" id="other_<%-option.id%>" name="other_<%-option.id%>" maxlength="255" placeholder="<%-T_("Please specify...")%>">\n                                </span>\n                            <% } else { %>\n\n                                <label for="val_<%-option.id%>" class="poll-form-label <%-answer_type%>">\n                                    <input type="<%-answer_type%>" class="poll-form-input" id="val_<%-option.id%>" name="val_<% if (answer_type == \'checkbox\') { %><%-option.id%><% }%>" value="<%-option.id%>">\n                                    <%-option.answer%>\n                                </label>\n                            <% }%>\n                        </li>\n                    <% }%>\n                <% }); %>\n            <% } else if (poll_type == \'plain\') { %>\n                <% _.each(options, function(option) { %>\n                    <li class="first">\n                        <label><%-option.answer%></label>\n                        <input maxlength="255" type="text" name="val_<%-option.id%>" class="plainPollAnswer">\n                    </li>\n                <% }); %>\n            <% } else if (poll_type == \'text\') { %>\n                <% _.each(options, function(option) { %>\n                    <li class="first">\n                        <textarea maxlength="255" type="text" name="val_<%-option.id%>"></textarea>\n                    </li>\n                <% }); %>\n            <% }%>\n        <% } %>\n    </ul>\n    <div class="alert alert-error hide">\n        <%- T_("Please provide an answer") %>\n    </div>\n    <button type="button" class="btn btn-info btn-small votePoll" id="poll_hide_vote_button"><%- T_("Submit Answer") %></button>\n    <div class="skip-question-link">\n        <a id="poll_skip_button" class="skipPoll"><%- T_("Skip question") %></a>\n    </div>\n</form>\n'}),define('text!templates/dashboard/poll_results.htm',[],function(){return'                <i class="fl-icon-question-sign poll-question-icon"></i>\n                <div class="question-copy">\n                    <p><strong><%=question%></strong></p>\n                </div>\n                <div class="clearfix"></div>\n\n                <form id="poll_form" class="poll-form">\n                    <input type="hidden" name="id" value="<%=poll_id%>">\n                    <input type="hidden" name="back" value="ajax">\n                    <ul>\n                        <% if (options != null) { %>\n                            <% if (poll_type == \'single\') { %>\n                                <% _.each(options.answers, function(option, index, list) { %>\n                                <li class="first">\n                                    <label><%=option.answer%> (<%=option.vote_count%> votes.)</label>\n                                    <div class="progress progress-bar-info">\n                                            <div class="bar" role="progressbar" aria-valuenow="<%=option.vote_count%>" aria-valuemin="0" aria-valuemax="<%=options.answers[0].vote_count%>" style="width: <%=100*option.vote_count/options.answers[0].vote_count%>%">\n                                          </div>\n                                        </div>\n                               </li>\n                                <% }); %>\n                            <% } else if (poll_type == \'plain\') { %>\n                                <% _.each(options.results.results, function(option, index) { %>\n                                    <% if (index < 5) { %>\n                                        <li class="first">\n                                            <label><%=option.other_value%> (<%=option.c%> votes.)</label>\n                                            <div class="progress progress-bar-info">\n                                                <div class="bar" role="progressbar" aria-valuenow="<%=option.c%>" aria-valuemin="0" aria-valuemax="<%=options.results.results[0].c%>" style="width: <%=100*option.c/options.results.results[0].c%>%">\n                                              </div>\n                                            </div>\n                                        </li>\n                                    <% } %>\n                                <% }); %>\n                            <% }%>\n                        <% } %>\n                    </ul>\n                    <button type="button" id="poll_hide_vote_button" class="btn btn-info btn-mini poll-vote-btn nextQuestion"\n                            ><%=T_("Next Question")%></button>\n                </form>\n'}),define('text!templates/dashboard/poll_body.htm',[],function(){return'<div class="Card PageDashboard-card">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title"><%- T_("Polls")%></h3>\n    </div>\n    <div class="flip-container" id="flip-toggle">\n        <div class="flipper">\n            <!-- Front of question container  -->\n            <div class="question-container question-front"></div>\n            <!-- Back of question container (results)  -->\n            <div class="question-container question-back"></div>\n        </div>\n    </div>\n</div>\n'}),define('dashboard/views/poll',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/poll.htm','text!templates/dashboard/poll_results.htm','text!templates/dashboard/poll_body.htm'],function(a,b,c,d,e,f){var g=c.View.extend({events:{'click .showOther':'showOther','click .skipPoll':'skipPoll','click .votePoll':'votePoll','change .plainPollAnswer':'updateText'},compileTemplate:b.template(d),compileResultsTemplate:b.template(e),compileBodyTemplate:b.template(f),initialize:function(c){this.constructor.__super__.initialize.call(this,c),b.bindAll(this,'hideOther','showOther','skipPoll','votePoll','pollQuestionRemoved','pollQuestionReset'),this.model.set({previous_skips:new Array}),this.model.set({previous_votes:new Array}),this.model.set({status:''}),this.model.set({selectedPoll:null}),this.model.set({displayedPoll:null}),this.pollQuestions=c.pollQuestions,this.pollQuestions.bind('reset',this.pollQuestionReset),this.pollQuestions.bind('remove',this.pollQuestionRemoved),this.pollQuestions.fetch(),a(this.el).html(this.compileBodyTemplate())},updateText:function(){var b=this,c=function(c){var d=c.keyCode?c.keyCode:c.which;if(d==13){c.preventDefault();if(a(this).attr('name').substring(0,5)=='other')return b.votePoll(),!1;var e=a(this).parent('li').index(),f=e+1,g=a(a(this).parent('li').parent('ul').children()[f]).children('input'),h=b.model.get('selectedPoll');return f<h.attributes.options.length?g.focus():b.votePoll(),!1}};return c},pollQuestionRemoved:function(){var b=this.pollQuestions.at(0),c=this,d=this.model.get('displayedPoll');if(this.model.get('status')=='complete'&&d==null){a(this.el).find('.question-back').empty(),a(this.el).find('.question-front').empty(),a('#poll_module').addClass('hide'),this.model.set({selectedPoll:null}),this.model.set({displayedPoll:null});return}var e=function(b){if(b==undefined){c.model.set({displayedPoll:null});return}if(b.get('status')=='complete'){c.model.set({displayedPoll:null}),c.pollQuestionRemoved();return}c.model.set({displayedPoll:b}),c.model.set({selectedPoll:b}),b.attributes.hide==1&&b.attributes.answered!=1?a('#poll_skip_button').addClass('hide'):a('#poll_skip_button').removeClass('hide'),a('#flip-toggle').hasClass('hover')?(a(c.el).find('.question-front').html(c.compileTemplate(b.toJSON())),a(c.el).find('.question-back').empty(),a('#flip-toggle').removeClass('hover')):(a(c.el).find('.question-back').html(c.compileTemplate(b.toJSON())),a(c.el).find('.question-front').empty(),a('#flip-toggle').addClass('hover')),a('.plainPollAnswer').keydown(c.updateText())};if(this.pollQuestions.length==1||this.pollQuestions.length==0||b==undefined){var f=this.pollQuestions.models.map(function(a){return a.get('poll_id')});if(b!==undefined&&b.get('status')=='complete')return;var g={data:{answeredPolls:this.model.get('previous_votes').join(),skippedPolls:this.model.get('previous_skips').join(),pollsInPipeline:f.join()}};b==undefined&&(g.success=function(){var a=c.pollQuestions.at(0);a.get('status')!='complete'&&e(a)}),this.pollQuestions.fetch(g)}e(b)},pollQuestionReset:function(b){if(b.at(0).attributes.status=='complete')this.model.set({status:'complete'}),this.pollQuestionRemoved();else{a('#poll_module').removeClass('hide');if(a(this.el).find('.question-front').html()==a(this.el).find('.question-back').html()){var c=this.pollQuestions.at(0);this.model.set({selectedPoll:c}),a(this.el).find('.question-front').html(this.compileTemplate(c.toJSON())),a('.plainPollAnswer').keydown(this.updateText()),c.attributes.hide==1&&c.attributes.answered!=1&&a('#poll_skip_button').addClass('hide')}}},hideOther:function(){a('[id^=hide_other_]').addClass('hide'),a('#poll_hide_vote_button').addClass('hide')},showOther:function(b){var c=this;c.hideOther;var d=a(b.target).data('value');a('#val_'+d).is(':checked')?(a('#hide_other_'+d).removeClass('hide'),a('#hide_other_'+d).children('input').keydown(c.updateText())):a('#hide_other_'+d).addClass('hide'),a('#poll_hide_vote_button').removeClass('hide')},votePoll:function(){var b=this,c=a('#poll_form').serialize(),d=c.split('&'),e=0,f=null,g=[],h=[];for(var i=0;i<d.length;i++){var j=d[i].split('='),k=j[0].split('_')[1],l=decodeURIComponent(j[1]).replace(/\+/g,' ').trim();d[i].match('other_')?g.push({el_id:k,ans:l}):d[i].match('val_')&&h.push({el_id:k,ans:l})}if(h.length===0)f=!1;else if(g.length===0&&g.length!==h.length){var m=0,n=0;for(var o=0;o<h.length;o++)m++,h[o].ans.length===0?n++:h[o].ans.length>255&&e++;m>n?f=!0:f=!1}else g[0].el_id!==h[0].ans?h[0].ans.length===0?f=!1:h[0].ans.length>255?(e++,f=!1):f=!0:g[0].ans.length===0?f=!1:g[0].ans.length>255?(e++,f=!1):f=!0;if(!f||e){var p='';e?p=T_('You have an answer with more than 255 characters. Please correct.'):p=T_('Please provide an answer. Blank answers are not acceptable'),a('#poll_form .alert-error').text(p),a('#poll_form .alert-error').removeClass('hide')}else{a('#poll_form .alert-error').addClass('hide');var q=a('#poll_form').serialize();q+='&csrf_token='+getCSRFToken(),a.ajax({type:'post',url:'/poll/onvote.php',data:q}).done(function(b){a('#poll_form .alert-error').addClass('hide')});var r=this.model.get('selectedPoll');if(r==undefined)this.pollQuestionRemoved();else{var s=this.pollQuestions.find(function(a){return a.get('poll_id')==r.get('poll_id')});this.model.attributes.previous_votes.push(r.get('poll_id')),s==undefined?(this.model.set({selectedPoll:null}),this.model.set({displayedPoll:null}),this.pollQuestionRemoved()):this.pollQuestions.remove(s)}}},skipPoll:function(){var b=this,c=this.model.get('selectedPoll');a('#poll_form .alert-error').addClass('hide'),a.ajax({type:'post',url:'/poll/onconfig.php',data:{hide:'1',id:c.get('poll_id'),csrf_token:getCSRFToken()}}).done(function(b){if(b=='success')a('#poll_form .alert-error').addClass('hide');else{var c=T_('Error saving. Please try again');a('#poll_form .alert-error').text(c),a('#poll_form .alert-error').removeClass('hide')}});if(c==undefined)this.pollQuestionRemoved();else{var d=this.pollQuestions.find(function(a){return a.get('poll_id')==c.get('poll_id')});this.model.attributes.previous_skips.push(c.get('poll_id')),d==undefined?(this.model.set({selectedPoll:null}),this.model.set({displayedPoll:null}),this.pollQuestionRemoved()):this.pollQuestions.remove(d)}}});return g}),define('text!templates/dashboard/bidTicker.htm',[],function(){return'<% if (typeof project !== \'undefined\' && project.isHourly) { %>\n    <span class="BidTicker-title"><%- T_("Bids Left") %></span>\n    <div class="BidTicker-counter">\n        <span class="BidTicker-current bids-left">--</span>\n        /\n        <span class="BidTicker-limit bid-limit">--</span>\n    </div>\n    <div id="bid-quality"></div>\n    <div id="accept-rate"></div>\n<% } else { %>\n\n<div class="bid-ticker ticker">\n  <h3 class="access"><%- T_("Bid Counter") %></h3>\n  <div class="form-horizontal">\n      <div class="control-group control-label margin-0 align-c bid-left-container BidTicker--containsQuality-container">\n          <span class="small bid-label"><%- T_("BIDS LEFT") %></span><br/>\n          <span class="largest bids-left">--</span>/<span class="bid-limit">--</span>\n      </div>\n      <div class="control-group margin-0 align-r margin-r10 margin-b5 normal bids-left-button-container" style="display: none;">\n          <% if (getMoreBidsButton.variant && getMoreBidsButton.canUpgrade) { %>\n          <a href="<%= membershipUpsellURL %>" class="btn btn-small margin-t5 more-bid-left"><%- T_("Get More Bids") %></a>\n          <% } else { %>\n          <a href="/jobs/myskills/" class="btn btn-small margin-t5 more-bid-left" style="display: none;"><%- T_("View Projects") %></a>\n          <% if (getMoreBidsButton.canUpgrade) { %>\n          <a href="/membership/index.php?ref=dashboard_bids" class="btn btn-primary btn-mini margin-t5 zero-bid-left" style="display: none;">\n              <%- T_("Upgrade Membership") %>\n          </a>\n          <% } %>\n          <% } %>\n      </div>\n  </div>\n  <% if (!(typeof hide_ticker_on_pvp !== \'undefined\' && hide_ticker_on_pvp)) { %>\n      <div class="col border-r">\n          <div class="cap">\n              <h3><span class="text-green">+1</span><strong> <%- T_("BID IN") %></strong></h3>\n          </div>\n          <p class="next-bid italic">--:--:--</p>\n      </div>\n      <div class="col">\n          <div class="cap">\n              <h3><strong><%- T_("RATE") %></strong></h3>\n          </div>\n          <p>\n              <span class="rate-multiplier">x0.0</span>\n              <span class="rate pos0"></span>\n          </p>\n      </div>\n  <% } %>\n  <div class="clear"></div>\n  <div id="bid-quality"></div>\n  <div id="accept-rate"></div>\n</div>\n\n<% } %>\n'}),define('dashboard/views/bidTicker',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/collections/projectCollectionFactory','text!templates/dashboard/bidTicker.htm'],function(a,b,c,d,e){var f=c.View.extend({compileBidTickerTemplate:b.template(e),collection:null,initialize:function(){var a=this;this.getBidLimit(this.el)},getBidLimit:function(){var a=this;jq.ajax({type:'GET',url:'/ajax/bid/bid-limits.php',dataType:'json',cache:!1,success:function(b){if(b.retval==='success'){if(b.unlimitedBids){jq('#bid-info').hide(),jq(a.el).hide();return}a.setFromData(b)}setInterval(function(){a.updateElement()},1e3)}})},setFromData:function(a){a['retval']=='success'&&(this.bidsRemaining=parseInt(a.bidsRemaining),this.bidLimit=parseInt(a.bidLimit),this.bidsLastRefilled=parseInt(a.bidsLastRefilled),this.bidRefreshTime=parseInt(a.bidRefreshTime),this.bidRefreshRate=parseFloat(a.bidRefreshRate))},updateElement:function(){var a=this.el,b=Math.floor((new Date).getTime()/1e3),c=Math.floor((b-this.bidsLastRefilled)/this.bidRefreshTime);c>0&&(this.bidsLastRefilled+=this.bidRefreshTime*c,this.bidsRemaining+=c,this.bidsRemaining>this.bidLimit&&(this.bidsRemaining=this.bidLimit));if(this.bidLimit==this.bidsRemaining)jq('.next-bid',a).addClass('italic').text('--:--:--');else{var d=this.bidsLastRefilled+this.bidRefreshTime-b,e=d%60;e<10&&(e='0'+e);var f=Math.floor(d/60),g=f%60;g<10&&(g='0'+g);var h=Math.floor(f/60),i=h+':'+g+':'+e;jq('.next-bid',a).removeClass('italic').text(i)}var j=this.bidRefreshRate,k=2,l=1,m=7;jq('.rate-multiplier').text('x'+this.bidRefreshRate.toFixed(1));var n=j>k?m:Math.round((j-l)/(k-l)*m);jq('.rate').addClass('pos'+n),jq('.bids-left',a).text(this.bidsRemaining),jq('.bid-limit',a).text(this.bidLimit),this.resetBidsLeftButtons(),this.bidsRemaining==0?jq('.zero-bid-left').show():jq('.more-bid-left').show()},render:function(){return a(this.el).html(this.compileBidTickerTemplate({getMoreBidsButton:window.getMoreBidsButton||{},membershipUpsellURL:window.membershipUpsellURL||'/membership?ref=dashboard_bids_upsell'})),this},resetBidsLeftButtons:function(){jq('.more-bid-left').hide(),jq('.zero-bid-left').hide()}});return f}),define('text!templates/dashboard/myFunds.htm',[],function(){return'<div class="Card PageDashboard-card">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title">\n            <%- T_("My Funds") %>\n            <a style="display:none;" class="view-all PageDashboard-card-expand">\n                <%- T_("See Less") %>\n            </a>\n        </h3>\n    </div>\n    <table id="myfunds_list" style="width: 100%"></table>\n    <p id="pendingfunds" style="display:none;">\n        <a href="/payments/transactions.php?tab=pending"><%- T_("Pending Funds") %></a>\n    </p>\n    <a id="deposit-funds" href="/deposit/" target="_blank" class="btn btn-info btn-small margin-t5">\n        <%- T_("Deposit Funds") %>\n    </a>\n</div>\n'}),define('text!templates/dashboard/balanceItem.htm',[],function(){return'<% if (is_highest) { %> <tr height=\'25px\' style=\'myfundswidget\'  class=\'top-record\'> <% } %>\n<% if (!is_highest) { %> <tr height=\'25px\' style=\'myfundswidget\'  class=\'not-top-record\'> <% } %>\n<td><%- code %><% if(default_currency == 1) {%> &nbsp;<%-T_("(Primary)")%><%}%></td>\n<td style=\'text-align:right;\'><%- sign %><%- balance %></td>\n</tr>\n'});var loadDepositModal=function(a){function d(){a('.deposit-funds-modal').modal('hide')}function e(){a.when(window._t.push(['user_action',{section:'DepositModal',label:'fail',action:'deposit'}])).then(function(){d(),typeof b=='function'?b(c):window.location.href='/payments/deposit.php'})}function f(b,d,f,g,h,i,j){a('.deposit-funds-modal .loading-img').show(),a('.deposit-funds-modal #depositHome').hide(),typeof j=='object'&&(c=j),e();return}var b=!1,c=!1;return window._t=window._t||[],{initModal:f}};if(typeof define=='function'&&define.amd)define('payments/deposit-modal',['jquery-wrapper'],loadDepositModal);else var initDepositModal=loadDepositModal(jq).initModal;define('text!templates/dashboard/kycDashboard.htm',[],function(){return'<div class="Card PageDashboard-card">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title">\n            <%= T_("Verify My Identity") %>\n            <span class="kyc-verified-identity-icon-small right" style="margin-top: 3px; margin-right: 5px;"></span>\n        </h3>\n    </div>\n    <% if(kyc == \'pending\') { %>\n        <div class="small">\n            <%= T_("The Verification Team are reviewing your request. Please allow up to 2-3 business days for this to be completed.") %>\n        </div>\n    <% } else if(kyc == \'reject\') { %>\n        <div class="small">\n            <%= T_("We need you to provide further information to assist us in verifying your identity. ") %>\n        </div>\n    <% } else {%>\n        <div class="small">\n            <%= T_("Verify my identity to stand out as a verified member of Freelancer.com.") %>\n            <a href="<%= base_url %>/support/payments/why-should-i-verify-my-identity" target="_blank"><%= T_("Learn more") %></a>\n        </div>\n     <% } %>\n    <div class="right margin-t10 margin-b5 small">\n        <a href="<%= ssl_base_url %>/users/kyc/verificationCenterHome.php" class="kycRequest">\n            <% if(kyc == \'reject\') { %>\n                <%= T_("Visit the Verification Center") %>\n            <% } else if(kyc != \'pending\') { %>\n                <%= T_("Verify My Identity Now") %>\n            <% } %>\n        </a>\n    </div>\n</div>\n'}),define('dashboard/views/kycDashboard',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/kycDashboard.htm'],function(a,b,c,d){var e=c.View.extend({compileTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render'),this.model.bind('change',this.render)},render:function(){a(this.el).html(this.compileTemplate(this.model.toJSON())),this.model.get('kyc')!='approve'&&this.model.get('kyc')!=0&&a('#kyc_module').show()}});return e}),define('text!templates/dashboard/freemarketPost.htm',[],function(){return'<div class="Card PageDashboard-card PageDashboard-freemarketPost">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title">\n            <%- T_("Have a website or domain to sell?") %>\n        </h3>\n    </div>\n    <p class="PageDashboard-freemarketPost-copy">\n        <%- T_("Post on Freemarket.com for free! Enter your domain or website URL below to get started.") %>\n    </p>\n    <div id="freemarket-form">\n        <input type="text" id="fm-post-url" class="PageDashboard-freemarketPost-input" name="url" placeholder="ex. www.example.com" value="">\n        <div class="alert alert-error hide">\n            <%- T_("Please enter a valid domain or website URL") %>\n        </div>\n        <button id="list-now-button" class="btn btn-info btn-small"><%- T_("List Now") %></button>\n    </div>\n</div>\n'}),define('sites/common',['jquery-wrapper'],function(a){function b(a){p=a}function c(b){return a.isNumeric(b)&&Math.floor(b)==b}function d(a){var b=a;return a&&(b=parseInt(a.replace(/[^0-9\.]+/g,''),10)||0),b}function e(a,b){var c=a;return a&&(c=b+' '+j(a)),c}function f(a,b){var c=a.which;if(c>=48&&c<=57||c>=96&&c<=105){if(a.shiftKey||a.ctrlKey)return!1}else if(typeof b=='undefined'||b.indexOf(c)<0)return!1;return!0}function g(a,b){var c=.12.toLocaleString().charAt(1),d=c==='.'?',':'.',e=parseFloat(a,10),f=e.toFixed(2),g=f.slice(0,-3).replace(/(?=(?!^)(?:\d{3})+(?!\d))/g,d),h=f.slice(-2);return h==='00'&&!b?h='':h=c+h,g+h}function h(b,c,d,e){window.addthis&&(window.addthis=null,window._adr=null,window._atc=null,window._atd=null,window._ate=null,window._atr=null,window._atw=null),window.addthis_config=d,window.addthis_share=e,a.getScript('https://secure.addthis.com/js/250/addthis_widget.js#async=1&pub=getafreelancer',function(){a(c).addClass('addthis-loaded')})}function i(a,b){var c=.12.toLocaleString().charAt(1),d=c==='.'?',':'.',e=parseFloat(a,10),f=1e6,g=1e4,h='';e>=f?(e/=f,h='M'):b&&e>=g&&(e/=1e3,h='k');var i=e.toFixed(2),j=i.slice(0,-3).replace(/(?=(?!^)(?:\d{3})+(?!\d))/g,d),k=i.slice(-2);return k==='00'||a>g?k='':k=c+k,j+k+h}function j(a){var b=a.toString().split('.');return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,','),b.join('.')}function k(a,b){var c=new Image(1,1),d='//www.googleadservices.com/pagead/conversion/'+a+'/',e=[],f;for(f in b)e.push(encodeURIComponent(f)+'='+encodeURIComponent(b[f]));c.src=d+'?'+e.join('&')}function l(a){var b=a.replace(/^(https?\:\/\/)?(www\.)?/i,'');return/^[a-z0-9][a-z0-9\-]*[a-z0-9](\.{1}[a-z0-9][a-z0-9\-]*[a-z0-9])*\.[a-z]{2,63}(\/.*)?$/i.test(b)}function m(a){var b=a.replace(/^(https?\:\/\/)?(www\.)?/i,''),c=b.split('.');if(c.length>2){b=c.splice(c.length-2).join('.');if(p.indexOf(b.toLowerCase())>-1)return!0}return!1}function n(){return['January','February','March','April','May','June','July','August','September','October','November','December']}function o(){return['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']}var p;return{setBlacklistedSubdomainExtensions:b,isInt:c,isNumericKeyInput:f,numberFormat:g,initAddThis:h,formatNum:i,numberWithCommas:j,trackConversion:k,validateUrl:l,isDomainBlacklisted:m,getMonthNames:n,getShortMonthNames:o,formatMoney:e,removeMoneyFormat:d}}),define('dashboard/views/freemarketPost',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/freemarketPost.htm','sites/common'],function(a,b,c,d,e){var f=c.View.extend({compileTemplate:b.template(d),events:{'click #list-now-button':'listNow','keypress #fm-post-url':'onKeyPress'},initialize:function(){this.constructor.__super__.initialize.call(this),b.bindAll(this,'render','onKeyPress')},render:function(){return a(this.el).html(this.compileTemplate()),this},listNow:function(b){var c=a.trim(a('#fm-post-url').val());b.preventDefault(),e.validateUrl(c)?window.location='https://www.freemarket.com/sites/sell/?url='+c:a('#freemarket-form .alert-error').removeClass('hide')},onKeyPress:function(a){a.keyCode===13&&this.listNow(a)}});return f}),define('dashboard/models/userDetails',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=(new Date).getTime(),e=c.Model.extend({url:'/ajax/user/progress-bar.php?type=newdash&t='+d});return e}),define('dashboard/views/myFunds',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/userDetails','text!templates/dashboard/myFunds.htm','text!templates/dashboard/balanceItem.htm','payments/deposit-modal'],function(a,b,c,d,e,f){var g=c.View.extend({compileTemplate:b.template(e),compileBalanceItemTemplate:b.template(f),initialize:function(){this.constructor.__super__.initialize.call(this),b.bindAll(this,'render'),this.getMyFunds()},loadedAllCurrencies:!0,events:{'click .view-all':'loadMoreCurrency','click #deposit-funds':'depositFunds'},getMyFunds:function(){var a=this;jq.ajax({type:'GET',url:'/ajax/header.php',dataType:'json',cache:!1,success:function(b){a.setFromData(b)}})},render:function(){return a(this.el).html(this.compileTemplate()),this},setFromData:function(b){var c=b.data.balances,d=[];c=c.other===null?[c.primary]:d.concat(c.primary,c.other),b.data.pendingfunds&&a(this.el).find('#pendingfunds').show(),c.length>1&&c.sort(function(a,b){return a.default_currency==1?-1:b.default_currency==1?1:a.is_bonus_currency==1?1:b.is_bonus_currency==1?-1:b.balance_in_usd-a.balance_in_usd});var e=c.length-1;for(var f=0;f<=e;f++)c[f].is_highest=f==0,a(this.el).find('#myfunds_list').append(this.compileBalanceItemTemplate(c[f]));c.length>1&&a(this.el).find('.view-all').show()},loadMoreCurrency:function(){this.loadedAllCurrencies?(a(this.el).find('.view-all').text(T_('See More')),a('#myfunds_list .not-top-record').hide()):(a('#myfunds_list .not-top-record').show(),a(this.el).find('.view-all').text(T_('See Less'))),this.loadedAllCurrencies=!this.loadedAllCurrencies},depositFunds:function(){window._t.push(['user_action',{section:'DepositFunds',label:'MyFundsDepositFunds',action:'click'}])}});return g}),define('dashboard/models/poll',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.Model.extend();return d}),define('dashboard/models/pollQuestions',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.Model.extend(),e=c.Collection.extend({url:'/ajax/user/pollQuestions.php',model:d});return e}),define('dashboard/models/hireMePostContest',['backbone-wrapper'],function(a){var b=a.Model.extend();return b}),define('text!templates/dashboard/localJobsPost.htm',[],function(){return'<div class="Card PageDashboard-card">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title"><%- T_("Freelancer Local") %></h3>\n    </div>\n    <div id="local-jobs-buttons">\n        <ul class="LocalCategories-list">\n            <% _.each(subCategories, function(subcategory) { %>\n            <li class="LocalCategories-listItem">\n                <a data-id="<%- subcategory.id %>" class="LocalCategories-link">\n                    <%= loadSvg(subcategory.icon) %>\n                    <%- subcategory.name %>\n                </a>\n            </li>\n            <% }); %>\n        </ul>\n    </div>\n    <a id="btn-post-first-project-fixed"\n        class="btn btn-primary btn-small btn-block"\n        href="/post-project?skill_category=9&skill_subcategory=110&is_local=1"\n        data-qtsb-section="DashboardSidebarLocal" data-qtsb-label="GoToPPP">\n        <%- T_("Post a Local Job") %>\n    </a>\n</div>\n'}),define('dashboard/views/localJobsPost',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/localJobsPost.htm'],function(a,b,c,d){var e=[{id:89,name:T_('Get something delivered'),icon:'flicon-truck'},{id:92,name:T_('Garden maintenance'),icon:'flicon-large-paintbrush'},{id:97,name:T_('Get help from a handyman'),icon:'flicon-hammer'},{id:90,name:T_('Clean my house'),icon:'flicon-broom'},{id:91,name:T_('Help me move'),icon:'flicon-large-box-trolley'},{id:96,name:T_('Photography'),icon:'flicon-camera'}],f=c.View.extend({events:{'click a.LocalCategories-link':'goToPPP'},initialize:function(){this.constructor.__super__.initialize.call(this),b.bindAll(this,'render')},render:function(){return a(this.el).html(b.template(d,{subCategories:e})),this},goToPPP:function(b){b.preventDefault();var c=b.target,d='/post-project?skill_category=9&skill_subcategory=',e=a(c).data('id');d+=e,d+='&is_local=1',_t.push(['user_action',{section:'localJobsPostWidget',subsection:'Dashboard',label:'post_local_module',action:'click',value:e}]),setTimeout(function(){window.location=d},200)}});return f}),define('text!templates/dashboard/localJobsAdd.htm',[],function(){return'<div class="Card PageDashboard-card">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title"><%- T_("Add Freelancer Local to your profile") %></h3>\n    </div>\n    <div class="alert alert-error message-error" style="display:none">\n        <span><%- T_("Please select a location from the dropdown") %></span>\n    </div>\n    <div class="LocalJobs-widget">\n        <ol class="LocalJobs-list">\n            <li class="LocalJobs-step"><%- T_("Tell us where you are and the type of work you would be interested in doing.") %></li>\n            <li class="LocalJobs-step"><%- T_("When new projects get posted near you, we will let you know about them.") %></li>\n        </ol>\n        <form id="localJobsAdd" method="" action="#" class="LocalJobs-form">\n            <div id="local-jobs-buttons">\n                <ul class="LocalCategories-list">\n                    <% _.each(bundles, function(bundle) { %>\n                    <li class="LocalCategories-formItem">\n                        <label class="LocalCategories-label">\n                            <input class="LocalCategories-input" type="checkbox" id="bundle-<%- bundle.id %>"\n                                data-bundle-id="<%- bundle.id %>"><%- bundle.name %>\n                        </label>\n                    </li>\n                    <% }); %>\n                </ul>\n            </div>\n            <label for="address"><%- T_("Type the area where you would be interested in working") %></label>\n            <input class="LocalCategories-address" type="text" id="user-location"\n                name="address" placeholder="<%- T_("Start typing your address here") %>">\n            <button id="btn-post-first-user-fixed"\n                class="btn btn-primary btn-small btn-block"\n                data-qtsb-section="DashboardSidebarLocal" data-qtsb-label="AddLocalToProfile">\n                <%- T_("Add Local Jobs To My Profile") %>\n            </button>\n        </form>\n    </div>\n</div>\n'}),define('dashboard/views/localJobsAdd',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/localJobsAdd.htm','local-jobs/geocoding'],function(a,b,c,d,e){var f=e.create(),g=[{id:96,name:T_('Photography'),skills:[27]},{id:89,name:T_('Pickup and Delivery'),skills:[632,869]},{id:97,name:T_('Handyman'),skills:[649]},{id:90,name:T_('House Cleaning'),skills:[823]},{id:91,name:T_('Help Moving'),skills:[856]},{id:92,name:T_('Garden Maintenance'),skills:[657,847]}],h={},i={autoCompleteElement:'user-location',geoInfo:{}},j,k=c.View.extend({events:{'click #btn-post-first-user-fixed':'addAsLocalUser','keyup #user-location':'locationKeyUp'},initialize:function(){this.constructor.__super__.initialize.call(this),b.bindAll(this,'render','initElements','setProjectGeoInfo')},render:function(){return a(this.el).html(b.template(d,{bundles:g})),this},initElements:function(){j=this.el;if(window.local_skills){var b={};g.forEach(function(a){h[a.id]=a,a.skills.forEach(function(c){b[c]=a.id})}),window.local_skills.forEach(function(c){c.id in b&&a(j).find('#bundle-'+b[c.id]).prop('checked',!0)})}typeof window.userLocation=='object'&&(i.geoInfo={lat:window.userLocation.latitude,lng:window.userLocation.longitude,vicinity:window.userLocation.vicinity,administrative_area_level_1:window.userLocation.administrativeArea,formatted_address:window.userLocation.fullAddress,country:window.userLocation.country},this.setProjectGeoInfo(i.geoInfo),a(j).find('#'+i.autoCompleteElement).val(i.geoInfo.formatted_address)),f.init({autoCompleteElement:i.autoCompleteElement,reverseGeocodingElement:null,autoCompleteCallback:this.setProjectGeoInfo,reverseGeocodingSuccessCallback:this.setProjectGeoInfo})},setProjectGeoInfo:function(a){i.geoInfo=a},addAsLocalUser:function(b){function c(b){a(j).find('.message-error span').text(b),a(j).find('.message-error').show()}function d(){a(j).find('.message-error').hide()}b.preventDefault();var e={is_local:1,edit_skills:1,local_widget:1,force_local:1};if(!i.geoInfo||Object.keys(i.geoInfo)<3){c(T_('Please select a location from the dropdown'));return}d(),e.latitude=i.geoInfo.lat,e.longitude=i.geoInfo.lng,e.vicinity=i.geoInfo.vicinity,e.admin_area=i.geoInfo.administrative_area_level_1,e.country=i.geoInfo.country,e.full_address=i.geoInfo.formatted_address;var f=[];a(this.el).find('input.LocalCategories-input:checked').each(function(){var b=a(this).data('bundle-id'),c=h[b].skills;c.forEach(function(a){f.push(a),e['job_'+a]='on'})}),a.ajax({url:'/users/change-qualifications.php',data:e,dataType:'JSON',method:'POST',success:function(b){return b.status==='success'||b.status==='failed'?(d(),a('#add_local_module').hide(),window._t.push(['user_action',{section:'local_freelancer_widget',sub_section:'SavingSkills',user_id:window.user_id,name:'jobs',value:f.join(',')}]),!0):(c(T_('An error has occured.')),!1)},error:function(){return c(T_('An error has occured.')),!1}})},locationKeyUp:function(){i.geoInfo=null}});return k}),define('text!templates/dashboard/nearbyProjects.htm',[],function(){return'<div class="Card PageDashboard-card NearbyWidget">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title">\n            <%- T_("Jobs Near You") %>\n            <a href="/jobs/localjobs" class="PageDashboard-card-expand view-all" title="view all">\n                <span class="fl-icon-plus see-all-button"></span>\n            </a>\n        </h3>\n    </div>\n    <ul id="NearbyWidget-list" class="NearbyWidget-list small-project-list"></ul>\n</div>\n'}),define('text!templates/dashboard/smallLocalProject.htm',[],function(){return'<div class="NearbyWidget-project-primary">\n    <a href="<%= seo_url %>" class="NearbyWidget-project-primary-title"><%= title %></a>\n    <button id="#viewButton" class="btn btn-info btn-mini NearbyWidget-project-primary-btn">View</button>\n</div>\n<div class="NearbyWidget-project-secondary">\n    <span class="Icon Icon--small"><%= loadSvg(\'ui-pin\') %></span>\n    <span class="NearbyWidget-project-secondary-location"><%= location %> <strong>(<%= distance %>)</strong></span>\n    <span class="NearbyWidget-project-secondary-price"><%= budget %></span>\n</div>'}),define('dashboard/views/smallLocalProjectRow',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/smallLocalProject.htm'],function(a,b,c,d){var e=c.View.extend({events:{'click .NearbyWidget-project-primary-btn':'goToProject','click .NearbyWidget-project-primary-title':'goToProject'},localProjectTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','goToProject')},goToProject:function(a){var b=this;return a.preventDefault(),window._ttref.push(['_clearEntrypoint','Project'],['_setCookie','Project_NearbyProjectsWidget']),window._t.push(['user_action',{section:'local_nearby_projects_widget',sub_section:'ViewProject',user_id:window.user_id,reference:'project_id',reference_id:this.model.id}]),setTimeout(function(){window.location.href=b.model.seo_url},200),this},render:function(){return a(this.el).html(this.localProjectTemplate(this.model)),this}});return e}),define('dashboard/views/nearbyProjects',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/nearbyProjects.htm','dashboard/views/smallLocalProjectRow','jquery-slimscroll'],function(a,b,c,d,e){var f={autoCompleteElement:'user-location',geoInfo:{}},g,h=c.View.extend({compileTemplate:b.template(d),initialize:function(c){this.constructor.__super__.initialize.call(this),a.extend(f,c||{}),b.bindAll(this,'render','initElements')},render:function(){return a(this.el).html(this.compileTemplate()),this.getNearbyProjects(),this},getNearbyProjects:function(){var b='',c=this;return b+='lat='+f.lat+'&',b+='lon='+f.lon+'&',b+='local=true&',b+='inLocalJobsPage=true&',b+='iSortCol_0=6&',b+='sSortDir_0=desc&',b+='iDisplayLength=20&',b+='languages='+encodeURIComponent(f.lang),a.ajax({url:'/ajax/table/project_contest_datatable.php?'+b,type:'GET',success:function(b){function d(a){return{id:a[0],title:a[1],location:a[25]?a[25]+', '+a[27]:a[27],distance:a[35],seo_url:a[21],description:a[2],budget:'$'+Math.floor(a[32].minbudget_usd)+' - '+'$'+Math.ceil(a[32].maxbudget_usd)}}function f(a){var b=a.distance.split('km');return parseFloat(b[0].trim())}function g(a,b){return f(a)-f(b)}function h(b){var d=a('<li>');d.addClass('NearbyWidget-list-item');var f=new e({model:b,el:d});a(c.el).find('#NearbyWidget-list').append(f.render().el)}if(b.iTotalDisplayRecords===0)a('#nearby_projects_module').hide();else{var i=b.aaData.map(d);i.sort(g),i.forEach(h)}}})},initElements:function(){g=this.el}});return h}),define('dashboard/models/projectsTodo',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){return c.Model.extend({defaults:{completed:!1,name:''},sync:function(b,d,e){e.data=a.param(d.toJSON()),e.contentType='application/x-www-form-urlencoded';switch(b){case'create':return e.url='/ajax/project/todo-list/create.php',e.success=function(a){a.status==='success'&&!d.get('id')&&d.set({id:a.id},{silent:!0})},c.sync('create',d,e);case'read':return e.url='/ajax/project/todo-list/read.php',c.sync('read',d,e);case'update':return e.url='/ajax/project/todo-list/update.php',c.sync('create',d,e);case'delete':return e.url='/ajax/project/todo-list/delete.php',c.sync('create',d,e)}},toggleCompleted:function(){this.save({completed:!this.get('completed')})}})}),define('dashboard/collections/projectsTodoList',['jquery-wrapper','underscore-wrapper','backbone-wrapper','../models/projectsTodo'],function(a,b,c,d){return c.Collection.extend({model:d,url:'/ajax/project/todo-list/read.php',sync:function(a,b,d){d.success=function(a){a.data&&b.reset(a.data)},c.sync(a,b,d)},getNextInputIndex:function(){var a=this.last();return a?a.get('index')+1:1},getMaxNameLength:function(){return 100}})}),define('text!templates/dashboard/projects-todo-list.htm',[],function(){return'<div class="Card PageDashboard-card WidgetProjectsTodoList">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title"><%- T_("To-do List") %></h3>\n    </div>\n    <ul id="WidgetProjectsTodoList-list" class="WidgetProjectsTodoList-list"></ul>\n    <form id="WidgetProjectsTodoList-addTaskForm" class="WidgetProjectsTodoList-addTaskForm">\n        <input type="text" id="WidgetProjectsTodoList-addTaskInput" class="WidgetProjectsTodoList-addTaskForm-input" placeholder="<%- T_("Add a to-do") %>">\n        <button type="submit" class="btn btn-block"><%- T_("Add to list") %></button>\n    </form>\n    <form id="one-click-todo-form" action="/buyers/onverifycreate.php" method="POST" class="is-hidden">\n        <input type="hidden" name="project_name" value="">\n        <input type="hidden" name="budget_set" value="false">\n        <input type="hidden" name="one_click_post" value="true">\n        <input type="hidden" name="csrf_token" value="">\n        <input type="hidden" name="page_name" value="DashboardTodoList">\n    </form>\n</div>\n'}),define('text!templates/dashboard/projects-todo-list-item.htm',[],function(){return'<span class="Checkbox">\n	<input type="checkbox" class="projectTodo-checkbox Checkbox-input" id="WidgetProjectsTodoList-checkbox-<%- index %>" <%- completed ? \'checked\' : \'\' %>>\n	<label aria-label="<%- name %>" class="projectTodo-label Checkbox-label"  for="WidgetProjectsTodoList-checkbox-<%- index %>"></label>\n</span>\n<span class="WidgetProjectsTodoList-taskItem">\n	<a target="_blank" class="WidgetProjectsTodoList-task <%- completed ? \'is-completed\' : \'\' %> "\n	    <% if (!completed) { %>\n	        href="/post-project?project_title=<%- name %>"\n	    <% } %>>\n	    <%- name %>\n	</a>\n</span>\n\n<a type="button" class="delete-button">&times;</a>\n'}),define('dashboard/views/projectsTodoList',['jquery-wrapper','underscore-wrapper','backbone-wrapper','../models/projectsTodo','../collections/projectsTodoList','text!templates/dashboard/projects-todo-list.htm','text!templates/dashboard/projects-todo-list-item.htm'],function(a,b,c,d,e,f,g){var h='WidgetProjectsTodoList',i={base:'#'+h,toDoList:'#'+h+'-list',toDoListItem:'#'+h+'-listItem',addTaskForm:'#'+h+'-addTaskForm',addTaskInput:'#'+h+'-addTaskInput',taskCheckboxes:'#'+h+' .custom-checkbox',taskDeleteButtons:'#'+h+' .delete-button'},j=c.View.extend({tagName:'li',template:b.template(g),events:{'change .projectTodo-checkbox':'onToggleCompleted','change .projectTodo-label':'onToggleCompleted','click .delete-button':'onClickDelete','click .WidgetProjectsTodoList-task':'onLinkClicked'},onLinkClicked:function(a){this.model.toggleCompleted(),this.options.onLinkClickedCallback(a,this)},onToggleCompleted:function(){this.model.toggleCompleted()},onClickDelete:function(a){a.preventDefault(),this.model.destroy(),this.destroyView()},destroyView:function(){this.remove()},initialize:function(){this.model.bind('change',this.render,this),this.model.bind('destroy',this.destroyView,this)},render:function(){return a(this.el).html(this.template(this.model.attributes)),a(this.el).addClass('WidgetProjectsTodoList-listItem'),this}});return c.View.extend({template:b.template(f),domSelector:i,events:{'submit #WidgetProjectsTodoList-addTaskForm':'onSubmitAddTaskForm'},getNewModelAttributes:function(){var a=this.$input.val(),b=this.collection.getMaxNameLength();a&&a.length>=b&&(a=a.substr(0,b));if(!a||a.trim()==='')return;return{name:a,completed:!1,index:this.collection.getNextInputIndex()}},onSubmitAddTaskForm:function(a){a.preventDefault();var b=this.getNewModelAttributes();if(!b)return;var c=this.collection.create(b);this.collection.add(c),this.$input.val('')},onAddOne:function(b){b.get('index')||b.set({index:b.get('id')},{silent:!0});var c=b.get('completed');typeof c!='boolean'&&(parseInt(c,10)!==0?b.set({completed:!0},{silent:!0}):b.set({completed:!1},{silent:!0}));var d=new j({model:b,onLinkClickedCallback:this.onTodoItemLinkClicked});a('#WidgetProjectsTodoList-list').append(d.render().el)},onAddAll:function(){this.$('#WidgetProjectsTodoList-list').html(''),this.collection.each(this.onAddOne,this)},onTodoItemLinkClicked:function(a,b){if(this.options.postOneClickOnLinkClickedToComplete&&b.model.get('completed')){a.preventDefault();var c=document.getElementById('one-click-todo-form');c.project_name.value=b.model.attributes.name,c.budget_set.value=!1,c.one_click_post.value=!0,c.csrf_token.value=getCSRFToken(),c.submit()}},initialize:function(){this.collection&&(this.collection.bind('add',this.onAddOne,this),this.collection.bind('reset',this.onAddAll,this),this.collection.fetch()),this.onTodoItemLinkClicked=this.onTodoItemLinkClicked.bind(this)},render:function(){return a(this.el).html(this.template({})),this.$input=this.$('input'),this}})}),define('jquery',[],function(){return jQuery}),function(a){var b=function(a,c,d){var e=document.createElement('img'),f,g;return e.onerror=c,e.onload=function(){g&&b.revokeObjectURL(g),c(b.scale(e,d))},window.Blob&&a instanceof Blob||window.File&&a instanceof File?f=g=b.createObjectURL(a):f=a,f?(e.src=f,e):b.readFile(a,function(a){e.src=a})},c=window.createObjectURL&&window||window.URL&&URL||window.webkitURL&&webkitURL;b.scale=function(a,b){b=b||{};var c=document.createElement('canvas'),d=a.width,e=a.height,f=Math.max((b.minWidth||d)/d,(b.minHeight||e)/e);return f>1&&(d=parseInt(d*f,10),e=parseInt(e*f,10)),f=Math.min((b.maxWidth||d)/d,(b.maxHeight||e)/e),f<1&&(d=parseInt(d*f,10),e=parseInt(e*f,10)),a.getContext||b.canvas&&c.getContext?(c.width=d,c.height=e,c.getContext('2d').drawImage(a,0,0,d,e),c):(a.width=d,a.height=e,a)},b.createObjectURL=function(a){return c?c.createObjectURL(a):!1},b.revokeObjectURL=function(a){return c?c.revokeObjectURL(a):!1},b.readFile=function(a,b){if(window.FileReader&&FileReader.prototype.readAsDataURL){var c=new FileReader;return c.onload=function(a){b(a.target.result)},c.readAsDataURL(a),c}return!1},typeof define!='undefined'&&define.amd?define('load-image',[],function(){return b}):a.loadImage=b}(this),function(a){var b=a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype,c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder,d=c&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(a){var b,d,e,f,g,h;a.split(',')[0].indexOf('base64')>=0?b=atob(a.split(',')[1]):b=decodeURIComponent(a.split(',')[1]),d=new ArrayBuffer(b.length),e=new Uint8Array(d);for(f=0;f<b.length;f+=1)e[f]=b.charCodeAt(f);return g=new c,g.append(d),h=a.split(',')[0].split(':')[1].split(';')[0],g.getBlob(h)};a.HTMLCanvasElement&&!b.toBlob&&(b.mozGetAsFile?b.toBlob=function(a,b){a(this.mozGetAsFile('blob',b))}:b.toDataURL&&d&&(b.toBlob=function(a,b){a(d(this.toDataURL(b)))})),typeof define!='undefined'&&define.amd?define('canvas-to-blob',[],function(){return d}):a.dataURLtoBlob=d}(this),function(a){var b=function(a,c){var d=/[^\w\-\.:]/.test(a)?new Function(b.arg+',tmpl','var _e=tmpl.encode'+b.helper+',_s=\''+a.replace(b.regexp,b.func)+'\';return _s;'):b.cache[a]=b.cache[a]||b(b.load(a));return c?d(c,b):function(a){return d(a,b)}};b.cache={},b.load=function(a){return document.getElementById(a).innerHTML},b.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,b.func=function(a,b,c,d,e,f){if(b)return{'\n':'\\n','\r':'\\r','	':'\\t',' ':' '}[a]||'\\'+a;if(c)return c==='='?'\'+_e('+d+')+\'':'\'+('+d+'||\'\')+\'';if(e)return'\';';if(f)return'_s+=\''},b.encReg=/[<>&"'\x00]/g,b.encMap={'<':'&lt;','>':'&gt;','&':'&amp;','"':'&quot;','\'':'&#39;'},b.encode=function(a){return String(a||'').replace(b.encReg,function(a){return b.encMap[a]||''})},b.arg='o',b.helper=',print=function(s,e){_s+=e&&(s||\'\')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}',typeof define=='function'&&define.amd?define('tmpl',[],function(){return b}):a.tmpl=b}(this),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,d;(d=b[c])!=null;c++)try{a(d).triggerHandler('remove')}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split('.')[0];b=b.split('.')[1],e=j+'-'+b,d||(d=c,c=a.Widget),a.expr[':'][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){if(!a.isFunction(d)){i[b]=d;return}i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,f;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}()}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+'.'+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){var e=d.call(arguments,1),f=0,g=e.length,h,i;for(;f<g;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(a.isPlainObject(i)?c[h]=a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):c[h]=i);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h=typeof g=='string',i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);if(!e)return a.error('cannot call methods on '+c+' prior to initialization; '+'attempted to call method \''+g+'\'');if(!a.isFunction(e[g])||g.charAt(0)==='_')return a.error('no such method \''+g+'\' for '+c+' widget instance');d=e[g].apply(e,i);if(d!==e&&d!==b)return j=d&&d.jquery?j.pushStack(d.get()):d,!1}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:'widget',widgetEventPrefix:'',defaultElement:'<div>',options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace='.'+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger('create',null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr('aria-disabled').removeClass(this.widgetFullName+'-disabled '+'ui-state-disabled'),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass('ui-state-hover'),this.focusable.removeClass('ui-state-focus')},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e=c,f,g,h;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof c=='string'){e={},f=c.split('.'),c=f.shift();if(f.length){g=e[c]=a.widget.extend({},this.options[c]);for(h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];c=f.pop();if(d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,a==='disabled'&&(this.widget().toggleClass(this.widgetFullName+'-disabled ui-state-disabled',!!b).attr('aria-disabled',b),this.hoverable.removeClass('ui-state-hover'),this.focusable.removeClass('ui-state-focus')),this},enable:function(){return this._setOption('disabled',!1)},disable:function(){return this._setOption('disabled',!0)},_on:function(b,c,d){var e,f=this;typeof b!='boolean'&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){if(!b&&(f.options.disabled===!0||a(this).hasClass('ui-state-disabled')))return;return(typeof g=='string'?f[g]:g).apply(f,arguments)}typeof g!='string'&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||'').split(' ').join(this.eventNamespace+' ')+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return(typeof a=='string'?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass('ui-state-hover')},mouseleave:function(b){a(b.currentTarget).removeClass('ui-state-hover')}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass('ui-state-focus')},focusout:function(b){a(b.currentTarget).removeClass('ui-state-focus')}})},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:'fadeIn',hide:'fadeOut'},function(b,c){a.Widget.prototype['_'+b]=function(d,e,f){typeof e=='string'&&(e={effect:e});var g,h=e?e===!0||typeof e=='number'?c:e.effect||c:b;e=e||{},typeof e=='number'&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),define('jquery.ui.widget',function(){}),function(a){'whatever',typeof define=='function'&&define.amd?define('jquery.fileupload',['jquery','jquery.ui.widget'],a):a(window.jQuery)}(function(a){a.support.xhrFileUpload=!!window.XMLHttpRequestUpload&&!!window.FileReader,a.support.xhrFormDataFileUpload=!!window.FormData,a.widget('blueimp.fileupload',{options:{namespace:undefined,dropZone:a(document),fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(a){return a.serializeArray()},add:function(a,b){b.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:['namespace','dropZone','fileInput','multipart','forceIframeTransport'],_BitrateTimer:function(){this.timestamp=+(new Date),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;if(!this.bitrate||!c||d>c)this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return typeof b.formData=='function'?b.formData(b.form):a.isArray(b.formData)?b.formData:b.formData?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_onProgress:function(a,b){if(a.lengthComputable){var c=+(new Date),d,e;if(b._time&&b.progressInterval&&c-b._time<b.progressInterval&&a.loaded!==a.total)return;b._time=c,d=b.total||this._getTotal(b.files),e=parseInt(a.loaded/a.total*(b.chunkSize||d),10)+(b.uploadedBytes||0),this._loaded+=e-(b.loaded||b.uploadedBytes||0),b.lengthComputable=!0,b.loaded=e,b.total=d,b.bitrate=b._bitrateTimer.getBitrate(c,e,b.bitrateInterval),this._trigger('progress',a,b),this._trigger('progressall',a,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(c,this._loaded,b.bitrateInterval)})}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind('progress',function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_initXHRData:function(b){var c,d=b.files[0],e=b.multipart||!a.support.xhrFileUpload,f=b.paramName[0];if(!e||b.blob)b.headers=a.extend(b.headers,{'X-File-Name':d.name,'X-File-Type':d.type,'X-File-Size':d.size}),b.blob?e||(b.contentType='application/octet-stream',b.data=b.blob):(b.contentType=d.type,b.data=d);e&&a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:f,value:b.blob}):a.each(b.files,function(a,d){c.push({name:b.paramName[a]||f,value:d})})):(b.formData instanceof FormData?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(f,b.blob,d.name):a.each(b.files,function(a,d){d instanceof Blob&&c.append(b.paramName[a]||f,d,d.name)})),b.data=c),b.blob=null},_initIframeSettings:function(b){b.dataType='iframe '+(b.dataType||''),b.formData=this._getFormData(b),b.redirect&&a('<a></a>').prop('href',b.url).prop('host')!==location.host&&b.formData.push({name:b.redirectParamName||'redirect',value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType='postmessage '+(a.dataType||''))):this._initIframeSettings(a,'iframe')},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){var b=a(this),c=b.prop('name')||'files[]',e=(b.prop('files')||[1]).length;while(e)d.push(c),e-=1}),d.length||(d=[c.prop('name')||'files[]'])),d},_initFormSettings:function(b){if(!b.form||!b.form.length)b.form=a(b.fileInput.prop('form'));b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop('action')||location.href),b.type=(b.type||b.form.prop('method')||'').toUpperCase(),b.type!=='POST'&&b.type!=='PUT'&&(b.type='POST')},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_chunkedUpload:function(b,c){var d=this,e=b.files[0],f=e.size,g=b.uploadedBytes=b.uploadedBytes||0,h=b.maxChunkSize||f,i=e.webkitSlice||e.mozSlice||e.slice,j,k,l,m;return!(this._isXHRUpload(b)&&i&&(g||h<f))||b.data?!1:c?!0:g>=f?(e.error='uploadedBytes',this._getXHRPromise(!1,b.context,[null,'error',e.error])):(k=Math.ceil((f-g)/h),j=function(c){return c?j(c-=1).pipe(function(){var f=a.extend({},b);return f.blob=i.call(e,g+c*h,g+(c+1)*h),f.chunkSize=f.blob.size,d._initXHRData(f),d._initProgressListener(f),l=(a.ajax(f)||d._getXHRPromise(!1,f.context)).done(function(){f.loaded||d._onProgress(a.Event('progress',{lengthComputable:!0,loaded:f.chunkSize,total:f.chunkSize}),f),b.uploadedBytes=f.uploadedBytes+=f.chunkSize}),l}):d._getXHRPromise(!0,b.context)},m=j(k),m.abort=function(){return l.abort()},this._enhancePromise(m))},_beforeSend:function(a,b){this._active===0&&(this._trigger('start'),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=b.uploadedBytes||0,this._total+=this._getTotal(b.files)},_onDone:function(b,c,d,e){this._isXHRUpload(e)||this._onProgress(a.Event('progress',{lengthComputable:!0,loaded:1,total:1}),e),e.result=b,e.textStatus=c,e.jqXHR=d,this._trigger('done',null,e)},_onFail:function(a,b,c,d){d.jqXHR=a,d.textStatus=b,d.errorThrown=c,this._trigger('fail',null,d),d.recalculateProgress&&(this._loaded-=d.loaded||d.uploadedBytes||0,this._total-=d.total||this._getTotal(d.files))},_onAlways:function(a,b,c,d){this._active-=1,d.textStatus=b,c&&c.always?(d.jqXHR=c,d.result=a):(d.jqXHR=a,d.errorThrown=c),this._trigger('always',null,d),this._active===0&&(this._trigger('stop'),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(b,c){var d=this,e,f,g,h=d._getAJAXSettings(c),i=function(c,f){return d._sending+=1,h._bitrateTimer=new d._BitrateTimer,e=e||(c!==!1&&d._trigger('send',b,h)!==!1&&(d._chunkedUpload(h)||a.ajax(h))||d._getXHRPromise(!1,h.context,f)).done(function(a,b,c){d._onDone(a,b,c,h)}).fail(function(a,b,c){d._onFail(a,b,c,h)}).always(function(a,b,c){d._sending-=1,d._onAlways(a,b,c,h);if(h.limitConcurrentUploads&&h.limitConcurrentUploads>d._sending){var e=d._slots.shift();while(e){if(!e.isRejected()){e.resolve();break}e=d._slots.shift()}}}),e};return this._beforeSend(b,h),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(i)):g=this._sequence=this._sequence.pipe(i,i),g.abort=function(){var a=[undefined,'abort','abort'];return e?e.abort():(f&&f.rejectWith(a),i(!1,a))},this._enhancePromise(g)):i()},_onAdd:function(b,c){var d=this,e=!0,f=a.extend({},this.options,c),g=f.limitMultiFileUploads,h=this._getParamName(f),i,j,k,l;if(!f.singleFileUploads&&!g||!this._isXHRUpload(f))k=[c.files],i=[h];else if(!f.singleFileUploads&&g){k=[],i=[];for(l=0;l<c.files.length;l+=g)k.push(c.files.slice(l,l+g)),j=h.slice(l,l+g),j.length||(j=h),i.push(j)}else i=h;return c.originalFiles=c.files,a.each(k||c.files,function(f,g){var h=a.extend({},c);return h.files=k?g:[g],h.paramName=i[f],h.submit=function(){return h.jqXHR=this.jqXHR=d._trigger('submit',b,this)!==!1&&d._onSend(b,this),this.jqXHR},e=d._trigger('add',b,h)}),e},_normalizeFile:function(a,b){b.name===undefined&&b.size===undefined&&(b.name=b.fileName,b.size=b.fileSize)},_replaceFileInput:function(b){var c=b.clone(!0);a('<form></form>').append(c)[0].reset(),b.after(c).detach(),a.cleanData(b.unbind('remove')),this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d}),b[0]===this.element[0]&&(this.element=c)},_onChange:function(b){var c=b.data.fileupload,d={files:a.each(a.makeArray(b.target.files),c._normalizeFile),fileInput:a(b.target),form:a(b.target.form)};d.files.length||(d.files=[{name:b.target.value.replace(/^.*\\/,'')}]),c.options.replaceFileInput&&c._replaceFileInput(d.fileInput);if(c._trigger('change',b,d)===!1||c._onAdd(b,d)===!1)return!1},_onPaste:function(b){var c=b.data.fileupload,d=b.originalEvent.clipboardData,e=d&&d.items||[],f={files:[]};a.each(e,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&f.files.push(c)});if(c._trigger('paste',b,f)===!1||c._onAdd(b,f)===!1)return!1},_onDrop:function(b){var c=b.data.fileupload,d=b.dataTransfer=b.originalEvent.dataTransfer,e={files:a.each(a.makeArray(d&&d.files),c._normalizeFile)};if(c._trigger('drop',b,e)===!1||c._onAdd(b,e)===!1)return!1;b.preventDefault()},_onDragOver:function(a){var b=a.data.fileupload,c=a.dataTransfer=a.originalEvent.dataTransfer;if(b._trigger('dragover',a)===!1)return!1;c&&(c.dropEffect=c.effectAllowed='copy'),a.preventDefault()},_initEventHandlers:function(){var a=this.options.namespace;this._isXHRUpload(this.options)&&this.options.dropZone.bind('dragover.'+a,{fileupload:this},this._onDragOver).bind('drop.'+a,{fileupload:this},this._onDrop).bind('paste.'+a,{fileupload:this},this._onPaste),this.options.fileInput.bind('change.'+a,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var a=this.options.namespace;this.options.dropZone.unbind('dragover.'+a,this._onDragOver).unbind('drop.'+a,this._onDrop).unbind('paste.'+a,this._onPaste),this.options.fileInput.unbind('change.'+a,this._onChange)},_setOption:function(b,c){var d=a.inArray(b,this._refreshOptionsList)!==-1;d&&this._destroyEventHandlers(),a.Widget.prototype._setOption.call(this,b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;b.fileInput===undefined?b.fileInput=this.element.is('input:file')?this.element:this.element.find('input:file'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone))},_create:function(){var b=this.options;a.extend(b,a(this.element[0].cloneNode(!1)).data()),b.namespace=b.namespace||this.widgetName,this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),a.Widget.prototype.destroy.call(this)},enable:function(){a.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),a.Widget.prototype.disable.call(this)},add:function(b){if(!b||this.options.disabled)return;b.files=a.each(a.makeArray(b.files),this._normalizeFile),this._onAdd(null,b)},send:function(b){if(b&&!this.options.disabled){b.files=a.each(a.makeArray(b.files),this._normalizeFile);if(b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){typeof define=='function'&&define.amd?define('jquery.fileupload-fp',['jquery','load-image','canvas-to-blob','./jquery.fileupload'],a):a(window.jQuery,window.loadImage)}(function(a,b){a.widget('blueimpFP.fileupload',a.blueimp.fileupload,{options:{process:[],add:function(b,c){a(this).fileupload('process',c).done(function(){c.submit()})}},processActions:{load:function(c,d){var e=this,f=c.files[c.index],g=a.Deferred();return window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&(a.type(d.maxFileSize)!=='number'||f.size<d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(f.type))?b(f,function(a){c.canvas=a,g.resolveWith(e,[c])},{canvas:!0}):g.rejectWith(e,[c]),g.promise()},resize:function(a,c){if(a.canvas){var d=b.scale(a.canvas,c);if(d.width!==a.canvas.width||d.height!==a.canvas.height)a.canvas=d,a.processed=!0}return a},save:function(b,c){if(!b.canvas||!b.processed)return b;var d=this,e=b.files[b.index],f=e.name,g=a.Deferred(),h=function(a){a.name||(e.type===a.type?a.name=e.name:e.name&&(a.name=e.name.replace(/\..+$/,'.'+a.type.substr(6)))),b.files[b.index]=a,g.resolveWith(d,[b])};return b.canvas.mozGetAsFile?h(b.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(e.type)&&f||(f&&f.replace(/\..+$/,'')||'blob')+'.png',e.type)):b.canvas.toBlob(h,e.type),g.promise()}},_processFile:function(b,c,d){var e=this,f=a.Deferred().resolveWith(e,[{files:b,index:c}]),g=f.promise();return e._processing+=1,a.each(d.process,function(a,b){g=g.pipe(function(a){return e.processActions[b.action].call(this,a,b)})}),g.always(function(){e._processing-=1,e._processing===0&&e.element.removeClass('fileupload-processing')}),e._processing===1&&e.element.addClass('fileupload-processing'),g},process:function(b){var c=this,d=a.extend({},this.options,b);return d.process&&d.process.length&&this._isXHRUpload(d)&&a.each(b.files,function(e,f){c._processingQueue=c._processingQueue.pipe(function(){var f=a.Deferred();return c._processFile(b.files,e,d).always(function(){f.resolveWith(c)}),f.promise()})}),this._processingQueue},_create:function(){a.blueimp.fileupload.prototype._create.call(this),this._processing=0,this._processingQueue=a.Deferred().resolveWith(this).promise()}})}),function(a){typeof define=='function'&&define.amd?define('jquery.fileupload-ui',['jquery','tmpl','load-image','./jquery.fileupload-fp'],a):a(window.jQuery,window.tmpl,window.loadImage)}(function(a,b,c){var d=(a.blueimpFP||a.blueimp).fileupload;a.widget('blueimpUI.fileupload',d,{options:{autoUpload:!1,maxNumberOfFiles:undefined,maxFileSize:undefined,minFileSize:undefined,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5e6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,uploadTemplateId:'template-upload',downloadTemplateId:'template-download',filesContainer:undefined,prependFiles:!1,dataType:'json',add:function(b,c){var d=a(this).data('blueimpUIFileupload'),e=d.options,f=c.files;a(this).fileupload('process',c).done(function(){d._adjustMaxNumberOfFiles(-f.length),c.isAdjusted=!0,c.files.valid=c.isValidated=d._validate(f),c.context=d._renderUpload(f).data('data',c),e.filesContainer[e.prependFiles?'prepend':'append'](c.context),d._renderPreviews(f,c.context),d._forceReflow(c.context),d._transition(c.context).done(function(){d._trigger('added',b,c)!==!1&&(e.autoUpload||c.autoUpload)&&c.autoUpload!==!1&&c.isValidated&&c.submit()})})},send:function(b,c){var d=a(this).data('blueimpUIFileupload');if(!c.isValidated){c.isAdjusted||d._adjustMaxNumberOfFiles(-c.files.length);if(!d._validate(c.files))return!1}return c.context&&c.dataType&&c.dataType.substr(0,6)==='iframe'&&c.context.find('.progress').addClass(!a.support.transition&&'progress-animated').attr('aria-valuenow',100).find('.bar').css('width','100%'),d._trigger('sent',b,c)},done:function(b,c){var d=a(this).data('blueimpUIFileupload'),e;c.context?c.context.each(function(f){var g=a.isArray(c.result)&&c.result[f]||{error:'emptyResult'};g.error&&d._adjustMaxNumberOfFiles(1),d._transition(a(this)).done(function(){var f=a(this);e=d._renderDownload([g]).css('height',f.height()).replaceAll(f),d._forceReflow(e),d._transition(e).done(function(){c.context=a(this),d._trigger('completed',b,c)})})}):(e=d._renderDownload(c.result).appendTo(d.options.filesContainer),d._forceReflow(e),d._transition(e).done(function(){c.context=a(this),d._trigger('completed',b,c)}))},fail:function(b,c){var d=a(this).data('blueimpUIFileupload'),e;d._adjustMaxNumberOfFiles(c.files.length),c.context?c.context.each(function(f){if(c.errorThrown!=='abort'){var g=c.files[f];g.error=g.error||c.errorThrown||!0,d._transition(a(this)).done(function(){var f=a(this);e=d._renderDownload([g]).replaceAll(f),d._forceReflow(e),d._transition(e).done(function(){c.context=a(this),d._trigger('failed',b,c)})})}else d._transition(a(this)).done(function(){a(this).remove(),d._trigger('failed',b,c)})}):c.errorThrown!=='abort'?(d._adjustMaxNumberOfFiles(-c.files.length),c.context=d._renderUpload(c.files).appendTo(d.options.filesContainer).data('data',c),d._forceReflow(c.context),d._transition(c.context).done(function(){c.context=a(this),d._trigger('failed',b,c)})):d._trigger('failed',b,c)},progress:function(a,b){if(b.context){var c=parseInt(b.loaded/b.total*100,10);b.context.find('.progress').attr('aria-valuenow',c).find('.bar').css('width',c+'%')}},progressall:function(b,c){var d=a(this),e=parseInt(c.loaded/c.total*100,10),f=d.find('.fileupload-progress'),g=f.find('.progress-extended');g.length&&g.html(d.data('fileupload')._renderExtendedProgress(c)),f.find('.progress').attr('aria-valuenow',e).find('.bar').css('width',e+'%')},start:function(b){var c=a(this).data('blueimpUIFileupload');c._transition(a(this).find('.fileupload-progress')).done(function(){c._trigger('started',b)})},stop:function(b){var c=a(this).data('blueimpUIFileupload');c._transition(a(this).find('.fileupload-progress')).done(function(){a(this).find('.progress').attr('aria-valuenow','0').find('.bar').css('width','0%'),a(this).find('.progress-extended').html('&nbsp;'),c._trigger('stopped',b)})},destroy:function(b,c){var d=a(this).data('blueimpUIFileupload');c.url&&(a.ajax(c),d._adjustMaxNumberOfFiles(1)),d._transition(c.context).done(function(){a(this).remove(),d._trigger('destroyed',b,c)})}},_enableDragToDesktop:function(){var b=a(this),c=b.prop('href'),d=b.prop('download'),e='application/octet-stream';b.bind('dragstart',function(a){try{a.originalEvent.dataTransfer.setData('DownloadURL',[e,d,c].join(':'))}catch(b){}})},_adjustMaxNumberOfFiles:function(a){typeof this.options.maxNumberOfFiles=='number'&&(this.options.maxNumberOfFiles+=a,this.options.maxNumberOfFiles<1?this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(a){return typeof a!='number'?'':a>=1e9?(a/1e9).toFixed(2)+' GB':a>=1e6?(a/1e6).toFixed(2)+' MB':(a/1e3).toFixed(2)+' KB'},_formatBitrate:function(a){return typeof a!='number'?'':a>=1e9?(a/1e9).toFixed(2)+' Gbit/s':a>=1e6?(a/1e6).toFixed(2)+' Mbit/s':a>=1e3?(a/1e3).toFixed(2)+' kbit/s':a+' bit/s'},_formatTime:function(a){var b=new Date(a*1e3),c=parseInt(a/86400,10);return c=c?c+'d ':'',c+('0'+b.getUTCHours()).slice(-2)+':'+('0'+b.getUTCMinutes()).slice(-2)+':'+('0'+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(a*100).toFixed(2)+' %'},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+' | '+this._formatTime((a.total-a.loaded)*8/a.bitrate)+' | '+this._formatPercentage(a.loaded/a.total)+' | '+this._formatFileSize(a.loaded)+' / '+this._formatFileSize(a.total)},_hasError:function(a){return a.error?a.error:this.options.maxNumberOfFiles<0?'maxNumberOfFiles':!this.options.acceptFileTypes.test(a.type)&&!this.options.acceptFileTypes.test(a.name)?'acceptFileTypes':this.options.maxFileSize&&a.size>this.options.maxFileSize?'maxFileSize':typeof a.size=='number'&&a.size<this.options.minFileSize?'minFileSize':null},_validate:function(b){var c=this,d=!!b.length;return a.each(b,function(a,b){b.error=c._hasError(b),b.error&&(d=!1)}),d},_renderTemplate:function(b,c){if(!b)return a();var d=b({files:c,formatFileSize:this._formatFileSize,options:this.options});return d instanceof a?d:a(this.options.templatesContainer).html(d).children()},_renderPreview:function(b,d){var e=this,f=this.options,g=a.Deferred();return(c&&c(b,function(b){d.append(b),e._forceReflow(d),e._transition(d).done(function(){g.resolveWith(d)}),a.contains(document.body,d[0])||g.resolveWith(d)},{maxWidth:f.previewMaxWidth,maxHeight:f.previewMaxHeight,canvas:f.previewAsCanvas})||g.resolveWith(d))&&g},_renderPreviews:function(b,c){var d=this,e=this.options;return c.find('.preview span').each(function(c,f){var g=b[c];e.previewSourceFileTypes.test(g.type)&&(a.type(e.previewSourceMaxFileSize)!=='number'||g.size<e.previewSourceMaxFileSize)&&(d._processingQueue=d._processingQueue.pipe(function(){var b=a.Deferred();return d._renderPreview(g,a(f)).done(function(){b.resolveWith(d)}),b.promise()}))}),this._processingQueue},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find('a[download]').each(this._enableDragToDesktop).end()},_startHandler:function(b){b.preventDefault();var c=a(this),d=c.closest('.template-upload'),e=d.data('data');e&&e.submit&&!e.jqXHR&&e.submit()&&c.prop('disabled',!0)},_cancelHandler:function(b){b.preventDefault();var c=a(this).closest('.template-upload'),d=c.data('data')||{};d.jqXHR?d.jqXHR.abort():(d.errorThrown='abort',b.data.fileupload._trigger('fail',b,d))},_deleteHandler:function(b){b.preventDefault();var c=a(this);b.data.fileupload._trigger('destroy',b,{context:c.closest('.template-download'),url:c.attr('data-url'),type:c.attr('data-type')||'DELETE',dataType:b.data.fileupload.options.dataType})},_forceReflow:function(b){return a.support.transition&&b.length&&b[0].offsetWidth},_transition:function(b){var c=a.Deferred();return a.support.transition&&b.hasClass('fade')?b.bind(a.support.transition.end,function(d){d.target===b[0]&&(b.unbind(a.support.transition.end),c.resolveWith(b))}).toggleClass('in'):(b.toggleClass('in'),c.resolveWith(b)),c},_initButtonBarEventHandlers:function(){var b=this.element.find('.fileupload-buttonbar'),c=this.options.filesContainer,d=this.options.namespace;b.find('.start').bind('click.'+d,function(a){a.preventDefault(),c.find('.start button').click()}),b.find('.cancel').bind('click.'+d,function(a){a.preventDefault(),c.find('.cancel button').click()}),b.find('.delete').bind('click.'+d,function(a){a.preventDefault(),c.find('.delete input:checked').siblings('button').click(),b.find('.toggle').prop('checked',!1)}),b.find('.toggle').bind('change.'+d,function(b){c.find('.delete input').prop('checked',a(this).is(':checked'))})},_destroyButtonBarEventHandlers:function(){this.element.find('.fileupload-buttonbar button').unbind('click.'+this.options.namespace),this.element.find('.fileupload-buttonbar .toggle').unbind('change.'+this.options.namespace)},_initEventHandlers:function(){d.prototype._initEventHandlers.call(this);var a={fileupload:this};this.options.filesContainer.delegate('.start button','click.'+this.options.namespace,a,this._startHandler).delegate('.cancel button','click.'+this.options.namespace,a,this._cancelHandler).delegate('.delete button','click.'+this.options.namespace,a,this._deleteHandler).delegate('.cancel .delete_item','click.'+this.options.namespace,a,this._cancelHandler).delegate('.delete .delete_item','click.'+this.options.namespace,a,this._deleteHandler),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){var a=this.options;this._destroyButtonBarEventHandlers(),a.filesContainer.undelegate('.start button','click.'+a.namespace).undelegate('.cancel button','click.'+a.namespace).undelegate('.delete button','click.'+a.namespace),d.prototype._destroyEventHandlers.call(this)},_enableFileInputButton:function(){this.element.find('.fileinput-button input').prop('disabled',!1).parent().removeClass('disabled')},_disableFileInputButton:function(){this.element.find('.fileinput-button input').prop('disabled',!0).parent().addClass('disabled')},_initTemplates:function(){var a=this.options;a.templatesContainer=document.createElement(a.filesContainer.prop('nodeName')),b&&(a.uploadTemplateId&&(a.uploadTemplate=b(a.uploadTemplateId)),a.downloadTemplateId&&(a.downloadTemplate=b(a.downloadTemplateId)))},_initFilesContainer:function(){var b=this.options;b.filesContainer===undefined?b.filesContainer=this.element.find('.files'):b.filesContainer instanceof a||(b.filesContainer=a(b.filesContainer))},_initSpecialOptions:function(){d.prototype._initSpecialOptions.call(this),this._initFilesContainer(),this._initTemplates()},_create:function(){d.prototype._create.call(this),this._refreshOptionsList.push('filesContainer','uploadTemplateId','downloadTemplateId'),a.blueimpFP||(this._processingQueue=a.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue})},enable:function(){d.prototype.enable.call(this),this.element.find('input, button').prop('disabled',!1),this._enableFileInputButton()},disable:function(){this.element.find('input, button').prop('disabled',!0),this._disableFileInputButton(),d.prototype.disable.call(this)}})}),function(a){typeof define=='function'&&define.amd?define('jquery.iframe-transport',['jquery'],a):a(window.jQuery)}(function(a){var b=0;a.ajaxTransport('iframe',function(c){if(c.async&&(c.type==='POST'||c.type==='GET')){var d,e;return{send:function(f,g){d=a('<form style="display:none;"></form>'),e=a('<iframe src="javascript:false;" name="iframe-transport-'+(b+=1)+'"></iframe>').bind('load',function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind('load').bind('load',function(){var b;try{b=e.contents();if(!b.length||!b[0].firstChild)throw new Error}catch(c){b=undefined}g(200,'success',{iframe:b}),a('<iframe src="javascript:false;"></iframe>').appendTo(d),d.remove()}),d.prop('target',e.prop('name')).prop('action',c.url).prop('method',c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop('name',c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&c.type==='POST'&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop('name',f[b]||c.paramName)}),d.append(c.fileInput).prop('enctype','multipart/form-data').prop('encoding','multipart/form-data')),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop('name',e.prop('name')),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind('load').prop('src','javascript'.concat(':false;')),d&&d.remove()}}}}),a.ajaxSetup({converters:{'iframe text':function(b){return a(b[0].body).text()},'iframe json':function(b){return a.parseJSON(a(b[0].body).text())},'iframe html':function(b){return a(b[0].body).html()},'iframe script':function(b){return a.globalEval(a(b[0].body).text())}}})}),define('project/postproject-fileupload',['jquery-wrapper','jquery.fileupload-fp','jquery.fileupload-ui','jquery.fileupload','jquery.ui.widget','jquery.iframe-transport'],function(a){function b(b,e){var f='/buyers/postproject-upload.php?fileset=';e=jq.extend({uploadTemplate:'template-upload',downloadTemplate:'template-download',domID:'fileupload',domEl:document},e),Object.prototype.toString.call(b)==='[object Array]'&&(d=b);var g=a(e.domEl),h=g.find('#'+e.domID);h.fileupload({dataType:'json',dropZone:h,url:f,singleFileUploads:!1,autoUpload:!0,paramName:'upload[]',uploadTemplateId:e.uploadTemplate,downloadTemplateId:e.downloadTemplate,add:function(b,e){var f=!1,h=new Array;for(var i=0;i<e.files.length;i++)if(jq('#project_files [value=\''+e.files[i].name+'\']').length>0||d.length>0&&c(e.files[i].name)===!0)h.push(e.files[i].name),f=!0;if(f)return g.find('.fileUploadError').text(T_('You\'ve already uploaded <%= filenames %>',{filenames:h.join(', ')})).fadeIn().delay(2e3).fadeOut('slow'),!1;var j=a(this).data('blueimpUIFileupload'),k=j.options,l=e.files;a(this).fileupload('process',e).done(function(){j._adjustMaxNumberOfFiles(-l.length),e.isAdjusted=!0,e.files.valid=e.isValidated=j._validate(l),e.context=j._renderUpload(l).data('data',e),k.filesContainer[k.prependFiles?'prepend':'append'](e.context),j._renderPreviews(l,e.context),j._forceReflow(e.context),j._transition(e.context).done(function(){j._trigger('added',b,e)!==!1&&(k.autoUpload||e.autoUpload)&&e.autoUpload!==!1&&e.isValidated&&e.submit()})})},destroy:function(b,c){var d=jq(c.context.context).closest('.delete').siblings('.name').find('p').text().trim();d==''&&(d=jq(c.context.context).closest('.delete').siblings('.name').text().trim());var e=a(this).data('blueimpUIFileupload');c.url&&(a.ajax(c),e._adjustMaxNumberOfFiles(1)),e._transition(c.context).done(function(){a(this).remove(),e._trigger('destroyed',b,c)}),g.find('#project_files [value=\''+d+'\']').remove()}}),h.unbind('dragover').bind('dragover',function(a){var b=h.data('blueimpUIFileupload'),c=a.dataTransfer=a.originalEvent.dataTransfer;if(b._trigger('dragover',a)===!1)return!1;if(c){try{c.effectAllowed='copy'}catch(d){}c.dropEffect='copy'}a.preventDefault()}),h.bind('fileuploadadd',function(a,b){b.url=f+g.find('#proj_upload_fileset').val()}).bind('fileuploaddone',function(b,c){a.each(c.result,function(b,c){g.find('#proj_upload_fileset').val(c.fileset),g.find('#project_files').append(a('<option/>',{value:c.name,text:c.name,selected:!0}))})}),h.find('input').attr('title',T_('No files selected.'))}function c(a){return d.indexOf(a)>=0?!0:!1}window.locale={fileupload:{errors:{maxFileSize:T_('File is too big'),minFileSize:T_('File is too small'),acceptFileTypes:T_('Filetype not allowed'),maxNumberOfFiles:T_('Max number of files exceeded'),uploadedBytes:T_('Uploaded bytes exceed file size'),emptyResult:T_('Empty file upload result')},error:T_('Error'),start:T_('Start'),cancel:T_('Cancel'),destroy:T_('Delete')}};var d=[];return{init:b}}),define('username-suggester',['jquery-wrapper'],function(a){function b(a){typeof a!='undefined'&&(f=a?!0:!1)}function c(b){var c={user:{email:b}};return a.ajax({url:d,contentType:'application/json; charset=utf-8',type:'POST',data:JSON.stringify(c),dataType:'json',async:f}).success(function(a){a.status==='success'?e.resolve(a):e.reject(a)}),e.promise()}var d='/api/users/0.1/users/check/?recommend_name=true',e=a.Deferred(),f=!0;return{suggestUsername:c,init:b}}),function(a){a.fn.mailcheck=function(a,b){var c=['yahoo.com','google.com','hotmail.com','gmail.com','me.com','aol.com','mac.com','live.com','comcast.net','googlemail.com','msn.com','hotmail.co.uk','yahoo.co.uk'];if(typeof a=='object'&&b===undefined)a.domains=a.domains||c;else{var d=a;a=b,a.domains=d||c}var e=Kicksend.mailcheck.suggest(encodeURI(this.val()),a.domains);e?a.suggested&&a.suggested(this,e):a.empty&&a.empty(this)}}(jQuery);var Kicksend={mailcheck:{threshold:2,suggest:function(a,b){a=a.toLowerCase();var c=this.splitEmail(a),d=this.findClosestDomain(c.domain,b);return d?{address:c.address,domain:d,full:c.address+'@'+d}:!1},findClosestDomain:function(a,b){var c,d=99,e=null;for(var f=0;f<b.length;f++)c=this.stringDistance(a,b[f]),c<d&&(d=c,e=b[f]);return d<=this.threshold&&e!==null&&e!==a?e:!1},stringDistance:function(a,b){if(a==null||a.length===0)return b==null||b.length===0?0:b.length;if(b==null||b.length===0)return a.length;var c=0,d=0,e=0,f=0,g=5;while(c+d<a.length&&c+e<b.length){if(a[c+d]==b[c+e])f++;else{d=0,e=0;for(var h=0;h<g;h++){if(c+h<a.length&&a[c+h]==b[c]){d=h;break}if(c+h<b.length&&a[c]==b[c+h]){e=h;break}}}c++}return(a.length+b.length)/2-f},splitEmail:function(a){var b=a.split('@');return b.length<2?!1:{domain:b.pop(),address:b.join('@')}}}};define('jquery.mailcheck',function(){}),define('pinky/fixer',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=b.extend({},c.Events);return d.bind('fixer:fix',function(b){a(document).ready(function(){b?(a('#pinky-navigation-header .secondary-nav').show(),a('#user-nav').attr('data-state','show'),a('#user-login').attr('data-state','hidden')):(a('#pinky-navigation-header .secondary-nav').hide(),a('#user-nav').attr('data-state','hidden'),a('#user-login').attr('data-state','show')),typeof window.simple_header=='boolean'&&window.simple_header===!0&&a('html').addClass('is-simple-header'),a('#new-nav .primary-header').removeClass('is-loading')})}),{events:d}}),define('pinky/main-api',['jquery-wrapper','pinky/fixer'],function(a,b){window.flapi=function(a,b,c){this.status=a,this.data=b,this.reason=c},window.flapi.header={callbacks:[],reload:function(){var c=this;a(document).ready(function(){getUserIdfromCookie()||b.events.trigger('fixer:fix',!1);for(var a=0;a<c.callbacks.length;a++)typeof c.callbacks[a]=='function'&&c.callbacks[a]()})},registerCallback:function(b){typeof b=='function'?this.callbacks.push(b):a.isArray(b)&&a.merge(this.callbacks,b)}}}),define('users/user_auth_form',['jquery-wrapper','username-suggester','jquery.validate','jquery.mailcheck','pinky/main-api'],function(a,b){function c(b){a(document).ready(function(){a('.authTypeBtn').click(function(){a(this).siblings('.authTypeBtn').find('input').attr('checked',!1),a(this).find('input').attr('checked',!0),a('.authTypeBtn').removeClass('bold'),a(this).addClass('bold'),a(this).find('input').val()=='userTypeNew'?(jq('#userTypeReturningDiv').hide(),jq('#projectLoginUserCreate').show()):(jq('#userTypeReturningDiv').show(),jq('#projectLoginUserCreate').hide())}),a('#nonAuthForm input').focus(function(b){var c=b.currentTarget,d=a(c).closest(y.formStepSelector);d.length>0&&d.removeClass(y.successSelector+' '+y.errorSelector).find(y.formErrorSelector).html('')});var c={username:{required:'#userTypeReturning:checked'},passwd:{required:'#userTypeReturning:checked',verifyUser:!0},newusername:{required:'#userTypeNew:checked',rangelength:[n,o],checkNewUsernamePattern:!0},email:{required:'#userTypeNew:checked',email:!0},newuserpasswd:{required:'#userTypeNew:checked',usernamePasswordEqualCheck:'#new-username',checkPasswordPattern:!0},newuserpasswd1:{required:'#userTypeNew:checked',equalTo:'#nonAuthForm #passwd'}};typeof b=='object'&&(b.noConfirmPassword&&delete c.newuserpasswd1,b.useFLStyle&&(u=!0,y={authFormAlert:'.auth-form-alert',authFormError:'.auth-form-error',formStep:'form-step',formStepSelector:'.form-step',success:'is-valid',successSelector:'.is-valid',error:'is-invalid',warningOrange:'is-warning',errorSelector:'.is-invalid',warning:'is-help',warningSelector:'.is-help',formError:'form-error',formErrorSelector:'.form-error',formErrorText:'.error-text',formHelp:'form-help',formHelpSelector:'.form-help'}),b.isReturningUser&&(jq('#userTypeReturning').attr('checked','true'),jq('#userTypeReturningDiv').show(),jq('#projectLoginUserCreate').hide()),b.trackNewEmail&&jq('#new-email').on('emailValid',function(a){var b=typeof window.previousEmailValidated=='object'?window.previousEmailValidated:[],c=jq(this).val();b.indexOf(c)==-1&&(_lt.push(['emails_captured',{email:c}]),b.push(c)),window.previousEmailValidated=b}),typeof b.loginCallback=='function'&&(v=b.loginCallback),typeof b.verifyingCallback=='function'&&(w=b.verifyingCallback),typeof b.loginDoneCallback=='function'&&(x=b.loginDoneCallback));var d=a('#nonAuthForm');d.on('submit',function(a){a.preventDefault()}),d.validate({errorElement:'span',onsubmit:!1,onkeyup:!1,onfocusout:function(b,c){if(b.id==='post-proj-username'&&a('#post-proj-pwd').val()==='')return;a(b).valid()&&(b.id==='new-username'?h():b.id==='new-email'&&f())},errorPlacement:function(a,b){a.appendTo(b.siblings(y.formErrorSelector))},rules:c,messages:{newusername:{rangelength:T_('Username must be 3-16 characters.')},newuserpasswd:{rangelength:T_('Password must be 6-16 characters.')}},highlight:function(b,c,d){var e=a(b).closest(y.formStepSelector);e.removeClass(y.success),e.addClass(y.error)},unhighlight:function(b,c,d){b.type==='radio'?this.findByName(b.name).removeClass(c+' '+y.warningOrange):a(b).closest(y.formStepSelector).removeClass(c+' '+y.warningOrange)},success:function(b){a(b).closest(y.formStepSelector).removeClass(y.warning+' '+y.error)}}),a.validator.addMethod('verifyUser',function(a,b){return j(),!0}),a.validator.addMethod('checkNewUsernamePattern',function(b,c){var d=m;if(d.test(a(c).val()))return!0},T_('Username must be alphanumeric starting with a letter.')),a.validator.addMethod('checkPasswordPattern',function(b,c){var d=a(c).val(),e=d.match(/\d/g),f=d.match(/[a-z]/g),g=d.match(/[A-Z]/g),h=/^.{6,}$/i,i=h.test(d);if(i){var j=0;e&&(j+=2),f&&(j+=g?4:3),g&&(j+=f?4:3);if(j>4)return!0}},T_('Please enter a stronger password.')),a.validator.addMethod('usernamePasswordEqualCheck',function(b,c,d){var e=a(d);return e.length==0||e.val()==''?!0:b===e.val()?!1:!0},T_('Password must not be equal to username')),a('#post-proj-pwd').keypress(function(b){b.which==13&&a('#nonAuthForm').valid()}),r&&a('#normalLoginBtn').click(function(){a('#nonAuthForm').valid()}),jq('#nonAuthForm').bind('validateForm',k);var e=a('[name=userType]:checked');e.length>0&&e.click()})}function d(b,c){a.each(b,function(b,c){c?a('#'+b).removeClass('is-invalid').addClass('is-valid'):a('#'+b).removeClass('is-valid').addClass('is-invalid')}),c?(a('.password-suggestion-widget').removeClass('is-widget-hidden hide').addClass('is-visible'),a('.is-visible').fadeIn(function(){a(this).css('display','')})):setTimeout(function(){a('.password-suggestion-widget').removeClass('is-visible').addClass('is-widget-hidden'),a('.is-widget-hidden').fadeOut()},400)}function e(){b.init();var c=a('#new-email').val(),d='';b.suggestUsername(c).done(function(b){d=b.result.recommended_name,a(y.formErrorSelector).html(''),a('.username').removeClass('error'),a('#new-username').val(d),a('#new-username').focus()})}function f(){a.ajax({dataType:'json',url:'/ajax/check-email-exist.php?json=true&email='+encodeURIComponent(a('#new-email').val()),success:function(b){b.result=='success'?(e(),jq('#new-email').mailcheck({suggested:function(b,c){a('#new-email').closest(y.formStepSelector).removeClass(y.success).removeClass(y.error).addClass(y.warning);var d='<a class= "suggestedEmail" href="#"onclick="jQuery(\'#new-email\').val(jQuery(this).text()).trigger(\'focusout\');">'+c.address+'@'+c.domain+'</a>',e=T_('Did you mean <%=emailSuggestion%> ?',{emailSuggestion:d});a('#new-email').siblings(y.formHelpSelector).html(e)},empty:function(b){a('#new-email').closest(y.formStepSelector).removeClass(y.warning).removeClass(y.error).addClass(y.success),a('#new-email').siblings(y.formHelpSelector).html('')}}),jq('#new-email').trigger('emailValid')):(a('#new-email').closest(y.formStepSelector).removeClass(y.success).addClass(y.error),a('#new-email').siblings(y.formErrorSelector).html(T_('This email already exists.')))}})}function g(){jq('#userTypeReturning').attr('checked','true'),jq('#post-proj-username').val(jq('#new-email').val()),a('.authTypeBtn').trigger('click'),a('#post-proj-pwd').focus()}function h(){a.ajax({dataType:'json',url:'/ajax/check-username-exist.php?json=true&username='+a('#new-username').val(),success:function(b){var c=a('#new-username').closest(y.formStepSelector);c.removeClass(y.error).removeClass(y.success),b.result=='success'?(c.addClass(y.success),a('#post-proj-username').siblings(y.formErrorSelector).html(T_('Please check your login details.'))):(c.addClass(y.error),a('#new-username').siblings(y.formErrorSelector).html(T_('This username already exists.')))}})}function i(){a(document).ready(function(){a.ajax({type:'get',dataType:'json',url:ssl_base_url+'/ajax/postproject/userdetails.php',success:function(b){if(b.status!=='success')return;if(r)return user_id=b.user_id,a('#signup-modal').trigger('initialBid'),!0;q=!0,b.user_location!==!1&&typeof window.userLocation!='undefined'&&window.userLocation===!1&&(window.userLocation=b.user_location);var c='<img src="'+b.logo_url+'" alt="'+b.logoname+'" border=0 width=80 height=80 style="margin-right: 20px;">';a('#loggedinLogo').html(c),a('#loggedinFullname').html(b.name),a('#nonAuthForm').fadeOut('slow',function(){a('#headerTopLoggedIn').fadeIn('slow')}),a('#createform').removeClass('faded')}})})}function j(b){a('#post-proj-username, #post-proj-pwd').closest(y.formStepSelector).removeClass(y.success+' '+y.error),a('#post-proj-username').siblings(y.formErrorSelector).html(''),a(y.authFormAlert).html('').hide(),a(y.authFormError).html('').hide();var c=a('#post-proj-username').val(),d=a('#post-proj-pwd').val(),e=!1;if(c==''||d=='')return!1;r?(a('#normalLoginBtn').hide(),a('#normal-login-spiner').show()):(a('#returningForm').hide(),a('#returningAjax').show()),t&&t.abort(),w(),t=a.ajax({type:'post',data:{username:c,passwd:d,csrf_token:getCSRFToken()},dataType:'json',url:ssl_base_url+'/ajax/login.php',cache:!1,success:function(c){if(a('#headerTopLoggedIn').is(':visible'))return;if(c.status=='success')c.redirect&&(window.location.href=c.redirect),a('.terms-text, .contest_terms, .hireme-terms').hide(),x(!0),v&&typeof v=='function'?(q=!0,v()):i();else{a('#post-proj-username, #post-proj-pwd').closest(y.formStepSelector).removeClass(y.success).addClass(y.error);var d,e;c.code===5?(d=c.msg,e=y.authFormAlert):(d=T_('Please check your login details.'),e=y.authFormError),a(e).html(d).show(),x(!1),r?(a('#normalLoginBtn').show(),a('#normal-login-spiner').hide()):(a('#returningForm').show(),a('#returningAjax').hide())}if(typeof b=='function')return b(c)}})}function k(){return jq(this).data('isValid',jq('#nonAuthForm').valid()),jq(this).data('isValid')}function l(){return q}var m=/^[a-z][a-z0-9]{2,15}$/i,n=3,o=16,p=T_('Suggested username:&nbsp;'),q=!1,r=typeof signupModalRequired=='undefined'?!1:signupModalRequired,s=1,t=!1,u=!1,v=!1,w=function(){},x=function(){},y={authFormAlert:'.auth-form-alert',authFormError:'.auth-form-error',formStep:'control-group',formStepSelector:'.control-group',success:'success',successSelector:'.success',error:'error',errorSelector:'.error',warning:'warning',warningSelector:'.warning',formError:'help-inline',formErrorSelector:'.help-inline',formHelp:'help-inline',formHelpSelector:'.help-inline'};return{init:c,getUserDetails:i,validateForm:k,userReturned:l,verifyUser:j,isSignUp:function(){return a('#userTypeNew').is(':checked')},dom:{getForm:function(){return a('#nonAuthForm')},isFormVisible:function(){return!!a('#nonAuthForm:visible').length},getNewEmail:function(){return a('#new-email')},getNewUsername:function(){return a('#new-username')},getPassword:function(){return a('#passwd')},getConfirmPassword:function(){return a('#passwd1')}}}}),define('text!templates/quickhire/form.htm',[],function(){return'<div class="ModalHireMe quick-hire-form quick-hire-form-slim">\n    <div class="modal-header">\n      <a type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>\n      <h3 class="ModalHireMe-title modal-title"> <%- T_("Offer your project to <[= name ]>", { \'name\': publicName }) %> </h3>\n    </div>\n\n    <div class="modal-body">\n\n        <div id="headerTopLoggedIn" class="pp-box">\n            <div class="pad">\n            <div id="loggedinLogo" class="pull-left"></div>\n            <div id="loggedinWelcome">\n                <h1 style=\'font-size:24px; display:inline;\'><%= T_("Welcome back <span id=\'loggedinFullname\'></span>!") %></h1>\n                <p><%- T_("Describe your project below.") %></p>\n            </div>\n            <div class="clear"></div>\n            </div>\n        </div>\n\n        <% if (typeof show_hireme_promotion_copy !== \'undefined\' && show_hireme_promotion_copy) { %>\n            <div class="alert alert-info quick-hire-form-alert">\n                <%- T_("Hate fees going up? Hire <[= name ]> now, with 0% project commissions forever!", { \'name\': publicName }) %>\n            </div>\n        <% } %>\n\n        <% if (!thisUser)  { %>\n            <form id=\'nonAuthForm\' novalidate=\'novalidate\'>\n                <fieldset >\n                    <div id=\'returningForm\'>\n\n\n                            <legend><span class="fl-icon-user"></span> <%- T_("About You") %> </legend>\n\n                        <div class="control-group account-wrapper">\n\n                            <label class="radio-label"> <%- T_("I am a:") %> </label>\n\n                            <label class="radio authTypeBtn <% if (isNewUser) { %> bold <% } %>">\n                                <input\n                                    type="radio"\n                                    id="userTypeNew"\n                                    value="userTypeNew"\n                                    name="userType"\n                                    <% if (isNewUser || email != undefined) { %> checked=\'checked\' <% } %>>\n\n                                    <%- T_("New user") %>\n                            </label>\n\n                            <label class="radio authTypeBtn <% if (!isNewUser) { %> bold <% } %>">\n                                <input\n                                    type="radio"\n                                    id="userTypeReturning"\n                                    value="userTypeReturning"\n                                    name="userType"\n                                    <% if (!isNewUser) { %> checked=\'checked\' <% } %>>\n\n                                    <%- T_("Returning user") %>\n                            </label>\n\n                            <a class="btn fb gaf-fb-connected-button">\n                                <span class="fl-icon-facebook"></span> <%- T_("Connect with Facebook") %>\n                            </a>\n\n                        </div>\n\n                        <!-- FACEBOOK OAUTH SECTION -->\n                        <div id=\'fb_place_holder\'></div>\n\n                        <!-- SIGN-UP SECTION -->\n                        <div id=\'projectLoginUserCreate\' <% if (!isNewUser) { %> class=\'hide\' <% } %>>\n                            <div class="control-group">\n                                <div class="controls">\n                                  <input type="text" id=\'new-email\' name=\'email\' placeholder="<%- T_("Email") %> " value="<%- email %>">\n                                  <span class="help-block"></span>\n                                </div>\n                            </div>\n                            <div class="control-group">\n                                <div class="controls">\n                                    <input\n                                        type="text"\n                                        name="newusername"\n                                        maxlength="16"\n                                        id="new-username"\n                                        class="valid"\n                                        placeholder="<%- T_("Username") %> "\n                                    >\n                                  <span class="help-block"></span>\n                                </div>\n                            </div>\n                            <div class="control-group">\n                                <div class="controls">\n                                  <input type="password" id=\'passwd\' name=\'newuserpasswd\' placeholder="<%- T_("Password") %> ">\n                                  <span class="help-block"></span>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- LOGIN SECTION -->\n                        <div id=\'userTypeReturningDiv\' <% if (isNewUser) { %> class=\'hide\' <% } %>>\n                                <div class="control-group">\n                                    <div class="controls">\n                                      <input\n                                        type="text"\n                                        id="post-proj-username"\n                                        name=\'username\'\n                                        value=""\n                                        size="45"\n                                        placeholder="<%- T_("Username") %>">\n                                      <span class="help-block"></span>\n                                    </div>\n                                </div>\n                                <div class="control-group">\n                                    <div class="controls">\n                                      <input\n                                        type="password"\n                                        id="post-proj-pwd"\n                                        name=\'passwd\'\n                                        value=""\n                                        size="45"\n                                        placeholder="<%- T_("Password") %>">\n                                      <span class="help-block"></span>\n                                    </div>\n                                </div>\n                        </div>\n                    </div>\n                </fieldset>\n\n                <div id="returningAjax">\n                     <span>\n                         <img src="<%= cdn_url(\'/img/spinner-black.gif\') %>">\n                    </span>\n                </div>\n\n            </form>\n        <% } %>\n\n        <form class=\'quick-hire-post-form\' data-seller-id="<%- userID %>" data-seller-username="<%- username %>"\n            data-source-type="<%- sourceType %>" data-source-id="<%- sourceId %>">\n            <fieldset>\n\n                    <legend class="ModalHireMe-subTitle"><%- T_("Send a Private Message") %> </legend>\n\n                <div class="control-group">\n                    <div class="controls">\n                        <textarea\n                            rows="3"\n                            name=\'pmb\'\n                            class="ModalHireMe-input"\n                            placeholder="<%= T_("Private message..") %>"\n                            id=\'pmb\'><%- T_("Hi <[= name ]>, I noticed your profile and would like to offer you my project. We can discuss any details over chat.", { \'name\': publicName } ) %></textarea>\n                    <span class="help-block"></span>\n                    </div>\n                </div>\n            </fieldset>\n            <fieldset class="ModalHireMe-budgetForm">\n                <div class="control-group project-type-detail fixed-detail hourly-detail">\n                    <label class="ModalHireMe-subTitle control-label">\n                        <%- T_("Budget") %>\n                        <span class="normal">\n                            (<%- T_("Min") %>: <span class="min-budget-currency-sign">$</span><span class="min-budget-amount">10</span><span id="min-budget-per-hour" hidden><%- T_("/hr") %></span>)\n                        </span>\n                    </label>\n                    <div class="ModalHireMe-budgetForm-row">\n                        <input type=\'hidden\' class=\'project-duration\' value=\'6\'>\n                        <div class="ModalHireMe-budgetForm-inputs controls">\n                            <div class="input-prepend">\n                                <span class="add-on add-on--rightRoundedCorner budget-currency-sign">$</span><input\n                                    type="number"\n                                    name=\'budget\'\n                                    class="ModalHireMe-budgetForm-amount budget-amount"\n                                    min="<%- default_min %>"\n                                    fixed-value="<%- min_fixed_budget %>"\n                                    hourly-value="<%- hourlyrate %>"\n                                    value="<%- min_fixed_budget %>">\n                            </div>\n                            <select id="modalhireme-fixed-multifield-currency" name=\'currency\' class="ModalHireMe-budgetForm-currency project-currency">\n                                <% _.each(budgets, function(budget, index) { %>\n                                    <option\n                                        value="<%- budget.vars.currency.id %>"\n                                        title="<%= budget.vars.currency.sign %>"\n                                        min-fixed-budget="<%- budget.vars.budgets.fixed[0].min_sum %>"\n                                        min-hourly-budget="<%- budget.vars.budgets.hourly[0].min_sum %>"\n                                        exchange-rate="<%- budget.vars.currency.exchangerate %>"\n                                        <% if (index == 0) { %> selected="selected" <% } %>>\n                                        <%- budget.vars.currency.code %>\n                                    </option>\n                                <% }) %>\n                            </select>\n                        </div>\n                        <div class="ModalHireMe-budgetForm-helper help-block"></div>\n                    </div>\n                </div>\n\n                <div class="ModalHireMe-budgetForm-row control-group">\n                    <div class="ModalHireMe-budgetForm-inputs">\n                        <select id=\'project-type\' class="ModalHireMe-budgetForm-type budget-type budget-period project-type">\n                            <option value=\'fixed\'> <%- T_("Fixed Price") %> </option>\n                            <option value=\'hourly\'> <%- T_("Per Hour") %> </option>\n                        </select>\n                        <div class="controls fixed-detail" style=\'display:inline-block\'>\n                            <div class="ModalHireMe-budgetForm-rateDuration input-append" style=\'display:inline-block;\'>\n                                <%= T_("\n                                <input\n                                    type=\'number\'\n                                    name=\'fixedPeriod\'\n                                    class=\'ModalHireMe-budgetForm-rateDuration-input project-period\'\n                                    min=\'1\'\n                                    value=<[-days_duration]>\n                                ><span class=\'ModalHireMe-budgetForm-rateDuration-addOn add-on\'>Days</span>\n                                 ",{days_duration:days_duration}) %>\n                            </div>\n                        </div>\n                        <div class="controls hourly-detail" style=\'display:none\'>\n                            <div class="ModalHireMe-budgetForm-rateDuration input-append">\n                                <%= T_("\n                                <span>in</span>\n                                <input\n                                    type=\'number\'\n                                    name=\'commitment\'\n                                    class=\'ModalHireMe-budgetForm-rateDuration-input project-workload\'\n                                    min=\'1\'\n                                    value=\'10\'>\n                                </input>\n                                <span class=\'ModalHireMe-budgetForm-rateDuration-addOn add-on\'>Hrs/Week</span>\n                                ") %>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="ModalHireMe-budgetForm-helper help-block"></div>\n                </div>\n\n            </fieldset>\n            <fieldset>\n                <div class="control-group">\n                    <div class="controls">\n                        <label class="checkbox">\n                            <input\n                                type="checkbox"\n                                id=\'autoOpenToBidding\'\n                                name=\'autoOpenToBidding\'/>\n\n                                <%- T_("Receive bids from freelancers if my project is not accepted") %>\n                                <span\n                                    class="fl-icon-question-sign quick-hire-post-form-tip"\n                                    data-title="<%-T_("Get free bids")%>"\n                                    data-content="<%- T_("Receive bids from freelancers if <[=name]> does not accept. Your project description will be made public when this occurs.",{\'name\': publicName}) %>">\n                                </span>\n\n                        </label>\n                    </div>\n                </div>\n            </fieldset>\n            <fieldset class="HireMeFormModal-bodyCollapse">\n\n                <legend class="ModalHireMe-subTitle"><%- T_("Your Project Details") %></legend>\n\n                <div class="control-group">\n                    <div class="controls">\n                      <input type="text"\n                             name=\'project_name\'\n                             class=\'project-name ModalHireMe-input\'\n                             placeholder="<%- T_("Project title") %> "\n                             value="<%- project_title %>">\n                      <span class="help-block"></span>\n                    </div>\n                </div>\n                <div class="control-group">\n                    <div class="controls">\n                      <textarea\n                          rows="3"\n                          name=\'projectDescr\'\n                          class=\'project-descr ModalHireMe-input\'\n                          placeholder="<%- T_("Describe what you need in detail...") %> "><%- project_description %></textarea>\n                      <span class="help-block"></span>\n                    </div>\n\n                    <input type="hidden" class="ModalHireMe-input" id="proj_upload_fileset" name="fileset" value="">\n                    <select class="uploadFileSelectList" id="project_files" name="project_files[]" multiple="multiple" size="5" style="display:none;">\n                    </select>\n\n                    <!-- FILE UPLOAD SECTION -->\n                    <div id="fileupload">\n                        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                        <div class="fileupload-buttonbar">\n                            <div id="fileUploadWell">\n                                <div class="ModalHireMe-addFiles form-subbox">\n                                <!-- The fileinput-button span is used to style the file input field as button -->\n                                <span class="btn fileinput-button">\n                                    <i class="fl-icon-plus"></i>\n                                    <span><%- T_("Add files...") %></span>\n                                    <input type="file" name="upload[]" multiple="">\n                                </span>\n                                <p class="fileupload-text" id="fileuploadHintText"><%- T_("Drag and Drop multiple files here.") %></p>\n                                </div>\n                                <span class="control-group error smaller">\n                                    <span class="help-block\n                                    fileUploadError\n                                    filename-error">\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                        <div class="fileupload-loading"></div>\n                        <br>\n                        <!-- The table listing the files available for upload/download -->\n                        <table role="presentation" class="table table-striped regular">\n                            <tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery">\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </fieldset>\n            <p class="ModalHireMe-terms hireme-terms">\n                <%= T_("By clicking \'Hire Now\', you are indicating that you have read and agree to the <a href=\'/about/terms\' class=\'site_plainterms\'>Terms & Conditions</a> and <a href=\'about/privacy\' class=\'site_privacy\'>Privacy Policy</a>") %>\n            </p>\n        </form>\n        <div id="quickhire-modal-generic-error" class="quickhire-modal-generic-error alert alert-error">\n        </div>\n    </div>\n    <div class="ModalHireMe-footer modal-footer">\n        <a class="btn btn-info has-depth btn-quickhire"\n            hireme-label="Success"><%- T_("Hire Now!") %></a>\n        <img src="<%= cdn_url(\'/img/ajax-loader.gif\') %>" class="loading-img" style="display:none"/>\n    </div>\n</div>\n\n<!-- The template to display files available for upload -->\n<script id="quickhire-template-upload" type="text/x-tmpl">\n{% for (var i=0, file; file=o.files[i]; i++) { %}\n    <tr class="template-upload fade">\n        <td class="preview"><span class="fade"></span></td>\n        <td class="name" title="{%=file.name%}">\n            <span class="filename-span">{%=file.name%}</span>\n        </td>\n        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>\n        {% if (file.error) { %}\n            <td class="error" colspan="2">\n                <span class="label label-important">{%=locale.fileupload.error%}</span>\n                {%=locale.fileupload.errors[file.error] || file.error%}</td>\n        {% } else if (o.files.valid && !i) { %}\n            <td>\n                <div class="progress progress-success progress-striped active"\n                role="progressbar" aria-valuemin="0" aria-valuemax="100"\n                aria-valuenow="0">\n                    <div class="bar fileupload-progress-bar"></div>\n                </div>\n            </td>\n            <td class="start">{% if (!o.options.autoUpload) { %}\n                <button class="btn btn-primary">\n                    <i class="icon-upload icon-white"></i>\n                    <span>{%=locale.fileupload.start%}</span>\n                </button>\n            {% } %}</td>\n        {% } else { %}\n            <td colspan="2"></td>\n        {% } %}\n        <td class="cancel">{% if (!i) { %}\n            <button class="btn btn-primary">\n                <i class="icon-ban-circle icon-white"></i>\n                <span>{%=locale.fileupload.cancel%}</span>\n            </button>\n        {% } %}</td>\n    </tr>\n{% } %}\n</script>\n<!-- The template to display files available for download -->\n<script id="quickhire-template-download" type="text/x-tmpl">\n{% for (var i=0, file; file=o.files[i]; i++) { %}\n    <tr class="template-download fade">\n        {% if (file.error) { %}\n            <td></td>\n            <td class="name" title="{%=file.name%}">\n                <span class="filename-span">{%=file.name%}</span>\n            </td>\n            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>\n            <td class="error" colspan="2">\n                <span class="label label-important">{%=locale.fileupload.error%}</span>\n                {%=locale.fileupload.errors[file.error] || file.error%}\n            </td>\n        {% } else { %}\n            <td class="preview">{% if (file.thumbnail_url) { %}\n                <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>\n            {% } %}</td>\n            <td class="name">\n                <p href="{%=file.url%}" title="{%=file.name%}"\n                rel="{%=file.thumbnail_url&&\'gallery\'%}"\n                download="{%=file.name%}">\n                    <span class="filename-span">{%=file.name%}</span>\n                </p>\n            </td>\n            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>\n            <td colspan="2"></td>\n        {% } %}\n        <td class="delete">\n            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">\n                <i class="icon-trash icon-white"></i>\n                <span>{%=locale.fileupload.destroy%}</span>\n            </button>\n        </td>\n    </tr>\n{% } %}\n</script>\n'}),define('text!templates/quickhire/inline-form.htm',[],function(){return'<div class="InlineHireMeForm">\n    <div id="hireme-form-section">\n        <form class="quick-hire-post-form fl-form" data-seller-id="<%- userID %>" data-seller-username="<%- username %>"\n              data-source-type="<%- sourceType %>" data-source-id="<%- sourceId %>">\n            <div class="control-group form-step">\n                <h2 class="InlineHireMeForm-heading"><%- T_("Send a Private Message") %></h2>\n                <label class="InlineHireMeForm-sectionHeading InlineHireMeForm-sectionHeading--large" for="pmb"><%- T_("Contact <[= username ]> About Your Work Opportunity", { \'username\': (typeof(publicName) !== \'undefined\') ? publicName : username }) %></label>\n                <textarea class="default-textarea"\n                        rows="3"\n                        name=\'pmb\'\n                        placeholder="<%= T_("Private message..") %>"\n                        id=\'pmb\'><%- T_("Hi <[= username ]>, I noticed your profile and would like to offer you my project. We can discuss any details over chat.", { \'username\': (typeof(publicName) !== \'undefined\') ? publicName : username } ) %></textarea>\n                <span class="help-block"></span>\n            </div>\n            <div class="control-group project-type-detail fixed-detail hourly-detail form-step">\n                <h3 class="InlineHireMeForm-sectionHeading"><%- T_("My Budget") %><span> (<%- T_("Minimum") %>: <span class="min-budget-currency-sign">$</span><span class="min-budget-amount">10</span><span id="min-budget-per-hour" hidden><%- T_("/hr") %></span>)</span></h3>\n                <div class="InlineHireMeForm-budgetType">\n                    <div class="InlineHireMeForm-radioGroup Radio">\n                        <input id="modalhireme-set-fixed-price" type="radio" name="budget_period" value="fixed" class="Radio-input" type="radio" name="radio" checked data-target="modalhireme-budget-type-toggle">\n                        <label class="Radio-label" for="modalhireme-set-fixed-price" >\n                            <%- T_("Set Fixed Price") %>\n                        </label>\n                        <input id="modalhireme-set-hourely-rate" type="radio" name="budget_period" value="hourly" class="Radio-input" type="radio" name="radio" data-target="modalhireme-budget-type-toggle">\n                        <label class="Radio-label" for="modalhireme-set-hourely-rate" >\n                            <%- T_("Set An Hourly Rate") %>\n                        </label>\n                    </div>\n                </div>\n                <input type="hidden" class="project-duration" value="6">\n                <div class="InlineHireMeForm-multifield">\n                    <div class="InlineHireMeForm-multifield-item">\n                        <label for="modalhireme-fixed-multifield-amount" class="is-accessibly-hidden"><%- T_("Fixed budget amount") %></label>\n                        <span class="input-group">\n                            <span class="add-on add-on--rightRoundedCorner budget-currency-sign">$</span>\n                            <input id="modalhireme-fixed-multifield-amount"\n                                   class="budget-amount default-input"\n                                   type="number"\n                                   name="budget"\n                                   min="<%- default_min %>"\n                                   fixed-value="<%- min_fixed_budget %>"\n                                   hourly-value="<%- hourlyrate %>"\n                                   value="<%- min_fixed_budget %>">\n                        </span>\n                    </div>\n                    <label for="modalhireme-fixed-multifield-currency" class="is-accessibly-hidden"><%- T_("Fixed budget currency") %></label>\n                    <select id="modalhireme-fixed-multifield-currency" class="InlineHireMeForm-multifield-item InlineHireMeForm-multifield-item--currency project-currency default-input" name="currency">\n                        <% _.each(budgets, function(budget, index) { %>\n                        <option\n                                value="<%- budget.vars.currency.id %>"\n                                title="<%= budget.vars.currency.sign %>"\n                                min-fixed-budget="<%- budget.vars.budgets.fixed[0].min_sum %>"\n                                min-hourly-budget="<%- budget.vars.budgets.hourly[0].min_sum %>"\n                                exchange-rate="<%- budget.vars.currency.exchangerate %>"\n                        <% if (index === 0) { %> selected="selected" <% } %>>\n                        <%- budget.vars.currency.code %>\n                        </option>\n                        <% }) %>\n                    </select>\n                    <div class="InlineHireMeForm-multifield-item InlineHireMeForm-multifield-item--period fixed-detail" style="display:inline-block">\n                        <div class="input-group" style="display:inline-block;">\n                            <input\n                                    type="hidden"\n                                    name="fixedPeriod"\n                                    class="InlineHireMeForm-multifield-item-periodInput project-period"\n                                    min="1"\n                                    value="<%- days_duration %>">\n                        </div>\n                    </div>\n                    <div class="InlineHireMeForm-multifield-item InlineHireMeForm-multifield-item--period hourly-detail" style="display:none">\n                        <div class="input-group">\n                            <input\n                                    type="number"\n                                    name="commitment"\n                                    class="InlineHireMeForm-multifield-item-periodInput project-workload default-input"\n                                    min="1"\n                                    value="10">\n                            <span class="add-on"><%= T_("Hrs/Week") %></span>\n                        </div>\n                    </div>\n                </div>\n                <div class="InlineHireMeForm-formHelper help-block"></div>\n            </div>\n            <div class="control-group form-step">\n                <label class="InlineHireMeForm-checkbox">\n                    <input type="checkbox"\n                           id="autoOpenToBidding"\n                           class="InlineHireMeForm-checkbox-input"\n                           name="autoOpenToBidding"/>\n                        <div><%- T_("Please send me bids from other freelancers if my project is not accepted.") %></div>\n                </label>\n            </div>\n            <div id="modalhireme-project-details" class="InlineHireMeForm-projectDetails is-hidden">\n                <h3 class="InlineHireMeForm-sectionHeading"><%- T_("Your Project Details") %></h3>\n                <div class="control-group">\n                    <div class="InlineHireMeForm-projectDetails-item">\n                        <label for="modalhireme-project-details-title" class="is-accessibly-hidden"><%- T_("Project title") %></label>\n                        <input id="modalhireme-project-details-title" type="text"\n                               name="project_name"\n                               class="project-name default-input"\n                               placeholder="<%- T_("Project title") %> "\n                               value="<%- project_title %>">\n                    </div>\n                    <span class="help-block"></span>\n                </div>\n                <div class="control-group">\n                    <div class="InlineHireMeForm-projectDetails-item">\n                        <label for="modalhireme-project-details-description" class="is-accessibly-hidden"><%- T_("Project description") %></label>\n                        <textarea id="modalhireme-project-details-description" rows="3"\n                                  name="projectDescr"\n                                  class="project-descr default-textarea"\n                                  placeholder="<%- T_("Describe what you need in detail...") %> "><%- project_description %></textarea>\n                    </div>\n                    <span class="help-block"></span>\n                    <input type="hidden" id="proj_upload_fileset" name="fileset" value="">\n                    <select class="uploadFileSelectList" id="project_files" name="project_files[]" multiple="multiple" size="5" style="display:none;">\n                    </select>\n                    <div id="fileupload">\n                        <div class="FileUploader fileupload-buttonbar">\n                            <div class="FileUploader-dropArea">\n                                <label class="FileUploader-button btn btn-plain-alt fileinput-button">\n                                    <%- T_("Browse your files") %>\n                                    <input type="file" name="upload[]" multiple="">\n                                </label>\n                                <div class="FileUploader-instructionText"><%- T_("or drag and drop files here") %></div>\n                                <div class="FileUploader-draggingText"><%- T_("Drop your files here") %></div>\n                            </div>\n                            <div class="FileUploader-files">\n                                <ul class="FileUploader-files-list files" data-toggle="modal-gallery" data-target="#modal-gallery">\n                                </ul>\n                            </div>\n                        </div>\n                        <span class="control-group error smaller">\n                            <span class="help-block\n                            fileUploadError\n                            filename-error">\n                            </span>\n                        </span>\n                        <div class="fileupload-loading"></div>\n                    </div>\n                </div>\n            </div>\n        </form>\n        <div id="quickhire-modal-generic-error" class="quickhire-modal-generic-error alert alert-error" style="display: none">\n        </div>\n        <span class="btn-dropdown hireme-btn-group InlineHireMeForm-hireButton-group" id="inline-form-button-group">\n            <button id="submit-feedback" class="InlineHireMeForm-hireButton btn btn-quickhire btn-info btn-large" hireme-event="ShowModal" hireme-label="OneClickHireMe">\n                    <%- T_("Hire <[= username ]>", { \'username\': (typeof(publicName) !== \'undefined\') ? publicName : username }) %>\n            </button>\n\n            <span class="btn-dropdown-options">\n                <a id="profile-invite-btn" class="signup-modal-trigger" data-target="#invite-project-modal" data-toggle="modal">\n                    <%- T_("Invite to project") %>\n                </a>\n                <a id="follow-trigger"\n                   class="signup-modal-trigger profile-follow-trigger\n                    <% if (!profileData.can_follow_employer) { %>is-hidden<% } %>"\n                   data-action="<% if (profileData.isWatched) { %>off<% }  else { %>on<% } %>"\n                   data-user-id="<%= profileData.about.id %>">\n                    <span class="follow-text"><%- T_("Follow") %></span>\n                    <span class="unfollow-text"><%- T_("Unfollow") %></span>\n                </a>\n\n                <a  href="#" class="signup-modal-trigger js-recommend-link"\n                    data-target="recommend-btn"\n                    data-uid="<%= profileData.about.id %>"\n                    data-tooltip-size="large"\n                    data-tooltip-state="error"\n                    data-placement="bottom">\n                    <%- T_("Recommend") %>\n                </a>\n                <% if (!showNewInfractionModal) { %>\n                  <a id="profile-report-violations-link"\n                     class="signup-modal-trigger\n                      profile-report-violations-link" href="#">\n                      <%- T_("Report violation") %>\n                  </a>\n                <% } %>\n            </span>\n            <button class="btn btn-dropdown-trigger btn-info btn-large"></button>\n        </span>\n    </div>\n\n\n    <div id="hireme-rookie-conversion-section" class="InlineRookieConversion is-hidden">\n        <div class="InlineRookieConversion-contentContainer">\n            <span id="hireme-rookie-conversion-close" class="Icon InlineRookieConversion-closeIcon">\n                <%= loadSvg(\'ui-close\') %>\n            </span>\n            <p class="InlineRookieConversion-heading"><%- T_("Would you like to Post a Project instead?") %></p>\n            <p><%- T_("Post a public project and receive bids from multiple freelancers, helping you find the perfect freelancer for your project.")  %></p>\n                <div class="InlineRookieConversion-buttonGroup">\n                    <button id="hireme-post-project" class="InlineHireMeForm-hireButton InlineRookieConversion-buttonContainer-postProjectButton btn btn-primary btn-small" hireme-event="PostProject" hireme-label="HiremePostProject">\n                        <%- T_("Post a project") %>\n                    </button>\n                    <button id="hireme-continue" class="InlineHireMeForm-hireButton btn btn-plain-alt btn-small" hireme-event="Continue" hireme-label="HiremeContinue">\n                        <%- T_("Continue") %>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <div class="Loader Loader--full loading-img" style="display:none"></div>\n\n    <div id="hireme-disclaimer-section" class="InlineHireMeForm-disclaimer">\n        <%= T_("By clicking the button, you have read and agree to our <a href=\'\' class=\'site_plainterms\'>Terms & Conditions</a> and <a href=\'\' class=\'site_privacy\'>Privacy Policy</a>.") %>\n    </div>\n</div>\n<!-- The template to display files available for upload -->\n<script id="quickhire-template-upload" type="text/x-tmpl">\n    {% for (var i=0, file; file=o.files[i]; i++) { %}\n        {% var errors = <%= JSON.stringify(locale.fileupload.errors) %>; %}\n        <li class="FileUploader-files-list-item">\n            <div class="FileUploader-file">\n                <div class="FileUploader-file-details">\n                    <div class="FileUploader-file-preview"><span class="preview"></span></div>\n                    <div class="FileUploader-file-name">{%=file.name%}</div>\n                    <div class="FileUploader-file-size">{%=o.formatFileSize(file.size)%}</div>\n                    {% if (file.error) { %}\n                    <div class="FileUploader-file-message">\n                        <span class="label label-important"><%- locale.fileupload.error %></span>\n                        {%=errors[file.error] || file.error%}\n                    </div>\n                    <div class="FileUploader-file-controls">\n                        <button class="btn btn-danger cancel">\n                            <i class="icon-trash icon-white"></i>\n                            <span><%- locale.fileupload.destroy %></span>\n                        </button>\n                    </div>\n                    {% } else if (o.files.valid && !i) { %}\n                    <div class="FileUploader-file-controls">\n                        {% if (!o.options.autoUpload) { %}\n                        <button class="btn btn-primary start">\n                            <span><%- locale.fileupload.start %></span>\n                        </button>\n                        {% } %}\n                        {% if (!i) { %}\n                        <button class="btn btn-primary cancel">\n                            <span><%- locale.fileupload.cancel %></span>\n                        </button>\n                        {% } %}\n                    </div>\n                    {% } else { %}\n                    <div class="FileUploader-file-controls">\n                        {% if (!i) { %}\n                        <button class="btn btn-primary cancel">\n                            <span><%- locale.fileupload.cancel %></span>\n                        </button>\n                        {% } %}\n                    </div>\n                    {% } %}\n                </div>\n                {% if (o.files.valid && !i) { %}\n                <div class="FileUploader-file-progress">\n                    <div class="ProgressBar progress progress-success progress-striped active"\n                    role="progressbar" aria-valuemin="0" aria-valuemax="100"\n                    aria-valuenow="0">\n                        <div class="ProgressBar-bar">\n                            <div class="ProgressBar-bar-value bar fileupload-progress-bar" style="width: 50%"></div>\n                        </div>\n                    </div>\n                </div>\n                {% } %}\n            </div>\n        </li>\n    {% } %}\n    </script>\n<!-- The template to display files available for download -->\n<script id="quickhire-template-download" type="text/x-tmpl">\n    {% for (var i=0, file; file=o.files[i]; i++) { %}\n        {% var errors = <%= JSON.stringify(locale.fileupload.errors) %>; %}\n        <li class="FileUploader-files-list-item">\n            <div class="FileUploader-file">\n                <div class="FileUploader-file-details">\n                    {% if (file.error) { %}\n                    <div class="FileUploader-file-name">{%=file.name%}</div>\n                    <div class="FileUploader-file-size">{%=o.formatFileSize(file.size)%}</div>\n                    <div class="FileUploader-file-message">\n                        <span class="label label-important"><%- locale.fileupload.error %></span>\n                        {%=errors[file.error] || file.error%}\n                    </div>\n                    {% } else { %}\n                    {% if (file.thumbnail_url) { %}\n                    <div class="FileUploader-file-preview preview">\n                        <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>\n                    </div>\n                    {% } %}\n                    <div class="FileUploader-file-name">\n                        <a href="{%=file.url%}" title="{%=file.name%}"\n                          rel="{%=file.thumbnail_url&&\'gallery\'%}"\n                          download="{%=file.name%}">\n                            {%=file.name%}\n                        </a>\n                    </div>\n                    <div class="FileUploader-file-size">{%=o.formatFileSize(file.size)%}</div>\n                    {% } %}\n                    <div class="FileUploader-file-controls">\n                        <button class="btn btn-danger delete" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"><%- locale.fileupload.cancel %></button>\n                    </div>\n                </div>\n            </div>\n        </li>\n    {% } %}\n    </script>\n</div>\n'}),define('text!templates/quickhire/milestone-form.htm',[],function(){return'<div class="milestone-modal is-milestone-hireme modal" aria-hidden="false" data-keyboard="false" data-backdrop="static">\n<div class="modal-header">\n    <a class="close close-milestone" data-dismiss="modal"\n        onclick="_t.push([\'user_action\', {\n                \'section\': \'HireMe\',\n                \'subsection\': \'CreateMilestoneModal\',\n                \'label\': \'Close\'\n            }]);"\n    >&times;</a>\n    <h3 ><%- T_("Create a Milestone payment") %>\n    <span class="project-descr-tip quick-hire-post-form-tip" data-title="<%- T_("Milestone Payment")%>" id="milestones-popover"\n        data-content="<%- T_("The Milestone Payment System is our protected payments feature.\n        It allows <[- username]> to start work, knowing funds are in the system, and gives you peace of mind because you only release the funds\n        once you are 100% satisfied. <br><br>We recommend you divide your project into smaller tasks (milestones) and pay <[- username]>\n        in installments, as each milestone is completed. <br><br>In the unlikely event an issue occurs in your project, any milestones payments\n        are protected by our Dispute Resolution System.", {\'username\': username}) %>">\n        <img src="<%= cdn_url(\'/build/css/images/pages/post-project/question.png\') %>">\n    </span>\n    </h3>\n</div>\n<div class="milestone-modal-description">\n    <p class="milestone-modal-description-content">\n        <% if (typeof abTestMilestoneMessage !== \'undefined\' && abTestMilestoneMessage) { %>\n            <%= T_("Projects with an initial Milestone Payment are <strong>3 times more successful!</strong>\n                Your milestone payment will be automatically refunded if <[- username ]> does not accept the project.", {\'username\': username})%>\n        <% } else { %>\n            <%= T_("Freelancers are <strong>150% more likely to accept</strong> your project when a Milestone payment has been created.\n                Your milestone payment will be automatically refunded if <[- username ]> does not accept the project.", {\'username\': username})%>\n        <% } %>\n    </p>\n</div>\n<div class="modal-body">\n    <form class="quick-hire-milestone-form milestone-modal-form fl-form">\n        <fieldset>\n            <ol>\n                <li class="milestone-modal-form-amount control-group form-step">\n                    <label><%- T_("Milestone Amount") %></label>\n                    <span class="input-group">\n                        <span class="milestone-currency-sign add-on"><%= quickHireReturnData.currency_sign %></span>\n                        <input name="milestoneAmount" class="milestone-amount default-input" type="text" placeholder="" value="<%-budget%>" maxlength="8">\n                    </span>\n                    <div class="form-error help-block"></div>\n                </li>\n                <li class="milestone-modal-form-description control-group form-step">\n                    <label><%- T_("Milestone Description") %></label>\n                    <input type="text" name="milestoneDescr" class="milestone-descr default-input"\n                        placeholder="<%- T_("Enter your milestone description here") %>" value="<%- T_("Initial milestone") %>">\n                    <div class="form-error help-block"></div>\n                </li>\n            </ol>\n        </fieldset>\n    </form>\n    <div id="milestone-modal-upgrade-section" class="is-hidden"></div>\n    <div class="milestone-request-total milestone-modal-total">\n        <%- T_("Total:") %>\n        <%- quickHireReturnData.currency_sign %>\n        <span class=\'total-amount\'>\n        </span>\n    </div>\n    <div class="milestone-modal-payment milestone-modal-summary">\n        <div id="payment-sources-container">\n        </div>\n    </div>\n    <div id="milestone-error" class="milestone-modal-alert alert alert-error"></div>\n    <div class="quickhire-modal-generic-warning milestone-modal-alert alert alert-warning"></div>\n</div>\n<div class="modal-footer">\n    <% if (typeof abTestSkipMilestone !== \'undefined\' && abTestSkipMilestone) { %>\n        <button type="button" class="btn btn-quickhire-dismiss-modal" data-dismiss="modal"\n            onclick="_t.push([\'user_action\', {\n                    \'section\': \'HireMe\',\n                    \'subsection\': \'CreateMilestoneModal\',\n                    \'label\': \'NotNow\'\n                }]);"\n        ><%- T_("Not Now") %></button>\n    <% } %>\n    <button type="button" class="btn btn-info btn-quickhire-create-milestone"\n        onclick="_t.push([\'user_action\', {\n                \'section\': \'CreateMilestoneModal\',\n                \'subsection\': \'CreateMilestoneModalHireMe\',\n                \'name\': \'CreateMilestone\',\n                \'label\': \'Proceed\',\n                \'value\': <%- quickHireReturnData.project_id %> +\',\'+ <%- quickHireReturnData.seller_id %>\n            }]);"\n    ><%- T_("Proceed to Payment") %></button>\n    <img src="<%= cdn_url(\'/img/ajax-loader.gif\') %>" class="loading-img margin-r20" style="display:none"/>\n    <a type="button" class="btn btn-quickhire-no-milestone is-hidden" href="<%- quickHireReturnData.url %>"><%- T_("No Thanks") %></a>\n</div>\n</div>\n'}),define('text!templates/quickhire/container.htm',[],function(){return'<div class="pinky-template">\n  <div class="quickhire-legacy">\n    <div id="modal-hire-me" class="quick-hire-form-container modal hide absolute">\n    </div>\n  </div>\n</div>\n'}),define('quickhire/module-quickhire',['jquery-wrapper','jquery.validate','project/postproject-fileupload','hireme/hiremeABTest','users/user_auth_form','project/modules/module-award-upgrades','payments/module-payments-source','membership/abtest-api','text!templates/quickhire/form.htm','text!templates/quickhire/inline-form.htm','text!templates/quickhire/milestone-form.htm','text!templates/quickhire/container.htm'],function(a,b,c,d,e,f,g,h,i,j,k,l){function D(a){return a==='directoryInline4'?'Directory':a}function F(){var a=r.find('#quickhire-modal-milestone-generic-error, #quickhire-modal-generic-error, #milestone-error');return a}function G(){return r.find('.quickhire-modal-generic-warning')}function H(a){var b=F();b.text(a),b.show()}function I(a){var b=G();b.text(a),b.show()}function J(){var a=F();a.hide()}function K(a,b,c){var d=Math.round(a*b/c).toFixed(0),e=1;return d>1e4?e=1e3:d>1e3?e=100:d>100&&(e=10),d=Math.round(d/e)*e,d}function L(a){_lt.push(['user_action',{section:'inline-hireme',subsection:'rookie-conversion',label:a,project_id:p.project_id}])}function M(a){C=!!a}function N(b){if(C){L('do not attempt to convert'),U(b);return}if(!employerABTestData||!employerABTestData.convertRookieHiremeExperiment){L('ABTest not defined'),U(b);return}h.testSubjectActivate(employerABTestData.convertRookieHiremeExperiment.name,employerABTestData.convertRookieHiremeExperiment.variation);if(employerABTestData&&employerABTestData.convertRookieHiremeExperiment&&employerABTestData.convertRookieHiremeExperiment.variation===employerABTestData.convertRookieHiremeExperiment.test){var c=a('#hireme-form-section'),d=a('#hireme-disclaimer-section'),e=a('#hireme-rookie-conversion-section');e.off('click','#hireme-rookie-conversion-close').on('click','#hireme-rookie-conversion-close',{trackRookieConversionEvent:L,setDoNotAttemptToConvertRookie:M},function(a){a.data.setDoNotAttemptToConvertRookie(!0),a.data.trackRookieConversionEvent('close'),c.removeClass('is-hidden'),d.removeClass('is-hidden'),e.addClass('is-hidden')}).off('click','#hireme-post-project').on('click','#hireme-post-project',{trackRookieConversionEvent:L},function(a){a.data.trackRookieConversionEvent('post'),window.location.pathname='/post-project'}).off('click','#hireme-continue').on('click','#hireme-continue',{form:b,submitForm:U,validateForm:X,conversionSection:e,trackRookieConversionEvent:L},function(a){a.data.trackRookieConversionEvent('continue'),a.data.validateForm(a.data.form)?(e.addClass('is-hidden'),a.data.submitForm(a.data.form)):a.data.trackRookieConversionEvent('continue-invalid')}),c.addClass('is-hidden'),d.addClass('is-hidden'),e.removeClass('is-hidden')}else U(b)}function O(a){if(A===a.val())return;var b=r.find('.budget-amount'),c=r.find('#modalhireme-fixed-multifield-currency option[value="'+A+'"]'),d=c.attr('exchange-rate'),e=a.attr('exchange-rate'),f=b.val(),g=K(f,d,e);b.val(g),A=a.val();var h=b.attr('hourly-value'),i=b.attr('fixed-value');if(h!==i){var j=K(i,d,e),k=K(h,d,e);b.attr('fixed-value',j),b.attr('hourly-value',k)}}function P(a){return a>=1?1:Math.floor(1/a)}function Q(a){s===!1&&(s=r.find('#modalhireme-fixed-multifield-currency option:selected')),O(s);var b=a.triggeringElement.closest('.project-type-detail'),c=s.attr('title'),d=s.attr('min-'+t.val()+'-budget');t.val()==='hourly'&&(d=P(s.attr('exchange-rate')),s.attr('min-hourly-budget',d)),b.find('.budget-currency-sign').html(c),b.find('.min-budget-currency-sign').html(c),r.find('.min-budget-amount').html(d),r.find('.budget-amount').attr('min',d),r.find('.budget-amount').valid()}function R(){window.initLoggedInEvents&&(initLoggedInEvents(),r.off('click','.btn-dropdown-trigger').on('click','.btn-dropdown-trigger',function(b){a('.btn-dropdown').toggleClass('is-open'),b.preventDefault(),b.stopPropagation(),a(document).click(function(){a('.btn-dropdown').removeClass('is-open')})})),r.off('click','.btn-auth-type').on('click','.btn-auth-type',function(){var b=a(this),c=r.find('.quick-hire-post-form');b.find('.user-type').attr('checked','checked'),b.siblings('btn-auth-type').find('.user-type').attr('checked',!1),b.hasClass('returning-user')?(c.find('.user-create').hide(),c.find('.user-return').show()):(c.find('.user-return').hide(),c.find('.user-create').show())}),r.off('change','.hoursOption').on('change','.hoursOption',function(){var a=r.find('.quick-hire-post-form'),b=a.find('.hoursOption:checked');b.val()==='notSure'?a.find('.project-workload').attr('disabled',!0).val(1):a.find('.project-workload').removeAttr('disabled')}),r.off('click','.hours-option-text').on('click','.hours-option-text',function(){var b=a(this).attr('for');a(this).find('.hoursOption[value='+b+']').trigger('click')}),r.off('click','.close').on('click','.close',function(){a(this).css('margin-top',''),a(this).find('#fb_place_holder').remove(),S(),a('body').removeClass('modal-open'),r.modal('hide'),r.attr('id')==='modal-hire-me'&&B!==undefined&&db(B)}),r.off('click','.cancel-quickhire').on('click','.cancel-quickhire',function(){r.find('.close').trigger('click')}),r.off('click','.site_plainterms').on('click','.site_plainterms',function(){return window.open('/info/plainterms.html','','width=1000, height=600, left=100,top=100,menu=no, toolbar=no,scrollbars=yes,resizable=yes'),!1}),r.off('click','.site_privacy').on('click','.site_privacy',function(){return window.open('/page.php?p=info/privacy','','width=1000, height=600, left=0,top=0,menu=no, toolbar=no,scrollbars=yes,resizable=yes'),!1}),t.off('change').on('change',function(){var b=r,c=r.find('.quick-hire-post-form').data('seller-id');t.val()==='hourly'?(b.find('#min-budget-per-hour').show(),b.find('.fixed-detail').hide(),b.find('.hourly-detail').show(),b.find('#project_fix_fee_note').hide(),b.find('#project_hourly_fee_note').show(),window._t.push(['user_action',{section:'HireMeModal',name:'ToggleToHourly',label:'Per Hour',reference:'freelancer_id',reference_id:c}])):(b.find('#min-budget-per-hour').hide(),b.find('.hourly-detail').hide(),b.find('.fixed-detail').show(),b.find('#project_fix_fee_note').show(),b.find('#project_hourly_fee_note').hide(),window._t.push(['user_action',{section:'HireMeModal',name:'ToggleToFixedPrice',label:'Fixed Price',reference:'freelancer_id',reference_id:c}]));var d=b.find('.budget-amount');d.val(d.attr(t.val()+'-value')),d.focusout(),Q({triggeringElement:a(this)})}),r.off('click','#btn-chat').on('click','#btn-chat',function(){function d(a){window.liveChat.startChat([a.freelancer_id],'private_chat','profile-prehire-chat',{type:'prehire',id:a.id})}var b=r,c=r.find('.quick-hire-post-form').data('seller-id');a.ajax({url:'/api/messages/0.1/prehire/',type:'post',dataType:'json',data:{freelancer_id:c},retryLimit:3,headers:getAuthHeader(),beforeSend:function(){b.find('.loading-img').show(),b.find('#inline-form-button-group').hide(),J()},error:function(){this.retryLimit--,this.retryLimit>0&&a.ajax(this)},success:function(a){d(a.result)},complete:function(){b.find('.loading-img').hide(),b.find('#inline-form-button-group').show()}})}),r.off('click','.btn-quickhire:not(#btn-chat)').on('click','.btn-quickhire:not(#btn-chat)',function(){var b=r.find('.quick-hire-post-form'),c=!1;r.find('#userTypeReturning').is(':checked')&&!e.userReturned()&&(r.find('#post-proj-username, #post-proj-pwd').closest('.control-group').removeClass('success').addClass('error'),r.find('#post-proj-username').siblings('.help-inline').html(T_('Please check your login details.')),c=!0),r.find('#userTypeNew').is(':checked')&&(r.find('#new-email').val()===''&&(r.find('#new-email').closest('.control-group').removeClass('success').addClass('error'),r.find('#new-email').siblings('.help-inline').html(T_('This field is required.')),c=!0),r.find('#new-username').val()===''&&(r.find('#new-username').closest('.control-group').removeClass('success').addClass('error'),r.find('#new-username').siblings('.help-inline').html(T_('This field is required.')),c=!0),r.find('#passwd').val()===''&&(r.find('#passwd').closest('.control-group').removeClass('success').addClass('error'),r.find('#passwd').siblings('.help-inline').html(T_('This field is required.')),c=!0));if(c){var d=r.find('.control-group.error:first').offset().top;a(document).scrollTop(d-250)}var f=r.attr('id')==='inline-hire-me';C=C||!f,X(b)?q?N(b):!c&&e.validateForm()&&N(b):f&&window._t.push(['user_action',{section:'HireMe Error',name:'Front End Validation Error',reference:'user_id',reference_id:r.find('.quick-hire-post-form').data('seller-id')}])}),r.off('click','.btn-quickhire-create-milestone').on('click','.btn-quickhire-create-milestone',function(){var a=r.find('.quick-hire-milestone-form');Y(a)&&W(a)}),r.off('click','.btn-quickhire-no-milestone').on('click','.btn-quickhire-no-milestone',function(){var a=r;a.find('.btn-quickhire-create-milestone').attr('disabled',!0),a.find('.btn-quickhire-no-milestone').attr('disabled',!0)}),r.off('change','#modalhireme-fixed-multifield-currency').on('change','#modalhireme-fixed-multifield-currency',function(){s=a(this).find('option:selected'),Q({triggeringElement:a(this)})}),r.off('change','#autoOpenToBidding').on('change','#autoOpenToBidding',function(){T();var b,c=function(){b=a('#modalhireme-project-details'),r.find('#autoOpenToBidding').is(':checked')?b.removeClass('is-hidden'):b.addClass('is-hidden')},d=function(){b=a('.HireMeFormModal-bodyCollapse'),r.find('#autoOpenToBidding').is(':checked')?b.addClass('is-HireMeFormModal-bodyCollapse-active'):b.removeClass('is-HireMeFormModal-bodyCollapse-active')};window.oneClickHireMe?!y&&!z?c():y&&!z?c():!y&&z&&d():d()}),r.off('change','.budget-amount').on('change','.budget-amount',function(){a(this).attr('fixed-value',a(this).val()),a(this).attr('hourly-value',a(this).val())}),a.validator.addMethod('checkCraigslistViolation',function(b,c){var d=['craigslist',/(^|\W)cl($|\W)/,'clist'],e=['ghost','ghosting','flag','flagging','block','blocking','pva','pvas','phone verified accounts','auto reply','auto respond','post','poster','posting','autopost','autoposter','autoposting','anti-flagging','captcha','captchas'],f=!1;for(var g=d.length-1;g>=0;g--)a(c).val().toLowerCase().match(d[g])&&(f=!0);var h=!1;for(var g=e.length-1;g>=0;g--)a(c).val().toLowerCase().match(e[g])&&(h=!0);return f&&h?(a(this).find('#warning_craigslist_id').show(),!0):(r.find('#warning_craigslist_id').hide(),!0)},T_('Please ensure you do not violate Craigslist\'s TOU.')),a.validator.addMethod('checkCopyRightViolation',function(b,c){var d=['clone','exact copy'];for(var e=d.length-1;e>=0;e--)if(a(c).val().toLowerCase().match(d[e]))return a(this).find('#warning_copyright_id').show(),!0;return r.find('#warning_copyright_id').hide(),!0},T_('Please ensure you do not violate Craigslist\'s TOU.')),a.validator.addMethod('checkFixedPeriod',function(b,c){var d=a(c).closest('.quick-hire-post-form'),e=a(c);if(t.val()==='fixed'){var f=parseInt(e.val());if(isNaN(f)||f<=0)return!1}return!0},T_('Please enter a valid period.')),a.validator.addMethod('checkHourlyWorkload',function(b,c){var d=a(c).closest('.quick-hire-post-form'),e=a(c);if(t.val()==='hourly'){var f=parseInt(e.val());if(isNaN(f)||f<=0)return!1}return!0},T_('Please enter a valid workload')),a.validator.addMethod('checkBudget',function(b,c){var d=r,e=a(c),f=parseInt(e.val()),g=0,h;return t.val()==='fixed'?(h=d.find('.fixed-detail #modalhireme-fixed-multifield-currency option:selected'),g=parseInt(h.attr('min-fixed-budget'))):t.val()==='hourly'&&(h=d.find('.hourly-detail #modalhireme-fixed-multifield-currency option:selected'),g=parseInt(h.attr('min-hourly-budget'))),isNaN(f)||f<g?!1:!0},T_('Please enter a valid budget.')),a.validator.addMethod('checkMilestoneAmount',function(b,c){var d=a(c).closest('.quick-hire-milestone-form'),e=a(c),f=parseFloat(e.val());return isNaN(f)||f<=0?!1:!0},T_('Please enter a valid amount'))}function S(){s=!1,A=!1,r.off()}function T(){var a=r.find('#autoOpenToBidding').is(':checked')?100:10;r.find('.project-descr').rules('remove','minlength'),r.find('.project-descr').rules('add',{minlength:a})}function U(b){var c={};c.csrf_token=getCSRFToken();var d=[],e=[],f=b.find('.selected_skill'),g=r,h=b.find('.uploadFileSelectList option:selected');c.type=t.val(),r.attr('id')==='inline-hire-me'?c.oneClickHireMe=1:c.type===undefined&&(a('#project-type')[0]===undefined||a('#project-type')[0].value===undefined?c.type='fixed':c.type=a('#project-type')[0].value);if(c['type']=='fixed'){var i=b.find('.fixed-detail');c.period=i.find('.project-period').val(),c.currency=i.find('#modalhireme-fixed-multifield-currency').val(),c.budget=i.find('.budget-amount').val()}else{if(c['type']!='hourly')return!1;var j=b.find('.hourly-detail');c.commitment_interval='week',c.duration=j.find('.project-duration').val(),c.commitment=j.find('.project-workload').val(),c.budget=j.find('.budget-amount').val(),c.currency=j.find('#modalhireme-fixed-multifield-currency').val()}c.pmb=b.find('#pmb').val(),b.find('#autoOpenToBidding').is(':checked')?c.autoOpenToBidding='checked':c.autoNameAndDescription=!0,c.name=b.find('.project-name').val(),c.descr=b.find('.project-descr').val(),c.sellerId=b.data('seller-id'),c.sellerUsername=b.data('seller-username'),c.sourceType=b.data('source-type'),c.sourceId=b.data('source-id');for(var l=0;l<f.length;l++)d.push(a(f[l]).attr('value'));c.skills=d,c.fileset=b.find('[name=fileset]').val();for(var l=0;l<h.length;l++)e.push(a(h[l]).val());c.filename=e;var m=r.find('#nonAuthForm');!q&&m.find('#userTypeNew').is(':checked')&&(c.username=m.find('#new-username').val(),c.email=m.find('#new-email').val(),c.passwd=m.find('#passwd').val(),c.passwd1=c.passwd,c.email_notify=!0),a.ajax({url:'/buyers/onquickhire.php',type:'post',data:c,dataType:'json',beforeSend:function(){g.find('.loading-img').show(),g.find('#inline-form-button-group').hide(),g.find('.btn-quickhire').attr('disabled',!0).hide(),g.find('.cancel-quickhire').attr('disabled',!0),J()},success:function(b){E.success(b);if(b.status=='success'&&!b.ABTestAutomaticPayment){var d='right';g.attr('id')!=='modal-hire-me'&&(r=a('#modal-hire-me'),g=r,g.modal({backdrop:'static',keyboard:!0})),V(b),a('body').addClass('modal-open'),g.addClass('responsive-modal').removeClass('modal').removeClass('quick-hire-form-container').css({top:0});var e=g.parent();d='bottom',g.on('hidden',function(){g.attr('id')==='modal-hire-me'?(g.addClass('modal').removeClass('responsive-modal').addClass('quick-hire-form-container'),e.append(g)):window.location.href=b.url}),p=b,E.quickHireReturnDataReady();var f=c.budget;c.type==='fixed'&&(f*=.5);var h=_.template(k,{username:c.sellerUsername,userID:c.sellerId,quickHireReturnData:p,budget:f,type:c.type,commitment:c['type']=='hourly'?c.commitment:!1,abTestSkipMilestone:w,abTestMilestoneMessage:x});g.html(h),g.removeClass('large').addClass('small'),r.find('#milestones-popover').popover_legacy({placement:d,trigger:'hover',animation:!0,template:'<div class="popover"><div class="arrow"></div><div class="popover-inner" style="width:400px"><div class="popover-content"><p></p></div></div></div>'}),Z(g.find('.quick-hire-milestone-form')),q=getUserIdfromCookie(),r.on('hidden',function(){window.location.href=p.url}),r.off('click','.btn-quickhire-dismiss-modal').on('click','.btn-quickhire-dismiss-modal',function(){window.location.href=p.url}),b.pmNotSentMessage&&I(b.pmNotSentMessage),r.find('.btn-quickhire-no-milestone').on('click',function(){window.location.href=p.url}),window._t.push(['abtest',{test:'MM-1326',variation:x?'test':'control'}])}else b.ABTestAutomaticPayment&&g.hide(),b.url?window.location.href=b.url:H(b.reason)},error:function(a){H(T_('Server Error'))},complete:function(){g.find('.loading-img').hide(),g.find('#inline-form-button-group').show(),g.find('.btn-quickhire').removeAttr('disabled').show(),g.find('.cancel-quickhire').removeAttr('disabled')}})}function V(a){var b=r,c=this,d=function(){var a=f.getUpgradeTotal();return parseFloat(b.find('.milestone-amount').val())&&(a+=parseFloat(b.find('.milestone-amount').val())),a},e=function(){b.find('.total-amount').html(d())},h=function(a){var c={currencyDetails:{id:a.currency_id,sign:a.currency_sign,code:a.currency_code}};c.amount=d(),g.init(c,b.find('#payment-sources-container'))};f.prepareUpgradeABTest(a.project_id,!0).then(function(){f.init(),h(a),e(),b.find('.upgrade-checkbox').on('change',e),b.find('.milestone-amount').on('keyup',e),b.off('click','.btn-quickhire-create-milestone').on('click','.btn-quickhire-create-milestone',function(){var d=b.find('.quick-hire-milestone-form');Y(d)&&f.upgradeAndCreateMilestone(a,d,W,c)})})}function W(b){E.milestoneClick();var c={},d=r;c.csrf_token=getCSRFToken(),c.username=p.seller_username,c.amount=b.find('.milestone-amount').val(),c.project=p.project_id,c.reason='partly_payment',c.other_reason=b.find('.milestone-descr').val(),c.currency=p.currency_id,c.csrf_token=getCSRFToken(),a.ajax({url:'/ajax/payment/onnewescrow.php',type:'post',data:c,dataType:'json',beforeSend:function(){d.find('.loading-img').show(),d.find('.btn-quickhire-create-milestone').attr('disabled',!0).hide(),d.find('.btn-quickhire-no-milestone').attr('disabled',!0),J()},success:function(a){if(a.status=='success')p.url+='&ttref=HireMe_'+u+'&hireme_initial_milestone_tracking=immediate',window.location.href=p.url;else if(a.needDeposit){var b='/payments/deposit.php?milestone_amount='+encodeURIComponent(c.amount)+'&amount='+encodeURIComponent(a.amountDiff?a.amountDiff:c.amount)+'&currency='+encodeURIComponent(c.currency)+'&id='+encodeURIComponent(c.project)+'&descr='+encodeURIComponent(c.other_reason)+'&username='+encodeURIComponent(c.username)+'&bidderId='+encodeURIComponent(p.seller_id)+'&refAction='+encodeURIComponent('create_milestone')+'&ttref=HireMe_'+u+'&hireme_initial_milestone_tracking='+'success_deposit_redirection'+'&paymentItem='+a.paymentItem+'&paymentDetail=true';window.location=b}else H(a.msg),d.find('.btn-quickhire-create-milestone').removeAttr('disabled').show(),d.find('.btn-quickhire-no-milestone').removeAttr('disabled')},error:function(a){H(T_('Server Error')),d.find('.btn-quickhire-create-milestone').removeAttr('disabled').show(),d.find('.btn-quickhire-no-milestone').removeAttr('disabled')},complete:function(){d.find('.loading-img').hide()}})}function X(a){var b=!1;return t.val()==='hourly'?b=a.find('.fixed-detail .error'):t.val()==='fixed'&&(b=a.find('.hourly-detail .error')),b!==!1&&(b.removeClass('error'),b.find('.help-block').html('')),a.valid()}function Y(a){return a.valid()}function Z(b){b.validate({errorElement:'span',onsubmit:!1,errorPlacement:function(a,b){a.appendTo(b.closest('.control-group').find('.help-block'))},onfocusout:function(b){if(!a(b).val())return!1;a(b).valid()},highlight:function(b){a(b).closest('.control-group').addClass('error is-invalid').removeClass('is-valid')},success:function(b){a(b).closest('.control-group').removeClass('error is-invalid').addClass('is-valid')},rules:{milestoneAmount:{checkMilestoneAmount:!0,min:.01,required:!0},milestoneDescr:{minlength:1,maxlength:40,required:!0}}})}function $(b){b.validate({errorElement:'span',onsubmit:!1,errorPlacement:function(a,b){b.closest('.control-group').find('.help-block, .help-inline').eq(0).html(a)},onfocusout:function(b){if(!a(b).val())return!1;a(b).valid()},highlight:function(b){a(b).closest('.control-group').addClass('error')},success:function(b){a(b).closest('.control-group').removeClass('error')},rules:{project_name:{minlength:10,remote:'/ajax/postproject/check-project-name.php',required:!0},projectDescr:{minlength:b.find('#autoOpenToBidding').is(':checked')?100:10,maxlength:4e3,checkCraigslistViolation:!0,required:!0},pmb:{minlength:10,maxlength:4e3,checkCraigslistViolation:!0,required:!0},fixedBudget:{checkBudget:!0},fixedPeriod:{checkFixedPeriod:!0},hourlyWorkload:{checkHourlyWorkload:!0},hourlyRate:{checkBudget:!0},budget:{checkBudget:!0}},messages:{project_name:{remote:T_('You already have a project with this name.')},pmb:{required:T_('Please enter a private message'),minlength:T_('Please enter a private message above 10 characters'),maxlength:T_('Please enter a private message below 4000 characters'),checkCraigslistViolation:T_('Private message policy violated')}}})}function ab(a){c.init(undefined,a)}function bb(){e.init({noConfirmPassword:!0})}function cb(b,c){b.find('#autoOpenToBidding-tip').popover_legacy({placement:'top',template:'<div class="popover"><div class="arrow"></div><div class="popover-inner" style="width:400px"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'}),b.find('#project-type-tip').popover_legacy({placement:'top',content:T_('<b>Fixed Price</b>: Ideal when you have a project with a well defined scope and detailed project description. ')+T_('Project fees are charged when the freelancer accepts the project.')+'<br><br>'+T_('<b>Hourly Projects</b>: Recommended when you want to hire a freelancer for ongoing work. ')+T_('The project description can be less well defined. Project fees are charged on each payment to the freelancer.'),trigger:'hover',html:!0}),b.find('.quick-hire-post-form-tip').each(function(){var b=a(this);b.popover_legacy({content:b.data('content'),title:b.data('title'),placement:'top',trigger:'hover',html:!0})})}function db(b,c,e){b.inline?window.oneClickHireMe=!0:window.oneClickHireMe=!1,typeof b.abTests=='object'&&b.abTests&&(v=b.abTests),B===undefined&&b.inline&&(B=b),document.getElementById('modal-hire-me')||document.body.insertAdjacentHTML('beforeend',l),y=b.abTestPrehire,z=b.abTestPrehireHMModal;var f=b.inline?a('#inline-hire-me'):a('#modal-hire-me'),g=b.inline?j:i,h=function(){typeof abTestHiremeMilestone!='undefined'&&abTestHiremeMilestone&&(w=abTestHiremeMilestone),typeof abTestHiremeMilestoneMessage!='undefined'&&abTestHiremeMilestoneMessage&&(x=abTestHiremeMilestoneMessage),e&&(u=e),b=a.extend({fixed_budget:250,hourlyrate:10,default_min:10,daysDuration:3},b),c=a.extend({domEl:f,uploadTemplate:'quickhire-template-upload',downloadTemplate:'quickhire-template-download'},c),r=f,q=getUserIdfromCookie();if(typeof h!='undefined')var h=b.projectFee;o=o||(q==b.userID?!1:h);var i=_.template(g,{username:b.username.trim(),publicName:b.publicName.trim(),userID:b.userID,hourlyrate:b.hourlyrate,is_online:b.is_online,email:b.email||'',budgets:m,min_fixed_budget:b.fixed_budget,default_min:b.default_min,durations:n,days_duration:b.daysDuration,autoProjectName:'',thisUser:q,HiremeABTest:d,feeNotes:o,isNewUser:is_new_user,project_title:b.projectTitle||'',project_description:b.projectDescription||'',show_hireme_promotion_copy:!!window.showHireMePromotionCopy,sourceType:b.sourceType||'HiremeModal',sourceId:b.sourceId,abTestPrehire:y,showNewInfractionModal:v['FIN-T36178'].onTest});A=a(i).find('#modalhireme-fixed-multifield-currency option:selected').val(),f.html(i),b.inline?f.show('fast'):f.modal({backdrop:'static',keyboard:!0});var j=function(){t=function(){var a=f.find('[data-target="modalhireme-budget-type-toggle"]');return a.val=function(){return f.find('[data-target="modalhireme-budget-type-toggle"]:checked').val()},a}()};window.oneClickHireMe?!y&&!z?j():y&&!z?j():!y&&z&&(t=f.find('#project-type')):t=f.find('#project-type'),R(),jb(b),window.scrollTo(0,0),window.setTimeout(function(){window.scrollTo(0,0)},500),b.inline||a('body').addClass('modal-open');var k=f.find('.quick-hire-post-form');$(k),cb(k,b),ab(c),kb(b.userID,b.username,k),eb(k),q||bb(),fb(b,t),q&&b.currencyID&&f.find('#modalhireme-fixed-multifield-currency').val(b.currencyID).trigger('change')};!m.length||!n.length?lb(h):h()}function eb(a){a.bind('integrateForm',gb),a.bind('welcomeFacebook',hb)}function fb(a,b){if('undefined'==typeof a||'undefined'==typeof a.budget_period||'undefined'==typeof b)return;'hourly'===a.budget_period&&b.val('hourly').trigger('change')}function gb(){var a=r.find('.fb-bs-identifier .modal-body');r.find('#fb_place_holder').html(a.clone(!0,!0)),r.find('#fb_place_holder').siblings().hide(),r.find('#fb_place_holder .btn-large').removeClass('btn-large'),r.find('#looking_for_label').parents('.control-group').hide(),r.find('#looking_to_hire').prop('checked',!0)}function hb(a,b,c){c(b,ib)}function ib(a,b){var c='<img src=\''+b.logo_url+'\' alt=\''+b.logoname+'\' border=0 width=80 height=80 style=\'margin-right: 20px;\'>';r.find('#loggedinLogo').html(c),a?r.find('#loggedinWelcome h1').html(T_('Welcome <span id="loggedinFullname"></span>!')):r.find('#loggedinWelcome h1').html(T_('Welcome back <span id="loggedinFullname"></span>!')),r.find('#loggedinFullname').html(b.name),r.find('#headerTopLoggedIn').fadeIn('slow'),r.find('#nonAuthForm').hide(),r.find('#fb_place_holder').remove(),q=getUserIdfromCookie()}function jb(b){a.ajax({url:'/ajax/hireme/tickAutoRepost.php',type:'post',dataType:'json',data:{csrf_token:getCSRFToken(),freelancerId:b.userID},success:function(a){a.status=='success'&&a.tickAutoRepost&&!b.abTestPrehire&&T()}})}function kb(b,c,d){var e,f=function(){if(typeof e!='undefined'){var b=T_('<%= userName %> has accepted similar projects for $<%= fixedBudgetSuggestion %> USD',{userName:c,fixedBudgetSuggestion:e});a(d).find('#qh_fixed_budget').popover_legacy({title:T_('Not sure on the Budget?'),content:b,trigger:'manual',placement:'bottom',html:!0}),a(d).find('#qh_fixed_budget').val(e)}},g=function(){a(d).find('#qh_fixed_budget').popover_legacy('show')},h=function(){a(d).find('#qh_fixed_budget').popover_legacy('hide')},i=function(){a(d).find('#qh_fixed_budget:visible').popover_legacy('toggle')};a.ajax({url:'/ajax/hireme/getFixedProjectBudgetSuggestion.php?user_id='+b,dataType:'json',success:function(a){a.status=='success'&&a.result!=null&&a.result<500&&a.result>300&&(e=a.result,f())}}),a(d).find('#qh_fixed_budget').focus(g),a(d).find('#qh_fixed_budget').blur(h),a(d).find('.fixed').parent().click(i),a(d).find('.hourly').parent().click(h)}function lb(b){a.ajax({url:'/ajax/buyer/load-post-project-params.php',dataType:'json',success:function(c){m=a.map(c.budgets,function(a,b){return[a]}),n=c.durations,b()}})}function mb(){var a=new Date,b=a.toDateString().split(' '),c=a.toTimeString().split(' ');return'Custom Project'+a.toDateString().replace(b[0],'')+' '+c[0]}var m=[],n=[],o=!1,p={},q=getUserIdfromCookie(),r={},s=!1,t=!1,u='directoryInline4',v={},w=!1,x=!1,y=!1,z=!1,A=!1,B,C=!1,E={success:function(a){_ttref.push(['_trackEvent','ProjectHireMe','Award','Success','project_id',a.project_id]),_lt.push({event:'HireMe Posted'})},quickHireReturnDataReady:function(){_lt.push(['user_action',{section:D(u),subsection:'MilestoneCreate_InitialHireMe',label:'form_open',action:'click',project_id:p.project_id}])},milestoneClick:function(){_ttref.push(['_trackEventNoCookie','HireMe','Initial_Milestone',u,'click']),_lt.push(['user_action',{section:D(u),subsection:'MilestoneCreate_InitialHireMe',label:'form_submit',action:'click',project_id:p.project_id}])},milestoneSuccess:function(){}};return{initForm:db}}),function(){var a=function(a,b,c){var d={},e={},f={1:'offline',2:'online'},g=function(a,b){c.ready(function(){c.send('onlineoffline',{route:a,users:b})})},h=function(b){var c=[],e=[];if(a.isArray(b))for(var f=0;f<b.length;f++)b[f]in d?e.push(parseInt(b[f])):c.push(parseInt(b[f]));else for(user in b)user in d?e.push(parseInt(user)):c.push(parseInt(user));return{new_users:c,existing:e}},i=function(a){for(var b=0;b<a.length;b++)d[a[b]]=!0},j='onlineoffline_style_',k='onlineoffline_',l={online:'#77be56 !important',offline:'#aaaaaa !important'},m=a.template('.online-status.onlineoffline_<%= user %> {background: <%= colour %>;}\n<% if (state != \'online\') { %>.onlineoffline.online_<%= user %>{display: none !important;}<% } %>\n.onlineoffline.online_<%= user %>{display: <% if (state != \'online\') { %>none !important<% } else { %> block <% } %>;}\n.onlineoffline.offline_<%= user %>{display: <% if (state != \'offline\') { %>none !important<% } else { %> block <% } %>;}\n'),n=function(a){b('#'+j+a).remove()},o=function(a,c){var d=m({user:a,colour:l[c],state:c}),e=b('<style type=\'text/css\' id=\''+j+a+'\'>'+d+'</style>');n(a),b('head').append(e)},p=function(a,b){e[a]=b;var c=f[b]||'offline';o(a,c)},q=function(a){return f[e[a]]||'offline'},r=function(a){var b=h(a);i(b.new_users),b.new_users.length&&g('getsub',b.new_users)};return c.register('onlineoffline','statuschange',function(a){p(a.data.user,a.data.to)}),c.register('onlineoffline','statusget',function(a){for(user in a.data)p(user,a.data[user])}),c.register('onlineoffline','reregister',function(){setTimeout(function(){console.log('Onlineoffline: Reregistering');var a=[];for(user in e)a.push(user);g('getsub',a)},500)}),{set_status:p,get:q,sub:r,map:f}};typeof define=='function'&&define.amd?define('notification/onlineoffline',['underscore-wrapper','jquery-wrapper','notification/libnotify'],a):window.onlineoffline=a(_,jQuery,libnotify)}(),define('text!templates/dashboard/hireMePostContest.htm',[],function(){return'<div class="WidgetRehire PageDashboard-card Card">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title"><%- T_("Today is the day.") %></h3>\n    </div>\n    <p class="WidgetRehire-desc">\n        <%= T_("It\'s about time you and <strong><[-sellerName]></strong> built something together again. Send them a message and rediscover the magic of your previous project!", {sellerName: sellerName}) %>\n    </p>\n    <div class="WidgetRehire-block">\n        <div class="WidgetRehire-block-profile">\n            <div class="WidgetRehire-block-profile-imgContainer">\n                <img class="WidgetRehire-block-profile-img" src="<%- sellerAvatarUrl %>" alt="Profile Picture">\n            </div>\n            <div class="WidgetRehire-block-profile-body">\n                <span class="WidgetRehire-block-profile-name">\n                    <%- sellerName %>\n                    <span class="online-status onlineoffline_<%- sellerId %>" data-size="medium"></span>\n                </span>\n                <div class="WidgetRehire-block-profile-info">\n                    <div class="Rating Rating--labeled"\n                         data-star_rating="<%- sellerRating %>">\n                        <span class="Rating-total">\n                            <span class="Rating-progress"></span>\n                        </span>\n                    </div>\n                    <a href="/u/<%- sellerName %>"\n                      class="WidgetRehire-block-profile-review profile-redirect"><%- reviewCount %>\n                      <%- T_(" Reviews") %></a>\n                </div>\n            </div>\n        </div>\n        <div class="WidgetRehire-block-action">\n            <button class="WidgetRehire-block-btn btn btn-info hireme-button"><%- T_("Send a Message") %></button>\n        </div>\n    </div>\n</div>\n'}),define('dashboard/views/hireMePostContest',['jquery-wrapper','underscore-wrapper','backbone-wrapper','quickhire/module-quickhire','notification/onlineoffline','text!templates/dashboard/hireMePostContest.htm'],function(a,b,c,d,e,f){var g=c.View.extend({events:{'click .hireme-button':'onHiremeClicked','mousedown .profile-redirect':'onReviewMouseDown'},onReviewMouseDown:function(){_ttref.push(['_clearEntrypoint','ProjectHireMe']),_ttref.push(['_setCookie','ProjectHireMe_DashConstestReHireWidget']),_ttref.push(['_trackEvent','ProjectHireMe','ProfileRedirect'])},onHiremeClicked:function(){_ttref.push(['_clearEntrypoint','ProjectHireMe']),_ttref.push(['_setCookie','ProjectHireMe_DashConstestReHireWidget']),_ttref.push(['_trackEvent','ProjectHireMe','ShowModal']),d.initForm({userID:this.options.sellerId,username:this.options.sellerName,hourlyrate:this.options.hourlyRate,sourceType:'ContestPage'})},compileTemplate:b.template(f),initialize:function(){var b=this;a.ajax({url:'/api/users/0.1/users/',method:'GET',data:{users:[this.options.sellerId],avatar:!0,reputation_extra:!0},headers:getAuthHeader(),success:function(a){if(a.status==='success'&&typeof a.result.users[b.options.sellerId]=='object'){var c=a.result.users[b.options.sellerId];b.options.sellerName=c.username,b.options.sellerRating=c.reputation.entire_history.overall.toFixed(1),b.options.hourlyRate=c.hourly_rate,b.options.reviewCount=c.reputation.entire_history.reviews,typeof c.avatar_cdn=='string'?b.options.sellerAvatarUrl=cdn_url(c.avatar):b.options.sellerAvatarUrl=cdn_url('/img/unknown.png?v=1be243a4ecfdc127a6af2f19d242fe6f&amp;m=6'),b.render()}}})},render:function(){e.sub([this.options.sellerId]);var b={sellerId:this.options.sellerId,sellerName:this.options.sellerName,sellerAvatarUrl:this.options.sellerAvatarUrl,sellerRating:this.options.sellerRating,reviewCount:this.options.reviewCount};a(this.el).html(this.compileTemplate(b))}});return g}),!function(a){'undefined'==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){function c(a){var b,c,d,e;if(!a||a.length<1)return a;for(b='',c=0,d=a.length;d>c;c++)e=a.charAt(c),b+=N[e]||e;return b}function d(a,b){for(var c=0,d=b.length;d>c;c+=1)if(f(a,b[c]))return c;return-1}function e(){var b=a(M);b.appendTo('body');var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function f(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+''==c+'':c.constructor===String?c+''==a+'':!1}function g(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function h(a){return a.outerWidth(!1)-a.width()}function i(c){var d='keyup-change-value';c.on('keydown',function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on('keyup',function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger('keyup-change'))})}function j(c){c.on('mousemove',function(c){var d=L;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger('mousemove-filtered',c)})}function k(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function l(a){var b,c=!1;return function(){return c===!1&&(b=a(),c=!0),b}}function m(a,b){var c=k(a,function(a){b.trigger('scroll-debounced',a)});b.on('scroll',function(a){d(a.target,b.get())>=0&&c(a)})}function n(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b,c=a[0],d=a.val().length;a.focus(),a.is(':visible')&&c===document.activeElement&&(c.setSelectionRange?c.setSelectionRange(d,d):c.createTextRange&&(b=c.createTextRange(),b.collapse(!1),b.select()))},0)}function o(b){b=a(b)[0];var c=0,d=0;if('selectionStart'in b)c=b.selectionStart,d=b.selectionEnd-c;else if('selection'in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart('character',-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function p(a){a.preventDefault(),a.stopPropagation()}function q(a){a.preventDefault(),a.stopImmediatePropagation()}function r(b){if(!I){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);I=a(document.createElement('div')).css({position:'absolute',left:'-10000px',top:'-10000px',display:'none',fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:'nowrap'}),I.attr('class','select2-sizer'),a('body').append(I)}return I.text(b.val()),I.width()}function s(b,c,d){var e,f,g=[];e=b.attr('class'),e&&(e=''+e,a(e.split(' ')).each2(function(){0===this.indexOf('select2-')&&g.push(this)})),e=c.attr('class'),e&&(e=''+e,a(e.split(' ')).each2(function(){0!==this.indexOf('select2-')&&(f=d(this),f&&g.push(this))})),b.attr('class',g.join(' '))}function t(a,b,d,e){var f=c(a.toUpperCase()).indexOf(c(b.toUpperCase())),g=b.length;return 0>f?(d.push(e(a)),void 0):(d.push(e(a.substring(0,f))),d.push('<span class=\'select2-match\'>'),d.push(e(a.substring(f,f+g))),d.push('</span>'),d.push(e(a.substring(f+g,a.length))),void 0)}function u(a){var b={'\\':'&#92;','&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;','/':'&#47;'};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function v(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||'GET',cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||'json'},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f='function'==typeof f?f.call(h,i.term,i.page,i.context):f,e&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page);i.callback(b)}}),e=j.call(h,l)},f)}}function w(b){var c,d,e=b,f=function(a){return''+a.text};a.isArray(e)&&(d=e,e={results:d}),a.isFunction(e)===!1&&(d=e,e=function(){return d});var g=e();return g.text&&(f=g.text,a.isFunction(f)||(c=g.text,f=function(a){return a[c]})),function(b){var c,d=b.term,g={results:[]};return''===d?(b.callback(e()),void 0):(c=function(e,g){var h,i;if(e=e[0],e.children){h={};for(i in e)e.hasOwnProperty(i)&&(h[i]=e[i]);h.children=[],a(e.children).each2(function(a,b){c(b,h.children)}),(h.children.length||b.matcher(d,f(h),e))&&g.push(h)}else b.matcher(d,f(e),e)&&g.push(e)},a(e().results).each2(function(a,b){c(b,g.results)}),b.callback(g),void 0)}}function x(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]};a(d?c():c).each(function(){var a=this.text!==b,c=a?this.text:this;(''===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g)}}function y(b,c){if(a.isFunction(b))return!0;if(!b)return!1;throw new Error(c+' must be a function or a falsy value')}function z(b){return a.isFunction(b)?b():b}function A(b){var c=0;return a.each(b,function(a,b){b.children?c+=A(b.children):c++}),c}function B(a,c,d,e){var g,h,i,j,k,l=a,m=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(h=-1,i=0,j=e.tokenSeparators.length;j>i&&(k=e.tokenSeparators[i],h=a.indexOf(k),!(h>=0));i++);if(0>h)break;if(g=a.substring(0,h),a=a.substring(h+k.length),g.length>0&&(g=e.createSearchChoice.call(this,g,c),g!==b&&null!==g&&e.id(g)!==b&&null!==e.id(g))){for(m=!1,i=0,j=c.length;j>i;i++)if(f(e.id(g),e.id(c[i]))){m=!0;break}m||d(g)}}return l!==a?a:void 0}function C(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var D,E,F,G,H,I,J,K,L={x:0,y:0},D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},M='<div class=\'select2-measure-scrollbar\'></div>',N={'Ⓐ':'A','Ａ':'A','À':'A','Á':'A','Â':'A','Ầ':'A','Ấ':'A','Ẫ':'A','Ẩ':'A','Ã':'A','Ā':'A','Ă':'A','Ằ':'A','Ắ':'A','Ẵ':'A','Ẳ':'A','Ȧ':'A','Ǡ':'A','Ä':'A','Ǟ':'A','Ả':'A','Å':'A','Ǻ':'A','Ǎ':'A','Ȁ':'A','Ȃ':'A','Ạ':'A','Ậ':'A','Ặ':'A','Ḁ':'A','Ą':'A','Ⱥ':'A','Ɐ':'A','Ꜳ':'AA','Æ':'AE','Ǽ':'AE','Ǣ':'AE','Ꜵ':'AO','Ꜷ':'AU','Ꜹ':'AV','Ꜻ':'AV','Ꜽ':'AY','Ⓑ':'B','Ｂ':'B','Ḃ':'B','Ḅ':'B','Ḇ':'B','Ƀ':'B','Ƃ':'B','Ɓ':'B','Ⓒ':'C','Ｃ':'C','Ć':'C','Ĉ':'C','Ċ':'C','Č':'C','Ç':'C','Ḉ':'C','Ƈ':'C','Ȼ':'C','Ꜿ':'C','Ⓓ':'D','Ｄ':'D','Ḋ':'D','Ď':'D','Ḍ':'D','Ḑ':'D','Ḓ':'D','Ḏ':'D','Đ':'D','Ƌ':'D','Ɗ':'D','Ɖ':'D','Ꝺ':'D','Ǳ':'DZ','Ǆ':'DZ','ǲ':'Dz','ǅ':'Dz','Ⓔ':'E','Ｅ':'E','È':'E','É':'E','Ê':'E','Ề':'E','Ế':'E','Ễ':'E','Ể':'E','Ẽ':'E','Ē':'E','Ḕ':'E','Ḗ':'E','Ĕ':'E','Ė':'E','Ë':'E','Ẻ':'E','Ě':'E','Ȅ':'E','Ȇ':'E','Ẹ':'E','Ệ':'E','Ȩ':'E','Ḝ':'E','Ę':'E','Ḙ':'E','Ḛ':'E','Ɛ':'E','Ǝ':'E','Ⓕ':'F','Ｆ':'F','Ḟ':'F','Ƒ':'F','Ꝼ':'F','Ⓖ':'G','Ｇ':'G','Ǵ':'G','Ĝ':'G','Ḡ':'G','Ğ':'G','Ġ':'G','Ǧ':'G','Ģ':'G','Ǥ':'G','Ɠ':'G','Ꞡ':'G','Ᵹ':'G','Ꝿ':'G','Ⓗ':'H','Ｈ':'H','Ĥ':'H','Ḣ':'H','Ḧ':'H','Ȟ':'H','Ḥ':'H','Ḩ':'H','Ḫ':'H','Ħ':'H','Ⱨ':'H','Ⱶ':'H','Ɥ':'H','Ⓘ':'I','Ｉ':'I','Ì':'I','Í':'I','Î':'I','Ĩ':'I','Ī':'I','Ĭ':'I','İ':'I','Ï':'I','Ḯ':'I','Ỉ':'I','Ǐ':'I','Ȉ':'I','Ȋ':'I','Ị':'I','Į':'I','Ḭ':'I','Ɨ':'I','Ⓙ':'J','Ｊ':'J','Ĵ':'J','Ɉ':'J','Ⓚ':'K','Ｋ':'K','Ḱ':'K','Ǩ':'K','Ḳ':'K','Ķ':'K','Ḵ':'K','Ƙ':'K','Ⱪ':'K','Ꝁ':'K','Ꝃ':'K','Ꝅ':'K','Ꞣ':'K','Ⓛ':'L','Ｌ':'L','Ŀ':'L','Ĺ':'L','Ľ':'L','Ḷ':'L','Ḹ':'L','Ļ':'L','Ḽ':'L','Ḻ':'L','Ł':'L','Ƚ':'L','Ɫ':'L','Ⱡ':'L','Ꝉ':'L','Ꝇ':'L','Ꞁ':'L','Ǉ':'LJ','ǈ':'Lj','Ⓜ':'M','Ｍ':'M','Ḿ':'M','Ṁ':'M','Ṃ':'M','Ɱ':'M','Ɯ':'M','Ⓝ':'N','Ｎ':'N','Ǹ':'N','Ń':'N','Ñ':'N','Ṅ':'N','Ň':'N','Ṇ':'N','Ņ':'N','Ṋ':'N','Ṉ':'N','Ƞ':'N','Ɲ':'N','Ꞑ':'N','Ꞥ':'N','Ǌ':'NJ','ǋ':'Nj','Ⓞ':'O','Ｏ':'O','Ò':'O','Ó':'O','Ô':'O','Ồ':'O','Ố':'O','Ỗ':'O','Ổ':'O','Õ':'O','Ṍ':'O','Ȭ':'O','Ṏ':'O','Ō':'O','Ṑ':'O','Ṓ':'O','Ŏ':'O','Ȯ':'O','Ȱ':'O','Ö':'O','Ȫ':'O','Ỏ':'O','Ő':'O','Ǒ':'O','Ȍ':'O','Ȏ':'O','Ơ':'O','Ờ':'O','Ớ':'O','Ỡ':'O','Ở':'O','Ợ':'O','Ọ':'O','Ộ':'O','Ǫ':'O','Ǭ':'O','Ø':'O','Ǿ':'O','Ɔ':'O','Ɵ':'O','Ꝋ':'O','Ꝍ':'O','Ƣ':'OI','Ꝏ':'OO','Ȣ':'OU','Ⓟ':'P','Ｐ':'P','Ṕ':'P','Ṗ':'P','Ƥ':'P','Ᵽ':'P','Ꝑ':'P','Ꝓ':'P','Ꝕ':'P','Ⓠ':'Q','Ｑ':'Q','Ꝗ':'Q','Ꝙ':'Q','Ɋ':'Q','Ⓡ':'R','Ｒ':'R','Ŕ':'R','Ṙ':'R','Ř':'R','Ȑ':'R','Ȓ':'R','Ṛ':'R','Ṝ':'R','Ŗ':'R','Ṟ':'R','Ɍ':'R','Ɽ':'R','Ꝛ':'R','Ꞧ':'R','Ꞃ':'R','Ⓢ':'S','Ｓ':'S','ẞ':'S','Ś':'S','Ṥ':'S','Ŝ':'S','Ṡ':'S','Š':'S','Ṧ':'S','Ṣ':'S','Ṩ':'S','Ș':'S','Ş':'S','Ȿ':'S','Ꞩ':'S','Ꞅ':'S','Ⓣ':'T','Ｔ':'T','Ṫ':'T','Ť':'T','Ṭ':'T','Ț':'T','Ţ':'T','Ṱ':'T','Ṯ':'T','Ŧ':'T','Ƭ':'T','Ʈ':'T','Ⱦ':'T','Ꞇ':'T','Ꜩ':'TZ','Ⓤ':'U','Ｕ':'U','Ù':'U','Ú':'U','Û':'U','Ũ':'U','Ṹ':'U','Ū':'U','Ṻ':'U','Ŭ':'U','Ü':'U','Ǜ':'U','Ǘ':'U','Ǖ':'U','Ǚ':'U','Ủ':'U','Ů':'U','Ű':'U','Ǔ':'U','Ȕ':'U','Ȗ':'U','Ư':'U','Ừ':'U','Ứ':'U','Ữ':'U','Ử':'U','Ự':'U','Ụ':'U','Ṳ':'U','Ų':'U','Ṷ':'U','Ṵ':'U','Ʉ':'U','Ⓥ':'V','Ｖ':'V','Ṽ':'V','Ṿ':'V','Ʋ':'V','Ꝟ':'V','Ʌ':'V','Ꝡ':'VY','Ⓦ':'W','Ｗ':'W','Ẁ':'W','Ẃ':'W','Ŵ':'W','Ẇ':'W','Ẅ':'W','Ẉ':'W','Ⱳ':'W','Ⓧ':'X','Ｘ':'X','Ẋ':'X','Ẍ':'X','Ⓨ':'Y','Ｙ':'Y','Ỳ':'Y','Ý':'Y','Ŷ':'Y','Ỹ':'Y','Ȳ':'Y','Ẏ':'Y','Ÿ':'Y','Ỷ':'Y','Ỵ':'Y','Ƴ':'Y','Ɏ':'Y','Ỿ':'Y','Ⓩ':'Z','Ｚ':'Z','Ź':'Z','Ẑ':'Z','Ż':'Z','Ž':'Z','Ẓ':'Z','Ẕ':'Z','Ƶ':'Z','Ȥ':'Z','Ɀ':'Z','Ⱬ':'Z','Ꝣ':'Z','ⓐ':'a','ａ':'a','ẚ':'a','à':'a','á':'a','â':'a','ầ':'a','ấ':'a','ẫ':'a','ẩ':'a','ã':'a','ā':'a','ă':'a','ằ':'a','ắ':'a','ẵ':'a','ẳ':'a','ȧ':'a','ǡ':'a','ä':'a','ǟ':'a','ả':'a','å':'a','ǻ':'a','ǎ':'a','ȁ':'a','ȃ':'a','ạ':'a','ậ':'a','ặ':'a','ḁ':'a','ą':'a','ⱥ':'a','ɐ':'a','ꜳ':'aa','æ':'ae','ǽ':'ae','ǣ':'ae','ꜵ':'ao','ꜷ':'au','ꜹ':'av','ꜻ':'av','ꜽ':'ay','ⓑ':'b','ｂ':'b','ḃ':'b','ḅ':'b','ḇ':'b','ƀ':'b','ƃ':'b','ɓ':'b','ⓒ':'c','ｃ':'c','ć':'c','ĉ':'c','ċ':'c','č':'c','ç':'c','ḉ':'c','ƈ':'c','ȼ':'c','ꜿ':'c','ↄ':'c','ⓓ':'d','ｄ':'d','ḋ':'d','ď':'d','ḍ':'d','ḑ':'d','ḓ':'d','ḏ':'d','đ':'d','ƌ':'d','ɖ':'d','ɗ':'d','ꝺ':'d','ǳ':'dz','ǆ':'dz','ⓔ':'e','ｅ':'e','è':'e','é':'e','ê':'e','ề':'e','ế':'e','ễ':'e','ể':'e','ẽ':'e','ē':'e','ḕ':'e','ḗ':'e','ĕ':'e','ė':'e','ë':'e','ẻ':'e','ě':'e','ȅ':'e','ȇ':'e','ẹ':'e','ệ':'e','ȩ':'e','ḝ':'e','ę':'e','ḙ':'e','ḛ':'e','ɇ':'e','ɛ':'e','ǝ':'e','ⓕ':'f','ｆ':'f','ḟ':'f','ƒ':'f','ꝼ':'f','ⓖ':'g','ｇ':'g','ǵ':'g','ĝ':'g','ḡ':'g','ğ':'g','ġ':'g','ǧ':'g','ģ':'g','ǥ':'g','ɠ':'g','ꞡ':'g','ᵹ':'g','ꝿ':'g','ⓗ':'h','ｈ':'h','ĥ':'h','ḣ':'h','ḧ':'h','ȟ':'h','ḥ':'h','ḩ':'h','ḫ':'h','ẖ':'h','ħ':'h','ⱨ':'h','ⱶ':'h','ɥ':'h','ƕ':'hv','ⓘ':'i','ｉ':'i','ì':'i','í':'i','î':'i','ĩ':'i','ī':'i','ĭ':'i','ï':'i','ḯ':'i','ỉ':'i','ǐ':'i','ȉ':'i','ȋ':'i','ị':'i','į':'i','ḭ':'i','ɨ':'i','ı':'i','ⓙ':'j','ｊ':'j','ĵ':'j','ǰ':'j','ɉ':'j','ⓚ':'k','ｋ':'k','ḱ':'k','ǩ':'k','ḳ':'k','ķ':'k','ḵ':'k','ƙ':'k','ⱪ':'k','ꝁ':'k','ꝃ':'k','ꝅ':'k','ꞣ':'k','ⓛ':'l','ｌ':'l','ŀ':'l','ĺ':'l','ľ':'l','ḷ':'l','ḹ':'l','ļ':'l','ḽ':'l','ḻ':'l','ſ':'l','ł':'l','ƚ':'l','ɫ':'l','ⱡ':'l','ꝉ':'l','ꞁ':'l','ꝇ':'l','ǉ':'lj','ⓜ':'m','ｍ':'m','ḿ':'m','ṁ':'m','ṃ':'m','ɱ':'m','ɯ':'m','ⓝ':'n','ｎ':'n','ǹ':'n','ń':'n','ñ':'n','ṅ':'n','ň':'n','ṇ':'n','ņ':'n','ṋ':'n','ṉ':'n','ƞ':'n','ɲ':'n','ŉ':'n','ꞑ':'n','ꞥ':'n','ǌ':'nj','ⓞ':'o','ｏ':'o','ò':'o','ó':'o','ô':'o','ồ':'o','ố':'o','ỗ':'o','ổ':'o','õ':'o','ṍ':'o','ȭ':'o','ṏ':'o','ō':'o','ṑ':'o','ṓ':'o','ŏ':'o','ȯ':'o','ȱ':'o','ö':'o','ȫ':'o','ỏ':'o','ő':'o','ǒ':'o','ȍ':'o','ȏ':'o','ơ':'o','ờ':'o','ớ':'o','ỡ':'o','ở':'o','ợ':'o','ọ':'o','ộ':'o','ǫ':'o','ǭ':'o','ø':'o','ǿ':'o','ɔ':'o','ꝋ':'o','ꝍ':'o','ɵ':'o','ƣ':'oi','ȣ':'ou','ꝏ':'oo','ⓟ':'p','ｐ':'p','ṕ':'p','ṗ':'p','ƥ':'p','ᵽ':'p','ꝑ':'p','ꝓ':'p','ꝕ':'p','ⓠ':'q','ｑ':'q','ɋ':'q','ꝗ':'q','ꝙ':'q','ⓡ':'r','ｒ':'r','ŕ':'r','ṙ':'r','ř':'r','ȑ':'r','ȓ':'r','ṛ':'r','ṝ':'r','ŗ':'r','ṟ':'r','ɍ':'r','ɽ':'r','ꝛ':'r','ꞧ':'r','ꞃ':'r','ⓢ':'s','ｓ':'s','ß':'s','ś':'s','ṥ':'s','ŝ':'s','ṡ':'s','š':'s','ṧ':'s','ṣ':'s','ṩ':'s','ș':'s','ş':'s','ȿ':'s','ꞩ':'s','ꞅ':'s','ẛ':'s','ⓣ':'t','ｔ':'t','ṫ':'t','ẗ':'t','ť':'t','ṭ':'t','ț':'t','ţ':'t','ṱ':'t','ṯ':'t','ŧ':'t','ƭ':'t','ʈ':'t','ⱦ':'t','ꞇ':'t','ꜩ':'tz','ⓤ':'u','ｕ':'u','ù':'u','ú':'u','û':'u','ũ':'u','ṹ':'u','ū':'u','ṻ':'u','ŭ':'u','ü':'u','ǜ':'u','ǘ':'u','ǖ':'u','ǚ':'u','ủ':'u','ů':'u','ű':'u','ǔ':'u','ȕ':'u','ȗ':'u','ư':'u','ừ':'u','ứ':'u','ữ':'u','ử':'u','ự':'u','ụ':'u','ṳ':'u','ų':'u','ṷ':'u','ṵ':'u','ʉ':'u','ⓥ':'v','ｖ':'v','ṽ':'v','ṿ':'v','ʋ':'v','ꝟ':'v','ʌ':'v','ꝡ':'vy','ⓦ':'w','ｗ':'w','ẁ':'w','ẃ':'w','ŵ':'w','ẇ':'w','ẅ':'w','ẘ':'w','ẉ':'w','ⱳ':'w','ⓧ':'x','ｘ':'x','ẋ':'x','ẍ':'x','ⓨ':'y','ｙ':'y','ỳ':'y','ý':'y','ŷ':'y','ỹ':'y','ȳ':'y','ẏ':'y','ÿ':'y','ỷ':'y','ẙ':'y','ỵ':'y','ƴ':'y','ɏ':'y','ỿ':'y','ⓩ':'z','ｚ':'z','ź':'z','ẑ':'z','ż':'z','ž':'z','ẓ':'z','ẕ':'z','ƶ':'z','ȥ':'z','ɀ':'z','ⱬ':'z','ꝣ':'z'};J=a(document),H=function(){var a=1;return function(){return a++}}(),J.on('mousemove',function(a){L.x=a.pageX,L.y=a.pageY}),E=C(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,f,g,h,k='.select2-results';this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data('select2')!==b&&null!==c.element.data('select2')&&c.element.data('select2').destroy(),this.container=this.createContainer(),this.containerId='s2id_'+(c.element.attr('id')||'autogen'+H()),this.containerSelector='#'+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1'),this.container.attr('id',this.containerId),this.body=l(function(){return c.element.closest('body')}),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr('style',c.element.attr('style')),this.container.css(z(c.containerCss)),this.container.addClass(z(c.containerCssClass)),this.elementTabIndex=this.opts.element.attr('tabindex'),this.opts.element.data('select2',this).attr('tabindex','-1').before(this.container),this.container.data('select2',this),this.dropdown=this.container.find('.select2-drop'),this.dropdown.addClass(z(c.dropdownCssClass)),this.dropdown.data('select2',this),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.results=d=this.container.find(k),this.search=f=this.container.find('input.select2-input'),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),j(this.results),this.dropdown.on('mousemove-filtered touchstart touchmove touchend',k,this.bind(this.highlightUnderEvent)),m(80,this.results),this.dropdown.on('scroll-debounced',k,this.bind(this.loadMoreIfNeeded)),a(this.container).on('change','.select2-input',function(a){a.stopPropagation()}),a(this.dropdown).on('change','.select2-input',function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),p(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),p(a))}),i(f),f.on('keyup-change input paste',this.bind(this.updateResults)),f.on('focus',function(){f.addClass('select2-focused')}),f.on('blur',function(){f.removeClass('select2-focused')}),this.dropdown.on('mouseup',k,this.bind(function(b){a(b.target).closest('.select2-result-selectable').length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on('click mouseup mousedown',function(a){a.stopPropagation()}),a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr('maxlength',c.maximumInputLength);var g=c.element.prop('disabled');g===b&&(g=!1),this.enable(!g);var h=c.element.prop('readonly');h===b&&(h=!1),this.readonly(h),K=K||e(),this.autofocus=c.element.prop('autofocus'),c.element.prop('autofocus',!1),this.autofocus&&this.focus(),this.nextSearchTerm=b},destroy:function(){var a=this.opts.element,c=a.data('select2');this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),c!==b&&(c.container.remove(),c.dropdown.remove(),a.removeClass('select2-offscreen').removeData('select2').off('.select2').prop('autofocus',this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr('tabindex'),a.show())},optionToData:function(a){return a.is('option')?{id:a.prop('value'),text:a.text(),element:a.get(),css:a.attr('class'),disabled:a.prop('disabled'),locked:f(a.attr('locked'),'locked')||f(a.data('locked'),!0)}:a.is('optgroup')?{text:a.attr('label'),children:[],element:a.get(),css:a.attr('class')}:void 0},prepareOpts:function(c){var d,e,h,i,j=this;if(d=c.element,'select'===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(['id','multiple','ajax','query','createSearchChoice','initSelection','data','tags'],function(){if(this in c)throw new Error('Option \''+this+'\' is not allowed for Select2 when attached to a <select> element.')}),c=a.extend({},{populateResults:function(d,e,f){var g,h=this.opts.id;g=function(d,e,i){var k,l,m,n,o,p,q,r,s,t;for(d=c.sortResults(d,e,f),k=0,l=d.length;l>k;k+=1)m=d[k],o=m.disabled===!0,n=!o&&h(m)!==b,p=m.children&&m.children.length>0,q=a('<li></li>'),q.addClass('select2-results-dept-'+i),q.addClass('select2-result'),q.addClass(n?'select2-result-selectable':'select2-result-unselectable'),o&&q.addClass('select2-disabled'),p&&q.addClass('select2-result-with-children'),q.addClass(j.opts.formatResultCssClass(m)),r=a(document.createElement('div')),r.addClass('select2-result-label'),t=c.formatResult(m,r,f,j.opts.escapeMarkup),t!==b&&r.html(t),q.append(r),p&&(s=a('<ul></ul>'),s.addClass('select2-result-sub'),g(m.children,s,i+1),q.append(s)),q.data('select2-data',m),e.append(q)},g(e,d,0)}},a.fn.select2.defaults,c),'function'!=typeof c.id&&(h=c.id,c.id=function(a){return a[h]}),a.isArray(c.element.data('select2Tags'))){if('tags'in c)throw'tags specified as both an attribute \'data-select2-tags\' and in options of Select2 '+c.element.attr('id');c.tags=c.element.data('select2Tags')}if(e?(c.query=this.bind(function(a){var c,e,f,g={results:[],more:!1},h=a.term;f=function(b,c){var d;b.is('option')?a.matcher(h,b.text(),b)&&c.push(j.optionToData(b)):b.is('optgroup')&&(d=j.optionToData(b),b.children().each2(function(a,b){f(b,d.children)}),d.children.length>0&&c.push(d))},c=d.children(),this.getPlaceholder()!==b&&c.length>0&&(e=this.getPlaceholderOption(),e&&(c=c.not(e))),c.each2(function(a,b){f(b,g.results)}),a.callback(g)}),c.id=function(a){return a.id},c.formatResultCssClass=function(a){return a.css}):'query'in c||('ajax'in c?(i=c.element.data('ajax-url'),i&&i.length>0&&(c.ajax.url=i),c.query=v.call(c.element,c.ajax)):'data'in c?c.query=w(c.data):'tags'in c&&(c.query=x(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(g(b.val(),c.separator)).each(function(){var b=this,d=this,g=c.tags;a.isFunction(g)&&(g=g()),a(g).each(function(){return f(this.id,b)?(d=this.text,!1):void 0}),e.push({id:b,text:d})}),d(e)}))),'function'!=typeof c.query)throw'query function not defined for Select2 '+c.element.attr('id');return c},monitorSource:function(){var a,c=this.opts.element;c.on('change.select2',this.bind(function(){this.opts.element.data('select2-change-triggered')!==!0&&this.initSelection()})),a=this.bind(function(){var a,d=c.prop('disabled');d===b&&(d=!1),this.enable(!d);var a=c.prop('readonly');a===b&&(a=!1),this.readonly(a),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(z(this.opts.containerCssClass)),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(this.opts.dropdownCssClass))}),c.on('propertychange.select2 DOMAttrModified.select2',a),this.mutationCallback===b&&(this.mutationCallback=function(b){b.forEach(a)}),'undefined'!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(c.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event('select2-selecting',{val:this.id(b),object:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:'change',val:this.val()}),this.opts.element.data('select2-change-triggered',!0),this.opts.element.trigger(b),this.opts.element.data('select2-change-triggered',!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass('select2-container-disabled',b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop('disabled',!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){return a===b&&(a=!1),this._readonly===a?!1:(this._readonly=a,this.opts.element.prop('readonly',a),this.enableInterface(),!0)},opened:function(){return this.container.hasClass('select2-dropdown-open')},positionDropdown:function(){var b,c,d,e,f=this.dropdown,g=this.container.offset(),h=this.container.outerHeight(!1),i=this.container.outerWidth(!1),j=f.outerHeight(!1),k=a(window).scrollLeft()+a(window).width(),l=a(window).scrollTop()+a(window).height(),m=g.top+h,n=g.left,o=l>=m+j,p=g.top-j>=this.body().scrollTop(),q=f.outerWidth(!1),r=k>=n+q,s=f.hasClass('select2-drop-above');this.opts.dropdownAutoWidth?(e=a('.select2-results',f)[0],f.addClass('select2-drop-auto-width'),f.css('width',''),q=f.outerWidth(!1)+(e.scrollHeight===e.clientHeight?0:K.width),q>i?i=q:q=i,r=k>=n+q):this.container.removeClass('select2-drop-auto-width'),'static'!==this.body().css('position')&&(b=this.body().offset(),m-=b.top,n-=b.left),s?(c=!0,!p&&o&&(c=!1)):(c=!1,!o&&p&&(c=!0)),r||(n=g.left+i-q),c?(m=g.top-j,this.container.addClass('select2-drop-above'),f.addClass('select2-drop-above')):(this.container.removeClass('select2-drop-above'),f.removeClass('select2-drop-above')),d=a.extend({top:m,left:n,width:i},z(this.opts.dropdownCss)),f.css(d)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event('select2-opening'),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass('select2-drop-above'),this.dropdown.removeClass('select2-drop-above')},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var b,c=this.containerId,d='scroll.'+c,e='resize.'+c,f='orientationchange.'+c;this.container.addClass('select2-dropdown-open').addClass('select2-container-active'),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),b=a('#select2-drop-mask'),0==b.length&&(b=a(document.createElement('div')),b.attr('id','select2-drop-mask').attr('class','select2-drop-mask'),b.hide(),b.appendTo(this.body()),b.on('mousedown touchstart click',function(b){var c,d=a('#select2-drop');d.length>0&&(c=d.data('select2'),c.opts.selectOnBlur&&c.selectHighlighted({noFocus:!0}),c.close({focus:!1}),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==b[0]&&this.dropdown.before(b),a('#select2-drop').removeAttr('id'),this.dropdown.attr('id','select2-drop'),b.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass('select2-drop-active');var g=this;this.container.parents().add(window).each(function(){a(this).on(e+' '+d+' '+f,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerId,c='scroll.'+b,d='resize.'+b,e='orientationchange.'+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a('#select2-drop-mask').hide(),this.dropdown.removeAttr('id'),this.dropdown.hide(),this.container.removeClass('select2-dropdown-open'),this.results.empty(),this.clearSearch(),this.search.removeClass('select2-active'),this.opts.element.trigger(a.Event('select2-close'))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return z(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var b,c,d,e,f,g,h,i=this.results;if(c=this.highlight(),!(0>c)){if(0==c)return i.scrollTop(0),void 0;b=this.findHighlightableChoices().find('.select2-result-label'),d=a(b[c]),e=d.offset().top+d.outerHeight(!0),c===b.length-1&&(h=i.find('li.select2-more-results'),h.length>0&&(e=h.offset().top+h.outerHeight(!0))),f=i.offset().top+i.outerHeight(!0),e>f&&i.scrollTop(i.scrollTop()+(e-f)),g=d.offset().top-i.offset().top,0>g&&'none'!=d.css('display')&&i.scrollTop(i.scrollTop()+g)}},findHighlightableChoices:function(){return this.results.find('.select2-result-selectable:not(.select2-selected):not(.select2-disabled)')},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass('select2-result-selectable')&&!e.hasClass('select2-disabled')&&!e.hasClass('select2-selected')){this.highlight(d);break}}},highlight:function(b){var c,e,f=this.findHighlightableChoices();return 0===arguments.length?d(f.filter('.select2-highlighted')[0],f.get()):(b>=f.length&&(b=f.length-1),0>b&&(b=0),this.removeHighlight(),c=a(f[b]),c.addClass('select2-highlighted'),this.ensureHighlightVisible(),e=c.data('select2-data'),e&&this.opts.element.trigger({type:'select2-highlight',val:this.id(e),choice:e}),void 0)},removeHighlight:function(){this.results.find('.select2-highlighted').removeClass('select2-highlighted')},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest('.select2-result-selectable');if(c.length>0&&!c.is('.select2-highlighted')){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a,b=this.results,c=b.find('li.select2-more-results'),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==c.length&&(a=c.offset().top-b.offset().top-b.height(),a<=this.opts.loadMorePadding&&(c.addClass('select2-active'),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(a){e.opened()&&(e.opts.populateResults.call(this,b,a.results,{term:f,page:d,context:g}),e.postprocessResults(a,!1,!1),a.more===!0?(c.detach().appendTo(b).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):c.remove(),e.positionDropdown(),e.resultsPage=d,e.context=a.context,this.opts.element.trigger({type:'select2-loaded',items:a}))})})))},tokenize:function(){},updateResults:function(c){function d(){j.removeClass('select2-active'),m.positionDropdown()}function e(a){k.html(a),d()}var g,h,i,j=this.search,k=this.results,l=this.opts,m=this,n=j.val(),o=a.data(this.container,'select2-last-term');if((c===!0||!o||!f(n,o))&&(a.data(this.container,'select2-last-term',n),c===!0||this.showSearchInput!==!1&&this.opened())){i=++this.queryCount;var p=this.getMaximumSelectionSize();if(p>=1&&(g=this.data(),a.isArray(g)&&g.length>=p&&y(l.formatSelectionTooBig,'formatSelectionTooBig')))return e('<li class=\'select2-selection-limit\'>'+l.formatSelectionTooBig(p)+'</li>'),void 0;if(j.val().length<l.minimumInputLength)return y(l.formatInputTooShort,'formatInputTooShort')?e('<li class=\'select2-no-results\'>'+l.formatInputTooShort(j.val(),l.minimumInputLength)+'</li>'):e(''),c&&this.showSearch&&this.showSearch(!0),void 0;if(l.maximumInputLength&&j.val().length>l.maximumInputLength)return y(l.formatInputTooLong,'formatInputTooLong')?e('<li class=\'select2-no-results\'>'+l.formatInputTooLong(j.val(),l.maximumInputLength)+'</li>'):e(''),void 0;l.formatSearching&&0===this.findHighlightableChoices().length&&e('<li class=\'select2-searching\'>'+l.formatSearching()+'</li>'),j.addClass('select2-active'),this.removeHighlight(),h=this.tokenize(),h!=b&&null!=h&&j.val(h),this.resultsPage=1,l.query({element:l.element,term:j.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(g){var h;if(i==this.queryCount){if(!this.opened())return this.search.removeClass('select2-active'),void 0;if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&''!==j.val()&&(h=this.opts.createSearchChoice.call(m,j.val(),g.results),h!==b&&null!==h&&m.id(h)!==b&&null!==m.id(h)&&0===a(g.results).filter(function(){return f(m.id(this),m.id(h))}).length&&g.results.unshift(h)),0===g.results.length&&y(l.formatNoMatches,'formatNoMatches'))return e('<li class=\'select2-no-results\'>'+l.formatNoMatches(j.val())+'</li>'),void 0;k.empty(),m.opts.populateResults.call(this,k,g.results,{term:j.val(),page:this.resultsPage,context:null}),g.more===!0&&y(l.formatLoadMore,'formatLoadMore')&&(k.append('<li class=\'select2-more-results\'>'+m.opts.escapeMarkup(l.formatLoadMore(this.resultsPage))+'</li>'),window.setTimeout(function(){m.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),d(),this.opts.element.trigger({type:'select2-loaded',items:g})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass('select2-container-active'),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find('.select2-search-choice-focus').removeClass('select2-search-choice-focus')},focusSearch:function(){n(this.search)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find('.select2-highlighted'),d=c.closest('.select2-result').data('select2-data');d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr('placeholder')||this.opts.element.attr('data-placeholder')||this.opts.element.data('placeholder')||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var a=this.select.children().first();if(this.opts.placeholderOption!==b)return'first'===this.opts.placeholderOption&&a||'function'==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(''===a.text()&&''===a.val())return a}},initContainerWidth:function(){function c(){var c,d,e,f,g;if('off'===this.opts.width)return null;if('element'===this.opts.width)return 0===this.opts.element.outerWidth(!1)?'auto':this.opts.element.outerWidth(!1)+'px';if('copy'===this.opts.width||'resolve'===this.opts.width){if(c=this.opts.element.attr('style'),c!==b)for(d=c.split(';'),f=0,g=d.length;g>f;f+=1)if(e=d[f].replace(/\s/g,'').match(/[^-]width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return'resolve'===this.opts.width?(c=this.opts.element.css('width'),c.indexOf('%')>0?c:0===this.opts.element.outerWidth(!1)?'auto':this.opts.element.outerWidth(!1)+'px'):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css('width',d)}}),F=C(E,{createContainer:function(){var b=a(document.createElement('div')).attr({'class':'select2-container'}).html(['<a href=\'javascript:void(0)\' onclick=\'return false;\' class=\'select2-choice\' tabindex=\'-1\'>','   <span class=\'select2-chosen\'>&nbsp;</span><abbr class=\'select2-search-choice-close\'></abbr>','   <span class=\'select2-arrow\'><b></b></span>','</a>','<input class=\'select2-focusser select2-offscreen\' type=\'text\'/>','<div class=\'select2-drop select2-display-none\'>','   <div class=\'select2-search\'>','       <input type=\'text\' autocomplete=\'off\' autocorrect=\'off\' autocapitalize=\'off\' spellcheck=\'false\' class=\'select2-input\'/>','   </div>','   <ul class=\'select2-results\'>','   </ul>','</div>'].join(''));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop('disabled',!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e)),''===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop('disabled',!0).val(''),this.updateResults(!0),this.opts.element.trigger(a.Event('select2-open'))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr('disabled'),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr('disabled'),this.focusser.focus())},isFocused:function(){return this.container.hasClass('select2-container-active')},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr('disabled'),this.focusser.focus()},destroy:function(){a('label[for=\''+this.focusser.attr('id')+'\']').attr('for',this.opts.element.attr('id')),this.parent.destroy.apply(this,arguments)},initContainer:function(){var b,c=this.container,d=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=b=c.find('.select2-choice'),this.focusser=c.find('.select2-focusser'),this.focusser.attr('id','s2id_autogen'+H()),a('label[for=\''+this.opts.element.attr('id')+'\']').attr('for',this.focusser.attr('id')),this.focusser.attr('tabindex',this.elementTabIndex),this.search.on('keydown',this.bind(function(a){if(this.isInterfaceEnabled()){if(a.which===D.PAGE_UP||a.which===D.PAGE_DOWN)return p(a),void 0;switch(a.which){case D.UP:case D.DOWN:return this.moveHighlight(a.which===D.UP?-1:1),p(a),void 0;case D.ENTER:return this.selectHighlighted(),p(a),void 0;case D.TAB:return this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),void 0;case D.ESC:return this.cancel(a),p(a),void 0}}})),this.search.on('blur',this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on('keydown',this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==D.TAB&&!D.isControl(a)&&!D.isFunctionKey(a)&&a.which!==D.ESC){if(this.opts.openOnEnter===!1&&a.which===D.ENTER)return p(a),void 0;if(a.which==D.DOWN||a.which==D.UP||a.which==D.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),p(a),void 0}return a.which==D.DELETE||a.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),p(a),void 0):void 0}})),i(this.focusser),this.focusser.on('keyup-change input',this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on('mousedown','abbr',this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),q(a),this.close(),this.selection.focus())})),b.on('mousedown',this.bind(function(b){this.container.hasClass('select2-container-active')||this.opts.element.trigger(a.Event('select2-focus')),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(b)})),d.on('mousedown',this.bind(function(){this.search.focus()})),b.on('focus',this.bind(function(a){p(a)})),this.focusser.on('focus',this.bind(function(){this.container.hasClass('select2-container-active')||this.opts.element.trigger(a.Event('select2-focus')),this.container.addClass('select2-container-active')})).on('blur',this.bind(function(){this.opened()||(this.container.removeClass('select2-container-active'),this.opts.element.trigger(a.Event('select2-blur')))})),this.search.on('focus',this.bind(function(){this.container.hasClass('select2-container-active')||this.opts.element.trigger(a.Event('select2-focus')),this.container.addClass('select2-container-active')})),this.initContainerWidth(),this.opts.element.addClass('select2-offscreen'),this.setPlaceholder()},clear:function(a){var b=this.selection.data('select2-data');if(b){var c=this.getPlaceholderOption();this.opts.element.val(c?c.val():''),this.selection.find('.select2-chosen').empty(),this.selection.removeData('select2-data'),this.setPlaceholder(),a!==!1&&(this.opts.element.trigger({type:'select2-removed',val:this.id(b),choice:b}),this.triggerChange({removed:b}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return this.opts.placeholder?(a=this.getPlaceholderOption())!==b&&a.is(':selected')||''===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val():!1},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return'select'===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find(':selected');b(c.optionToData(d))}:'data'in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),g=null;b.query({matcher:function(a,c,d){var h=f(e,b.id(d));return h&&(g=d),h},callback:a.isFunction(d)?function(){d(g)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find('.select2-chosen').html(this.opts.escapeMarkup(a)),this.selection.addClass('select2-default'),this.container.removeClass('select2-allowclear')}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return f(e.id(b.data('select2-data')),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&(b===!0&&d>=0?this.highlight(d):this.highlight(0)),b===!0){var g=this.opts.minimumResultsForSearch;g>=0&&this.showSearch(A(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find('.select2-search').toggleClass('select2-search-hidden',!b),this.dropdown.find('.select2-search').toggleClass('select2-offscreen',!b),a(this.dropdown,this.container).toggleClass('select2-with-searchbox',b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:'select2-selected',val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||this.selection.focus(),f(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var c,d,e=this.selection.find('.select2-chosen');this.selection.data('select2-data',a),e.empty(),null!==a&&(c=this.opts.formatSelection(a,e,this.opts.escapeMarkup)),c!==b&&e.append(c),d=this.opts.formatSelectionCssClass(a,e),d!==b&&e.addClass(d),this.selection.removeClass('select2-default'),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass('select2-allowclear')},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find(':selected').each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return this.clear(c),void 0;if(this.opts.initSelection===b)throw new Error('cannot call val() if initSelection() is not defined');this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):''),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(''),this.focusser.val('')},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data('select2-data'),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),a?(c=this.data(),this.opts.element.val(a?this.id(a):''),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d),void 0)}}),G=C(E,{createContainer:function(){var b=a(document.createElement('div')).attr({'class':'select2-container select2-container-multi'}).html(['<ul class=\'select2-choices\'>','  <li class=\'select2-search-field\'>','    <input type=\'text\' autocomplete=\'off\' autocorrect=\'off\' autocapitalize=\'off\' spellcheck=\'false\' class=\'select2-input\'>','  </li>','</ul>','<div class=\'select2-drop select2-drop-multi select2-display-none\'>','   <ul class=\'select2-results\'>','   </ul>','</div>'].join(''));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return'select'===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find(':selected').each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:'data'in b&&(b.initSelection=b.initSelection||function(c,d){var e=g(c.val(),b.separator),h=[];b.query({matcher:function(c,d,g){var i=a.grep(e,function(a){return f(a,b.id(g))}).length;return i&&h.push(g),i},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],i=0;i<h.length;i++){var j=h[i];if(f(g,b.id(j))){a.push(j),h.splice(i,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find('.select2-search-choice-focus');b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger('choice-deselected',b),b.removeClass('select2-search-choice-focus'),a&&a.length&&(this.close(),a.addClass('select2-search-choice-focus'),this.opts.element.trigger('choice-selected',a)))},destroy:function(){a('label[for=\''+this.search.attr('id')+'\']').attr('for',this.opts.element.attr('id')),this.parent.destroy.apply(this,arguments)},initContainer:function(){var b,c='.select2-choices';this.searchContainer=this.container.find('.select2-search-field'),this.selection=b=this.container.find(c);var d=this;this.selection.on('click','.select2-search-choice',function(){d.search[0].focus(),d.selectChoice(a(this))}),this.search.attr('id','s2id_autogen'+H()),a('label[for=\''+this.opts.element.attr('id')+'\']').attr('for',this.search.attr('id')),this.search.on('input paste',this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr('tabindex',this.elementTabIndex),this.keydowns=0,this.search.on('keydown',this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var c=b.find('.select2-search-choice-focus'),d=c.prev('.select2-search-choice:not(.select2-locked)'),e=c.next('.select2-search-choice:not(.select2-locked)'),f=o(this.search);if(!(!c.length||a.which!=D.LEFT&&a.which!=D.RIGHT&&a.which!=D.BACKSPACE&&a.which!=D.DELETE&&a.which!=D.ENTER)){var g=c;return a.which==D.LEFT&&d.length?g=d:a.which==D.RIGHT?g=e.length?e:null:a.which===D.BACKSPACE?(this.unselect(c.first()),this.search.width(10),g=d.length?d:e):a.which==D.DELETE?(this.unselect(c.first()),this.search.width(10),g=e.length?e:null):a.which==D.ENTER&&(g=null),this.selectChoice(g),p(a),g&&g.length||this.open(),void 0}if((a.which===D.BACKSPACE&&1==this.keydowns||a.which==D.LEFT)&&0==f.offset&&!f.length)return this.selectChoice(b.find('.select2-search-choice:not(.select2-locked)').last()),p(a),void 0;if(this.selectChoice(null),this.opened())switch(a.which){case D.UP:case D.DOWN:return this.moveHighlight(a.which===D.UP?-1:1),p(a),void 0;case D.ENTER:return this.selectHighlighted(),p(a),void 0;case D.TAB:return this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),void 0;case D.ESC:return this.cancel(a),p(a),void 0}if(a.which!==D.TAB&&!D.isControl(a)&&!D.isFunctionKey(a)&&a.which!==D.BACKSPACE&&a.which!==D.ESC){if(a.which===D.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===D.PAGE_UP||a.which===D.PAGE_DOWN)&&p(a),a.which===D.ENTER&&p(a)}}})),this.search.on('keyup',this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on('blur',this.bind(function(b){this.container.removeClass('select2-container-active'),this.search.removeClass('select2-focused'),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event('select2-blur'))})),this.container.on('click',c,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest('.select2-search-choice').length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass('select2-container-active')||this.opts.element.trigger(a.Event('select2-focus')),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on('focus',c,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass('select2-container-active')||this.opts.element.trigger(a.Event('select2-focus')),this.container.addClass('select2-container-active'),this.dropdown.addClass('select2-drop-active'),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass('select2-offscreen'),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop('disabled',!this.isInterfaceEnabled())},initSelection:function(){if(''===this.opts.element.val()&&''===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||''!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass('select2-focused')===!1?(this.search.val(a).addClass('select2-default'),this.search.width(c>0?c:this.container.css('width'))):this.search.val('').width(10)},clearPlaceholder:function(){this.search.hasClass('select2-default')&&this.search.val('').removeClass('select2-default')},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(a.Event('select2-open'))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass('select2-focused')},updateSelection:function(b){var c=[],e=[],f=this;a(b).each(function(){d(f.id(this),c)<0&&(c.push(f.id(this)),e.push(this))}),b=e,this.selection.find('.select2-search-choice').remove(),a(b).each(function(){f.addSelectedChoice(this)}),f.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:'selected',val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),b&&b.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var d,e,f=!c.locked,g=a('<li class=\'select2-search-choice\'>    <div></div>    <a href=\'#\' onclick=\'return false;\' class=\'select2-search-choice-close\' tabindex=\'-1\'></a></li>'),h=a('<li class=\'select2-search-choice select2-locked\'><div></div></li>'),i=f?g:h,j=this.id(c),k=this.getVal();d=this.opts.formatSelection(c,i.find('div'),this.opts.escapeMarkup),d!=b&&i.find('div').replaceWith('<div>'+d+'</div>'),e=this.opts.formatSelectionCssClass(c,i.find('div')),e!=b&&i.addClass(e),f&&i.find('.select2-search-choice-close').on('mousedown',p).on('click dblclick',this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest('.select2-search-choice').fadeOut('fast',this.bind(function(){this.unselect(a(b.target)),this.selection.find('.select2-search-choice-focus').removeClass('select2-search-choice-focus'),this.close(),this.focusSearch()})).dequeue(),p(b))})).on('focus',this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass('select2-container-active'),this.dropdown.addClass('select2-drop-active'))})),i.data('select2-data',c),i.insertBefore(this.searchContainer),k.push(j),this.setVal(k)},unselect:function(a){var b,c,e=this.getVal();if(a=a.closest('.select2-search-choice'),0===a.length)throw'Invalid argument: '+a+'. Must be .select2-search-choice';b=a.data('select2-data'),b&&(c=d(this.id(b),e),c>=0&&(e.splice(c,1),this.setVal(e),this.select&&this.postprocessResults()),a.remove(),this.opts.element.trigger({type:'removed',val:this.id(b),choice:b}),this.triggerChange({removed:b}))},postprocessResults:function(a,b,c){var e=this.getVal(),f=this.results.find('.select2-result'),g=this.results.find('.select2-result-with-children'),h=this;f.each2(function(a,b){var c=h.id(b.data('select2-data'));d(c,e)>=0&&(b.addClass('select2-selected'),b.find('.select2-result-selectable').addClass('select2-selected'))}),g.each2(function(a,b){b.is('.select2-result-selectable')||0!==b.find('.select2-result-selectable:not(.select2-selected)').length||b.addClass('select2-selected')}),-1==this.highlight()&&c!==!1&&h.highlight(0),!this.opts.createSearchChoice&&!f.filter('.select2-result:not(.select2-selected)').length>0&&(!a||a&&!a.more&&0===this.results.find('.select2-no-results').length)&&y(h.opts.formatNoMatches,'formatNoMatches')&&this.results.append('<li class=\'select2-no-results\'>'+h.opts.formatNoMatches(h.search.val())+'</li>')},getMaxSearchWidth:function(){return this.selection.width()-h(this.search)},resizeSearch:function(){var a,b,c,d,e,f=h(this.search);a=r(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(e)},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),g(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){d(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?'':c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)f(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(''),this.updateSelection([]),this.clearSearch(),d&&this.triggerChange({added:this.data(),removed:e}),void 0;if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error('val() cannot be called if initSelection() is not defined');this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error('Sorting of elements is not supported when attached to <select>. Attach to <input type=\'hidden\'/> instead.');this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find('.select2-search-choice').each(function(){b.push(c.opts.id(a(this).data('select2-data')))}),this.setVal(b),this.triggerChange()},data:function(b,c){var d,e,f=this;return 0===arguments.length?this.selection.find('.select2-search-choice').map(function(){return a(this).data('select2-data')}).get():(e=this.data(),b||(b=[]),d=a.map(b,function(a){return f.opts.id(a)}),this.setVal(d),this.updateSelection(b),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(e,this.data())),void 0)}}),a.fn.select2=function(){var c,e,f,g,h,i=Array.prototype.slice.call(arguments,0),j=['val','destroy','opened','open','close','focus','isFocused','container','dropdown','onSortStart','onSortEnd','enable','disable','readonly','positionDropdown','data','search'],k=['opened','isFocused','container','dropdown'],l=['val','data'],m={search:'externalSearch'};return this.each(function(){if(0===i.length||'object'==typeof i[0])c=0===i.length?{}:a.extend({},i[0]),c.element=a(this),'select'===c.element.get(0).tagName.toLowerCase()?h=c.element.prop('multiple'):(h=c.multiple||!1,'tags'in c&&(c.multiple=h=!0)),e=h?new G:new F,e.init(c);else{if('string'!=typeof i[0])throw'Invalid arguments to select2 plugin: '+i;if(d(i[0],j)<0)throw'Unknown method: '+i[0];if(g=b,e=a(this).data('select2'),e===b)return;if(f=i[0],'container'===f?g=e.container:'dropdown'===f?g=e.dropdown:(m[f]&&(f=m[f]),g=e[f].apply(e,i.slice(1))),d(i[0],k)>=0||d(i[0],l)&&1==i.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:'copy',loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:'',dropdownCssClass:'',formatResult:function(a,b,c,d){var e=[];return t(a.text,c.term,e,d),e.join('')},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(){return b},formatSelectionCssClass:function(){return b},formatNoMatches:function(){return'No matches found'},formatInputTooShort:function(a,b){var c=b-a.length;return'Please enter '+c+' more character'+(1==c?'':'s')},formatInputTooLong:function(a,b){var c=a.length-b;return'Please delete '+c+' character'+(1==c?'':'s')},formatSelectionTooBig:function(a){return'You can only select '+a+' item'+(1==a?'':'s')},formatLoadMore:function(){return'Loading more results...'},formatSearching:function(){return'Searching...'},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return c(''+b).toUpperCase().indexOf(c(''+a).toUpperCase())>=0},separator:',',tokenSeparators:[],tokenizer:B,escapeMarkup:u,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b}},a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:'GET',cache:!1,dataType:'json'}},window.Select2={query:{ajax:v,local:w,tags:x},util:{debounce:k,markMatch:t,escapeMarkup:u,stripDiacritics:c},'class':{'abstract':E,single:F,multi:G}}}}(jQuery),define('select2-v3.4.2',function(){}),define('text!templates/dashboard/no-commission.htm',[],function(){return'<div class="Card PageDashboard-card WidgetNoCommission">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title"><%- T_("Bring your clients onto Freelancer and pay 0% commission") %></h3>\n    </div>\n    <div class="PageDashboard-card-body">\n        <p class="WidgetNoCommission-description">\n            <%- T_("Work with great clients outside of Freelancer? Sign them up and pay no commissions* on jobs you complete with them!") %>\n        </p>\n        <form id="send-no-commission-form" class="WidgetNoCommission-form">\n            <label for="no-commission-email" class="is-accessibly-hidden"><%- T_("Email Address") %></label>\n            <input id="no-commission-email" type="hidden" placeholder="henry@website.com, jane@fln.co, luke@company.com..." class="small-input" multiple></input>\n            <button class="btn btn-info btn-small btn-block"><%- T_("Send Invite") %></button>\n        </form>\n        <div id="no-commission-form-message" class="WidgetNoCommission-form-message is-hidden"></div>\n        <div class="WidgetNoCommission-conditions">\n            <%= T_("The 0% commissions apply to all project fees between new employers you bring to the platform and the referring account.") %>\n            <a href = "/no-commission/no-commission-invitation.php" data-qtsb-section="dashboard" data-qtsb-subsection="no-commission-invitation-widget" data-qtsb-label="link-details"><%= T_("View details.") %></a>\n        </div>\n    </div>\n</div>\n'}),define('dashboard/views/no-commission',['jquery-wrapper','underscore-wrapper','select2-v3.4.2','text!templates/dashboard/no-commission.htm'],function(a,b,c,d){function e(){function c(){return p.val().split(',').filter(function(a){return a!==''})}function e(a){return b.contains(c,a)}function f(a){var b=/^(?:(?:[^<>()[\]\\.,;:\s@\"]+(?:\.[^<>()[\]\\.,;:\s@\"]+)*)|(?:\".+\"))@(?:(?:\[[0-9]{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(?:(?:[a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}function g(){o.text(''),o.addClass('is-hidden')}function h(){g()}function i(){o.text(T_('Please enter a valid email.')),o.removeClass('is-hidden'),p.val(null).trigger('change')}function j(){o.text(T_('Sorry, something went wrong. Please try again later.')),o.removeClass('is-hidden')}function k(){o.text(T_('We have sent your client an email with the referral link!')),o.removeClass('is-hidden'),p.val(null).trigger('change')}function l(b){var c={csrf_token:getCSRFToken(),'emails[]':[]};return b.forEach(function(a){c['emails[]'].push(a)}),a.ajax({type:'POST',url:'/ajax/no-commission/sendNoCommissionEmails.php',data:c,success:k,error:j})}function m(a){window._t.push(['user_action',{section:'dashboard',sub_section:'no-commission-invitation-widget',label:'button-invite'}]),a.preventDefault();var b=c();if(b.length<1)return i();o.text(''),l(b)}function n(){var b=document.createElement('div');b.classList.add('is-hidden'),document.body.appendChild(b),p.select2({tags:!0,tokenSeparators:[',',' '],selectOnBlur:!0,placeholder:'henry@website.com, jane@fln.co, luke@company.com...',dropdownParent:a(b),width:'100%',formatResult:function(a){return a.text},formatSelection:function(a){return a.text},createSearchChoice:function(a){return f(a.trim())?(q=a.trim(),{id:a,text:a}):(q='',null)}}),p.on('select2-blur',function(){if(f(q)&&!e(q)){var a=c().concat(q);p.val(a)}q='',p.trigger('change')})}a('#no_commission_module').html(a(b.template(d)()));var o=a('#no-commission-form-message'),p=a('#no-commission-email'),q='';n(),a('#send-no-commission-form').on('submit',m),p.on('focus',h)}return{init:e}}),define('text!templates/dashboard/preferredFreelancerSupport.htm',[],function(){return'<div class="Card PageDashboard-card">\n    <div class="PageDashboard-card-header">\n        <h3 class="PageDashboard-card-title">\n            <%- T_("Preferred Freelancer Support") %>\n        </h3>\n    </div>\n    <div class="PageDashboard-card-body">\n        <p>\n            Need help? Our Preferred Freelancer Support is here to assist you with any queries or any issues you may have.\n        </p>\n        <div id="pf-support-form">\n            <textarea type="text" id="pf-support-input" placeholder="<%- T_("I have a question about...") %>" maxlength="1000" style="width:100%;"></textarea>\n            <button type="submit" id="pf-support-submit" class="btn btn-info btn-block"><%- T_("Get Help") %></button>\n        </div>\n        <div id="pf-support-error" class="alert alert-error hide">\n            <%- T_("An error occurred, your question was not posted. Try refreshing the page.") %>\n        </div>\n        <div id="pf-support-success" class="alert alert-info hide">\n            <%- T_("Your question was submitted") %>\n        </div>\n    </div>\n</div>\n'}),define('dashboard/views/preferredFreelancerSupport',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/preferredFreelancerSupport.htm'],function(a,b,c,d){return c.View.extend({compileTemplate:b.template(d),events:{'click #pf-support-submit':'createSupport','keypress #pf-support-input':'onKeyPress'},initialize:function(){this.constructor.__super__.initialize.call(this),b.bindAll(this,'render','createSupport','postSupportTicketCreate','onKeyPress')},render:function(){return a(this.el).html(this.compileTemplate()),this},createSupport:function(){var b=a(this.el).find('#pf-support-input'),c=a.trim(b.val());this.postSupportTicketCreate(c)},postSupportTicketCreate:function(b){var c=a(this.el).find('#pf-support-submit'),d=a(this.el).find('#pf-support-form'),e=a(this.el).find('#pf-support-success'),f=a(this.el).find('#pf-support-error');a.ajax({type:'POST',url:'../ajax/support-queue/ticket/create.php',dataType:'json',cache:!1,data:{csrf_token:getCSRFToken(),type:'pfpTickets',message:b},beforeSend:function(){c.addClass('processing'),e.addClass('hide'),f.addClass('hide')},complete:function(){c.removeClass('processing')},success:function(){e.removeClass('hide'),d.addClass('hide')},error:function(){f.removeClass('hide')}})},onKeyPress:function(a){a.keyCode===13&&this.createSupport(a)}})}),define('text!templates/dashboard/projectListFilters.htm',[],function(){return'<h2>Search projects</h2>\n<form class="form-search" action="">\n    <input id="search-query" type="text" class="input-medium search-query" placeholder="Search" value="<%- query %>">\n    <button type="submit" class="btn access"><%- T_("Search") %></button>\n</form>\n\n<h2><%- T_("Filter projects") %></h2>\n<ul class="nav nav-tabs">\n    <li<% if (filter_state == "all") {%> class="active"<% } %>><a href="#!projects/all/<%- filter_type %>/<%- sort %>"><%- T_("All") %></a></li>\n    <li<% if (filter_state == "open") {%> class="active"<% } %>><a href="#!projects/open/<%- filter_type %>/<%- sort %>"><%- T_("Open") %></a></li>\n    <li<% if (filter_state == "in_progress") {%> class="active"<% } %>><a href="#!projects/in_progress/<%- filter_type %>/<%- sort %>"><%- T_("In Progress") %></a></li>\n    <li<% if (filter_state == "past") {%> class="active"<% } %>><a href="#!projects/past/<%- filter_type %>/<%- sort %>"><%- T_("Past") %></a></li>\n</ul>\n\n<h2 class="access"><%- T_("Criteria") %></h2>\n<ul class="project-criteria">\n    <li><label class="checkbox" for="filter-projects"><strong class="project-type project"><%- T_("Work type:") %></strong> <input type="checkbox" id="filter-projects" <% if (filter_type == \'all\' || filter_type == \'projects\') { %>checked="checked"<% } %>><%- T_("Projects") %></label></li>\n    <li><label class="checkbox" for="filter-contests"><strong class="project-type contest"><%- T_("Work type:") %></strong> <input type="checkbox" id="filter-contests" <% if (filter_type == \'all\' || filter_type == \'contests\') { %>checked="checked"<% } %>><%- T_("Contests") %></label></li>\n</ul>\n'}),define('dashboard/views/projectListFilters',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/projectListFilters.htm','dashboard/collections/projectCollectionFactory'],function(a,b,c,d,e){var f=c.View.extend({events:{'keyup #search-query':'search','change #filter-projects':'changeFilter','change #filter-contests':'changeFilter'},compileTemplate:b.template(d),collection:null,thread:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','filter'),this.render();var c=this},search:function(b){clearTimeout(this.thread);var c=a(this.el).find('.search-query').val(),d=this;this.thread=setTimeout(function(){d.trigger('search',c)},600)},changeFilter:function(){var b=a(this.el).find('#filter-projects').is(':checked'),c=a(this.el).find('#filter-contests').is(':checked');b&&c?this.trigger('changeFilterType','all'):b?this.trigger('changeFilterType','projects'):c?this.trigger('changeFilterType','contests'):this.trigger('changeFilterType','all')},filter:function(a,b,c,d){this.options.filter_state=a,this.options.sort=c,this.options.filter_type=b,this.options.query=typeof d!='undefined'?d:'',this.render()},render:function(){a(this.el).html(this.compileTemplate({filter_state:this.options.filter_state,filter_type:this.options.filter_type,sort:this.options.sort,query:this.options.query}))}});return f}),define('text!templates/dashboard/projectListNav.htm',[],function(){return'      <!--<div class="navbar-inner">\n        <div class="container">\n            <div class="nav-collapse">\n          <form class="navbar-search pull-left" action="">\n            <input type="text" class="search-query span2" placeholder="Search">\n          </form>\n          <ul class="nav">\n            <li><%- T_("Sort By") %></li>\n            <li class="dropdown">\n              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><%- sort %> <b class="caret"></b></a>\n              <ul class="dropdown-menu">\n                <li><a href="#!projects/<%- filter_state %>/<%- filter_type %>/latest"><%- T_("Time") %></a></li>\n                <li><a href="#!projects/<%- filter_state %>/<%- filter_type %>/price"><%- T_("Price") %></a></li>\n                <li><a href="#!projects/<%- filter_state %>/<%- filter_type %>/name"><%- T_("Name") %></a></li>\n                <li class="divider"></li>\n                <li class="nav-header"><%- T_("Contest") %></li>\n                <li><a href="#!projects/<%- filter_state %>/<%- filter_type %>/entry"><%- T_("Entry") %></a></li>\n              </ul>\n            </li>\n          </ul>\n          <ul class="nav pull-right">\n            <li><a href="/post-project"><%- T_("+ Post New Project") %> <b class="caret"></b></a></li>\n          </ul>\n        </div>\n        </div>\n      </div>-->\n\n<div class="btn-group">\n    <a class="btn btn-sml dropdown-toggle" data-toggle="dropdown"><%- T_("Sort results") %><span class="caret"></span></a>\n    <ul class="dropdown-menu">\n        <li><a href="#!projects/<%- filter_state %>/<%- filter_type %>/latest"><%- T_("Time") %></a></li>\n        <li><a href="#!projects/<%- filter_state %>/<%- filter_type %>/price"><%- T_("Price") %></a></li>\n        <li><a href="#!projects/<%- filter_state %>/<%- filter_type %>/name"><%- T_("Name") %></a></li>\n        <li class="divider"></li>\n        <li class="nav-header"><%- T_("Contest") %></li>\n        <li><a href="#!projects/<%- filter_state %>/<%- filter_type %>/entry"><%- T_("Entry") %></a></li>\n    </ul>\n    <a class="btn btn-primary right" href="/post-project"><span class="fl-icon-plus"></span> <%- T_("Post a new project") %></a>\n</div>\n'}),define('dashboard/views/projectListNav',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/projectListNav.htm','dashboard/collections/projectCollectionFactory'],function(a,b,c,d,e){var f=c.View.extend({compileTemplate:b.template(d),collection:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','filter'),this.render();var c=this},filter:function(a,b,c){this.options.filter_state=a,this.options.sort=c,this.options.filter_type=b,this.render()},render:function(){a(this.el).html(this.compileTemplate({filter_state:this.options.filter_state,filter_type:this.options.filter_type,sort:this.options.sort}))}});return f}),define('text!templates/dashboard/projectList.htm',[],function(){return'<!--<div id="projectList" class="row-fluid">\n<div class="span8">\n    <a href="#events"><%= T_("&lt; Back to News Feed") %></a>\n    <div class="navbar" id="navbar">\n    </div>\n\n    <table class="table">\n        <tbody  id="projectTable">\n        </tbody>\n        <tfoot>\n            <tr><td colspan=5><a class="more"><%- T_("More") %></a></td></tr>\n        </tfoot>\n    </table>\n\n</div><!-- /.span -->\n<!--<div class="span4" id="filters">\n</div><!-- /.span\n<!--</div>-->\n\n\n<div id="projectList">\n    <h1>My Projects</h1>\n\n    <div class="project-list">\n\n        <!-- tab component -->\n        <div class="tabbable tabs-left">\n\n            <!-- filters (left-column) -->\n            <div id="filters" class="project-list-filters">\n\n            </div> <!-- /filters (left-column) -->\n\n            <!-- tabbed content  -->\n            <div class="tab-content project-feed">\n\n                <!-- tab ALL -->\n                <div class="tab-pane active" id="all">\n\n                    <!-- projects tools -->\n                    <div id="navbar" class="margin-b20">\n\n                    </div> <!-- /projects tools -->\n\n                    <div class="clear"></div>\n\n                    <!-- project list -->\n                    <ul id="projectTable" class="project-feed-list">\n\n                    </ul><!-- /project list -->\n\n                    <!-- projects tools -->\n                    <div class="margin-t20">\n                        <a class="btn btn-primary right" href="#"><span class="fl-icon-plus"></span> Post a new project</a>\n                    </div> <!-- /projects tools -->\n\n                </div> <!-- / tab ALL -->\n\n            </div> <!-- /tabbed content -->\n\n        </div> <!-- /tab component -->\n\n    </div>\n</div>\n'}),define('text!templates/dashboard/projectRowModal.htm',[],function(){return'<div class="modal hide projectRowModal">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal">×</button>\n        <h3><%= header %></h3>\n    </div>\n    <div class="modal-body">\n        <%= body %>\n    </div>\n    <div class="modal-footer">\n        <a class="btn close-btn" data-dismiss="modal"><%= close_btn %></a>\n        <a class="btn btn-info action-btn" data-value="<%= value %>"><%= action_btn %></a>\n    </div>\n</div>\n'}),define('text!templates/dashboard/projectRowModal_delete_body.htm',[],function(){return'<h4><%- T_("Are you sure you wish to delete this project for $5?") %></h4>\n<p><%- T_("Deleting your project will permanently remove it from our site so that no one will be able to view it. All bids and attached files will be erased.") %></p>\n<p><%- T_("Additionally, the information will be removed from search engines the next time {{SITE_NAME}} is indexed (Google indexes {{SITE_NAME}} approximately every 30 minutes).") %></p>\n'}),define('text!templates/dashboard/projectRowModal_close_body.htm',[],function(){return'<h4><%- T_("Are you sure you wish to close this project?") %></h4> <br/>\n<p><%- T_("By closing your project you will not be able to receive bids. Your project will then be archived and cannot be reopened. However, you will be able to repost it as a new project.") %></p>\n'}),define('text!templates/dashboard/projectRowModal_cancel_body.htm',[],function(){return'<h4><%- T_("Are you sure you wish to cancel this project?") %></h4>\n<br/>\n<p><%= T_("By clicking &quot;Yes&quot; you will lose your awarded Freelancer(s) and can\'t receive any new bids. To attract new bidders tick &quot;Cancel and Reopen&quot; first.") %></p>\n<br/>\n<div id="reopen-proj-section"></div>\n'}),define('text!templates/dashboard/projectRowModal_extend_body.htm',[],function(){return'<h4><%- T_("Extend your project?") %></h4>\n<br />\n<%= T_("Extend my project\'s bidding period by <input id=\'extend_proj_day\' style=\'width: 40px;\' /> days. (min <span id=\'min-proj-extend\'></span>, max <span id=\'max-proj-extend\'></span>)") %>\n<br />\n<br />\n<span id=\'extend-price\'></span>\n<br />\n<br />\n<font color="red"> <%- T_("Warning:") %> </font> <%- T_("All previous awards for this project will be revoked.") %>\n<br />\n<span id="extend_proj_error"></span>\n'}),define('dashboard/views/projectRowModal',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/projectRowModal.htm','text!templates/dashboard/projectRowModal_delete_body.htm','text!templates/dashboard/projectRowModal_close_body.htm','text!templates/dashboard/projectRowModal_cancel_body.htm','text!templates/dashboard/projectRowModal_extend_body.htm'],function(a,b,c,d,e,f,g,h){var i=c.View.extend({events:{'click .action-btn':'action'},modalTemplate:b.template(d),projectRowModal_delete_body_template:b.template(e),projectRowModal_close_body_template:b.template(f),projectRowModal_extend_body_template:b.template(h),projectRowModal_cancel_body_template:b.template(g),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','action'),this.render()},action:function(){return a(this.el).find('.projectRowModal').modal('hide'),this.trigger('actionFire'),!1},render:function(){switch(this.model.action){case'delete':this.model.header=T_('Delete Project'),this.model.body=this.projectRowModal_delete_body_template(),this.model.close_btn=T_('Cancel'),this.model.action_btn=T_('Yes');break;case'close':this.model.header=T_('Close Project'),this.model.body=this.projectRowModal_close_body_template(),this.model.close_btn=T_('No'),this.model.action_btn=T_('Yes');break;case'cancel':this.model.header=T_('Abort Project'),this.model.body=this.projectRowModal_cancel_body_template(),this.model.close_btn=T_('No'),this.model.action_btn=T_('Yes');break;case'extend':this.model.header=T_('Extend Project'),this.model.body=this.projectRowModal_extend_body_template(),this.model.close_btn=T_('Cancel'),this.model.action_btn=T_('Confirm')}return a(this.el).html(this.modalTemplate(this.model)),this}});return i}),define('text!templates/dashboard/projectBidRowModal.htm',[],function(){return'<div class="modal hide projectBidRowModal">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal">×</button>\n        <h3><%= header %></h3>\n    </div>\n    <div class="modal-body">\n        <%= body %>\n    </div>\n    <div class="modal-footer">\n        <a class="btn close-btn" data-dismiss="modal"><%= close_btn %></a>\n        <a class="btn btn-info action-btn"><%= action_btn %></a>\n    </div>\n</div>\n'}),define('text!templates/dashboard/projectBidRowModal_incomplete_report_body.htm',[],function(){return'<h4><%- T_("Are you sure you wish to report this project as an incomplete project?") %></h4>\n<br />\n<p><%- T_("If your project hasn\'t been complete due to a service provider\'s failure, please leave your feedback about <span class=\'report-incomplete-proj-sellerusername\'></span> involved in project <span class=\'report-incomplete-proj-name\'></span>") %></p>\n<br />\n<p><b><%- T_("Comment:") %> </b></p>\n<p style="font-size:11px;"><%- T_("(Maximum 1000 characters)") %></p>\n<textarea rows="4" class="report-incomplete-proj descr"></textarea>\n<p><font color="red"><%- T_("Caution:") %> </font><%- T_("You will not be able to change this feedback.") %></p>\n'}),define('text!templates/dashboard/projectBidRowModal_cancel_body.htm',[],function(){return'<h4><%- T_("Are you sure you wish to cancel this project?") %></h4>\n<br/>\n<p><%= T_("By clicking &quot;Yes&quot; you will lose your awarded Freelancer(s) and can\'t receive any new bids. To attract new bidders tick &quot;Cancel and Reopen&quot; first.") %></p>\n<br/>\n<div id="reopen-proj-section"></div>\n'}),define('dashboard/views/projectBidRowModal',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/projectBidRowModal.htm','text!templates/dashboard/projectBidRowModal_incomplete_report_body.htm','text!templates/dashboard/projectBidRowModal_cancel_body.htm'],function(a,b,c,d,e,f){var g=c.View.extend({events:{'click .action-btn':'action'},modalTemplate:b.template(d),projectBidRowModal_incomplete_report_body_template:b.template(e),projectBidRowModal_cancel_body_template:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','action'),this.render()},action:function(){return a(this.el).find('.projectBidRowModal').modal('hide'),this.trigger('actionFire'),!1},render:function(){switch(this.model.action){case'report-incomplete':this.model.header=T_('Report Incomplete Project'),this.model.body=this.projectBidRowModal_incomplete_report_body_template(),this.model.close_btn=T_('Go Back'),this.model.action_btn=T_('Report');break;case'cancel':this.model.header=T_('Cancel Project'),this.model.body=this.projectBidRowModal_cancel_body_template(),this.model.close_btn=T_('No'),this.model.action_btn=T_('Yes')}return a(this.el).html(this.modalTemplate(this.model)),this}});return g}),define('text!templates/dashboard/projectBidRow.htm',[],function(){return'    <dl>\n        <dt class="access">Status</dt>\n        <dd><span class="label"><% if (award_status == \'awarded\') { if (complete_status == \'pending\') { %>In progress<% } %><% if (complete_status == \'complete\') { %>Completed<% } %><% if (complete_status == \'incomplete\') { %>Incomplete<% } } if (award_status == \'canceled\') { %>Incomplete<% } %></span></dd>\n        <dd><em class="timestamp">Due in <%= timeLeft %></em></dd>\n        <dt class="access">Bids</dt>\n        <dd><strong class="<% if (complete_status == \'complete\') { %>success<% } %>"><%= currency.sign %><%= bid_amount %> <%= currency.code %></strong></dd>\n        <dt class="access">Awarded to</dt>\n        <dd>\n            <div class="profile-pic-wrapper online">\n                <span class="profile-pic"><img src="<%= logo_url %>" width="20" height="20" alt="<%= username %>" title="<%= username %>"> <em class="online-status">online now</em></span>\n            </div>\n        </dd>\n        <dt class="access">Messages</dt>\n        <dd class="mail-count"><a class="label <% if (messageCount > 0) { %>label-important<% } %>"><%= messageCount %> <span class="access">new messages</span></a></dd>\n    </dl>\n    <% if (users_id != getUserIdfromCookie()) { %>\n    <div class="btn-group news-actions">\n        <a class="btn btn-sml dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a>\n        <ul class="dropdown-menu">\n            <% if (typeof cancel_action != \'undefined\') { %>\n                <li><a class="user-action" data-action="redirect" data-seller-id="<%- seller_id %>" data-value="cancel_buyer_{{project.id}}_{{selection.seller.id}}"><%- T_("Cancel") %></a></li>\n            <% } %>\n            <% if (typeof create_milestone_action != \'undefined\') { %>\n                <li><a class="user-action" data-action="redirect" data-seller-id="<%- seller_id %>" data-value="/projects/<%- project_id %>.html#bidsec<%- bid_id %>"><%- T_("Create Milestone") %></a></li>\n            <% } %>\n            <% if (typeof pay_invoice_action != \'undefined\') { %>\n                <li><a class="user-action" data-action="redirect" data-seller-id="<%- seller_id %>" data-value="/projects/<%- project_id %>.html?bidid=<%- bid_id %>&buyer=1&payinv=1#bidsec<%- bid_id %>"><i class="icon-pencil"><%- T_("Pay Invoice") %></a></li>\n            <% } %>\n            <% if (typeof direct_transfer_action != \'undefined\') { %>\n                <li><a class="user-action" data-action="redirect" data-seller-id="<%- seller_id %>" data-value="/payments/transfer.php?id=<%- project_id %>&to_user_id=<%- seller_id %>"><%- T_("Direct Transfer") %></a></li>\n            <% } %>\n            <% if (typeof mark_close_action != \'undefined\') { %>\n                <li><a class="user-action" data-action="mark-close" data-seller-id="<%- seller_id %>" data-value="<%- bid_id %>"><%- T_("Mark Project as Closed") %></a></li>\n            <% } %>\n            <% if (typeof report_incomplete_action != \'undefined\') { %>\n                <li><a class="user-action" data-action="report-incomplete" data-seller-id="<%- seller_id %>" data-value="<%- project_id %>"><%- T_("Report Incomplete") %></a></li>\n            <% } %>\n        </ul>\n    </div>\n    <% } %>\n'}),define('text!templates/dashboard/project_row.htm',[],function(){return'    <!-- project item inner -->\n    <div class="project-item-inner">\n\n        <div class="profile-pic-wrapper">\n            <span class="profile-pic"><img src="<%= logo_url %>"  alt="<%= username %>" title="<%= username %>"> <em class="online-status">offline</em></span>\n        </div>\n        <p class="project-title"><strong class="project-type project">Work type: Project</strong> <a href="/projects/<%- urlPart %>"><%- name %></a></p>\n\n        <a class="bs-bookmark bookmark-btn <% if (watch) { %>selected<% } %>" data-project-id="<%- id %>" data-action="<% if (watch) { %>off<% } else { %>on<% } %>" title="{{_Bookmark Project_}}"></a>\n\n        <div class="btn-group settings">\n            <a class="btn btn-sml dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon icon-cog"></i> <span class="caret"></span></a>\n            <ul class="dropdown-menu">\n                <% if (typeof repost_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/buyers/repost.php?id=<%- id %>"><%- T_("Repost") %></a></li>\n                <% } %>\n                <% if (typeof delete_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="delete" data-value="<%- id %>" ><%- T_("Delete") %></a></li>\n                <% } %>\n                <% if (typeof upgrade_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/buyers/upgrade.php?id=<%- id %>"><%- T_("Upgrade") %></a></li>\n                <% } %>\n                <% if (typeof extend_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="extend" data-value="<%- id %>"><%- T_("Extend") %></a></li>\n                <% } %>\n                <% if (typeof edit_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/buyers/edit.php?id=<%- id %>"><%- T_("Edit") %></a></li>\n                <% } %>\n                <% if (typeof close_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="close" data-value="<%- id %>"><%- T_("Close") %></a></li>\n                <% } %>\n                <% if (typeof abort_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="cancel" data-project_id="<%- id %>" data-buyer_id="<%- accountId %>"><%- T_("Abort") %></a></li>\n                <% } %>\n                <% if (typeof create_milestone_request_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/projects/<%- id %>.html?bidid=<%- user_data[0].bid_id %>&seller=1&reqms=1#bidsec<%- user_data[0].bid_id %>"><%- T_("Create Milestone Request") %></a></li>\n                <% } %>\n                <% if (typeof create_invoice_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/projects/<%- id %>.html?bidid=<%- user_data[0].bid_id %>&seller=1&createinv=1#bidsec<%- user_data[0].bid_id %>"><%- T_("Create Invoice") %></a></li>\n                <% } %>\n                <% if (typeof edit_invoice_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/projects/<%- id %>.html?bidid=<%- user_data[0].bid_id %>&seller=1&editinv=1#bidsec<%- user_data[0].bid_id %>"><%- T_("Edit Invoice") %></a></li>\n                <% } %>\n                <% if (typeof milestone_release_request_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/users/manage-payments.php"><%- T_("Request to Release Milestone") %></a></li>\n                <% } %>\n                <% if (typeof retract_bid_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/sellers/retract.php?id=<%- id %>"><%- T_("Retract Bid") %></a></li>\n                <% } %>\n                <% if (typeof edit_bid_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="redirect" data-value="/sellers/placebid.php?id=<%- id %>"><%- T_("Edit Bid") %></a></li>\n                <% } %>\n                <% if (typeof clarify_action != \'undefined\') { %>\n                    <li><a class="project-action" data-action="popup" data-value="/pmb/mb<%- id %>.html#post"><%- T_("Clarify") %></a></li>\n                <% } %>\n            </ul>\n        </div>\n        <div class="modal-container"></div>\n\n        <!-- nested freelancers -->\n        <ul class="project-item-nested user_container">\n\n            <% if (state == \'A\') { %>\n            <li class="last">\n\n                <dl>\n                    <dt class="access">Status</dt>\n                    <dd><span class="label"><%= state_f %></span></dd>\n                    <dd><em class="timestamp"><%= timeLeft %> left</em></dd>\n                    <dt class="access">Bids</dt>\n                    <dd><a><%= bidCount %> bids</a><% if (accountId != getUserIdfromCookie()) { %>, My Bid <%= currency.sign %><%= user_data[0].sum %> <%= currency.code %>,<% } %> <% if (bidAvg) { %>Average bid <strong><%= currency.sign %><%= bidAvg %> <%= currency.code %></strong><% } %></dd>\n                </dl>\n\n            </li>\n            <% } %>\n\n            <% if ((user_data != null) && (user_data[0].users_id == getUserIdfromCookie()) && (user_data[0].award_status == \'pending\')) { %>\n            <li class="last">\n\n                <dl>\n                    <dt class="access">Status</dt>\n                    <dd><span class="label">Awarded</span></dd>\n                    <dd><em class="timestamp">Due in <%= user_data[0].bid_period  %></em></dd>\n                    <dt class="access">Bids</dt>\n                    <dd><strong><%= user_data[0].currency.sign %><%= user_data[0].bid_amount %> <%= user_data[0].currency.code %></strong></dd>\n                    <dt class="access">Awarded to</dt>\n                    <dd>\n                        <div class="profile-pic-wrapper online">\n                            <span class="profile-pic"><img src="<%= user_data[0].logo_url %>" width="20" height="20" alt="<%= user_data[0].username %>" title="<%= user_data[0].username %>"> <em class="online-status">online now</em></span>\n                        </div>\n                    </dd>\n                    <dt class="access">Messages</dt>\n                    <dd class="mail-count"><a class="label <% if (user_data[0].messageCount > 0) { %>label-important<% } %>"><%= user_data[0].messageCount %> <span class="access">new messages</span></a></dd>\n                </dl>\n\n            </li>\n            <% } %>\n\n\n\n        </ul> <!-- /nested freelancers -->\n\n    </div> <!-- /project item inner -->\n'}),define('freelancer-wrapper',[],function(){return freelancer}),'use strict',define('headerReload',['jquery-wrapper','freelancer-wrapper'],function(a,b){return function(){a.ajax({url:'/ajax/pinky/header.php',cache:!1,dataType:'json',success:function(a){var c=a.data;if(typeof a=='undefined'&&a.status!=='success')return;if(a.userState===1){if(c.userHeader===undefined||c.balances===undefined||c.gameHeader===undefined||c.gameHeader.userXP===undefined)return}else b.coms.header.trigger('dataReady:UserDomainAndLang',null,{domain:c.domain_language,browser:c.browser_language})}})}}),define('dashboard/views/projectBidRow',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/projectBidRowModal','text!templates/dashboard/projectBidRow.htm','headerReload'],function(a,b,c,d,e,f){var g=c.View.extend({events:{'click .user-action':'action'},rowTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','action','actionFire','_reportIncompleteOpenModal','_cancelOpenModal','_closeOpenModal','_reportIncomplete','_cancel','_close'),this.render()},_redirect:function(a){window.location=a},_reportIncompleteOpenModal:function(b,c){var e={action:'report-incomplete',seller_id:b,project_id:c};this.modal=new d({model:e}),this.modal.bind('actionFire',this.actionFire),a(this.el).find('.modal-container').html(this.modal.render().el),a(this.el).find('.projectBidRowModal').modal('show')},_cancelOpenModal:function(b,c){var e={action:'cancel',seller_id:b,project_id:c};this.modal=new d({model:e}),this.modal.bind('actionFire',this.actionFire),a(this.el).find('.modal-container').html(this.modal.render().el),a(this.el).find('.projectBidRowModal').modal('show')},_closeOpenModal:function(b){var c={action:'close',value:b};this.modal=new d({model:c}),this.modal.bind('actionFire',this.actionFire),a(this.el).find('.modal-container').html(this.modal.render().el),a(this.el).find('.projectBidRowModal').modal('show')},_delete:function(b){a.ajax({type:'POST',data:{id:b,isAjaxCall:1},url:'/buyers/ondelete.php',dataType:'json',cache:!1,success:function(a){return a.status==0?(alert(a.message),refreshProjectListForCurrentTab(!0),!1):!0}})},_extend:function(b){var c=a(this.el).find('#extend_proj_day').val();a.ajax({type:'POST',data:{id:b,days:c,action:'extend',isAjaxCall:1},url:'/buyers/extend.php',cache:!1,success:function(b){return a.trim(b)!='success'?(b=preparePhoneVerification(b),alert(b),f(),!1):(f(),!0)}})},_close:function(b){a.ajax({type:'POST',dataType:'json',data:{csrf_token:getCSRFToken(),cancel_by:'buyer',pid:b,uid:getUserIdfromCookie(),is_reopen:0},url:'/users/on-cancel-project-ctrl.php',cache:!1,success:function(b){return a.trim(b.result)!='success'?(alert(b.message),!1):!0}})},_cancel:function(b,c){a.ajax({type:'POST',dataType:'json',data:{csrf_token:getCSRFToken(),cancel_by:'buyer',pid:c,uid:b},url:'/users/on-cancel-project-ctrl.php',cache:!1,success:function(b){return a.trim(b.result)!='success'?(alert(b.message),!1):!0}})},_reportIncomplete:function(b,c){var d=a(this.el).find('.report-incomplete-proj').val();a.ajax({type:'POST',dataType:'json',data:{id:c,to_user:b,action:'save',descr:d,isAjaxCall:1},url:'/users/review/report-incomplete.php',cache:!1,success:function(b){obj.next().remove(),obj.show(),jQuery.trim(b.rtn_status)!='success'?alert(b.errors[0]):(loadProjectDashboardTableContent('buyerview',1,0,a('#project_dashboard_per_employer').val(),searchQuery[1]),loadProjectDashboardTableContent('buyerview',2,0,a('#project_dashboard_per_employer').val(),searchQuery[2]))}})},_markProjectAsClosed:function(b){a.post('/ajax/buyer/on-close-project.php',{bid_id:b})},actionFire:function(){switch(this.modal.model.action){case'report-incomplete':this._reportIncomplete(this.modal.model.seller_id,this.modal.model.project_id);break;case'cancel':this._cancel(this.modal.model.value);break;case'extend':this._extend(this.modal.model.value)}},action:function(b){console.log(a(b)),console.log(a(b.target));var c=a(b.target).data('action'),d=a(b.target).data('seller-id'),e=a(b.target).data('value');switch(c){case'redirect':this._redirect(e);break;case'mark-close':this._markProjectAsClosed(e);break;case'report-incomplete':this._reportIncompleteOpenModal(d,e);break;case'cancel':this._cancelOpenModal(e)}},render:function(){return a(this.el).html(this.rowTemplate(this.model)),this}});return g}),define('dashboard/views/ProjectRow',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/projectRowModal','dashboard/views/projectBidRow','text!templates/dashboard/project_row.htm','headerReload'],function(a,b,c,d,e,f,g){var h=c.View.extend({events:{'click .project-action':'action'},rowTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','action','actionFire','_openModal','_openCancelModal','_delete','_extend','_close'),this.render()},_redirect:function(a){window.location=a},_popup:function(a){window.open(a,'','width=660, height=560, resizable=yes, left=100, top=100, menu=no, toolbar=no, scrollbars=yes')},_openModal:function(b,c){var e={action:b,value:c};this.modal=new d({model:e}),this.modal.bind('actionFire',this.actionFire),a(this.el).find('.modal-container').html(this.modal.render().el),a(this.el).find('.projectRowModal').modal('show')},_openCancelModal:function(b,c){var e={action:'cancel',value:c,seller_id:b,project_id:c};this.modal=new d({model:e}),this.modal.bind('actionFire',this.actionFire),a(this.el).find('.modal-container').html(this.modal.render().el),a(this.el).find('.projectRowModal').modal('show')},_delete:function(b){a.ajax({type:'POST',data:{id:b,isAjaxCall:1},url:'/buyers/ondelete.php',dataType:'json',cache:!1,success:function(a){return a.status==0?(alert(a.message),refreshProjectListForCurrentTab(!0),!1):!0}})},_extend:function(b){var c=a(this.el).find('#extend_proj_day').val();a.ajax({type:'POST',data:{id:b,days:c,action:'extend',isAjaxCall:1},url:'/buyers/extend.php',cache:!1,success:function(b){return a.trim(b)!='success'?(b=preparePhoneVerification(b),alert(b),g(),!1):(g(),!0)}})},_close:function(b){a.ajax({type:'POST',dataType:'json',data:{id:b,isAjaxCall:1},url:'/buyers/onclose.php',cache:!1,success:function(b){return a.trim(b)!='success'?(alert(b),!1):!0}})},_cancel:function(b,c){a.ajax({type:'POST',dataType:'json',data:{csrf_token:getCSRFToken(),cancel_by:'seller',pid:c,uid:b},url:'/users/on-cancel-project-ctrl.php',cache:!1,success:function(b){return a.trim(b.result)!='success'?(alert(b.message),!1):!0}})},actionFire:function(){console.log(this.modal.model.action),console.log(this.modal.model.value);switch(this.modal.model.action){case'delete':this._delete(this.modal.model.value);break;case'close':this._close(this.modal.model.value);break;case'cancel':this._cancel(this.modal.model.seller_id,this.modal.model.project_id);break;case'extend':this._extend(this.modal.model.value)}},action:function(b){console.log(a(b)),console.log(a(b.target));var c=a(b.target).data('action'),d=a(b.target).data('value');switch(c){case'redirect':this._redirect(d);break;case'popup':this._popup(d);break;case'delete':this._openModal(c,d);break;case'close':this._openModal(c,d);break;case'cancel':var e=a(b.target).data('project_id'),f=a(b.target).data('buyer_id');this._openCancelModal(f,e);break;case'extend':this._openModal(c,d)}},render:function(){a(this.el).html(this.rowTemplate(this.model.toJSON()));var b=this.model.get('user_data');if(b)for(var c=0;c<b.length;++c){if(b[c].users_id==getUserIdfromCookie()&&this.model.get('state')!='C')continue;var d=new e({model:b[c],el:'<li></li>'});a(this.el).find('.user_container').append(d.render().el)}return this}});return h}),define('text!templates/dashboard/contest_row_modal.htm',[],function(){return'<div class="modal hide contest_row_modal">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal">×</button>\n        <h3><%= header %></h3>\n    </div>\n    <div class="modal-body">\n        <%= body %>\n    </div>\n    <div class="modal-footer">\n        <a class="btn close-btn" data-dismiss="modal"><%= close_btn %></a>\n        <a class="btn btn-info action-btn" data-value="<%= value %>"><%= action_btn %></a>\n    </div>\n</div>\n'}),define('text!templates/dashboard/contest_row_delete_modal_body.htm',[],function(){return'<h4><%= T_("Are you sure you wish to delete this contest for $5?") %></h4>\n<p><%= T_("Deleting your contest will permanently remove it from our site so that no one will be able to view it. All bids and attached files will be erased.") %></p>\n<p><%= T_("Additionally, the information will be removed from search engines the next time {{SITE_NAME}} is indexed (Google indexes {{SITE_NAME}} approximately every 30 minutes).") %></p>\n'}),define('text!templates/dashboard/contest_row_close_modal_body.htm',[],function(){return'<h4><%- T_("Are you sure you wish to close this project?")%></h4> <br/>\n<p><%- T_("By closing your project you will not be able to receive bids. Your project will then be archived and cannot be reopened. However, you will be able to repost it as a new project.")%></p>\n'}),define('text!templates/dashboard/contest_row_extend_modal_body.htm',[],function(){return'<h4><%= T_("Extend your project?") %></h4>\n<br />\n<%= T_("Extend my project\'s bidding period by") %> <input id="extend_proj_day" style="width: 40px;" /> <%= T_("days") %>. (<%= T_("min")%><span id="min-proj-extend"></span>, <%= T_("max") %><span id="max-proj-extend"></span>)\n<br />\n<br />\n<span id=\'extend-price\'></span>\n<br />\n<br />\n<font color="red"><%= T_("Warning: ") %> </font> <%= T_("All previous awards for this project will be revoked.") %>\n<br />\n<span id="extend_proj_error"></span>\n'}),define('dashboard/views/ContestRowModal',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/contest_row_modal.htm','text!templates/dashboard/contest_row_delete_modal_body.htm','text!templates/dashboard/contest_row_close_modal_body.htm','text!templates/dashboard/contest_row_extend_modal_body.htm'],function(a,b,c,d,e,f,g){var h=c.View.extend({events:{'click .action-btn':'action'},modalTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','action'),this.render(),console.log('ContestRowModal::initialize')},action:function(){return a(this.el).find('.contest_row_modal').modal('hide'),this.trigger('actionFire'),!1},render:function(){switch(this.model.action){case'delete':console.log('ContestRowModal - render delete'),this.model.header='Delete Contest',this.model.body=e,this.model.close_btn='Cancel',this.model.action_btn='Yes';break;case'close':console.log('ContestRowModal - render close'),this.model.header='Cancel Contest',this.model.body=f,this.model.close_btn='No',this.model.action_btn='Yes';break;case'extend':console.log('ContestRowModal - render delete'),this.model.header='Extend Contest',this.model.body=g,this.model.close_btn='Cancel',this.model.action_btn='Confirm';break;default:alert('Unknown modal \''+this.model.action+'\' in ContestRowModal');return}return a(this.el).html(this.modalTemplate(this.model)),this}});return h}),define('text!templates/dashboard/contestEntryRow.htm',[],function(){return'<dl>\n  <dt class="access">\n    <%- T_("Status") %>\n  </dt>\n  <dd>\n    <span class="label"><% if (completed) { %>Completed<% } else { %>Handover<% } %></span>\n  </dd>\n  <% if (!completed && hasReviewCountDownStarted) { %>\n  <dd>\n    <em class="timestamp"><%- timeLeft %> <%- T_("left to review") %></em>\n  </dd>\n  <% } %>\n  <dt class="access">\n    <%- T_("Bids") %>\n  </dt>\n  <dd>\n    <strong class="success"><%= currency.sign %><%- prize %> <%- currency.code %></strong>\n  </dd>\n  <dt class="access">\n    <%- T_("Awarded to") %>\n  </dt>\n  <dd>\n    <div class="profile-pic-wrapper online">\n      <span class="profile-pic"><img src="<%= logo_url %>" width="20" height="20" alt="<%= username %>" title="<%= username %>"> <em class="online-status">online now</em></span>\n    </div>\n  </dd>\n  <dt class="access">\n    <%- T_("Messages") %>\n  </dt>\n  <dd class="mail-count">\n    <a class="label label-important">1 <span class="access"><%- T_("new messages") %></span></a>\n  </dd>\n</dl>\n<% if (user_id != getUserIdfromCookie()) { %>\n<div class="btn-group news-actions">\n  <a class="btn btn-sml dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a>\n  <ul class="dropdown-menu">\n    <li>\n      <a class="entry-action" data-action="redirect" data-seller-id="<%- user_id %>" data-value="/contest/handover.php?entry_id=<%- entry_id %>"><%- T_("Go to Handover") %></a>\n    </li>\n  </ul>\n</div>\n<% } %>\n'}),define('dashboard/views/ContestEntryRow',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/contestEntryRow.htm','headerReload'],function(a,b,c,d,e){var f=c.View.extend({events:{'click .entry-action':'action'},rowTemplate:b.template(d),initialize:function(){b.bindAll(this,'render','action','actionFire','_delete','_extend','_close'),this.render()},_redirect:function(a){console.log('ContestRow - _redirect'),window.location=a},_delete:function(b){a.ajax({type:'POST',data:{id:b,isAjaxCall:1},dataType:'json',cache:!1,success:function(a){return a.status==0?(alert(a.message),refreshContestListForCurrentTab(!0),!1):!0}})},_extend:function(b){var c=a(this.el).find('#extend_contest_day').val();a.ajax({type:'POST',data:{id:b,days:c,action:'extend',isAjaxCall:1},cache:!1,success:function(b){return a.trim(b)!='success'?(b=preparePhoneVerification(b),alert(b),e(),!1):(e(),!0)}})},_close:function(b){a.ajax({type:'POST',dataType:'json',data:{cancel_by:'buyer',pid:b,uid:getUserIdfromCookie(),is_reopen:0},cache:!1,success:function(b){return a.trim(b.result)!='success'?(alert(b.message),!1):!0}})},actionFire:function(){console.log(this.modal.model.action),console.log(this.modal.model.value);switch(this.modal.model.action){case'delete':this._delete(this.modal.model.value);break;case'close':this._close(this.modal.model.value);break;case'extend':this._extend(this.modal.model.value)}},action:function(b){console.log(a(b)),console.log(a(b.target));var c=a(b.target).data('action'),d=a(b.target).data('value');console.log('ContestRow - action = \''+c+'\''),c=='redirect'?this._redirect(d):this._openModal(c)},render:function(){return a(this.el).html(this.rowTemplate(this.model)),this}});return f}),define('text!templates/dashboard/contest_row.htm',[],function(){return'    <!-- project item inner -->\n    <div class="project-item-inner">\n\n        <div class="profile-pic-wrapper">\n            <span class="profile-pic"><img src="<%= logo_url %>"  alt="<%= username %>" title="<%= username %>"> <em class="online-status online">online now</em></span>\n        </div>\n        <p class="project-title"><strong class="project-type contest">Work type: Contest</strong> <a href="<%= url %>"><%- contest_name %></a></p>\n\n        <a class="bs-bookmark contest-bookmark-btn <% if (watch) { %>selected<% } %>" data-contest-id="<%- contest_id %>" data-action="<% if (watch) { %>off<% } else { %>on<% } %>" title="{{_Bookmark Project_}}"></a>\n\n        <div class="btn-group settings">\n            <a class="btn btn-sml dropdown-toggle" data-toggle="dropdown" href="<%- url %>"><i class="icon icon-cog"></i> <span class="caret"></span></a>\n            <ul class="dropdown-menu">\n                <% if (typeof upgrade_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/upgrade.php?project_id=<%- contest_id %>"><%- T_("Upgrade") %></a></li>\n                <% } %>\n                <% if (typeof edit_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/edit.php?project_id=<%- contest_id %>"><%- T_("Edit") %></a></li>\n                <% } %>\n                <% if (typeof create_poll_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/poll/create.php?project_id=<%- contest_id %>"><%- T_("Create Poll") %></a></li>\n                <% } %>\n                <% if (typeof message_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/viewentries.php?project_id=<%- contest_id %>#contest_messages"><%- T_("Message") %></a></li>\n                <% } %>\n                <% if (typeof sign_agreement_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/handover.php?entry_id=<%- contest_entry_id %>"><%- T_("Sign Agreement") %></a></li>\n                <% } %>\n                <% if (typeof submit_design_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/contest.php?project_id=<%- contest_id %>#submit-entry"><%- T_("Submit Entry") %></a></li>\n                <% } %>\n                <% if (typeof view_comments_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/viewentries.php?project_id=<%- contest_id %>#contest_messages"><%- T_("View Comments") %></a></li>\n                <% } %>\n                <% if (typeof upload_files_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/handover.php?entry_id=<%- contest_entry_id %>"><%- T_("Upload Files") %></a></li>\n                <% } %>\n                <% if (typeof review_action != \'undefined\') { %>\n                    <li><a class="contest-action" data-action="redirect" data-value="/contest/handover.php?entry_id=<%- contest_entry_id %>"><%- T_("Review") %></a></li>\n                <% } %>\n            </ul>\n        </div>\n        <div class="modal-container"></div>\n\n        <!-- nested freelancers -->\n        <ul class="project-item-nested user_container">\n\n            <% if ((status == 2) && (user_data == null)) { %>\n            <li class="last">\n\n                <dl>\n                    <dt class="access">Status</dt>\n                    <dd><span class="label"><%= status_text %></span></dd>\n                    <dd><em class="timestamp">Ends in <%- time_remaining %></em></dd>\n                    <dt class="access">Number of Entries</dt>\n                    <dd><a><%- num_entries %> bids</a> Prize <strong><%= currency.sign %><%- prize %> <%- currency.code %></strong></dd>\n                </dl>\n\n            </li>\n            <% } %>\n\n        </ul> <!-- /nested freelancers -->\n\n    </div> <!-- /project item inner -->\n'}),define('dashboard/views/ContestRow',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/ContestRowModal','dashboard/views/ContestEntryRow','text!templates/dashboard/contest_row.htm','headerReload'],function(a,b,c,d,e,f,g){var h=c.View.extend({events:{'click .contest-action':'action'},rowTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','action','actionFire','_openModal','_delete','_extend','_close'),this.render()},_redirect:function(a){console.log('ContestRow - _redirect'),window.location=a},_openModal:function(b){var c={action:b,value:this.model.id};this.modal=new d({model:c}),this.modal.bind('actionFire',this.actionFire),a(this.el).find('.modal-container').html(this.modal.render().el),a(this.el).find('.contest_row_modal').modal('show')},_delete:function(b){a.ajax({type:'POST',data:{id:b,isAjaxCall:1},cache:!1,dataType:'json',success:function(a){return a.status==0?(alert(a.message),refreshContestListForCurrentTab(!0),!1):!0}})},_extend:function(b){var c=a(this.el).find('#extend_contest_day').val();a.ajax({type:'POST',data:{id:b,days:c,action:'extend',isAjaxCall:1},cache:!1,success:function(b){return a.trim(b)!='success'?(b=preparePhoneVerification(b),alert(b),g(),!1):(g(),!0)}})},_close:function(b){a.ajax({type:'POST',dataType:'json',data:{cancel_by:'buyer',pid:b,uid:getUserIdfromCookie(),is_reopen:0},cache:!1,success:function(b){return a.trim(b.result)!='success'?(alert(b.message),!1):!0}})},actionFire:function(){console.log(this.modal.model.action),console.log(this.modal.model.value);switch(this.modal.model.action){case'delete':this._delete(this.modal.model.value);break;case'close':this._close(this.modal.model.value);break;case'extend':this._extend(this.modal.model.value)}},action:function(b){console.log(a(b)),console.log(a(b.target));var c=a(b.target).data('action'),d=a(b.target).data('value');console.log('ContestRow - action = \''+c+'\''),c=='redirect'?this._redirect(d):this._openModal(c)},render:function(){console.log(this.model.toJSON()),a(this.el).html(this.rowTemplate(this.model.toJSON()));var b=this.model.get('user_data');if(b)for(var c=0;c<b.length;++c){var d=new e({model:b[c],el:'<li></li>'});a(this.el).find('.user_container').append(d.render().el)}return this}});return h}),define('dashboard/views/projectList',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/projectListFilters','dashboard/views/projectListNav','text!templates/dashboard/projectList.htm','dashboard/views/ProjectRow','dashboard/views/ContestRow','dashboard/collections/projectCollectionFactory'],function(a,b,c,d,e,f,g,h,i){var j=c.View.extend({events:{'click .more':'showMore'},compileTemplate:b.template(f),collection:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','addAll','addOne','filter','reset','hide','show','search','showMore'),this.render(),this.hide(),this.filters=new d({el:'#filters',filter_state:this.options.filter_state,filter_type:this.options.filter_type,sort:this.options.sort}),this.filters.bind('search',this.search),this.filters.bind('changeFilterType',this.changeFilterType),this.filters.render(),this.nav=new e({el:'#navbar',filter_state:this.options.filter_state,filter_type:this.options.filter_type,sort:this.options.sort}),this.nav.render();var c=this},_setFilters:function(a,b,c){this.options.filter_state=a,this.options.filter_type=b,this.options.sort=c,this.options.filter_state===undefined&&(this.options.filter_state='all'),this.options.filter_type===undefined&&(this.options.filter_type='all'),this.options.sort===undefined&&(this.options.sort='latest')},filter:function(a,b,c){this._setFilters(a,b,c),this.collection&&(this.collection.unbind('add',this.addOne),this.collection.unbind('all',this.addAll),this.collection.unbind('refresh',this.addAll),this.collection.unbind('rebound',this.addAll)),this.collection=(new i).generate(this.options.filter_state,this.options.filter_type,this.options.sort,this.options.query),this.collection.bind('add',this.addOne),this.collection.bind('all',this.addAll),this.collection.bind('refresh',this.addAll),this.collection.bind('rebound',this.addAll),this.subviews=[],this.addAll(),this.filters.filter(this.options.filter_state,this.options.filter_type,this.options.sort,this.options.query),this.nav.filter(this.options.filter_state,this.options.filter_type,this.options.sort,this.options.query)},search:function(a){this.options.query=a,this.collection&&(this.collection.unbind('add',this.addOne),this.collection.unbind('all',this.addAll),this.collection.unbind('refresh',this.addAll),this.collection.unbind('rebound',this.addAll)),this.collection=(new i).generate(this.options.filter_state,this.options.filter_type,this.options.sort,this.options.query),this.collection.bind('add',this.addOne),this.collection.bind('all',this.addAll),this.collection.bind('refresh',this.addAll),this.collection.bind('rebound',this.addAll),this.subviews=[],this.addAll(),this.filters.filter(this.options.filter_state,this.options.filter_type,this.options.sort,this.options.query),this.nav.filter(this.options.filter_state,this.options.filter_type,this.options.sort,this.options.query)},changeFilterType:function(a){window.location.hash='!projects/'+this.options.filter_state+'/'+a+'/'+this.options.sort},showMore:function(){this.collection.fetch({add:!0})},reset:function(){a(this.el).find('#projectTable').text('')},addAll:function(){this.reset(),this.collection.each(this.addOne)},addOne:function(b){var c,d=b.get('type');if(d=='project')c=new g({model:b,el:'<li class="project-item"></li>'});else{if(d!='contest'){alert('Unknown project type: '+d);return}c=new h({model:b,el:'<li class="project-item"></li>'})}a(this.el).find('#projectTable').append(c.render().el)},render:function(){a(this.el).append(this.compileTemplate({filter_state:this.options.filter_state,filter_type:this.options.filter_type,sort:this.options.sort}))},hide:function(){a(this.el).find('#projectList').hide()},show:function(){a(this.el).find('#projectList').show()}});return j}),define('dashboard/lib/Placeholder',[],function(){var a=function(){function a(a){var b;a.createTextRange?(b=a.createTextRange(),b.move('character',0),b.select()):a.selectionStart&&(a.focus(),a.setSelectionRange(0,0))}function b(){var b;this.value===this.getAttribute('placeholder')&&(m.hideOnFocus?(this.className=this.className.replace(q,''),this.value='',b=this.getAttribute('data-placeholdertype'),b&&(this.type=b)):a(this))}function c(){var a;this.value===''&&(this.className=this.className+' '+m.className,this.value=this.getAttribute('placeholder'),a=this.getAttribute('data-placeholdertype'),a&&(this.type='text'))}function d(){var a=this.getElementsByTagName('input'),b=this.getElementsByTagName('textarea'),c=a.length,d=c+b.length,e,f,g;for(g=0;g<d;g+=1)e=g<c?a[g]:b[g-c],f=e.getAttribute('placeholder'),e.value===f&&(e.value='')}function e(a){return p=this.value,!(p===this.getAttribute('placeholder')&&n.indexOf(a.keyCode)>-1)}function f(){var b;this.value!==p&&(this.className=this.className.replace(q,''),this.value=this.value.replace(this.getAttribute('placeholder'),''),b=this.getAttribute('data-placeholdertype'),b&&(this.type=b)),this.value===''&&(c.call(this),a(this))}function g(a,b,c){if(a.addEventListener)return a.addEventListener(b,c.bind(a),!1);if(a.attachEvent)return a.attachEvent('on'+b,c.bind(a))}function h(a){m.hideOnFocus||(g(a,'keydown',e),g(a,'keyup',f)),g(a,'focus',b),g(a,'blur',c)}function i(){var a=document.getElementsByTagName('input'),b=document.getElementsByTagName('textarea'),c=a.length,e=c+b.length,f,i,j,k,n;for(f=0;f<e;f+=1){j=f<c?a[f]:b[f-c],n=j.getAttribute('placeholder');if(l.indexOf(j.type)>-1&&n){k=j.getAttribute('data-currentplaceholder');if(n!==k){if(j.value===k||j.value===n||!j.value)j.value=n,j.className=j.className+' '+m.className;k||(j.form&&(i=j.form,i.getAttribute('data-placeholdersubmit')||(g(i,'submit',d),i.setAttribute('data-placeholdersubmit','true'))),h(j)),j.setAttribute('data-currentplaceholder',n)}}}}function j(){var a=document.getElementsByTagName('input'),b=document.getElementsByTagName('textarea'),c=a.length,e=c+b.length,f,i,j,k;for(f=0;f<e;f+=1){i=f<c?a[f]:b[f-c],k=i.getAttribute('placeholder');if(l.indexOf(i.type)>-1&&k){if(i.type==='password')try{i.type='text',i.setAttribute('data-placeholdertype','password')}catch(n){}i.setAttribute('data-currentplaceholder',k);if(i.value===''||i.value===k)i.className=i.className+' '+m.className,i.value=k;i.form&&(j=i.form,j.getAttribute('data-placeholdersubmit')||(g(j,'submit',d),j.setAttribute('data-placeholdersubmit','true'))),h(i)}}}function k(a){var b=document.createElement('input'),c,d,e,f,g;if(typeof b.placeholder=='undefined'){for(c in a)a.hasOwnProperty(c)&&(m[c]=a[c]);d=document.createElement('style'),d.type='text/css';var h=m.styleImportant?'!important':'';return e=document.createTextNode('.'+m.className+' { color:'+m.textColor+h+'; }'),d.styleSheet?d.styleSheet.cssText=e.nodeValue:d.appendChild(e),document.getElementsByTagName('head')[0].appendChild(d),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(f=b||0,g=this.length;f<g;f+=1)if(this[f]===a)return f;return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!='function')throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),j(),m.live&&(o=setInterval(i,100)),!0}return!1}var l=['text','search','url','tel','email','password','number','textarea'],m={live:!1,hideOnFocus:!1,className:'placeholderspolyfill',textColor:'#999',styleImportant:!0},n=[37,38,39,40],o,p,q=new RegExp('\\b'+m.className+'\\b');return{init:k,refresh:i}}();return a}),define('dashboard/lib/stats',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=function(){location.search.indexOf('new_membership=')>=0&&_lt.push({event:'Membership Upgrade'})};return{initialize:d}}),define('dashboard/collections/subCollection',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/event'],function(a,b,c,d){var e=c.Collection.extend({model:d,getExistingEntry:function(a){return this.find(function(b){return b.getUniqueKey()==a.getUniqueKey()})},updateEntry:function(a){var b=this.getExistingEntry(a);b?(this.add(a,{silent:!0}),this.remove(b,{silent:!0}),this.trigger('remove')):this.add(a)},comparator:function(a){switch(a.get('type')){case'bid':return;case'contestEntryCreated':return-1*a.get('timestamp');default:return-1*a.get('timestamp')}}});return e}),define('dashboard/collections/subCollections/bid_subCollection',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/event','dashboard/collections/subCollection'],function(a,b,c,d,e){var f=e.extend({parentModel:null,ajaxCallComplete:!0,sync:function(b,c,d){var e=this;e.ajaxCallComplete&&(e.ajaxCallComplete=!1,b=='read'&&a.ajax({type:'GET',url:'/ajax/project/getBids.php',dataType:'json',cache:!1,timeout:2e4,data:{project_id:d.project_id,buyer:!0},complete:function(){e.ajaxCallComplete=!0},success:function(a){if(a!=null&&a.status=='success'&&typeof a.bids!='undefined'&&a.bids.length>0){var b=e.sortBids(a.bids);d.recevieAllBids.call(this,b)}else d.error.call(this)},error:function(){d.error.call(this)}}))},getBids:function(a,b,c){if(typeof a=='undefined')return;jQuery.ajax({type:'GET',url:'/ajax/project/getBids.php',dataType:'json',timeout:5e3,data:{project_id:a,buyer:!0},success:function(a){if(a!=null)if(a.status=='success'&&typeof a.bids!='undefined'&&a.bids.length>0){window._lt&&window._lt.push(['user_action',{section:'dashboard',subsection:'bid_subCollection',label:typeof sortBidsLocalData!='undefined'?'true':'false'}]);var d=sortBidsLocalData(a.bids);typeof b!='undefined'&&b&&b.call(d)}else a.status=='failed'&&typeof c!='undefined'&&c&&c.call()},error:function(){c.call()}})},sortBids:function(a){var c=new Array;return typeof a[a.length-1]!='undefined'&&(a[a.length-1].hidden=!1),b.each(a,function(a){a['hidden']==0&&c.push(a)}),c.sort(this.bidsSortComparator),c},bidsSortComparator:function(a,b){if(a.is_selected==1&&!b.is_selected)return-1;if(!a.is_selected&&b.is_selected==1)return 1;if(a.sponsored&&a.sponsored.status=='active'&&b.sponsored&&b.sponsored.status=='active')return a.sponsored.rank-b.sponsored.rank;if(a.sponsored&&a.sponsored.status=='active')return-1;if(b.sponsored&&b.sponsored.status=='active')return 1;if(a.recommended)return-1;if(b.recommended)return 1;var c=b.ranking-a.ranking;return c==0&&(c=b.submitdate_ts-a.submitdate_ts),c},getSortedBidsArray:function(){var a=this;return this.models.sort(function(b,c){return a.bidsSortComparator(b.get('data').bid,c.get('data').bid)})}});return f}),define('dashboard/collections/subCollections/tombstoneNotiFreelancer_subCollection',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/event','dashboard/collections/subCollection'],function(a,b,c,d,e){var f=e.extend({parentModel:null,ajaxCallComplete:!0,sync:function(a,b,c){var d=this;d.ajaxCallComplete&&(d.ajaxCallComplete=!1,a=='read'&&c.empty_callback.call(this))}});return f}),define('dashboard/collections/subCollections/tombstoneNotiEmployer_subCollection',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/event','dashboard/collections/subCollection'],function(a,b,c,d,e){var f=e.extend({parentModel:null,ajaxCallComplete:!0,sync:function(a,b,c){var d=this;d.ajaxCallComplete&&(d.ajaxCallComplete=!1,a=='read'&&c.empty_callback.call(this))}});return f}),define('dashboard/collections/subCollections/serviceProject_subCollection',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/event','dashboard/collections/subCollection'],function(a,b,c,d,e){var f=e.extend({parentModel:null,ajaxCallComplete:!0,sync:function(b,c,d){var e=this;if(e.ajaxCallComplete){e.ajaxCallComplete=!1;if(b=='read'){var f=c.parentModel.toJSON().data.service_id,g={id:f};d.limit&&(g.limit=d.limit),d.offset&&(g.offset=d.offset),a.ajax({type:'GET',url:'/ajax/service/getOrders.php',data:g,dataType:'json',cache:!1,timeout:2e4,complete:function(){e.ajaxCallComplete=!0},success:function(a){a!=null&&a.status=='success'&&typeof a.data!='undefined'?a.data.total>0?d.success_callback.call(this,a.data):d.empty_callback.call(this):d.error_callback.call(this)},error:function(){d.error_callback.call(this)}})}}}});return f}),define('dashboard/models/event',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/collections/subCollection','dashboard/collections/subCollections/bid_subCollection','dashboard/collections/subCollections/tombstoneNotiFreelancer_subCollection','dashboard/collections/subCollections/tombstoneNotiEmployer_subCollection','dashboard/collections/subCollections/serviceProject_subCollection'],function(a,b,c,d,e,f,g,h){var i=c.Model.extend({defaults:{companyLogo:'/img/freelancer_32_32.png'},initialize:function(){this.addToCollection=!0,this.getAggregateId()!=null&&this.set({aggregatedId:this.getAggregateId()});switch(this.get('type')){case'pmb_public':case'contest_pcb':case'uploadFile':case'contestEntryCreated':case'contestEntryRated':case'draftContest':case'serviceStatusChanged':case'sitesListingStatusChanged':case'sitesBinCreated':case'sitesBidCreated':typeof this.get('subCollection')=='undefined'&&this.set({subCollection:new d});break;case'bid':if(typeof this.get('subCollection')=='undefined'){var a=new e;a.parentModel=this,this.set({subCollection:a})}break;case'tombstoneNotiFreelancer':if(typeof this.get('subCollection')=='undefined'){var b=new f;b.parentModel=this,this.set({subCollection:b})}break;case'tombstoneNotiEmployer':if(typeof this.get('subCollection')=='undefined'){var c=new g;c.parentModel=this,this.set({subCollection:c})}break;case'serviceProjectPostedSeller':if(typeof this.get('subCollection')=='undefined'){var i=new h;i.parentModel=this,this.set({subCollection:i})}}var j=this.get('data');if(typeof j!='undefined'){if(this.displayFreelancerLogoEventTypes().indexOf(this.get('type'))!=-1)var k={userName:'Freelancer',imgUrl:this.get('companyLogo')};else{var l=j.userName||'Freelancer';if(l=='Freelancer')var m=this.get('companyLogo');var k={userName:l,userId:j.userId||j.awardeeId||j.inviteeId||j.fromUserId||j.sellerId||null,imgUrl:m||(j.img?j.img.profile_logo_url:undefined)||j.imgUrl||this.get('companyLogo')}}this.set({portraitObj:k})}}});return i.prototype.getAggregateId=function(){var a=null;switch(this.get('type')){case'bid':a=getUserIdfromCookie()+':bid:'+this.get('data').projectId;break;case'pmb_public':a=getUserIdfromCookie()+':pmb_public:'+this.get('data').project_id;break;case'contest_pcb':a=getUserIdfromCookie()+':contest_pcb:'+this.get('data').contestId;break;case'uploadFile':a=getUserIdfromCookie()+':uploadFile:'+this.get('data').id;break;case'contestEntryCreated':return getUserIdfromCookie()+':contestEntryCreated:'+this.get('data').contestId;case'contestEntryRated':return getUserIdfromCookie()+':contestEntryRated:'+this.get('data').contestId;case'serviceProjectPostedSeller':return getUserIdfromCookie()+':serviceProjectPostedSeller:'+this.get('data').service_id;case'serviceStatusChanged':return getUserIdfromCookie()+':serviceStatusChanged:'+this.get('data').service_id;case'suggestionForFreelancerAfterReceiveReview':return getUserIdfromCookie()+':suggestionForFreelancerAfterReceiveReview:'+'aggregate';case'tombstoneNotiEmployer':return getUserIdfromCookie()+':tombstoneNotiEmployer:'+this.get('data').employerId;case'tombstoneNotiFreelancer':return getUserIdfromCookie()+':tombstoneNotiFreelancer:'+getUserIdfromCookie();case'communityPromoNoti':case'expertsPromoNoti':a=getUserIdfromCookie()+':'+this.get('type')+':'+this.get('data').userId;break;case'localJobsActivation':a=getUserIdfromCookie()+':localJobsActivation';break;case'sitesListingStatusChanged':case'sitesBidCreated':case'sitesBinCreated':a=getUserIdfromCookie()+':'+this.get('type')+':'+this.get('data').aggregate_id;break;case'draftContest':return getUserIdfromCookie()+':draftContest:'+this.get('data').contestId}return a},i.prototype.getUniqueKey=function(){var a=null;switch(this.get('type')){case'contestEntryRated':return this.get('data').entryId}return a},i.prototype.setIsLiveNotification=function(a){this.isLiveNotification=a},i.prototype.displayFreelancerLogoEventTypes=function(){return['completed','adminForceVarifyPhone','adminWarningUserBidRestriction','banUserFromBidding','buyFreeMarketService','contestAwardedToEmployer','contestAwardedToFreelancer','contestCreated','contestUpsellFeaturedUpgrade','contestExpired','contestLockedEmployer','customAdminNotification','acceptDisputeOffer','emailChange','freeMarketServiceExpired','freeMarketServiceIsExpired','inviteFriends','invoiceFeedback','upgradeToNonFreeMembership','downgradeToFreeMembership','prizeDispersedFreelancer','prizeDispersedEmployer','postDraftProject','rejected','reviewActivate','reviewPending','projectAwaitingFeedback','removeUserFromDirectory','verifyPhone','yahooMailAlert','adminWarningUserBidRestriction','suggestionForFreelancerAfterReceiveReview','upsellFeatureUpgrade','upsellAssistedUpgrade','tombstoneNotiEmployer','tombstoneNotiFreelancer','communityPromoNoti','expertsPromoNoti','activateFreelancer','contactsAutoAddedSender','contactsAutoAddedReceiver','localJobsActivation']},i.prototype.noLongerImportantEventTypes=function(){return['removeUserFromDirectory','banUserFromBidding','freeMarketServiceExpired','freeMarketServiceIsExpired','sellFreeMarketService','adminWarningUserBidRestriction','reviewposted','completed','accepted','invoiceFeedback','projectAwaitingFeedback','customAdminNotification','kyc']},i.prototype.isNoLongerImportant=function(){return a.inArray(this.get('type'),this.noLongerImportantEventTypes())!=-1},i}),define('dashboard/models/modelCollection',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/event'],function(a,b,c,d){var e=c.Collection.extend({model:d,getModelOrParent:function(a){if(typeof this.get(a.get('id'))!='undefined')return this.get(a.get('id'));if(typeof a.get('aggregatedId')!='undefined'){var b=this.find(function(b){if(b.get('aggregatedId')==a.get('aggregatedId'))return b});if(typeof b!='undefined')return b}return null},getModel:function(a){return typeof this.get(a.get('id'))!='undefined'?this.get(a.get('id')):null},getParent:function(a){if(typeof a.get('aggregatedId')!='undefined'){var b=this.find(function(b){if(b.get('aggregatedId')==a.get('aggregatedId'))return b});if(typeof b!='undefined')return b}return null},comparator:function(a){return-1*a.get('timestamp')}});return e}),define('dashboard/models/eventModelFactory',['jquery-wrapper','underscore-wrapper','notification/libnotify','dashboard/models/event','dashboard/models/modelCollection'],function(a,b,c,d,e){var f=!1,g=function(){if(f)return f;this.modelCollection=new e,f=this};return g.prototype.generate=function(a,b){if(!this.validate(a))return!1;typeof b=='undefined'&&(b=!1);var c=new d(a);c.setIsLiveNotification(b);if(b===!0)switch(c.get('type')){case'bid':case'pmb_public':case'contest_pcb':case'uploadFile':case'contestEntryCreated':case'contestEntryRated':case'private':case'tombstoneNotiEmployer':case'tombstoneNotiFreelancer':case'serviceProjectPostedSeller':case'serviceStatusChanged':case'sitesListingStatusChanged':case'sitesBinCreated':case'sitesBidCreated':case'draftContest':var e=this.modelCollection.getParent(c);c.set({parentModel:e});if(e!==null)return c}switch(c.get('type')){case'suggestionForFreelancerAfterReceiveReview':case'localJobsActivation':var e=this.modelCollection.getParent(c);c.set({parentModel:e});if(e!==null)return c}var f=this.modelCollection.getModel(c);return f!==null?f:(this.modelCollection.add(c),c)},g.prototype.getModelOrParent=function(a){return this.modelCollection.getModelOrParent(a)},g.prototype.getModelCollection=function(){return this.modelCollection},g.prototype.setStateOnCondition=function(a,b){var c=this.modelCollection.find(a);typeof c!='undefined'&&c.set({state:b})},g.prototype.validate=function(a){return a.type=='uploadFile'?a.data.id!==!1:!0},g}),define('dashboard/collections/events',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/event','notification/libpersist','dashboard/models/eventModelFactory'],function(a,b,c,d,e,f){var g=c.Collection.extend({model:d,importantNotificationCount:0,eventModelFactory:new f,fetchFinished:!1,initialize:function(){b.bindAll(this,'applyFilter','sync','parse','comparator'),this.persist=new e('newsfeed')},applyFilter:function(a){this.filter=a},sync:function(a,b,c){if(a=='read'){var d=c.data&&c.data.page-1||0;this.persist.latest_filtered(d*20,c.success,c.error,this,this.filter),_lt=_lt||[];var e='all';typeof this.filter!='function'&&(e=this.filter),_lt.push(['user_action',{section:'newsfeed',subsection:'page_down_'+e,label:d+1}])}},parse:function(a){var c=this;typeof a.facets!='undefined'&&(this.importantNotificationCount=a.facets.important_unactioned.count),this.fetchFinished=!0;var d=[],e=this;return a?(b.each(a.hits.hits,function(a){var b=a._source,e=c.eventModelFactory.generate(b,!1);if(e&&d.indexOf(e)==-1)switch(e.get('type')){case'suggestionForFreelancerAfterReceiveReview':case'localJobsActivation':e.get('parentModel')===null&&d.push(e);break;default:d.push(e)}}),d):d},comparator:function(a){return-1*a.get('timestamp')}});return g}),define('dashboard/collections/allevents',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/collections/events','dashboard/models/event','dashboard/models/eventModelFactory'],function(a,b,c,d,e,f){var g=d.extend({latestNewsModel:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'addNewsItem','addNewsItems','setNews','bindEvents')},setNews:function(a){this.news||(this.news=a,this.bind('readyToAddTombstone',this.AddTombstone),this.bind('readyToAddNews',this.addNewsItems),this.bindEvents())},bindEvents:function(){this.news.bind('add',this.addNewsItem),this.news.bind('reset',this.addNewsItems),this.bind('reset',this.addNewsItems),this.bind('add',this.addNewsItem)},addNewsItems:function(){if(!this.fetchFinished)return;this.latestNewsModel||this.setLatestNewsModel(this.news.first())},setLatestNewsModel:function(a){this.latestNewsModel=a,this.latestNewsModel&&this.addNewsItem()},addNewsItem:function(){var a=this.latestNewsModel,b=this.last();if(typeof a=='undefined')return;b&&a.get('timestamp')>b.get('timestamp')&&!this.contains(a)&&(this.add(a),a!==this.news.last()&&this.setLatestNewsModel(this.news.at(this.news.indexOf(a)+1)))},AddTombstone:function(){var a=(new f).generate({id:'uniqueTombstoneModel',type:'tombstone',timestamp:(new Date).getTime()/1e3});a&&!this.contains(a)&&this.add(a)}});return g}),define('dashboard/collections/eventsCollectionFactory',['jquery-wrapper','underscore-wrapper','backbone-wrapper','notification/libnotify','dashboard/models/event','dashboard/models/eventModelFactory','dashboard/collections/events','dashboard/collections/allevents','dashboard/collections/freelancernews'],function(a,b,c,d,e,f,g,h,i){var j={},k='',l=!1,m=['bid','inviteUserBid','invoiceRequested','invoiceWithdrawn','invoicePaid','invoicePartialPaid','invoiceRequestChange','invoiceAcceptedPartial','createMilestone','releaseMilestone','requestMilestone','updateMilestone','completed','uploadFile','accepted','contest_pcb','contestEntryCreated','contestreviewposted','contestCreated','contestUpsellFeaturedUpgrade','contestExpired','contestEntryRated','reviewposted','reviewpostednew','completeContestReview','completeReview','award','awardBadge','pmb_public','releasePartMilestone','reviewActivate','reviewPending','rejected','directTransferDone','requestToRelease','denyed','hireMe','newDispute','sendDisputeMessage','makeDisputeOffer','acceptDisputeOffer','escalateDispute','emailChange','buyFreeMarketService','freeMarketServiceExpired','freeMarketServiceIsExpired','sellFreeMarketService','verifyPhone','adminForceVarifyPhone','yahooMailAlert','adminWarningUserBidRestriction','contestAwardedToEmployer','contestAwardedToFreelancer','downgradeToFreeMembershipNoti','specialLoyaltyDiscount','removeUserFromDirectory','banUserFromBidding','winningDesignReadyForReview','contestComplete','prizeDispersedEmployer','prizeDispersedFreelancer','contestLockedEmployer','contestLockedFreelancer','invoiceFeedback','upgradeToNonFreeMembership','postDraftProject','projectAwaitingFeedback','inviteFriends','customAdminNotification','projectHireMeExpired','generic','inviteToContest','bidsRunningOut','counterOffer','suggestionForFreelancerAfterReceiveReview','upsellIntro','upsellBasicTrial','upsellPlusTrial','upsellFeatureUpgrade','upsellAssistedUpgrade','awardReminder','tombstoneNotiEmployer','tombstoneNotiFreelancer','tombstoneNoti','communityPromoNoti','expertsPromoNoti','firstEarning','serviceStatusChanged','serviceProjectPostedSeller','serviceProjectPostedBuyer','serviceProjectEndingSeller','serviceProjectEndedSeller','serviceProjectEndedBuyer','sitesListingStatusChanged','sitesBinCreated','sitesBidCreated','promoteContest','draftContest','articleCommentReceived','editAwardedBidRequest','editAwardedBidAccepted','editAwardedBidDeclined','requestEndProject','pendingFunds','examPassedUpsell','examRetakingDiscount','localJobsActivation','projectSharedWithYou'],n=function(){if(l)return l;l=this};return n.prototype.getCurrentCategory=function(){return k},n.prototype.FBappId='',n.prototype.ALL='all',n.prototype.IMPORTANT='important',n.prototype.PROJECT='project',n.prototype.PINNED='pinned',n.prototype.FREELANCERNEWS='freelancernews',n.prototype.isTabAll=function(){return k==this.ALL},n.prototype.isTabImportant=function(){return k==this.IMPORTANT},n.prototype.isTabProject=function(){return k==this.PROJECT},n.prototype.isTabPinned=function(){return k==this.PINNED},n.prototype.isTabFreelancerNews=function(){return k==this.FREELANCERNEWS},n.prototype.getAllCollections=function(){return j},n.prototype.addPinned=function(a){j.pinned&&(this.isTabPinned()||j.pinned.add(a))},n.prototype.removePinned=function(a){j.pinned&&j.pinned.remove(a)},n.prototype.getFBappId=function(){var b=this;if(this.FBappId!='')return this.FBappId;a.ajax({type:'GET',url:'/ajax/dashboard/getFBappId.php',dataType:'json',success:function(a){a.status=='success'?b.FBappId=a.FBappId:b.getFBappId()}})},n.prototype.alreadyRegisterCallBackFunctions=!1,n.prototype.generate=function(a){this.getFBappId(),k=a;if(j[a])return j[a].disableTransitions=!0,j[a];a=='freelancernews'?(j[a]=new i,j[a].length==0&&j[a].fetch()):a=='all'?(j[a]=new h,j[a].fetch({success:function(){j.freelancernews=new i,j[a].setNews(j.freelancernews),j['freelancernews'].length==0&&j.freelancernews.fetch()}})):(j[a]=new g,j[a].applyFilter(a),j[a].fetch());var c=function(a){if(!a.display)return;var b=new f,c=b.generate(a,!0);if(c===!1){ErrorHandler.report('model not pass validation');return}switch(c.get('type')){case'pmb_public':case'contest_pcb':case'bid':case'contestEntryCreated':case'uploadFile':case'private':case'tombstoneNotiEmployer':case'tombstoneNotiFreelancer':case'serviceProjectPostedSeller':case'serviceStatusChanged':case'sitesListingStatusChanged':case'sitesBinCreated':case'sitesBidCreated':case'draftContest':c.get('parentModel')!=null&&(c.get('parentModel').get('subCollection').add(c),c.addToCollection=!1);break;case'contestEntryRated':if(c.get('parentModel')!=null){var d=c.get('parentModel'),e=d.get('subCollection');e.updateEntry(c),c.addToCollection=!1}break;case'suggestionForFreelancerAfterReceiveReview':case'localJobsActivation':c.get('parentModel')!=null&&(c.addToCollection=!1)}if(typeof c=='undefined'||c==null)ErrorHandler.report('empty model when insert into collection');else if(c.addToCollection)try{typeof j['all']!='undefined'&&j.all.add(c),c.get('is_important')&&typeof j.important!='undefined'&&j.important.add(c),c.get('is_project')&&typeof j.project!='undefined'&&j.project.add(c)}catch(g){ErrorHandler.report(g,'Insert into collection trigger this error')}};return this.alreadyRegisterCallBackFunctions||(b.each(m,function(a){d.register('notifications',a,c)}),this.alreadyRegisterCallBackFunctions=!0),j[a]},n}),define('dashboard/views/events/menu',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/menu.htm','notification/libpersist','dashboard/collections/eventsCollectionFactory'],function(a,b,c,d,e,f){var g=c.View.extend({events:{'click .pin':'pin','click .unpin':'unpin','click .share':'share','click .hide':'hide','click .unhide':'unhide','click .unimportant':'unimportant','click .important':'markImportant'},compileTemplate:b.template(d),shareMessage:'',shareLink:'',initialize:function(a){b.bindAll(this,'render'),typeof this.model.bind=='function'&&(this.model.bind('change:is_pinned',this.render),this.model.bind('change:user_hidden',this.render),this.model.bind('change:is_important',this.render),this.model.bind('change:winningBid',this.render)),this.persist=new e('newsfeed')},hide:function(a){this.model.set({user_hidden:!0}),this.persist.hide(this.getCorrectId(),this.success,this.error,this),this.trigger('hideParent')},unhide:function(a){this.model.set({user_hidden:!1}),this.persist.unhide(this.getCorrectId(),this.success,this.error,this)},unimportant:function(a){this.model.set({is_important:!1}),this.persist.unimportant(this.getCorrectId(),this.success,this.error,this),this.trigger('unimportantParent')},markImportant:function(a){this.markModelImportant(),this.persist.important(this.getCorrectId(),this.success,this.error,this),this.trigger('importantParent')},markModelImportant:function(){this.model.set({is_important:!0})},markModelUnimportant:function(){this.model.set({is_important:!1})},pin:function(a){this.model.set({is_pinned:!0}),this.persist.pin(this.getCorrectId(),this.pinned,this.error,this)},unpin:function(a){this.model.set({is_pinned:!1}),this.persist.unpin(this.getCorrectId(),this.unpinned,this.error,this)},pinned:function(a){(new f).addPinned(this.model)},unpinned:function(a){(new f).removePinned(this.model)},share:function(a){var b=(new f).getFBappId(),c;b!=''&&b!='staging'?c='http://www.facebook.com/dialog/feed?display=popup&app_id='+b+'&link='+this.shareLink+'&name='+this.shareMessage+'&picture='+window.location.protocol+'//'+window.location.hostname+'/img/freelancer_small.jpg'+'&redirect_uri='+window.location.protocol+'//'+window.location.hostname+'/users/close.php':c='http://www.facebook.com/dialog/feed?display=popup&app_id=757199584355128&link='+this.shareLink+'&name='+this.shareMessage+'&picture=http://freelancer.com/img/freelancer_small.jpg'+'&redirect_uri='+window.location.protocol+'//'+window.location.hostname+'/users/close.php',window.open(c,'','height=400, width=600, menu=no, toolbar=no, scrollbars=yes, resizable=yes')},getCorrectId:function(){return this.model.getAggregateId()!=null?this.model.getAggregateId():this.model.get('id')},success:function(a){},error:function(a){},render:function(){var b=this.model.toJSON();typeof b['is_pinned']=='undefined'&&(b.is_pinned=!1),typeof b['user_hidden']=='undefined'&&(b.user_hidden=!1);var c=this.model.get('type');b.share=!1;switch(c){case'tombstone':return;case'completeContestReview':b.share=!0;break;case'reviewActivate':case'completed':case'completeReview':this.model.get('data').categoryName&&(b.share=!0);break;case'bid':this.model.get('data').categoryName&&this.model.get('winningBid')&&(b.share=!0);break;case'award':case'accepted':this.model.get('data').categoryName&&this.model.get('data').bid&&(b.share=!0);break;case'contestAwardedToEmployer':case'contestAwardedToFreelancer':this.model.get('data').prize&&this.model.get('data').currencySign&&this.model.get('data').currencyCode&&(b.share=!0);break;default:}return b.share&&this.prepareSharing(c),a(this.el).html(this.compileTemplate(b)),(new f).isTabImportant()?(a(this.el).find('.hide').remove(),a(this.el).find('.unhide').remove(),this.model.get('is_important')||this.trigger('unimportantParent')):(a(this.el).find('.unimportant').remove(),a(this.el).find('.important').remove()),this},prepareSharing:function(a){var b='/campaign/0MGY0127/?l=',c=this.model.get('data');a!='contestAwardedToEmployer'&&a!='contestAwardedToFreelancer'&&a!='completeContestReview'&&(c.categoryName=c.categoryName.replace('& ','and '));switch(a){case'reviewActivate':this.shareMessage=T_('I just posted a <[- data.categoryName]> project on Freelancer.com. It\'s free!',{data:c}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+'/projects/'+c.seoUrl+'.html';break;case'bid':var d=this.model.get('winningBid').get('data');this.shareMessage=T_('I just hired <[- winningBid.userName ]> to complete my <[- data.categoryName]> project for only <[- winningBid.currency ]><[- winningBid.amount ]> <[- winningBid.currencyCode ]> on Freelancer.com',{data:c,winningBid:d}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+c.linkUrl;break;case'award':var e=this.model.get('data').bid;this.shareMessage=T_('I just won a <[- data.categoryName]> job on Freelancer.com worth <[- data.currencysign ]><[- data.bid.bidAmount ]> <[- data.currencycode ]>!',{data:c}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+c.linkUrl;break;case'accepted':this.shareMessage=T_('<[- data.userName]> has just accepted to work on my <[- data.categoryName]> project for only <[- data.currencySign ]><[- data.bid.sum ]> <[- data.currencyCode ]> on Freelancer.com',{data:c}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+'/projects/'+c.seoUrl+'.html';break;case'completed':parseInt(getUserIdfromCookie(),10)===c.employerId?this.shareMessage=T_('I successfully outsourced a <[- data.categoryName]> project on Freelancer.com (to <[- data.freelancerUsername]>) for only <[- data.currencysign ]><[- data.amount ]> <[- data.currencycode ]>!',{data:c}):this.shareMessage=T_('I just completed a <[- data.categoryName]> job (for <[- data.employerUsername]>) on Freelancer.com and earned <[- data.currencysign ]><[- data.amount ]> <[- data.currencycode ]>!',{data:c}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+'/projects/'+c.seoUrl+'.html';break;case'contestAwardedToEmployer':this.shareMessage=T_('I just crowdsourced <[- data.contestName]> for <[- data.currencySign ]><[- data.prize ]> <[- data.currencyCode ]> on Freelancer.com',{data:c}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+c.contestSEOURL;break;case'contestAwardedToFreelancer':this.shareMessage=T_('I just won <[- data.currencySign ]><[- data.prize ]> <[- data.currencyCode ]> for winning <[- data.contestName]> on Freelancer.com',{data:c}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+c.contestSEOURL;break;case'completeReview':this.shareMessage=T_('I received <[- data.rating]> stars for completing <[- data.categoryName]> project on Freelancer.com: <[- data.message]>',{data:c}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+'/projects/'+c.seoUrl+'.html';break;case'completeContestReview':this.shareMessage=T_('I received <[- data.rating]> stars for completing <[- data.name]> on Freelancer.com: <[- data.message]>',{data:c}),this.shareLink=window.location.protocol+'//'+window.location.hostname+b+c.seoUrl;break;default:}}});return g}),define('dashboard/views/events/event',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/menu','dashboard/views/events/hidden','dashboard/views/portraitFactory','dashboard/collections/eventsCollectionFactory','dashboard/models/eventModelFactory'],function(a,b,c,d,e,f,g,h){var i=c.View.extend({events:{'hover .news-list-wrapper':'removeNewNotificationLabel'},initialize:function(a){b.bindAll(this,'renderEvent','setTimeText','hide','unhide','markUnimportant','markImportant'),this.portraitFactory=new f,this.eventsCollectionFactory=new g,this.eventViewFactory=new h,this.initialOtherModules()},setTrackingData:function(a,b){this.track_index=a,this.track_type=b},initialOtherModules:function(){delete this.menu,delete this.hidden,this.menu=new d({model:this.model}),this.menu.bind('hideParent',this.hide),this.menu.bind('unimportantParent',this.markUnimportant),this.menu.bind('importantParent',this.markImportant),this.hidden=new e({model:this.model}),this.hidden.bind('unhideParent',this.unhide),this.hidden.bind('markImportantParent',this.markImportant)},setTimeText:function(){var b=this.model.get('type'),c='',d,e,f;if(b==='pmb_public'||b=='bid'||b==='contest_pcb')a(this.el).find('.news-item').each(function(){var b=a(this).data('time');c=lib_datetime_relative_date(b),a(this).find('.time_text').text(c)}),c=lib_datetime_relative_date(this.model.get('timestamp')),a(this.el).find('h2 .time_text').text(c);else if(b==='contestEntryCreated'||b=='contestEntryRated')a(this.el).find('.ct_entry').each(function(){c=lib_datetime_relative_date(a(this).data('time')),a(this).find('.time_text').html(c)}),c=lib_datetime_relative_date(this.model.get('timestamp')),a(this.el).find('h2 .time_text').html(c);else if(b==='contestExpired'){c=lib_datetime_relative_date(this.model.get('timestamp')),a(this.el).find('.time_text').text(c),e=(new Date).getTime(),f=parseInt(e/1e3,10)+15;var g=1209600,h=259200;d=lib_datetime_relative_date(this.model.get('timestamp')+g),a(this.el).find('.time_left').text(d),f>this.model.get('timestamp')+g&&a(this.el).find('.time_left_flag').css('display','none'),f>this.model.get('timestamp')+h&&a(this.el).find('.first').next().css('display','none')}else if(b==='winningDesignReadyForReview'){c=lib_datetime_relative_date(this.model.get('timestamp')),a(this.el).find('.time_text').text(c),e=(new Date).getTime(),f=parseInt(e/1e3,10)+15;var i=this.model.get('data').autoLockTime||1209600;d=lib_datetime_relative_date(this.model.get('timestamp')+i),a(this.el).find('.time_left').text(d),f>this.model.get('timestamp')+i&&a(this.el).find('.time_left_flag').css('display','none')}else if(b==='inviteFriends'){c=lib_datetime_relative_date(this.model.get('timestamp')),a(this.el).find('.time_text').text(c),e=(new Date).getTime(),f=parseInt(e/1e3,10)+15;var j=86400;d=lib_datetime_relative_date(this.model.get('timestamp')+j).slice(0,-5),a(this.el).find('#countdown').length>0&&a(this.el).find('#countdown').text(d)}else c=lib_datetime_relative_date(this.model.get('timestamp')),a(this.el).find('.time_text').text(c);b=null},renderEvent:function(){try{var b=this.model.get('type');this.render(),this.registerUserPortrait();var c='';typeof this.track_index!='undefined'&&(c=' data-newstrack-index="'+(this.track_index+1)+'" data-newstrack-typeid="'+this.track_type+'" ');var d=a('<div class="news-list-wrapper" data-type="'+b+'"'+c+'><div class="news-list-inner">');d.find('.news-list-inner').html(a(this.el).children()),this.model.isLiveNotification===!0&&(d.prepend('<div class = "new-notification-label"></div>'),this.model.setIsLiveNotification(!1)),this.initialOtherModules(),this.menu&&this.model.get('type')!=='freelancernews'&&(this.menu.render(),d.find('h2').after(this.menu.el)),a(this.el).html(d),(new g).isTabImportant()&&!this.model.get('is_important')&&this.markUnimportant(),this.model.get('user_hidden')&&this.hide(),this.eventsCollectionFactory.isTabImportant()&&this.model.isNoLongerImportant()&&(this.model.attributes.is_important=!1,this.menu.persist.unimportant(this.menu.getCorrectId()))}catch(e){ErrorHandler.report(e,'Dashboard view render ('+this.model.get('type')+')')}return this},registerUserPortrait:function(b){var c=a(this.el).find('.profile-pic-wrapper'),d;for(var e=0;e<c.length;e++){var f=a(c[e]),g=f.find('.profile-pic > img');if(g.length!==1)continue;if(f.hasClass('currentUser')){var h={userId:getUserIdfromCookie(),userName:currentUserName,imgUrl:currentUserImg};d=this.portraitFactory.getPortrait(h)}else a('img',f).attr('title')!='Freelancer'?d=this.portraitFactory.getPortrait(b||this.model.get('portraitObj')||{userName:a(g).attr('title'),imgUrl:a(g).attr('src')}):d=c[e];f.replaceWith(d)}}});return i.prototype.truncateProjectName=function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName()},i.prototype.hideEvent=function(){a(this.el).hide()},i.prototype.hide=function(){var b=this.hidden.render('hide');a(this.el).find('.news-list-wrapper').prepend(b.el),a(this.el).find('.news-list-inner').hide()},i.prototype.unhide=function(){this.menu.unhide(),a(this.el).find('.hidden').remove(),a(this.el).find('.news-list-inner').show()},i.prototype.markUnimportant=function(){var b=this.hidden.render('important');a(this.el).find('.news-list-wrapper').prepend(b.el),a(this.el).find('.news-list-inner').hide()},i.prototype.markImportant=function(){this.menu.markModelImportant(),a(this.el).find('.hidden').remove(),a(this.el).find('.news-list-inner').show()},i.prototype.markThisNotificationUnread=function(){a(this.el).find('.new-notification-label').length===0&&a(this.el).find('.news-list-wrapper').prepend('<div class = "new-notification-label"></div>'),this.model.setIsLiveNotification(!1)},i.prototype.removeNewNotificationLabel=function(){a(this.el).find('.new-notification-label').fadeOut(1500,function(){a(this).remove()})},i}),define('dashboard/views/events/newsitem',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/newsitem.htm','text!templates/dashboard/stickyNewsStatic.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(e),compilestickyNewsTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return this.model.get('isStickyNews')?a(this.el).html(this.compilestickyNewsTemplate(this.model.toJSON())):a(this.el).html(this.compileTemplate(this.model.toJSON())),this.model.get('has_external_link')===!1&&a(this.el).find('.actions').hide(),this}});return g}),define('dashboard/views/events/project.commenced',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/messageThread','text!templates/dashboard/project.commenced.htm'],function(a,b,c,d,e,f){var g=d.extend({events:{'click .actionMessage':'message'},compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','message'),this.messages=new e({model:this.model}),this.messages.bind('collapse',this.onMessageShow).bind('expand',this.onMessageHide)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).children().children().last().after(this.messages.render().el),this.messages.hide(),this},onMessageShow:function(){},onMessageHide:function(){},message:function(){this.messages.toggle()}});return g}),define('dashboard/views/events/project.completed',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','notification/libpersist','text!templates/dashboard/project.completed.freelancer.htm','text!templates/dashboard/project.completed.employer.htm','text!templates/dashboard/feedback.fixed.project.htm','jquery.autosize','dashboard/lib/feedbackTip'],function(a,b,c,d,e,f,g,h,i,j){var k=d.extend({events:b.extend({},d.prototype.events,{'click #feedbackButton':'showFeedbackBox','click #cancel':'hideFeedbackBox','click #submit':'submitFeedback','keydown #tip-amount':'onlyAllowPositiveIntAmount','mouseover #tipArea':'clickableIn','mouseout #tipArea':'clickableOut','click #tipArea':'tipClick','focus #comment':'resetCommentError','click #budget_time p':'checkRadio'}),freelancerCompileTemplate:b.template(g),employerCompileTemplate:b.template(f),feedbackFixedProjectCompileTemplate:b.template(h),initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.bind('change',this.renderEvent),b.bindAll(this,'condition')},condition:function(a){return a.get('type')=='reviewpostednew'&&a.get('data').id==this.model.get('data').id&&typeof a.get('data').invoice_id=='undefined'},updateStateValue:'complete',updateOthersState:function(){this.eventViewFactory.setStateOnCondition(this.condition,this.updateStateValue)},resetCommentError:function(){a(this.el).find('#comment').removeClass('comment-error')},checkRadio:function(b){a(b.target).find('input').attr('checked','checked')},clickableIn:function(b){var c=this.el.find('#tipArea');a(c).addClass('alert-info')},clickableOut:function(b){var c=a(this.el).find('#tipArea'),d=c.find('input:checkbox');d.is(':checked')||a(c).removeClass('alert-info')},tipClick:function(b){var c=this.el.find('#chkbx_tip'),d=typeof b;if(d!='undefined'){var e=a(b.target).not('#chkbx_tip')[0];e&&(a(b.target).not('#tip-amount')[0]?c.attr('checked',c.is(':checked')?!1:!0):c.attr('checked',!0))}else this.clickableIn(),c.attr('checked',!0)},render:function(){this.model.get('data').freelancerId==getUserIdfromCookie()?a(this.el).html(this.employerCompileTemplate(this.model.toJSON())):a(this.el).html(this.freelancerCompileTemplate(this.model.toJSON()));if(typeof this.model.attributes.data.amount=='undefined'||this.model.attributes.data.amount==0||this.model.attributes.data.amount==null)this.model.attributes.data.amount=50;return parseInt(this.model.get('data').employerId,10)===parseInt(getUserIdfromCookie(),10)&&(window.isEmployer=!0),a(this.el).find('.actions').last().append(this.feedbackFixedProjectCompileTemplate(this.model.toJSON())),this.model.get('data').freelancerId==getUserIdfromCookie()?(a(this.el).find('#toEmployer').remove(),a(this.el).find('#budget_time').remove(),a(this.el).find('.ns_tip').remove()):a(this.el).find('#toFreelancer').remove(),this.setExpiredTime(),a(this.el).find('#comment').autosize(),a(this.el).iniatialTipTooltip(),this},setExpiredTime:function(){var b=this.model.get('state');if(typeof b!='undefined'&&b=='completed'){a(this.el).find('#expiredNotice').remove();return}var c=this.model.get('data').expiredTimestamp;if(typeof c=='undefined'||c==null){a(this.el).find('#expiredNotice').remove();return}var d=(new Date).getTime();d=parseInt(d/1e3);var e=(c-d)/86400;if(e>0){e=parseInt(e);var f=T_('Due in ')+e+(e==1?T_('day'):T_(' days'));a(this.el).find('#timeleft').text(f)}else{var f=T_('Expired');a(this.el).find('#timeleft').text(f),a(this.el).find('.actions').remove()}},showFeedbackBox:function(){a(this.el).find('#feedbackBox').is(':visible')?this.hideFeedbackBox():(a(this.el).find('#feedbackButton').parent().addClass('active'),a(this.el).find('#feedbackBox').show())},hideFeedbackBox:function(){a(this.el).find('#feedbackBox').hide(),a(this.el).find('#feedbackButton').parent().removeClass('active')},submitFeedback:function(b){var c=this,d=!0,e=a(this.el).find('form'),f=this.model.get('data').id.toString(),g=new Array('quality','communication','expertise','professionalism','hire_again'),h=new Array('clarity_spec','communication','payment_prom','professionalism','work_for_again'),i=e.find('[name=descr]').val();if(this.model.get('data').freelancerId==getUserIdfromCookie())var j=this.model.get('data').employerId.toString(),k=h,l=!1;else var j=this.model.get('data').freelancerId.toString(),k=g,l=!0,m=e.find('[name=onbuget]:checked').val(),n=e.find('[name=ontime]:checked').val();var o=e.find('[name=chkbx_tip]').is(':checked'),p=e.find('[name=tip-amount]').val(),q={project_id:f,to_user:j,buyer_to_seller:l,descr:i,ajax:d};this.model.get('data').freelancerId!=getUserIdfromCookie()&&(q.ontime=n,q.onbuget=m),o==1&&(q.chkbx_tip='on',q.tip_amount=p),a.each(k,function(a,b){window[b]=e.find('[name='+b+']:checked').val(),q[b]=window[b]});var r={result:!0},s=this.checkFeedback(q)&&r.result;if(r.result&&this.model.get('data').rehireOption&&a(this.el).find('#chkbx_rehire').is(':checked')){var t=a(c.el).find('#rehire-hourlyrate').val(),u=a(c.el).find('#rehire-commitment').val();q.chkbx_rehire='on',q.commitment=u,q.hourlyrate=t}var v=a(this.el).find('.hint-tip');s&&(a(this.el).find('#chkbx_rehire').is(':checked')&&_ttref.push(['_clearEntrypoint','HireMe'],['_setEntrypoint','HireMe_NewsfeedRehire']),a(this.el).find('#processing').show(),a(this.el).find('#innerWrapper').hide(),jq.ajax({type:'post',data:q,dataType:'json',url:'/users/review/onrate.php',success:function(b){if(b.status=='success'){var d='completed';c.actionState(d),c.updateOthersState()}else b.status=='redirect'?window.location.replace(b.error):(a(c.el).find('#processing').hide(),a(c.el).find('#innerWrapper').show(),v.empty(),v.show(),v.append('<span class="error-msg">'+b.error+'</span><br>'))}}))},checkFeedback:function(b){var c=!0,d=a(this.el).find('.hint-star'),e=a(this.el).find('.hint-comment');d.empty(),e.empty(),a.each(b,function(a,b){if(typeof b=='undefined')return c=!1,d.append('<span class="error-msg">'+T_('Please rate all criteria')+'</span><br>'),c});var f=a(this.el).find('#tipcheck').data('status');return f=='checking'&&a(this.el).find('#chkbx_tip').is(':checked')?c=!1:f=='fail'&&a(this.el).find('#chkbx_tip').is(':checked')&&(c=!1),b['descr']==0?(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')):b.descr.length<5&&(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment more than 5 characters in length')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')),c},onlyAllowPositiveIntAmount:function(b){var c=a(this.el).find('#tip-amount').val();if(b.keyCode==48||b.keyCode==96||b.keyCode==46||b.keyCode==8)if(c.length==0){b.preventDefault();return}if(b.keyCode==190||b.keyCode==110){if(c.length==0){b.preventDefault();return}if(c.indexOf('.')!=-1){b.preventDefault();return}}if(b.keyCode!=46&&b.keyCode!=8)if(b.keyCode<95){if(b.keyCode<48||b.keyCode>57){b.preventDefault();return}}else if(b.keyCode<96||b.keyCode>105&&b.keyCode!=110&&b.keyCode!=190){b.preventDefault();return}if(b.keyCode==13){b.preventDefault();return}this.tipClick()},actionState:function(a){var b=this,c=new e('newsfeed'),d=this.model.attributes.state,f=a;this.model.set({state:f}),this.renderEvent(this.model),b.truncateProjectName()}});return k}),define('dashboard/views/events/milestone.new',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/milestone.new.htm','notification/libpersist'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{'click #requestToReleaseBtn':'showRequestToReleaseConformBox','click .btn-cancel-request-release-milestone':'hideRequestToReleaseConformBox','click .btn-request-release-milestone':'requestToRelease'}),compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','requestToRelease','activeTabOn','activeTabOff'),this.confirmation=new e({model:this.model}),this.confirmation.bind('submitted',this.requestToRelease).bind('expand',this.activeTabOn).bind('collapse',this.activeTabOff)},render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl==='/projects/.html'&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),a(this.el).find('.tab-pane').html(this.confirmation.render(T_('Are you sure you want to request the release of this Milestone Payment?')).el),this.confirmation.hide(),this},activeTabOn:function(){a(this.el).find('#requestToReleaseBtn').parent().addClass('active')},activeTabOff:function(){a(this.el).find('#requestToReleaseBtn').parent().removeClass('active')},showRequestToReleaseConformBox:function(){a(this.el).find('.hint').empty(),this.confirmation.toggle();if(this.confirmation.isVisible()&&typeof _t!='undefined'){var b=this.model.get('data'),c;b&&(c=b.project_id),_t.push(['user_action',{section:'Newsfeed',subsection:'MilestoneRelease',label:'form_open',action:'click',project_id:c}])}},hideRequestToReleaseConformBox:function(){a(this.el).find('.hint').empty(),this.confirmation.hide()},requestToRelease:function(){var b=this,c=this.model.get('data'),d=a(this.el).find('.submit'),e=a(this.el).find('.cancel'),f=a(this.el).find('.error-msg');f.hide();var g=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.hide().after(g),e.hide(),jq.ajax({type:'post',data:{id:c.transId,account_id:c.account_id,project_id:c.project_id},dataType:'json',url:'/ajax/payment/requestReleaseMilestone.php',beforeSend:function(){typeof _t!='undefined'&&_t.push(['user_action',{section:'Newsfeed',subsection:'MilestoneRelease',label:'form_submit',action:'click',project_id:c.project_id}])},complete:function(){g.remove(),d.show(),e.show()},success:function(a){a.status=='success'?(f.text(T_('Successfully sent request')),b.hideRequestToReleaseConformBox(),b.actionState('accept')):(f.text(a.errors),f.show())},error:function(){hintPlace.append('<span class="error-msg"> '+T_('A server error occurred')+'</span>')}})},actionState:function(a){var b=this,c=new g('newsfeed');this.model.set({state:a}),this.renderEvent(this.model),b.truncateProjectName()}});return h}),define('dashboard/views/events/milestone.requested',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/milestone.requested.htm','notification/libpersist','payments/module-fixed-amount-payment-modal'],function(a,b,c,d,e,f,g,h){var i=d.extend({events:b.extend({},d.prototype.events,{'click #create':'create','click #reject':'showRejectBox','click #btn-reject-milestone-request':'reject','click #btn-cancel-request-rejection':'hideRejectBox'}),compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','create','reject')},render:function(){var b=this.model.toJSON();return b.data&&!b.data.seoUrl&&(b.data.seoUrl=b.data.id),a(this.el).html(this.compileTemplate(b)),this},create:function(){var b,c;b=this;var d=a(this.el).find('.hint'),e=this.model.get('data');c={username:e.userName,amount:e.amount,project:e.id,reason:'partly_payment',other_reason:this.model.get('message'),token:'',currency:e.currencyId,request:e.requestId,currencyDetails:{id:e.currencyId,sign:e.currencySign,code:e.currencyCode},csrf_token:getCSRFToken()},typeof _t!='undefined'&&_t.push(['user_action',{section:'newsfeed',subsection:'CreateRequestedMilestone',name:'CreateMilestone',value:e.id+','+e.userId}]);var f=function(){a.ajax({type:'GET',url:'/ajax/payment/onnewescrow.php',data:c,dataType:'json',cache:!1,complete:function(){b.stillHideButtons||b.loadingSpinner()},beforeSend:function(){d.empty(),b.loadingSpinner(),a(b.el).find('#rejectBox').hide()},success:function(f){if(f.status=='success')d.append('<span class="success-msg">'+T_('You have created the milestone successfully')+' </span><br>'),a(b.el).find('.well').hide(),b.actionState('accept');else if(f.needDeposit){b.stillHideButtons=!0;var g='/payments/deposit.php?milestone_amount='+encodeURIComponent(c.amount)+'&amount='+encodeURIComponent(f.amountDiff?f.amountDiff:c.amount)+'&currency='+encodeURIComponent(c.currency)+'&id='+encodeURIComponent(c.project)+'&descr='+encodeURIComponent(c.other_reason)+'&username='+encodeURIComponent(c.username)+'&bidderId='+encodeURIComponent(e.userId)+'&refAction='+encodeURIComponent('create_milestone');window.open(window.location.origin+g,'_self')}else d.append('<span class="error-msg"> '+f.msg+'</span><br>')}})};h.initModal(c,f)},showRejectBox:function(){a(this.el).find('.hint').empty(),a(this.el).find('#rejectBox').is(':hidden')?(a(this.el).find('#rejectBox').show(),a(this.el).find('#rejectForm').hide()):a(this.el).find('#rejectBox').hide()},hideRejectBox:function(){a(this.el).find('.hint').empty(),a(this.el).find('#rejectBox').hide(),a(this.el).find('#rejectForm').show()},reject:function(){var b,c;b=this;var d=a(this.el).find('.hint');d.empty(),b.loadingSpinner2();var e=this.model.get('data');c={request_id:e.requestId,reason:a(this.el).find('.ns_half').val()},a.ajax({type:'POST',url:'/ajax/payment/on-reject-milestone-request.php',data:c,dataType:'json',cache:!1,complete:function(){b.loadingSpinner2()},success:function(c){c.success===!0?(d.append('<span class="success-msg">'+T_('You have reject the milestone successfully')+'</span><br>'),b.trigger('rejected',c),b.hideRejectBox(),a(b.el).find('.well').hide(),b.actionState('reject')):d.append('<span class="error-msg">'+c.errors+' </span><br>')}})},loadingSpinner:function(){var b=a(this.el).find('#create'),c=a(this.el).find('#reject'),d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(b.hide().after(e),c.hide())},loadingSpinner2:function(){var b=a(this.el).find('#btn-reject-milestone-request'),c=a(this.el).find('#btn-cancel-request-rejection'),d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(b.hide().after(e),c.hide())},actionState:function(a){var b=this,c=new g('newsfeed');this.model.set({state:a}),this.renderEvent(this.model),b.truncateProjectName()}});return i}),define('dashboard/views/events/milestone.released',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/milestone.released.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return b.data&&!b.data.seoUrl&&(b.data.seoUrl=b.data.id),a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/invoice.requested',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/invoice.requested.htm','text!templates/dashboard/invoice-pay-direct.htm','notification/libpersist','jquery.autosize'],function(a,b,c,d,e,f,g){var h=b.template(f),i=d.extend({events:b.extend({},d.prototype.events,{'click #viewInvoice':'viewInvoice','click #requestToChange':'toggleRequestToChangeBox','click #cancelRequestChange':'toggleRequestToChangeBox','click #requestChangeSubmit':'submitRequestChange','click #payInvoice':'togglePayNowBox','click #cancelPayNow':'togglePayNowBox','change .milestones':'updateInvoiceAmounts','keyup .milestones':'updateInvoiceAmounts','focusout .milestones':'updateInvoiceAmounts','change .direct-payment-container':'updateInvoiceAmounts','keyup .direct-payment-container':'updateInvoiceAmounts','focusout .direct-payment-container':'updateInvoiceAmounts','click #confirmPayNow':'payInvoice','click #giveFeedback':'giveFeedback'}),compileTemplate:b.template(e),isAutomaticPayments:function(){var a=this.model.get('data'),b=a.id;return window.isAutomaticPaymentsUser_30&&b>8519960||window.isAutomaticPaymentsUser_50&&b>8748368},initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','submitted')},render:function(){var b=this.model.toJSON();return b.data&&!b.data.seoUrl&&(b.data.seoUrl=b.data.id),a(this.el).html(this.compileTemplate(b)),this.model.get('data').invoiceVars.is_automatic&&a(this.el).find('#requestToChange').hide(),this.isAutomaticPayments()&&(a(this.el).find('#viewInvoice').parent().addClass('first'),a(this.el).find('#payInvoice').hide(),a(this.el).find('#requestToChange').hide()),this},submitted:function(){var a=this.model.get('data');window.location='/projects/'+a.seoUrl+'.html#pay-invoice-form-wrapper'},viewInvoice:function(){var a=this.model.get('data');window.open('/payments/view-invoice.php?invoice_id='+a.invoiceId,'_blank')},giveFeedback:function(){var a=this.model.get('data');window.location='/users/review/rate.php?type=hourly&invoice_id='+a.invoiceId+'&id='+a.id+'&to_user='+a.sellerId},toggleRequestToChangeBox:function(){var b=a(this.el).find('.hint');b.empty(),a(this.el).find('#requestChangeBox').is(':visible')?(a(this.el).find('#requestToChange').parent().removeClass('active'),a(this.el).find('#requestChangeBox').hide()):(a(this.el).find('#requestToChange').parent().addClass('active'),a(this.el).find('#requestChangeBox').show(),a(this.el).find('#payInvoice').parent().removeClass('active'),a(this.el).find('#payNowBox').hide())},submitRequestChange:function(){var b=this,c=a(this.el).find('.hint');c.empty();var d=this.model.get('data'),e={invoice_id:d.invoiceId,message:a(this.el).find('#requestChangeMsg').val(),csrf_token:getCSRFToken()},f=a(this.el).find('#requestChangeSubmit'),g=a(this.el).find('#cancelRequestChange'),h=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');g.hide(),f.hide().after(h),a.ajax({type:'GET',url:'/ajax/payment/on-request-invoice-change.php',data:e,dataType:'json',cache:!1,complete:function(){h.remove(),f.show(),g.show()},success:function(a){a.success==1?(c.append(T_('<span class="alert alert-success requestChangeBox-success"> Your request has been successfully sent </span><br>')),b.toggleRequestToChangeBox(),b.actionState('reject')):c.append(T_('<span class="alert alert-error requestChangeBox-error"> The following errors occured with your request:')+'<br>'+a.errors+'</span><br>')},error:function(){form.siblings('.hint').append('<span>'+T_('A server error occurred')+'</span>')}})},togglePayNowBox:function(c){var d=this,e=this.model.get('data'),f=e.id,g=e.sellerId,i=this.model.attributes.state,j=e.amount;typeof i!='undefined'&&i.indexOf('outstanding')!=-1&&(j=i.substring(11),j=parseFloat(j)/100);var k=a(this.el).find('#payNowBox'),l=a(this.el).find('.hint'),m=a(this.el).find('.milestones'),n=a(this.el).find('.direct-payment-container');l.empty();if(a(this.el).find('#payNowBox').is(':visible'))a(this.el).find('#payInvoice').parent().removeClass('active'),a(this.el).find('#payNowBox').hide();else{a(this.el).find('#payInvoice').parent().addClass('active'),a(this.el).find('#requestChangeBox').hide(),a(this.el).find('#requestToChange').parent().removeClass('active'),a(this.el).find('#payNowBox').show();var o=a(this.el).find('.hideWhenLoading');o.hide();var p=a(this.el).find('.hideAfterLoading').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-pending.gif?v=8ec33920ad9cab4784bcfee08507d0ee&amp;m=6','//')+'">');p.show(),a.ajax({type:'GET',url:'/ajax/invoice/getMilestone.php',data:{project_id:f,seller_id:g},dataType:'json',cache:!1,complete:function(){p.hide(),o.show()},success:function(a){if(a.status=='success'){m.empty(),n.empty(),n.append(h({amount:j,currency:{code:e.currencyCode,sign:e.currencySign}}));var f=a.milestones.length;m.prev('h3').hide();if(f!=0&&typeof f!='undefined'){var g=0;m.prev('h3').show();for(g;g<f;g++)m.append('<input type=\'checkbox\' class=\'ns_margin-r5 payInvoiceMilestone milestone-invoice-'+a.milestones[g].escrow_id+'\' milestoneAmount = '+ -a.milestones[g].amount+' name=\'milestoneCheck_'+g+'\' value=\''+a.milestones[g].escrow_id+'\' checked><span>'+e.currencySign+'</span><input type=\'text\' style=\'margin-left:5px;width: 40px\' name=\'milestone-amount\' class=\'form-inline span1 '+'milestone-invoice-amount-'+a.milestones[g].escrow_id+'\'  value=\''+ -a.milestones[g].amount+'\'> '+e.currencyCode+'<p class=\'help-inline\'><strong style=\'margin-left:15px;\'>'+T_('For: ')+'</strong>'+a.milestones[g].description+'</p><br/>')}d.updateInvoiceAmounts(c)}else l.append('<span class="error-msg">'+a.errors+b(' error happen when fetching the invoice information ')+'</span><br>')},error:function(){k.siblings('.hint').append('<span>'+T_('A server error occurred')+'</span>')}})}},updateInvoiceAmounts:function(b){var c=!0,d=a(b.target);d.attr('name')=='total-amount'&&(c=!1);var e=this.model.get('data').invoiceId,f=a(this.el).find('form'),g=0,h=parseFloat(f.find('.payInvoice-outstandingAmount').html()),i=0;f.find('.payInvoiceMilestone').each(function(){var a=parseFloat(jq(this).attr('milestoneAmount')),b=parseFloat(f.find('.milestone-invoice-amount-'+jq(this).val()).val());isNaN(b)?(jq('.milestone-invoice-amount-'+jq(this).val()).val(a),b=a):b>a?jq('.milestone-invoice-amount-'+jq(this).val()).val(a):b==0&&jq(this).attr('checked',!1);if(jq(this).is(':checked')){var c=parseFloat(f.find('.milestone-invoice-amount-'+jq(this).val()).val());h>0&&c<=h?(i+=c,h-=c,g+=c):h>0&&c>h?(i+=h,f.find('.milestone-invoice-amount-'+jq(this).val()).val(h.toFixed(2)),g+=h,h=0):h==0&&jq(this).attr('checked',!1)}}),f.find('.payInvoice-milestoneToRelease').text(i);if(c==1)f.find('.payInvoice-directPayment').text(h.toFixed(2)),g+=h,h=0;else{var j=parseFloat(f.find('.payInvoice-directPayment').text());isNaN(j)?(f.find('.payInvoice-directPayment').text(0),j=0):h>0&&j<=h?(h-=j,g+=j):h>0&&j>h?(f.find('.payInvoice-directPayment').text(h.toFixed(2)),g+=h,h=0):h==0&&f.find('.payInvoice-directPayment').text(0)}f.find('.payInvoice-amountOutstanding').text(h.toFixed(2)),h>0?f.find('.payInvoice-amountOutstanding').parent().show():f.find('.payInvoice-amountOutstanding').parent().hide(),f.find('.payInvoice-amountToPay').text(g.toFixed(2))},payInvoice:function(b,c){var d=this,e=a(this.el).find('form'),f=a(this.el).find('.hint'),g=this.model.get('data').invoiceId.toString(),h=parseFloat(e.find('.payInvoice-amountToPay').html());if(h==0)return!1;var i=parseFloat(e.find('.payInvoice-directPayment').text()),j=new Array;e.find('.payInvoiceMilestone:checked').each(function(){var a=jq('.milestone-invoice-amount-'+jq(this).val()).val(),b=parseFloat(jq(this).val()),c=new Object;c[b]=a,j.push(c)});var k=a(this.el).find('.hideWhenLoading');k.hide();var l=a(this.el).find('.hideAfterLoading');l.show();var m={invoiceId:g,invoiceOutstandingAmount:parseFloat(e.find('.payInvoice-outstandingAmount').html()),directPaymentAmount:i,milestone:j,external:c,token:invoiceToken,csrf_token:getCSRFToken()};jq.ajax({type:'post',data:m,dataType:'json',url:'/ajax/payment/payinvoice.php',success:function(b){e.find('.btn-pay-invoice').next().remove();if(b.status=='success'){l.hide(),f.empty(),a(d.el).find('#payInvoice').parent().removeClass('active'),a(d.el).find('#payNowBox').hide();if(b.amountOutstanding>0){var c='outstanding';d.actionState(c,b.amountOutstanding)}else{var c='paid';d.actionState(c)}}else f.empty(),l.hide(),k.show(),f.append('<span class="error-msg">'+b.msg[0]+'</span><br>')}})},actionState:function(a,b){var c=this,d=new g('newsfeed'),e=this.model.attributes.state,f;b*=100,a=='outstanding'?f=a.concat(b):f=a,this.model.set({state:f}),this.renderEvent(this.model),c.truncateProjectName()}});return i}),define('dashboard/views/events/invoice.requestChange',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/invoice.requestChange.htm','dashboard/lib/seeMore'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),compileTemplate:b.template(f),preferLineNum:2,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','submitted'),this.confirmation=new e({model:this.model}),this.confirmation.bind('submitted',this.submitted)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).children().children().last().after(this.confirmation.render(T_('Are you sure you want to change this invoice?')).el),this.confirmation.hide(),this.initialSeeMore(),this},award:function(){this.confirmation.toggle()},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length,f,g,h,i;for(d;d<e;d++)f=a(c[d]),f.parent().initialSeeMore({preferLineNum:this.preferLineNum})},seeMoreClick:function(b){a(b.target).seeMoreClick()},submitted:function(){var b,c;b=this,c={id:this.model.get('project_id'),seller_id:this.model.get('bidder_id'),is_revoke:0},a.ajax({type:'POST',url:'/ajax/buyer/pick.php',data:c,cache:!1,success:function(a){b.confirmation.hide(),b.trigger('submitted',a)}})}});return h}),define('dashboard/views/events/invoice.paid',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/invoice.paid.htm','notification/libpersist'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.get('data');return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/invoice.withdrawn',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/invoice.withdrawn.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/bid.invited',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/bid.invited.htm','dashboard/lib/seeMore'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),preferLineNum:3,compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl==='/projects/.html'&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this},initialSeeMore:function(){var b=a(this.el).find('.descr-long');b.initialSeeMore({preferLineNum:this.preferLineNum})},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick();if(typeof _t!='undefined'){var d=this.model.get('data'),e=d?d.id:null;_t.push(['user_action',{section:'Newsfeed',subsection:'BidInvitedView',label:'more',action:'click',project_id:e}])}}});return g}),define('dashboard/views/events/bid.placed.min',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','project/modules/module-award-milestone-breakdown','jquery.autosize','text!templates/dashboard/bid.placed.min.htm','notification/libpersist'],function(a,b,c,d,e,f,g,h){var i=d.extend({events:{'click #award':'award','click #submit':'submitted_self','click .cancel':'hideAwardBox','click #createMilestone':'createMilestone','click #cancelMilestone':'cancelMilestone','click #btn_create_milestone':'triggerMilestoneEvent','click #messaging':'liveChat','mousedown #award':'pushTtrefAwardLinkDashboard'},compileTemplate:b.template(g),preferLineNum:2,initialize:function(a){this.constructor.__super__.initialize.call(this,a)},render:function(){this.model.set({isAutomaticPayments:this.isAutomaticPayments()});var b=a(this.el).find('.news-item.first').length!==0?!0:!1;return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).find('#messaging-text').autosize(),a(this.el).find('#milestone-descr').autosize(),b&&a(this.el).find('.news-item:visible').first().addClass('first'),this.registerUserPortrait(),a(this.el).find('.payment-source-tooltip').popover_legacy({content:a(this).data('content'),placement:'right',template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>',trigger:'hover',html:!0}),this},submitted_self:function(b){var c=this.model.get('data'),d=a(b.target),f=d.parents('.tab-content #award_box'),g=f.prev().find('.award'),h=this,i={id:c.projectId,seller_id:c.userId,is_revoke:0};h.loadingSpinner(b,'submit'),h.hintPlaceClear(d.parents('.well').find('.hint'));var j=typeof this.model.get('notiId')!='undefined'?this.model.get('notiId'):this.model.get('id');a.ajax({type:'POST',url:'/ajax/buyer/pick.php',data:i,cache:!1,complete:function(){h.loadingSpinner(b,'submit')},success:function(b){b=a.parseJSON(b);if(b.status=='success'){h.confirmBoxToggle(g),h.actionState('awarded',j),h.trigger('awarding',h.model),typeof c.bid=='object'&&typeof c.bid.recommended=='boolean'&&c.bid.recommended===!0?_ttref.push(['_trackAction','Project','Awarded','NewsFeedRecommendedBid',c.projectId]):_ttref.push(['_trackAction','Project','Awarded','NewsFeedBidPlaced',c.projectId]);if(b.useMilestoneBreakdown){var f={project:{id:c.projectId},seller:{id:c.userId,username:c.publicName},currencyDetails:{sign:c.currency,code:c.currencyCode,id:c.currencyId},milestoneRequests:b.milestoneRequests,callback:{func:h.trackMilestoneEvent,params:{subsection:'MilestoneCreate_AfterAward',eventLabel:'form_submit',projectId:c.projectId}},bidId:b.bidId};h.trackMilestoneEvent('MilestoneCreate_AfterAward','form_open',c.projectId),e.init(f)}else h.triggerMilestoneEvent()}else d.parents('.well').find('.hint').html(T_('An error has occurred.')+' '+b.msg),d.parents('.well').find('.hint').show()}})},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length;for(d;d<e;d++){var f=a(c[d]),g=f.parent();g.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick(),typeof _t!='undefined'&&_t.push(['user_action',{section:'Newsfeed',subsection:'BidPlacedMinView',label:'more',action:'click',project_id:requestData.projectId}])},hideAwardBox:function(b){var c=a(b.target).parents('.tab-content').prev().find('#award');this.confirmBoxToggle(c)},removeRecommendBid:function(){a(this.el).find('#recommended').remove(),a(this.el).find('.news-item').removeClass('bid-recommended'),typeof this.model.get('data').bid.recommended!='undefined'&&delete this.model.get('data').bid.recommended},award:function(a){_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_Newsfeed']),_ttref.push(['_trackEvent','Project','Award']),_ttref.pushToTracking('Project','TTREF_Award_DashBidAward','Project_Newsfeed','user_action','click');var b=this.model.get('data');window.location='/projects/'+b.projectId+'.html?awardBid='+b.bid.id+'#/proposals'},confirmBoxToggle:function(b){var c=a(this.el).find('#award_box').find('.well');c.is(':visible')?(c.hide(),b.parent().removeClass('active')):(c.show(),b.parent().addClass('active'))},loadingSpinner:function(b,c){var d=a(b.target).parents('.news-item').find('#'+c),e=d.next(),f=a(b.target).parents('.news-item').find('.loading'),g=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');f.length?(f.remove(),d.show(),e.show()):(e.hide().after(g),d.hide())},hintPlaceClear:function(b){b.empty(),b.hide(),a(this.el).find('.error-bd').removeClass('error-bd')},cancelMilestone:function(a){this.triggerMilestoneEvent(a)},deactivateTab:function(b,c){var d=a(this.el).find('.news-item'),e=d.find(b),f=d.find(c);e.removeClass('active'),f.hide()},getRestAmoutOfProject:function(){var b=this,c=this.model.get('data');a(b.el).find('#create-milestone').addClass('active'),a(b.el).find('#loadingRest').show(),a.ajax({type:'POST',url:'/ajax/project/getMilestones.php',dataType:'json',data:{projectId:c.bid.project_id,bidId:c.bid.id},cache:!1,timeout:2e3,complete:function(){a(b.el).find('#loadingRest').hide(),a(b.el).find('#milestone-create-form').show(),a(b.el).find('#btn-create-milestone').show()},success:function(d){if(d.status=='success'&&d.hasOwnProperty('milestones')&&typeof d.milestones[c.bid.user.id]!='undefined'&&d.milestones[c.bid.user.id].hasOwnProperty('unpaid_amount')){var e=d.milestones[c.bid.user.id].unpaid_amount;e>0&&a(b.el).find('#milestone-create-form').find('[#milestone-amount').val(e)}},error:function(c,d){a(b.el).find('#loadingRest').hide(),a(b.el).find('#milestone-create-form').show(),a(b.el).find('#btn-create-milestone').show()}})},trackMilestoneEvent:function(a,b,c){arguments.length===1&&typeof a=='object'&&(c=a.projectId,b=a.eventLabel,a=a.subsection),typeof _t!='undefined'&&_t.push(['user_action',{section:'Newsfeed',subsection:a,label:b,action:'click',project_id:c}])},triggerMilestoneEvent:function(b){var c=a(this.el).find('.news-item'),d=c.find('#milestone-create-form'),e=c.find('#create-milestone').show(),f=this.model.get('data');d.is(':visible')?(e.removeClass('active'),d.hide()):f.bid.is_awarded===!0?this.getRestAmoutOfProject():(e.addClass('active'),d.show(),_t.push(['user_action',{section:'newsfeed',subsection:'CreateNewMilestone',name:'CreateMilestone',value:f.projectId+','+f.userId}])),this.deactivateTab('#award-project','#award-well'),this.deactivateTab('#send-message','#messaging-area')},showErrorMsg:function(a,b){a.append('<span class="error-msg">'+b+'</span>'),a.show()},createMilestone:function(b){var c,d;c=this;var e=a(b.target).parents('.news-item'),f=e.find('.hint-milestone');this.hintPlaceClear(f);var g=this.model.get('data'),h=e.find('#milestone-amount').val(),i=e.find('#milestone-descr').val();if(h===''||h===0)return this.showErrorMsg(f,T_('Only positive numbers accepted. e.g. 54 or 354.75')),a(this.el).find('#milestone-amount').addClass('error-bd'),!1;if(!/^[0-9]{1,6}\.?[0-9]{0,2}$/.test(h))return this.showErrorMsg(f,T_('Only positive numbers accepted. e.g. 54 or 354.75')),a(this.el).find('#milestone-amount').addClass('error-bd'),!1;if(a.trim(i).length===0)return this.showErrorMsg(f,T_('Please enter a description for the milestone')),a(this.el).find('#milestone-descr').addClass('error-bd'),!1;this.trackMilestoneEvent('MilestoneCreate','form_submit',g.projectId),d={username:g.userName,amount:h,project:g.projectId,reason:'partly_payment',other_reason:i,currency:g.currencyId};var j=typeof this.model.get('notiId')!='undefined'?this.model.get('notiId'):this.model.get('id');c.loadingSpinner(b,'createMilestone'),a.ajax({type:'GET',url:'/ajax/payment/onnewescrow.php',data:d,dataType:'json',cache:!1,complete:function(){c.stillHideButtons||c.loadingSpinner(b,'createMilestone')},success:function(i){if(i.status=='success')e.find('.award').hide(),c.triggerMilestoneEvent(b),a(c.el).find('#milestone-create-form').find('#milestone-amount').val(''),a(c.el).find('#milestone-create-form').find('#milestone-descr').val(''),c.actionState('milestoneCreated',j);else if(i.errorCode=='needDeposit'){c.stillHideButtons=!0;var k='/payments/deposit.php?milestone_amount='+encodeURIComponent(d.amount)+'&amount='+encodeURIComponent(i.amountDiff?i.amountDiff:h)+'&currency='+encodeURIComponent(d.currency)+'&id='+encodeURIComponent(d.project)+'&descr='+encodeURIComponent(d.other_reason)+'&username='+encodeURIComponent(d.username)+'&bidderId='+encodeURIComponent(g.userId)+'&refAction='+encodeURIComponent('create_milestone');window.location.origin||(window.location.origin=window.location.protocol+'//'+window.location.hostname+(window.location.port?':'+window.location.port:'')),window.open(window.location.origin+k,'_self')}else f.append('<span class="error-msg"> '+i.msg+'</span><br>'),f.show()}})},triggerSendMessageBox:function(b){var c=a(b.target).parents('.news-item'),d=c.find('#messaging-area'),e=c.find('#send-message');d.is(':visible')?(d.hide(),e.removeClass('active')):(d.show(),e.addClass('active')),this.deactivateTab('#create-milestone','#milestone-create-form'),this.deactivateTab('#award-project','#award-well')},liveChat:function(a){var b=this.model.get('data');liveChat.startChat([b.userId],'private_chat','dashboard-bid-placed',{type:'project',id:b.bid.project_id})},pushTtrefAwardLinkDashboard:function(){var a=this.model.get('data');_ttref.push(['_clearEntrypoint','ProjectAward']),_ttref.push(['_setCookie','ProjectAward_NewsFeed']),_ttref.push(['_trackEvent','ProjectAward','Award','NewsFeed','project_id',a.projectId,'freelancer_id',a.userId])},actionState:function(b,c){var d=this.model.get('state'),e='';if(d==='undefined'||d=='')e=b;else if(d=='awarded'){if(b=='awarded')return;b=='milestoneCreated'&&(e='awardedXXXmilestoneCreated')}else if(d=='awardedXXXmilestoneCreated')return;var f=new h('notifications'),g=a(this.el).find('#seeMore').length!=0;this.model.set({state:e}),this.model.get('data').bid.is_pending=!0,this.model.get('data').bid.is_selected=!0,this.render(),g||a(this.el).find('#seeMore').click()},isAutomaticPayments:function(){var a=this.model.get('data'),b=this.isNewPVPUser()&&a.projIsHourly&&a.bid.project_id>7861752,c=window.isAutomaticPaymentsUser_30||window.isAutomaticPaymentsUser_50;return b&&(c||window.isWhitelisted)},isNewPVPUser:function(){var a=this.model.get('data'),b=a.accountId%163<17&&a.bid.project_id>=7795777,c=a.accountId%163<50&&a.bid.project_id>=7831693,d=a.accountId%163<132&&a.accountId>=15980849,e=a.accountId>=16507284,f=a.accountId%163<98&&a.accountId<16507284&&a.bid.project_id>=8303608,g=a.bid.project_id>8383410,h=a.bid.project_id>7861752,i=b||c||d||e||f||g;return h&&i||window.isWhitelisted}});return i}),define('dashboard/views/events/selected.awarded',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/selected.awarded.htm','notification/libpersist','jquery.autosize','dashboard/lib/seeMore','project/modules/module-time-tracker-download-promotion-modal'],function(a,b,c,d,e,f,g,h,i){var j=d.extend({preferLineNum:3,events:b.extend({},d.prototype.events,{'click #accept':'accept','click #reject':'reject','click #rejectConfirm':'rejectConfirm','click #seeMore':'seeMoreClick','click #messaging':'liveChat','click #cancel-reject':'cancelReject','click #acceptOnRejectBtn':'acceptConfirmBtn','click #rejectOnRejectBtn':'rejectConfirmBtn'}),compileTemplate:b.template(e),projectMilestoneCount:0,initialize:function(c){this.constructor.__super__.initialize.call(this,c),b.bindAll(this,'render','accept','reject');var d=this;a.ajax({type:'GET',data:{project_id:this.model.get('data').id},url:'/ajax/dashboard/projectMilestoneCount.php',dataType:'json',success:function(a){a.status==='success'&&(d.projectMilestoneCount=a.milestoneCount)}})},render:function(){var b=this.model.get('data');if(typeof b.acceptByTime!='undefined'){var c='',d=(new Date).getTime(),e=Math.round((b.acceptByTime*1e3-d)/36e5);c=e>1?e+' hours':e==1?e+' hour':null,b.hoursLeftStr=c}var f=this.model.toJSON();return f.data&&f.data.linkUrl==='/projects/.html'&&(f.data.linkUrl='/projects/'+f.data.id+'.html'),a(this.el).html(this.compileTemplate(f)),a(this.el).find('#reasonArea').autosize(),a(this.el).find('#downloadBtnTip').popover_legacy({title:T_('What is <[- desktopAppName ]>?',{desktopAppName:desktopAppName}),content:T_('<[- desktopAppName ]> is an app that tracks your work in an hourly project, allowing you to:',{desktopAppName:desktopAppName})+'<br>'+' - '+T_('Verify your hours worked to the employer')+'<br>'+' - '+T_('Easily create invoices for your hours worked'),trigger:'hover',html:!0}),this},initialSeeMore:function(){var b=a(this.el).find('.descr-long');b.initialSeeMore({preferLineNum:this.preferLineNum})},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()},accept:function(){var b,c;b=this;var d=a(this.el).find('.hint');b.clearErrorMsg(),a(this.el).find('#reasonArea').hide(),a(this.el).find('#rejectConfirm').hide(),b.loadingSpinner(),c={id:this.model.get('data').id},a.ajax({type:'POST',url:'/sellers/on-accept-project.php',data:c,cache:!1,complete:function(){b.loadingSpinner()},success:function(e){e=a.parseJSON(e),e.result=='success'?(_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_NewsFeedCongratsBuyerAwardYou']),_ttref.push(['_trackEvent','Project','Accepted']),d.append('<span class = "success-msg">'+T_(' Project accepted.')+' </span>'),a(b.el).find('.well').hide(),b.actionState('accept'),e.timeTrackerDownloadPromotion&&i.initModal({projectID:c.id})):d.append('<span class = "error-msg" >'+T_('An error has occurred.')+' '+e.message+'</span>')}})},reject:function(){var b,c,d='no reason';b=this,b.clearErrorMsg(),a(this.el).find('#rejectArea').hide(),a(this.el).find('#rejectBox').show(),a(this.el).find('#rejectBox').find('p').hide(),a(this.el).find('#rejectConfirm').hide(),b.loadingSpinner();var e=a(this.el).find('.hint');c={id:this.model.get('data').id,reason:d},a.ajax({type:'POST',url:'/sellers/on-deny-project.php',data:c,cache:!1,complete:function(){b.loadingSpinner()},success:function(c){c=a.parseJSON(c),c.result=='success'?(_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_NewsFeedCongratsBuyerAwardYou']),_ttref.push(['_trackEvent','Project','Rejected']),e.append('<span class = "success-msg">'+T_('Reject Successfully')+' </span>'),a(b.el).find('.well').hide(),b.actionState('reject')):e.append('<span class = "error-msg" >'+T_('An error has occurred.')+' '+c.message+'</span>')}})},acceptConfirmBtn:function(){a('body').removeClass('modal-open'),a(this.el).find('#rejectConfirmModal').modal('hide'),this.accept()},rejectConfirmBtn:function(){a('body').removeClass('modal-open'),a(this.el).find('#rejectConfirmModal').modal('hide'),this.reject()},rejectConfirm:function(){if(this.projectMilestoneCount>0){a('body').addClass('modal-open'),a(this.el).find('#rejectConfirmModal').on('hide',function(){a('body').removeClass('modal-open')}),a(this.el).find('#rejectConfirmModal').modal('show'),window._t.push(['abtest',{test:'MM-2456',variation:'test',reference_type:'project_id',reference_value:this.model.get('data').id}]);return}a(this.el).find('.hint').empty(),a(this.el).find('#rejectArea').show(),a(this.el).find('#rejectBox').hide()},cancelReject:function(){a(this.el).find('.hint').empty(),a(this.el).find('#rejectArea').hide(),a(this.el).find('#rejectBox').show()},loadingSpinner:function(){var b=a(this.el).find('#accept'),c=a(this.el).find('#reject'),d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(b.hide().after(e),c.hide())},clearErrorMsg:function(){var b=a(this.el).find('.hint');b.empty(),a(this.el).find('.error-bd').removeClass('error-bd')},liveChat:function(a){var b=this.model.get('data');window.liveChat.startChat([b.userId],'private_chat','dashboard-selected-awarded',{type:'project',id:b.id})},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName({preferLineNum:3})},actionState:function(b){var c=this,d=new f('newsfeed'),e=a(this.el).find('#seeMore').length!=0;this.model.set({state:b}),this.renderEvent(this.model),this.initialSeeMore(),this.truncateProjectName(),e||a(this.el).find('#seeMore').click()}});return j}),define('dashboard/views/events/selected.accepted',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/selected.accepted.htm','notification/libpersist','jquery.autosize'],function(a,b,c,d,e,f,g,h,i){var j=d.extend({events:b.extend({},d.prototype.events,{'click #btn-create-milestone':'createMileStone','click #milestone':'showCreateMileStone','click #transfer':'showDirectTransfer','click #btn-transfer':'createDirectTransfer','click #cancel_milestone':'showCreateMileStone','click #messaging':'liveChat','click #cancel_transfer':'showDirectTransfer','click #downloadTimeTrackerBtn':'trackingDownload'}),compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},initializeBox:function(){var a=this.model.get('user_state');typeof a=='undefined'&&this.hideCreateMileStone()},render:function(){return this.initializeBox(),a(this.el).html(this.compileTemplate(this.model.toJSON())),this},trackingDownload:function(){_ttref.push(['_trackEventNoCookie','TimeTracker','Download','NewsfeedOnAccept','click'])},getRestAmoutOfProject:function(){var b=this,c=this.model.get('data');a(b.el).find('#milestone').parent().addClass('active'),a(b.el).find('#loadingRest').show(),a.ajax({type:'POST',url:'/ajax/project/getMilestones.php',dataType:'json',data:{projectId:c.id,bidId:c.bidId},cache:!1,timeout:2e3,complete:function(){a(b.el).find('#loadingRest').hide(),a(b.el).find('#milestone-create-form').show(),a(b.el).find('#btn-create-milestone').show()},success:function(d){if(d.status=='success'&&d.hasOwnProperty('milestones')&&typeof d.milestones[c.awardeeId]!='undefined'&&d.milestones[c.awardeeId].hasOwnProperty('unpaid_amount')){var e=d.milestones[c.awardeeId].unpaid_amount;e>0&&a(b.el).find('#milestone-create-form').find('[name=milestone-amount]').val(e)}},error:function(c,d){a(b.el).find('#loadingRest').hide(),a(b.el).find('#milestone-create-form').show(),a(b.el).find('#btn-create-milestone').show()}}),this.boxState('CM')},showCreateMileStone:function(){this.clearErrorMsg(),this.hideDirectTransfer();if(a(this.el).find('#milestone-create-form').is(':visible'))this.hideCreateMileStone();else{var b=this.model.toJSON();typeof _t!='undefined'&&_t.push(['user_action',{section:'Newsfeed',subsection:'MilestoneCreate',label:'show_form',action:'click'}]);if(b.data.isAutomaticPayments){window.location='/projects/'+b.data.id+'.html';return}typeof b.state!='undefined'&&b.state.indexOf('milestoneCreated')!==-1?this.getRestAmoutOfProject():(a(this.el).find('#milestone').parent().addClass('active'),a(this.el).find('#milestone-create-form').show(),a(this.el).find('#btn-create-milestone').show(),this.boxState('CM'))}},hideCreateMileStone:function(){this.clearErrorMsg(),a(this.el).find('#milestone').parent().removeClass('active'),a(this.el).find('#milestone-create-form').hide(),this.boxState('NO')},hideDirectTransfer:function(){this.clearErrorMsg(),a(this.el).find('#transfer').parent().removeClass('active'),a(this.el).find('#directTransfer').hide(),this.boxState('NO')},showDirectTransfer:function(){this.clearErrorMsg(),this.hideCreateMileStone(),a(this.el).find('#directTransfer').is(':visible')?this.hideDirectTransfer():(a(this.el).find('#transfer').parent().addClass('active'),this.hideCreateMileStone(),a(this.el).find('#directTransfer').show(),this.boxState('DT'))},createMileStone:function(){var b=this;b.clearErrorMsg();var c=a(this.el).find('#milestone-create-form'),d=a(this.el).find('#btn-create-milestone'),e=a(this.el).find('#cancel_milestone'),f=this.model.get('data'),g=c.find('[name=milestone-amount]').val(),h=c.find('[name=milestone-descr]').val(),i=f.userName,j=f.id,k=f.currencyId,l;typeof j=='undefined'?(j='not_chosen',l='other'):l='partly_payment';if(typeof i=='undefined')return this.showErrorMsg(T_('Please select the user you want to make the milestone for')),!1;if(g==''||g==0)return this.showErrorMsg(T_('Please enter an amount for the milestone')),a(this.el).find('#milestone-create-form').find('[name=milestone-amount]').addClass('error-bd'),!1;if(!/^[0-9]{1,6}\.?[0-9]{0,2}$/.test(g))return this.showErrorMsg(T_('Only positive numbers accepted. e.g. 54 or 354.75')),a(this.el).find('#milestone-create-form').find('[name=milestone-amount]').addClass('error-bd'),!1;if(a.trim(h).length==0)return this.showErrorMsg(T_('Please enter a description for the milestone')),a(this.el).find('#milestone-create-form').find('[name=milestone-descr]').addClass('error-bd'),!1;var m={project:j,username:i,reason:l,other_reason:h,amount:g,currency:k,request:'',csrf_token:getCSRFToken()},n=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');e.hide(),d.hide().after(n),jq.ajax({url:'/ajax/payment/onnewescrow.php',type:'post',data:m,dataType:'json',beforeSend:function(){typeof _t!='undefined'&&_t.push(['user_action',{section:'Newsfeed',subsection:'MilestoneCreate',label:'form_submit',action:'click'}])},complete:function(){b.stillHideButtons||(n.remove(),d.show(),e.show())},success:function(c){if(c.status&&c.status=='success')a(b.el).find('#milestone-create-form').find('[name=milestone-amount]').val(''),a(b.el).find('#milestone-create-form').find('[name=milestone-descr]').val(''),b.hideCreateMileStone(),a(b.el).find('#milestone').parent().removeClass('active'),b.actionState('milestoneCreated');else if(c.errorCode=='needDeposit'){b.stillHideButtons=!0;var d='/payments/deposit.php?milestone_amount='+encodeURIComponent(m.amount)+'&amount='+encodeURIComponent(c.amountDiff?c.amountDiff:g)+'&currency='+encodeURIComponent(m.currency)+'&id='+encodeURIComponent(m.project)+'&descr='+encodeURIComponent(m.other_reason)+'&username='+encodeURIComponent(m.username)+'&bidderId='+encodeURIComponent(f.userId)+'&refAction='+encodeURIComponent('create_milestone');window.location.origin?window.open(window.location.origin+d,'_self'):window.open(window.location.protocol+'//'+window.location.hostname+d,'_self')}else b.showErrorMsg(c.msg),a(b.el).find('#milestone-create-form').find('[name=milestone-descr]').addClass('error-bd'),a(b.el).find('#milestone-create-form').find('[name=milestone-amount]').addClass('error-bd')},error:function(){b.showErrorMsg(T_('A server error occurred')),n.remove(),d.show(),e.show()}})},createDirectTransfer:function(){var b=this;b.clearErrorMsg();var c=a(this.el).find('#btn-transfer'),d=a(this.el).find('#cancel_transfer'),e=a(this.el).find('#directTransfer');e.siblings('.hint').empty();var f=e.find('[name=amount]'),g=e.find('[name=description]'),h=e.find('[name=amount]').val(),i=jq.trim(e.find('[name=description]').val()),j=this.model.get('data'),k=j.userName,l=j.id,m=j.currencyId,n;typeof l=='undefined'?(l='not_chosen',n='other'):n='partly_payment';if(typeof k=='undefined')return this.showErrorMsg(T_('Please select the user you want to make the Direct Transfer for')),!1;if(h==''||h==0)return this.showErrorMsg(T_('Please enter an amount for the Direct Transfer')),f.addClass('error-bd'),!1;if(!/^[0-9]{1,6}\.?[0-9]{0,2}$/.test(h))return this.showErrorMsg(T_('Only positive numbers accepted. e.g. 54 or 354.75')),f.addClass('error-bd'),!1;if(jq.trim(i).length==0)return this.showErrorMsg(T_('Please enter a description for the direct transfer')),g.addClass('error-bd'),!1;var o={project:l,username:k,reason:n,other_reason:i,amount:h,currency:m,savetransfer:1,csrf_token:getCSRFToken()},p=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.hide(),c.hide().after(p),jq.ajax({url:'/ajax/payment/ontransfer.php',type:'post',data:o,dataType:'json',complete:function(){p.remove(),c.show(),d.show()},success:function(c){c.status&&c.status=='success'?(a(b.el).find('.hint').append('<span class="success-msg">'+T_('Successful Created Direct Transfer')+'</span>'),b.hideDirectTransfer(),b.actionState('paymentCreated')):(b.showErrorMsg(c.msg),a(b.el).find('#directTransfer').find('[name=amount]').addClass('error-bd'),a(b.el).find('#directTransfer').find('[name=description]').addClass('error-bd'))},error:function(){b.showErrorMsg(T_('A server error occurred'))}})},showErrorMsg:function(b){var c=a(this.el).find('.hint');c.empty(),c.append('<span class="error-msg">'+b+'</span>')},clearErrorMsg:function(){var b=a(this.el).find('.hint');b.empty(),a(this.el).find('.error-bd').removeClass('error-bd')},boxState:function(a){var b=this,c=this.model.get('user_state');if(typeof c!='undefined')if(c.indexOf('NO')!=-1||c.indexOf('DT')!=-1||c.indexOf('CM')!=-1){var d=c.replace('NO',a);d=d.replace('DT',a),d=d.replace('CM',a)}else var d=c+a;else var d=a;this.model.set({user_state:d});if(c!=d){var e=new g('newsfeed');e.userstate(b.model.get('id'),d,function(){},function(){},this)}},liveChat:function(a){var b=this.model.get('data');window.liveChat.startChat([b.userId],'private_chat','dashboard-selected-accepted',{type:'project',id:b.id})},actionState:function(a){var b=this,c=this.model.get('state'),d=c;if(typeof c!='undefined'&&c.indexOf(a)!=-1)return;d=c+a,this.model.set({state:d}),this.renderEvent(this.model),b.truncateProjectName(),this.hideDirectTransfer(),this.hideCreateMileStone()}});return j}),define('dashboard/views/events/uploaded',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event'],function(a,b,c,d){var e=d.extend({events:b.extend({},d.prototype.events,{}),formatHeader:function(){var b=this.model.get('totalAmount'),c='';b==1?c='a file':c=b+' files',a(this.el).find('#numOfFiles').text(c)}});return e}),define('dashboard/views/events/contestReviewReceive',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/contestReviewReceived.htm','notification/libpersist','text!templates/dashboard/feedback.fixed.project.htm','jquery.autosize','dashboard/lib/feedbackTip'],function(a,b,c,d,e,f,g,h,i,j){var k=d.extend({events:b.extend({},d.prototype.events,{'click #feedbackButton':'getFeedback','click #cancel':'hideFeedbackBox','click #submit':'submitFeedback','click #budget_time p':'checkRadio'}),compileTemplate:b.template(f),feedbackFixedProjectCompileTemplate:b.template(h),buyer_to_seller:!1,initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.bind('change',this.renderEvent),b.bindAll(this,'condition')},condition:function(a){return a.get('type')=='contestComplete'&&a.get('data').review_id==this.model.get('data').contest_review_id},updateStateValue:'completed',updateOthersState:function(){this.eventViewFactory.setStateOnCondition(this.condition,this.updateStateValue)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).find('.actions').last().append(this.feedbackFixedProjectCompileTemplate(this.model.toJSON())),typeof this.model.get('data').assign_to!='undefined'?this.model.get('data').assign_to=='Freelancer'&&(this.buyer_to_seller=!0):this.model.get('data').contest_review_id%2!=0&&(this.buyer_to_seller=!0),this.buyer_to_seller?a(this.el).find('#toFreelancer').remove():(a(this.el).find('#toEmployer').remove(),a(this.el).find('#budget_time').remove(),a(this.el).find('.ns_tip').remove()),a(this.el).find('#comment').autosize(),a(this.el).iniatialTipTooltip(),this},checkRadio:function(b){a(b.target).find('input').attr('checked','checked')},showFeedbackBox:function(){a(this.el).find('#feedbackButton').parent().addClass('active'),a(this.el).find('#feedbackBox').show()},hideFeedbackBox:function(){a(this.el).find('#feedbackBox').hide(),a(this.el).find('#feedbackButton').parent().removeClass('active')},getFeedback:function(){if(jq(this.el).find('#feedbackBox').is(':visible')){this.hideFeedbackBox();return}jq(this.el).find('.loading').show();var a=this;jq.ajax({type:'POST',data:{review_id:this.model.get('data').contest_review_id},dataType:'json',url:'/contest/projectAction/getContestFeedback.php',success:function(b){if(b.status=='success'){var c=b.data.status;c=='PENDING'||c=='ACTIVE'?(a.actionState('completed'),a.updateOthersState()):a.showFeedbackBox()}},complete:function(){jq(a.el).find('.loading').hide()}})},submitFeedback:function(b){var c=this,d=!0,e=a(this.el).find('form'),f=this.model.get('data').contest_review_id.toString(),g=new Array('quality','communication','expertise','professionalism','hire_again'),h=new Array('clarity_spec','communication','payment_prom','professionalism','work_for_again'),i=e.find('[name=descr]').val(),j=this.model.get('data').accountId.toString();if(this.buyer_to_seller)var k=e.find('[name=onbuget]:checked').val(),l=e.find('[name=ontime]:checked').val(),m=g;else var m=h;var n={project_id:f,descr:i,ajax:d,to_user:j};this.buyer_to_seller&&(n.buyer_to_seller=!0,n.ontime=l,n.onbuget=k),n.type='contest',a.each(m,function(a,b){window[b]=e.find('[name='+b+']:checked').val(),n[b]=window[b]});var o=this.checkFeedback(n);o&&(a(this.el).find('#processing').show(),a(this.el).find('#innerWrapper').hide(),a(c.el).find('#innerWrapper').find('.error-msg').length&&a(c.el).find('#innerWrapper').find('.error-msg').remove(),jq.ajax({type:'post',data:n,dataType:'json',url:'/users/review/onrate.php',success:function(b){if(b.status=='success'){var d='completed';c.actionState(d),c.updateOthersState()}else b.status=='redirect'?window.location.replace(b.error):(a(c.el).find('#processing').hide(),a(c.el).find('#innerWrapper').show(),a(c.el).find('#innerWrapper').append('<span class="error-msg">'+b.error+'</span>'))}}))},checkFeedback:function(b){var c=!0,d=a(this.el).find('.hint-star'),e=a(this.el).find('.hint-comment');return d.empty(),e.empty(),a.each(b,function(a,b){if(typeof b=='undefined')return c=!1,d.append('<span class="error-msg">'+T_('Please rate all criteria')+'</span><br>'),c}),b['descr']==0?(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')):b.descr.length<5&&(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment more than 5 characters in length')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')),c},actionState:function(a){var b=this,c=new g('newsfeed'),d=this.model.attributes.state,e=a;this.model.set({state:e}),this.renderEvent(this.model),b.truncateProjectName()}});return k}),define('dashboard/views/events/reviewPosted',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/reviewPosted.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this.setExpiredTime(),this},setExpiredTime:function(){var b=this.model.get('state');if(typeof b!='undefined'&&(b=='completed'||b=='complete')){a(this.el).find('#expiredNotice').remove();return}var c=this.model.get('data').expiredTimestamp;if(typeof c=='undefined'||c==null){a(this.el).find('#expiredNotice').remove();return}var d=(new Date).getTime();d=parseInt(d/1e3);var e=(c-d)/86400;if(e>0){e=parseInt(e);var f=T_('Due in ')+e+(e==1?T_('day'):T_(' days'));a(this.el).find('#timeleft').text(f)}else a(this.el).find('#timeleft').text('Expired'),a(this.el).find('.actions').remove()}});return g}),define('dashboard/views/events/rehireOption',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/rehireOption.htm'],function(a,b,c,d,e){var f=d.extend({events:{'click #rehirecheck':'tickCheckbox','mouseenter #rehirecheck':'addHoverEffect','mouseleave #rehirecheck':'removeHoverEffect','keydown input.number-only':'limitInput'},compileTemplate:b.template(e),initialize:function(){b.bindAll(this,'tickCheckbox','initialToolTip'),this.model.bind('change',this.initialToolTip),this.bind('checkInput',this.checkInput),this.bind('tickRehire',this.tickRehire),this.bind('unTickRehire',this.unTickRehire)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this.setFreelancerHourlyRate(),this},initialToolTip:function(){var b=this.model.get('data'),c=T_('Do you have any ongoing work that you need <[- data.freelancerUsername ]> to do for you?',{data:b}),d='';typeof b.freelancerHourlyRate!='undefined'&&b.freelancerHourlyRate!=null?d+=T_('Rehire them with an hourly project at their hourly rate of USD $<[- data.freelancerHourlyRate ]>/hr.',{data:b}):d+=T_('Rehire them with an hourly project.'),d+=T_(' You will only pay them for their hours worked.'),d+='<br><br>',d+='<strong>'+T_('Offering them an hourly project is free!')+'</strong>',b.notShowEmployerFee||(d+='<br>',d+='<div style="font-size:12px;">'+T_('The project fees on hourly projects is 3% on any payment to the freelancer ')+T_('so you won\'t be charged any fees until your first payment to the freelancer')+'</div>'),a(this.el).find('.tipQuestion').popover_legacy({placement:'right',title:c,content:d,trigger:'hover',html:!0})},setFreelancerHourlyRate:function(){var b=this,c=this.model.get('data').freelancerId;typeof this.model.get('freelancerHourlyRate')=='undefined'&&a.ajax({url:'/ajax/hireme/getRehireData.php',data:{freelancerId:c},dataType:'json',success:function(c){c.status=='success'&&(b.model.get('data').freelancerHourlyRate=c.hourlyrate,b.model.get('data').notShowEmployerFee=c.notShowEmployerFee,b.initialToolTip(),a(b.el).find('#rehire-hourlyrate').val(c.hourlyrate))},error:function(){b.initialToolTip()}})},addHoverEffect:function(b){a(this.el).find('#chkbx_rehire').is(':checked')||a(this.el).find('#rehireArea').addClass('rehireOptionChecked')},removeHoverEffect:function(b){a(this.el).find('#chkbx_rehire').is(':checked')||a(this.el).find('#rehireArea').removeClass('rehireOptionChecked')},tickRehire:function(){a(this.el).find('#chkbx_rehire').attr('checked','true'),a(this.el).find('#rehireArea').addClass('rehireOptionChecked'),a(this.el).find('#chkbx_rehire').length!=0&&(this.model.get('data').rehireOption=!0)},unTickRehire:function(){a(this.el).find('#chkbx_rehire').removeAttr('checked'),a(this.el).find('#rehireArea').removeClass('rehireOptionChecked'),this.model.get('data').rehireOption=!1},tickCheckbox:function(b){var c=a(this.el).find('#chkbx_rehire');if(a(b.target).is('input[type="checkbox"]')){c.is(':checked')?this.tickRehire():this.unTickRehire();return}var c=a(this.el).find('#chkbx_rehire');c.is(':checked')?a(b.target).is('input')||this.unTickRehire():this.tickRehire()},limitInput:function(b){var c=a(b.srcElement);c.removeClass('error-bd'),this.removeErrorHint();var d=b.which;if(!(d>=48&&d<=57||d>=96&&d<=105||d==8||d==46||d==39||d==37)){b.preventDefault();return}},removeErrorHint:function(){a(this.el).find('.hint').html('')},checkInput:function(b){typeof b=='undefined'&&(b={result:!0});if(a(this.el).find('#chkbx_rehire').is(':checked')){var c=a(this.el).find('input.number-only');for(var d=0;d<c.length;d++){var e=a(c[d]),f=a(e).data('name');f=='commitment'&&(e.val().trim()==''||e.val().trim()==0)&&(e.addClass('error-bd'),a(this.el).find('.hint').html(T_('Please provide the hours per week required for this project')),b.result=!1),f=='hourly rate'&&(e.val().trim()==''&&(e.addClass('error-bd'),a(this.el).find('.hint').html(T_('Please provide an hourly rate')),b.result=!1),e.val().length>0&&e.val()<2&&(e.addClass('error-bd'),a(this.el).find('.hint').html(T_('Project budget must be higher than $2 USD')),b.result=!1))}}return b.result}});return f}),define('dashboard/views/events/reviewPostedNew',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/events/rehireOption','dashboard/views/confirmation','text!templates/dashboard/reviewPostedNew.htm','notification/libpersist','text!templates/dashboard/feedback.fixed.project.htm','jquery.autosize','dashboard/lib/feedbackTip'],function(a,b,c,d,e,f,g,h,i,j,k){var l=d.extend({events:b.extend({},d.prototype.events,{'click #feedbackButton':'showFeedbackBox','click #cancel':'hideFeedbackBox','click #submit':'submitFeedback','keydown #tip-amount':'onlyAllowPositiveIntAmount','mouseover #tipArea':'clickableIn','mouseout #tipArea':'clickableOut','click #tipArea':'tipClick','focus #comment':'resetCommentError','click #budget_time p':'checkRadio'}),compileTemplate:b.template(g),feedbackFixedProjectCompileTemplate:b.template(i),initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.bind('change',this.renderEvent),this.model.get('data').freelancerId=this.model.get('data').userId,this.model.get('data').freelancerUsername=this.model.get('data').userName,this.rehireOptionView=new e({model:this.model}),b.bindAll(this,'condition','conditionHourly')},hireAgainRadioClick:function(){var b=a(this.el).find('#hireAgainRadio').find('input:checked').val();b>=3&&this.rehireOptionView.trigger('tickRehire')},condition:function(a){return a.get('type')=='completed'&&a.get('data').id==this.model.get('data').id&&typeof a.get('data').invoice_id=='undefined'},conditionHourly:function(a){return a.get('type')=='invoiceFeedback'&&a.get('data').invoiceId==this.model.get('data').invoice_id},updateStateValue:'completed',updateStateValueHourly:'complete',updateOthersState:function(){this.model.get('data').projIsHourly?this.eventViewFactory.setStateOnCondition(this.conditionHourly,this.updateStateValueHourly):this.eventViewFactory.setStateOnCondition(this.condition,this.updateStateValue)},resetCommentError:function(){a(this.el).find('#comment').removeClass('comment-error')},checkRadio:function(b){a(b.target).find('input').attr('checked','checked')},clickableIn:function(b){var c=this.el.find('#tipArea');a(c).addClass('alert-info')},clickableOut:function(b){var c=a(this.el).find('#tipArea'),d=c.find('input:checkbox');d.is(':checked')||a(c).removeClass('alert-info')},tipClick:function(b){var c=a(this.el).find('#tipArea').find('input:checkbox'),d=typeof b;if(d!='undefined'){var e=a(b.target).not('#chkbx_tip')[0];e&&(a(b.target).not('#tip-amount')[0]?c.attr('checked',c.is(':checked')?!1:!0):c.attr('checked',!0))}else this.clickableIn(),c.attr('checked',!0)},render:function(){a(this.el).html(this.compileTemplate(this.model.toJSON()));if(typeof this.model.attributes.data.amount=='undefined'||this.model.attributes.data.amount==0||this.model.attributes.data.amount==null)this.model.attributes.data.amount=50;return parseInt(this.model.get('data').employerId,10)===parseInt(getUserIdfromCookie(),10)&&(window.isEmployer=!0),a(this.el).find('.actions').last().append(this.feedbackFixedProjectCompileTemplate(this.model.toJSON())),this.model.get('data').accountId==getUserIdfromCookie()?(a(this.el).find('#toFreelancer').remove(),this.model.get('data').projIsHourly||a(this.el).find('#tipArea').parent().append(this.rehireOptionView.render().el)):(a(this.el).find('#toEmployer').remove(),a(this.el).find('#budget_time').remove(),a(this.el).find('.ns_tip').remove()),this.setExpiredTime(),a(this.el).iniatialTipTooltip(),this},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName()},setExpiredTime:function(){var b=this.model.get('state');if(typeof b!='undefined'&&(b=='completed'||b=='complete')){a(this.el).find('#expiredNotice').remove();return}var c=this.model.get('data').expiredTimestamp;if(typeof c=='undefined'||c==null){a(this.el).find('#expiredNotice').remove();return}var d=(new Date).getTime();d=parseInt(d/1e3);var e=(c-d)/86400;if(e>0){e=parseInt(e);var f=T_('Due in ')+e+(e==1?T_('day'):T_(' days'));a(this.el).find('#timeleft').text(f)}else a(this.el).find('#timeleft').text('Expired'),a(this.el).find('.actions').remove()},showFeedbackBox:function(){a(this.el).find('#feedbackBox').is(':visible')?this.hideFeedbackBox():(a(this.el).find('#feedbackButton').parent().addClass('active'),a(this.el).find('#feedbackBox').show())},hideFeedbackBox:function(){a(this.el).find('#feedbackBox').hide(),a(this.el).find('#feedbackButton').parent().removeClass('active')},submitFeedback:function(b){var c=this,d=!0,e=a(this.el).find('form'),f=this.model.get('data').id.toString(),g=new Array('quality','communication','expertise','professionalism','hire_again'),h=new Array('clarity_spec','communication','payment_prom','professionalism','work_for_again'),i=e.find('[name=descr]').val(),j=this.model.get('data').fromUserId.toString();if(this.model.get('data').accountId==getUserIdfromCookie())var k=g,l=!0,m=e.find('[name=onbuget]:checked').val(),n=e.find('[name=ontime]:checked').val();else var k=h,l=!1;var o=e.find('[name=chkbx_tip]').is(':checked'),p=e.find('[name=tip-amount]').val();if(this.model.get('data').projIsHourly&&this.model.get('data').invoice_id!=null){var q={project_id:f,to_user:j,type:'hourly',descr:i,ajax:d,invoice_id:this.model.get('data').invoice_id};this.model.get('data').accountId==getUserIdfromCookie()&&(q.buyer_to_seller=!0)}else var q={project_id:f,to_user:j,buyer_to_seller:l,descr:i,ajax:d};this.model.get('data').accountId==getUserIdfromCookie()&&(q.ontime=n,q.onbuget=m),o==1&&(q.chkbx_tip='on',q.tip_amount=p),a.each(k,function(a,b){window[b]=e.find('[name='+b+']:checked').val(),q[b]=window[b]});var r={result:!0};this.rehireOptionView.trigger('checkInput',r);var s=this.checkFeedback(q)&&r.result;if(r.result&&this.model.get('data').rehireOption&&a(this.el).find('#chkbx_rehire').is(':checked')){var t=a(c.el).find('#rehire-hourlyrate').val(),u=a(c.el).find('#rehire-commitment').val();q.chkbx_rehire='on',q.commitment=u,q.hourlyrate=t}var v=a(this.el).find('.hint-tip');s&&(a(this.el).find('#chkbx_rehire').is(':checked')&&_ttref.push(['_clearEntrypoint','HireMe'],['_setEntrypoint','HireMe_NewsfeedRehire']),a(this.el).find('#processing').show(),a(this.el).find('#innerWrapper').hide(),jq.ajax({type:'post',data:q,dataType:'json',url:'/users/review/onrate.php',success:function(b){if(b.status=='success'){var d='completed';c.actionState(d),c.updateOthersState()}else b.status=='redirect'?window.location.replace(b.error):(a(c.el).find('#processing').hide(),a(c.el).find('#innerWrapper').show(),v.empty(),v.show(),v.append('<span class="error-msg">'+b.error+'</span><br>'))}}))},checkFeedback:function(b){var c=!0,d=a(this.el).find('.hint-star'),e=a(this.el).find('.hint-comment');d.empty(),e.empty(),a.each(b,function(a,b){if(typeof b=='undefined')return c=!1,d.append('<span class="error-msg">'+T_('Please rate all criteria')+'</span><br>'),c});var f=a(this.el).find('#tipcheck').data('status');return f=='checking'&&a(this.el).find('#chkbx_tip').is(':checked')?c=!1:f=='fail'&&a(this.el).find('#chkbx_tip').is(':checked')&&(c=!1),b['descr']==0?(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')):b.descr.length<5&&(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment more than 5 characters in length')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')),c},onlyAllowPositiveIntAmount:function(b){var c=a(this.el).find('#tip-amount').val();if(b.keyCode==48||b.keyCode==96||b.keyCode==46||b.keyCode==8)if(c.length==0){b.preventDefault();return}if(b.keyCode==190||b.keyCode==110){if(c.length==0){b.preventDefault();return}if(c.indexOf('.')!=-1){b.preventDefault();return}}if(b.keyCode!=46&&b.keyCode!=8)if(b.keyCode<95){if(b.keyCode<48||b.keyCode>57){b.preventDefault();return}}else if(b.keyCode<96||b.keyCode>105&&b.keyCode!=110&&b.keyCode!=190){b.preventDefault();return}if(b.keyCode==13){b.preventDefault();return}this.tipClick()},actionState:function(a){var b=this,c=new h('newsfeed'),d=this.model.attributes.state,e=a;this.model.set({state:e}),this.renderEvent(this.model),b.truncateProjectName()}});return l}),define('dashboard/views/events/completeContestReview',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/completeContestReview.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/pmbPublic.min',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','notification/libpersist','text!templates/dashboard/pmbPublic.min.htm','dashboard/lib/seeMore'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),preferLineNum:3,compileTemplateMin:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a)},render:function(){return a(this.el).html(this.compileTemplateMin(this.model.toJSON())),this.registerUserPortrait(),this},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length,f,g,h,i;for(d;d<e;d++){f=a(c[d]);var j=f.parent();j.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()}});return h}),define('dashboard/views/events/milestone.part.released',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/milestone.part.released.htm','dashboard/views/confirmation','notification/libpersist'],function(a,b,c,d,e,f,g){var h=d.extend({compileTemplate:b.template(e),events:b.extend({},d.prototype.events,{'click #requestToReleaseBtn':'showRequestToReleaseConformBox','click .btn-cancel-request-release-milestone':'hideRequestToReleaseConformBox','click .btn-request-release-milestone':'requestToRelease'}),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','requestToRelease','activeTabOn','activeTabOff'),this.confirmation=new f({model:this.model}),this.confirmation.bind('submitted',this.requestToRelease).bind('expand',this.activeTabOn).bind('collapse',this.activeTabOff)},render:function(){var b=this.model.get('data'),c=this.model.toJSON();return c.data&&(c.data.seoUrl||(c.data.seoUrl=c.data.id),c.data.linkUrl==='/projects/.html'&&(c.data.linkUrl='/projects/'+c.data.id+'.html')),a(this.el).html(this.compileTemplate(c)),a(this.el).find('.tab-pane').html(this.confirmation.render(T_('Request to release the remainder of this Milestone Payment (<%= currencysign %><%- leftAmount  %> <%- currencycode %>)?',{currencysign:b.currencysign,leftAmount:b.leftAmount,currencycode:b.currencycode})).el),this.confirmation.hide(),this},activeTabOn:function(){a(this.el).find('#requestToReleaseBtn').parent().addClass('active')},activeTabOff:function(){a(this.el).find('#requestToReleaseBtn').parent().removeClass('active')},showRequestToReleaseConformBox:function(){a(this.el).find('.hint').empty(),this.confirmation.toggle()},hideRequestToReleaseConformBox:function(){a(this.el).find('.hint').empty(),this.confirmation.hide()},requestToRelease:function(){var b=this,c=this.model.get('data'),d=a(this.el).find('.submit'),e=a(this.el).find('.cancel'),f=a(this.el).find('.error-msg');f.hide();var g=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.hide().after(g),e.hide(),jq.ajax({type:'post',data:{id:c.tranId,account_id:c.account_id,project_id:c.project_id},dataType:'json',url:'/ajax/payment/requestReleaseMilestone.php',complete:function(){g.remove(),d.show(),e.show()},success:function(a){a.status=='success'?(f.text(T_('Successfully sent request')),b.hideRequestToReleaseConformBox(),b.actionState('accept')):(f.text(a.errors.toString()),f.show())},error:function(){hintPlace.append('<span class="error-msg"> '+T_('A server error occurred')+'</span>')}})},actionState:function(a){var b=this,c=new g('newsfeed');c.actionstate(b.model.get('id'),a,function(){},function(){},this),this.model.set({state:a}),this.renderEvent(this.model),b.truncateProjectName()}});return h}),define('dashboard/views/events/project.review.active',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/project.review.active.htm','text!templates/dashboard/quickHireProject.posted.htm','text!templates/dashboard/inlineRehireProject.posted.htm'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{'click #messaging':'liveChat','click #create-milestone-tab':'toggleCreateMileStone','click #cancelMilestone':'hideCreateMileStone','click #createMilestone':'createMilestone'}),projectNameLineNum:3,compileTemplate:b.template(e),compileQHPTemplate:b.template(f),compileInlineRehireTemplate:b.template(g),render:function(){if(!this.model.get('data').isQHP)a(this.el).html(this.compileTemplate(this.model.toJSON()));else switch(this.model.get('data').projectCreateType){case'inline-rehire':a(this.el).html(this.compileInlineRehireTemplate(this.model.toJSON())),a(this.el).find('#rehireTip').popover_legacy({placement:'right',title:T_('Hourly project fees'),content:T_('The project fees on hourly projects is 3% on any payment to the freelancer, ')+T_('so you won&#39;t be charged any fees until your first payment to the freelancer.'),trigger:'hover',html:!0});break;default:a(this.el).html(this.compileQHPTemplate(this.model.toJSON()))}return this},toggleCreateMileStone:function(){a(this.el).find('#milestone-create-form').is(':visible')?this.hideCreateMileStone():this.showCreateMileStone()},hideCreateMileStone:function(){a(this.el).find('#milestone-create-form').hide(),a(this.el).find('#create-milestone-tab').removeClass('active')},showCreateMileStone:function(){var b=this.model.toJSON();b.data.isAutomaticPayments?window.location='/projects/'+b.data.id+'.html':(a(this.el).find('#milestone-create-form').show(),a(this.el).find('#create-milestone-tab').addClass('active'))},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName({preferLineNum:this.projectNameLineNum})},showErrorMsg:function(a,b){a.append('<span class="error-msg">'+b+'</span>'),a.show()},hintPlaceClear:function(b){b.empty(),b.hide(),a(this.el).find('.error-bd').removeClass('error-bd')},loadingSpinner:function(b){var c=a(this.el).find(b),d=c.next(),e=a(this.el).find('.loading'),f=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');e.length?(e.remove(),c.show(),d.show()):(d.hide().after(f),c.hide())},createMilestone:function(b){var c,d;c=this;var e=a(this.el).find('.hint-milestone');this.hintPlaceClear(e);var f=this.model.get('data'),g=a(this.el).find('#milestone-amount').val(),h=a(this.el).find('#milestone-descr').val();if(g==''||g==0)return this.showErrorMsg(e,T_('Only positive numbers accepted. e.g. 54 or 354.75')),a(this.el).find('#milestone-amount').addClass('error-bd'),!1;if(!/^[0-9]{1,6}\.?[0-9]{0,2}$/.test(g))return this.showErrorMsg(e,T_('Only positive numbers accepted. e.g. 54 or 354.75')),a(this.el).find('#milestone-amount').addClass('error-bd'),!1;if(a.trim(h).length==0)return this.showErrorMsg(e,T_('Please enter a description for the milestone')),a(this.el).find('#milestone-descr').addClass('error-bd'),!1;d={username:f.quickhireFreelancerUsername,amount:g,project:f.id,reason:'partly_payment',other_reason:h,currency:f.currencyId,csrf_token:getCSRFToken()},c.loadingSpinner('#createMilestone'),a.ajax({type:'GET',url:'/ajax/payment/onnewescrow.php',data:d,dataType:'json',cache:!1,success:function(h){if(h.status=='success')a(c.el).find('.award').hide(),c.toggleCreateMileStone(b),a(c.el).find('#milestone-create-form').find('#milestone-amount').val(''),a(c.el).find('#milestone-create-form').find('#milestone-descr').val(''),c.actionState('milestoneCreated');else if(h.needDeposit){var i='/payments/deposit.php?milestone_amount='+encodeURIComponent(d.amount)+'&amount='+encodeURIComponent(h.amountDiff?h.amountDiff:g)+'&currency='+encodeURIComponent(d.currency)+'&id='+encodeURIComponent(d.project)+'&descr='+encodeURIComponent(d.other_reason)+'&username='+encodeURIComponent(d.username)+'&bidderId='+encodeURIComponent(f.quickhireFreelancerId)+'&refAction='+encodeURIComponent('create_milestone');window.open(window.location.origin+i,'_self')}else e.append('<span class="error-msg"> '+h.msg+'</span><br>'),e.show(),c.loadingSpinner('#createMilestone')}})},actionState:function(a){this.model.set({state:a}),this.renderEvent()},liveChat:function(a){var b=this.model.get('data');window.liveChat.startChat([b.quickhireFreelancerId],'private_chat','dashboard-events-project-review-active',{type:'project',id:b.id})}});return h}),define('dashboard/views/events/project.review.reject',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/project.review.reject.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/directTransferDone',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/directTransferDone.htm'],function(a,b,c,d,e){var e=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return e}),define('dashboard/views/events/requestToRelease',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/requestToRelease.htm','notification/libpersist'],function(a,b,c,d,e,f){var e=d.extend({events:b.extend({},d.prototype.events,{'click #showReleaseBox':'showReleaseBox','click #reject':'showReleaseBox','click #accept':'release'}),compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return b.data&&!b.data.seoUrl&&(b.data.seoUrl=b.data.id),a(this.el).html(this.compileTemplate(b)),this},showReleaseBox:function(){this.clearErrorMsg();var b=a(this.el).find('#releaseBox');b.is(':visible')?(b.hide(),a(this.el).find('#showReleaseBox').parent().removeClass('active')):(b.show(),a(this.el).find('#showReleaseBox').parent().addClass('active'),typeof _t!='undefined'&&_t.push(['user_action',{section:'Newsfeed',subsection:'MilestoneRelease_FromRequest',label:'show_form',action:'click'}]))},release:function(){var b,c;b=this;var d=a(b.el).find('.hint');b.clearErrorMsg();var e=a(this.el).find('[name=milestone-amount]').val();if(e==''||e==0)return d.append('<span class=" error-msg">'+T_('Please enter an amount for the milestone')+'</span>'),a(b.el).find('[name=milestone-amount]').addClass('error-bd'),!1;if(!/^[0-9]{1,5}\.?[0-9]{0,2}$/.test(e))return d.append('<span class=" error-msg">'+T_('Only positive numbers accepted. e.g. 54 or 354.75')+'</span>'),a(b.el).find('[name=milestone-amount]').addClass('error-bd'),!1;var f=this.model.get('data');c={id:f.tranId,amount:e,csrf_token:getCSRFToken()};var g=a(this.el).find('#accept'),h=a(this.el).find('#reject'),i=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');h.hide(),g.hide().after(i),a.ajax({type:'POST',url:'/ajax/payment/onclearescrow.php',data:c,cache:!1,complete:function(){i.remove(),g.show(),h.show()},beforeSend:function(){typeof _t!='undefined'&&_t.push(['user_action',{section:'Newsfeed',subsection:'MilestoneRelease_FromRequest',label:'form_submit',action:'click'}])},success:function(c){c=a.parseJSON(c),c.status=='success'?(c.type=='partial'?b.actionState(c.remain):c.type=='full'&&b.actionState('accept'),b.showReleaseBox()):(a(b.el).find('[name=milestone-amount]').addClass('error-bd'),typeof c.errorCode!='undefined'&&c.errorCode=='needToUpdateAccount'&&(c.msg+=' <a href=\'/users/changeuserinfo.php\'>'+T_('Update now')+'</a>'),d.append('<span class = "error-msg" >'+c.msg+'</span>'))},error:function(){d.append('<span class="error-msg">'+T_('A server error occurred')+'</span>')}})},clearErrorMsg:function(){var b=a(this.el).find('.hint');b.empty(),a(this.el).find('.error-bd').removeClass('error-bd')},actionState:function(a){var b=this,c=new f('newsfeed'),d=a.toString().replace('.','DOT');c.actionstate(b.model.get('id'),d,function(){},function(){},this),this.model.set({state:a}),this.renderEvent(this.model),b.truncateProjectName()}});return e}),define('dashboard/views/events/hireMe',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/hireMe.htm','notification/libpersist','dashboard/lib/seeMore','project/modules/module-time-tracker-download-promotion-modal'],function(a,b,c,d,e,f,g,h,i){var j=d.extend({events:b.extend({},d.prototype.events,{'click #accept':'accept','click #reject':'reject','click #seeMore':'seeMoreClick','click #rejectBtn':'showRejectContent','click #messaging':'liveChat','click #cancel-reject':'showAwardBox','click #rejectBtnInCounterofferBox':'showRejectBox','click #downloadTimeTrackerBtn':'trackingDownload','click #btn-create-seller-counter-offer':'makeConterOffer','click #acceptOnRejectBtn':'acceptConfirmBtn','click #rejectOnRejectBtn':'rejectConfirmBtn'}),compileTemplate:b.template(f),projectMilestoneCount:0,initialize:function(c){this.constructor.__super__.initialize.call(this,c),b.bindAll(this,'render','accept','reject');var d=this;a.ajax({type:'GET',data:{project_id:this.model.get('data').id},url:'/ajax/dashboard/projectMilestoneCount.php',dataType:'json',success:function(a){a.status==='success'&&(d.projectMilestoneCount=a.milestoneCount)}})},render:function(){var b=this.model.get('data');if(typeof b.acceptByTime!='undefined'){var c='',d=(new Date).getTime(),e=Math.round((b.acceptByTime*1e3-d)/36e5);c=e>1?e+' hours':e==1?e+' hour':null,b.hoursLeftStr=c;var f=this.model.get('state');if(typeof f=='undefined'&&b.hoursLeftStr===null){var h=new g('newsfeed');return h.hide(this.model.get('id'),this.success,this.error,this),a(this.el).hide(),this}}var i=this.model.toJSON();return i.data&&i.data.linkUrl==='/projects/.html'&&(i.data.linkUrl='/projects/'+i.data.id+'.html'),a(this.el).html(this.compileTemplate(i)),a(this.el).find('#downloadBtnTip').popover_legacy({title:T_('What is <[- desktopAppName ]>?',{desktopAppName:desktopAppName}),content:T_('<[- desktopAppName ]> is an app that tracks your work in an hourly project, allowing you to:',{desktopAppName:desktopAppName})+'<br>'+' - '+T_('Verify your hours worked to the employer')+'<br>'+' - '+T_('Easily create invoices for your hours worked'),trigger:'hover',html:!0}),this},trackingDownload:function(){_ttref.push(['_trackEventNoCookie','TimeTracker','Download','NewsfeedOnAccept','click'])},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName()},showRejectContent:function(){if(this.projectMilestoneCount>0){a('body').addClass('modal-open'),a(this.el).find('#rejectConfirmModal').on('hide',function(){a('body').removeClass('modal-open')}),a(this.el).find('#rejectConfirmModal').modal('show');return}this.showCounterOfferBox()},showCounterOfferBox:function(){a(this.el).find('#acceptBox').hide(),a(this.el).find('#rejectBox').hide(),a(this.el).find('#counterOfferBox').show()},showRejectBox:function(){a(this.el).find('#acceptBox').hide(),a(this.el).find('#counterOfferBox').hide(),a(this.el).find('#rejectBox').show()},showAwardBox:function(){a(this.el).find('#rejectBox').hide(),a(this.el).find('#counterOfferBox').hide(),a(this.el).find('#acceptBox').show()},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length;for(d;d<e;d++){var f=a(c[d]),g=f.parent();g.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()},accept:function(){var b,c;b=this;var d=a(this.el).find('#accept'),e=a(this.el).find('#rejectBtn');b.loadingSpinner(d,e),b.hintPlaceClear(),c={id:this.model.get('data').id},a.ajax({type:'POST',url:'/sellers/on-accept-project.php',data:c,dataType:'json',cache:!1,complete:function(){b.loadingSpinner(d,e)},success:function(d){d.result=='failed'?a(b.el).find('.hint').append('<span class="error-msg">'+d.message+'<span>'):(_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_NewsFeedOfferToHireMe']),_ttref.push(['_trackEvent','Project','Accepted']),a(b.el).find('.well').hide(),b.actionState('accept'),d.timeTrackerDownloadPromotion&&i.initModal({projectID:c.id}))}})},reject:function(){var b,c;b=this;var d=a(this.el).find('#reject'),e=a(this.el).find('#cancel-reject');b.hintPlaceClear(),b.loadingSpinner(d,e),c={id:this.model.get('data').id,reason:a(this.el).find('#reasonArea').val()},a.ajax({type:'POST',url:'/sellers/on-deny-project.php',data:c,dataType:'json',cache:!1,complete:function(){b.loadingSpinner(d,e)},success:function(c){c.result=='failed'?a(b.el).find('.hint').append('<span class="error-msg">'+c.message+'<span>'):(_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_NewsFeedOfferToHireMe']),_ttref.push(['_trackEvent','Project','Rejected']),a(b.el).find('.well').hide(),b.actionState('reject'))}})},acceptConfirmBtn:function(){a('body').removeClass('modal-open'),a(this.el).find('#rejectConfirmModal').modal('hide'),this.accept()},rejectConfirmBtn:function(){a('body').removeClass('modal-open'),a(this.el).find('#rejectConfirmModal').modal('hide'),this.reject()},clearSellerCounterOfferErrors:function(b){typeof b=='undefined'&&(b=a(this.el).find('#counterOfferBox')),b.find('.help-block').html('').hide(),b.find('.control-group').removeClass('error')},makeConterOffer:function(){var b=this,c=!1,d=a(this.el).find('#counterOfferBox'),e=parseFloat(d.find('.counter-offer-new-amount').val()),f=parseInt(d.find('.counter-offer-new-period').val()),g=d.find('.counter-offer-comment').val(),h=this.model.get('data').bid.id,i=d.find('.loader'),j=d.find('#rejectBtnInCounterofferBox'),k=d.find('#cancel-reject'),l=d.find('#btn-create-seller-counter-offer'),m={newAmount:e,newPeriod:f,comment:g,bidID:h};this.hintPlaceClear(),this.clearSellerCounterOfferErrors(d),isNaN(e)&&(c=!0,d.find('.counter-offer-new-amount').closest('.control-group').addClass('error'),d.find('.counter-offer-new-amount').siblings('.help-block').html(T_('Please enter a valid minimum budget')).show());if(isNaN(f)||f<=0)c=!0,d.find('.counter-offer-new-period').closest('.control-group').addClass('error'),d.find('.counter-offer-new-period').siblings('.help-block').html(T_('Please enter a positive integer for period')).show();if(c)return!1;jq.ajax({type:'post',url:'/ajax/hireme/counteroffer/make-seller-counter-offer.php',data:m,dataType:'json',beforeSend:function(){i.show(),l.hide(),j.hide(),k.hide()},success:function(c){c.status=='success'?(b.model.get('data').newAmount=m.newAmount,b.model.get('data').newPeriod=m.newPeriod,b.model.get('data').comment=m.comment,b.actionState('counteroffer_pending')):(i.hide(),l.show(),j.show(),k.show(),a(b.el).find('.hint').append('<span class="error-msg">'+T_('Unable to make seller counter offer')+'<br>'+c.errors.join('<br />')+'</span>'))},error:function(){i.hide(),l.show(),j.show(),k.show(),a(b.el).find('.hint').append('<span class="error-msg">'+T_('Server Error')+'</span>')}})},loadingSpinner:function(b,c){var d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(b.hide().after(e),c.hide())},hintPlaceClear:function(){var b=a(this.el).find('.hint');b.empty()},liveChat:function(a){var b=this.model.get('data');window.liveChat.startChat([b.userId],'private_chat','dashboard-events-hireme',{type:'project',id:b.id})},actionState:function(a){var b=this,c=new g('newsfeed');this.model.set({state:a}),this.renderEvent(this.model),this.initialSeeMore(),b.truncateProjectName()}});return j}),define('dashboard/views/events/newDispute',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/newDispute.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();b.data&&b.data.linkUrl==='/projects/.html'&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this.timeLeft();var c=this;return setInterval(function(a){return function(){a.timeLeft()}}(c),3e3),this},timeLeft:function(){var b=this.model.get('data').time*1e3+3456e5;this.model.get('data').accountId==getUserIdfromCookie()&&(b+=2592e5);var c=(new Date).getTime(),d=b-c,e;return d>0?(e=Math.floor(d/864e5)+' days ',e+=Math.floor(d%864e5/36e5)+' hours',a(this.el).find('#restTime').html(T_('You have <strong><%= notifyTime %></strong> to respond.',{notifyTime:e}))):a(this.el).find('#restTime').text(T_('Already expired')),this}});return g}),define('dashboard/views/events/escalateDispute',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/escalateDispute.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){a(this.el).html(this.compileTemplate(this.model.toJSON())),this.timeLeft();var b=this;return setInterval(function(a){return function(){a.timeLeft()}}(b),3e3),this},timeLeft:function(){var a=this.model.get('data').time*1e3+3456e5,b=(new Date).getTime(),c=a-b,d;c>0?(d=Math.floor(c/864e5)+' days ',d+=Math.floor(c%864e5/36e5)+' hours',this.el.find('#restTime').text(T_('You have '+d+' to respond.'))):this.el.find('#restTime').text(T_('Already expired'))}});return g}),define('dashboard/views/events/emailChange',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/emailChange.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},resendCode:function(b){b.preventDefault();var c=jq(b.target).data('request'),d=a(this.el).find('.request-error');jQuery.ajax({url:'/ajax/users/email/resend_code.php',dataType:'json',type:'POST',data:{requestId:c,csrf_token:getCSRFToken()},success:function(a){if(a.status==='success')return window.location='/users/email-change/complete.php?requestId='+c,!1;d.text(a.errors),d.removeClass('hide')},error:function(){var a=d.data('default');d.text(a),d.removeClass('hide')}})},events:{'click .resend-code':'resendCode'}});return g}),define('dashboard/views/events/buyFreeMarketService',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/buyFreeMarketService.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/freeMarketServiceExpired',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/freeMarketServiceExpired.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render'),this.confirmation=new e({model:this.model}),this.confirmation.bind('submitted',this.submitted)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/freeMarketServiceIsExpired',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/freeMarketServiceIsExpired.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/sellFreeMarketService',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/sellFreeMarketService.htm'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click #accept':'accept','click #reject':'reject','click #rejectBox':'showRejectBox','click #cancel-reject':'hideRejectBox'}),compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},showRejectBox:function(){a(this.el).find('#rejectArea').show(),a(this.el).find('#acceptBox').hide()},hideRejectBox:function(){a(this.el).find('#rejectArea').hide(),a(this.el).find('#acceptBox').show()},accept:function(b){var c,d;c=this;var e=a(b.target),f=a(this.el).find('#rejectBox'),g=a(this.el).find('.hint');c.clearErrorMsg(),c.loadingSpinner(e,f),d={id:this.model.get('data').id},a.ajax({type:'POST',url:'/sellers/on-accept-project.php',data:d,cache:!1,complete:function(){c.loadingSpinner(e,f)},success:function(b){b=a.parseJSON(b),b.result=='success'?(_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_NewsFeedFreemarketServices']),_ttref.push(['_trackEvent','Project','Accepted']),g.append('<span class = "success-msg"> '+T_('Accept Successfully')+' </span>'),a(c.el).find('.well').hide()):g.append('<span class = "error-msg" >'+b.message+'</span>')}})},reject:function(b){var c,d;c=this;var e=a(b.target),f=a(this.el).find('#cancel-reject');c.clearErrorMsg(),c.loadingSpinner(e,f);var g=a(this.el).find('.hint');d={id:this.model.get('data').id},a.ajax({type:'POST',url:'/sellers/on-deny-project.php',data:d,cache:!1,complete:function(){c.loadingSpinner(e,f)},success:function(b){b=a.parseJSON(b),b.result=='success'?(_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_NewsFeedFreemarketServices']),_ttref.push(['_trackEvent','Project','Rejected']),g.append('<span class = "success-msg"> '+T_('Reject Successfully')+'</span>'),a(c.el).find('.well').hide()):g.append('<span class = "error-msg" >'+b.message+'</span>')}})},loadingSpinner:function(b,c){var d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(b.hide().after(e),c.hide())},clearErrorMsg:function(){var b=a(this.el).find('.hint');b.empty(),a(this.el).find('.error-bd').removeClass('error-bd')}});return g}),define('dashboard/views/events/verifyPhone',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/verifyPhone.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/adminForceVarifyPhone',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/adminForceVarifyPhone.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/yahooMailAlert',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/yahooMailAlert.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/adminWarningUserBidRestriction',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/adminWarningUserBidRestriction.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/contestAwardedToEmployer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/contestAwardedToEmployer.htm'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click .goto_handover':'handover'}),handover:function(){window.location.href='/contest/handover.php?entry_id='+this.model.get('data').entry_id},compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=parseFloat(this.model.get('data').prize),c;return typeof this.model.get('data').isBought!='undefined'?c=this.model.get('data').isBought:c=!1,b>1e5&&(b>1e6?b=(b/1e6).toFixed(2)+'m':b=(b/1e3).toFixed(2)+'k'),this.model.set({prize:b}),this.model.set({isBought:c}),a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/contestAwardedToFreelancer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/contestAwardedToFreelancer.htm'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click .goto_handover':'handover'}),handover:function(){window.location.href='/contest/handover.php?entry_id='+this.model.get('data').entry_id},compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=parseFloat(this.model.get('data').prize);return b>1e5&&(b>1e6?b=(b/1e6).toFixed(2)+'m':b=(b/1e3).toFixed(2)+'k'),this.model.set({prize:b}),a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/membership.downgradeToFreeMembership',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/membership.downgradeToFreeMembership.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/membership.specialLoyaltyDiscountOffer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/membership.specialLoyaltyDiscountOffer.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/removeUserFromDirectory',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/removeUserFromDirectory.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/banUserFromBidding',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/banUserFromBidding.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/contestCreated',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contestCreated.htm'],function(a,b,c,d,e){var f=(new Date).getTime(),g=d.extend({compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return a(this.el).html(this.compileTemplate(b)),this}});return g}),define('dashboard/views/events/contestUpsellFeaturedUpgrade',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contestUpsellFeaturedUpgrade.htm','payments/module-fixed-amount-payment-modal'],function(a,b,c,d,e,f){function g(b){var c=b.self,d=b.element,e={project_id:c.model.get('data').contestId,featured:'on',fromNewsfeed:'true'},f=a(d.target);a.ajax({type:'POST',url:'/ajax/contest/update.php',data:e,dataType:'json',cache:!1,beforeSend:function(){a(c.el).find('.hint').html(),a('.process-upgrade',c.el).show(),f.hide()},complete:function(){a('.process-upgrade',c.el).hide(),f.show()},success:function(b){if(b.status=='failed'){var d='',e=b.errors[0];a.each(e,function(b,c){a.each(c,function(a,b){d=d+b+'<br />'})}),a(c.el).find('.hint').html('<span class="error-msg">'+d+'</span>')}else b.status=='insufficient_funds'?(a('#btn-contest-upgrade-featured',c.el).attr('disabled',!0),window.location.replace(b.depositUrl)):(b.status=='upgraded'?a('#action_history',c.el).find('.action-state span').html(T_('Contest Already Upgraded')):(_ttref.push(['_setEntrypoint','Contest_UpsellFeatured']),_ttref.push(['_trackEvent','Contest','UpsellFeaturedNewsfeed','Upsell Featured Contest']),_ttref.push(['_clearEntrypoint','Contest'])),c.model.set({state:'upgraded'}),a('#action_history',c.el).show(),a('#upsellFeatured',c.el).remove(),typeof c.model.get('data').contestUrl!='undefined'&&(window.location.href=c.model.get('data').contestUrl))},error:function(b,d,e){a(c.el).find('.hint').html('<span class="error-msg">'+T_('Server Error')+'</span>')}})}var h=d.extend({events:b.extend({},d.prototype.events,{'click #btn-contest-upgrade-featured':'upgradeFeatured'}),compileTemplate:b.template(e),upgradeFeatured:function(a){var b={amount:this.model.get('data').currencyFee.toString().replace(',',''),currencyDetails:this.model.get('data').currencyDetails};f.initModal(b,g,{self:this,element:a})},render:function(){var b=this.model.toJSON();return a(this.el).html(this.compileTemplate(b)),this}});return h}),define('dashboard/views/events/contestExpired',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/contestExpired.htm'],function(a,b,c,d,e,f){var g=(new Date).getTime(),h=d.extend({compileTemplate:b.template(f),render:function(){var b=this.model.toJSON();return b.threeDays=258e3,b.twoWeeks=1204e3,b.milliseconds=g,b.curTimestamp=parseInt(g/1e3)+15,a(this.el).html(this.compileTemplate(b)),this}});return h}),define('dashboard/views/events/winningDesignReadyForReview',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/winningDesignReadyForReview.htm'],function(a,b,c,d,e,f){var g=(new Date).getTime(),h=d.extend({compileTemplate:b.template(f),render:function(){var b=this.model.toJSON();return b.milliseconds=g,b.curTimestamp=parseInt(g/1e3)+15,b.data.autoLockTime=b.data.autoLockTime||1209600,a(this.el).html(this.compileTemplate(b)),this}});return h}),define('dashboard/views/events/contestComplete',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contestComplete.htm','notification/libpersist','text!templates/dashboard/feedback.fixed.project.htm','jquery.autosize','dashboard/lib/feedbackTip'],function(a,b,c,d,e,f,g,h,i){var j=d.extend({events:b.extend({},d.prototype.events,{'click #feedbackButton':'getFeedback','click #cancel':'hideFeedbackBox','click #submit':'submitFeedback','focus #comment':'resetCommentError','click #budget_time p':'checkRadio'}),initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.bind('change',this.renderEvent),b.bindAll(this,'condition')},condition:function(a){return a.get('type')=='contestreviewposted'&&a.get('data').contest_review_id==this.model.get('data').review_id},updateStateValue:'completed',updateOthersState:function(){this.eventViewFactory.setStateOnCondition(this.condition,this.updateStateValue)},contestCompleteCompileTemplate:b.template(e),feedbackFixedProjectCompileTemplate:b.template(g),resetCommentError:function(){a(this.el).find('#comment').removeClass('comment-error')},checkRadio:function(b){a(b.target).find('input').attr('checked','checked')},render:function(){var b=this.model.toJSON();return a(this.el).html(this.contestCompleteCompileTemplate(b)),a(this.el).find('.actions').last().append(this.feedbackFixedProjectCompileTemplate(this.model.toJSON())),this.model.get('data').to_freelancer?(a(this.el).find('#toEmployer').remove(),a(this.el).find('#budget_time').remove(),a(this.el).find('.ns_tip').remove()):a(this.el).find('#toFreelancer').remove(),a(this.el).find('#comment').autosize(),a(this.el).iniatialTipTooltip(),this},showFeedbackBox:function(){a(this.el).find('#feedbackButton').parent().addClass('active'),a(this.el).find('#feedbackBox').show()},hideFeedbackBox:function(){a(this.el).find('#feedbackBox').hide(),a(this.el).find('#feedbackButton').parent().removeClass('active')},submitFeedback:function(b){var c=this,d=!0,e=a(this.el).find('form'),f=this.model.get('data').contest_id.toString(),g=this.model.get('data').review_id.toString(),h=new Array('quality','communication','expertise','professionalism','hire_again'),i=new Array('clarity_spec','communication','payment_prom','professionalism','work_for_again'),j=e.find('[name=descr]').val(),k=this.model.get('data').to_user_id.toString();if(this.model.get('data').to_freelancer)var l=i;else var m=e.find('[name=onbuget]:checked').val(),n=e.find('[name=ontime]:checked').val(),l=h;var o={project_id:g,to_user:k,descr:j,ajax:d};this.model.get('data').to_freelancer||(o.buyer_to_seller=!0),this.model.get('data').to_freelancer||(o.ontime=n,o.onbuget=m),o.type='contest',a.each(l,function(a,b){window[b]=e.find('[name='+b+']:checked').val(),o[b]=window[b]});var p=this.checkFeedback(o);p&&(a(this.el).find('#processing').show(),a(this.el).find('#innerWrapper').hide(),a(c.el).find('#innerWrapper').find('.error-msg').length&&a(c.el).find('#innerWrapper').find('.error-msg').remove(),jq.ajax({type:'post',data:o,dataType:'json',url:'/users/review/onrate.php',success:function(b){if(b.status=='success'){var d='completed';c.actionState(d),c.updateOthersState()}else b.status=='redirect'?window.location.replace(b.error):(a(c.el).find('#processing').hide(),a(c.el).find('#innerWrapper').show(),a(c.el).find('#innerWrapper').append('<span class="error-msg">'+b.error+'</span>'))}}))},checkFeedback:function(b){var c=!0,d=a(this.el).find('.hint-star'),e=a(this.el).find('.hint-comment');return d.empty(),e.empty(),a.each(b,function(a,b){if(typeof b=='undefined')return c=!1,d.append('<span class="error-msg">'+T_('Please rate all criteria')+'</span><br>'),c}),b['descr']==0?(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')):b.descr.length<5&&(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment more than 5 characters in length')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')),c},getFeedback:function(){if(jq(this.el).find('#feedbackBox').is(':visible')){this.hideFeedbackBox();return}jq(this.el).find('.loading').show();var a=this,b=jq(a.el).find('.error-box');b.empty(),jq.ajax({type:'POST',data:{review_id:this.model.get('data').review_id,entry_id:this.model.get('data').entry_id},dataType:'json',url:'/contest/projectAction/getContestFeedback.php',success:function(c){if(!c)b.append('<span class="error-msg">'+T_('An error occured. Please try again.')+'</span><br>');else if(c.status=='success'){var d=c.data.status;if(d=='PENDING'||d=='ACTIVE')a.actionState('completed'),a.updateOthersState();else{var e=a.model.get('data');c.data.id&&(e.review_id=c.data.id,a.model.set({data:e})),a.showFeedbackBox()}}else b.append('<span class="error-msg">'+c.msg+'</span><br>')},complete:function(){jq(a.el).find('.loading').hide()},error:function(){b.append('<span class="error-msg">'+T_('An error occured. Please try again.')+'</span><br>')}})},actionState:function(a){var b=this,c=new f('newsfeed'),d=this.model.attributes.state,e=a;this.model.set({state:e}),this.renderEvent(this.model),b.truncateProjectName()}});return j}),define('dashboard/views/events/contestCompleteSellEntryUpsell',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contest-complete-sell-entry-upsell.htm','text!templates/dashboard/contestEntryCreated.min.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:function(a){var c=b.template(e,a);return c},initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON(),c=b.data.contest;return a(this.el).html(this.compileTemplate(b)),this.loadTopEntries(c),this},loadTopEntries:function(c){var d=this,e=a(this.el).find('.buy-more-entries .gallery');a.ajax({type:'GET',url:'/ajax/contest/getTopEntriesForContest.php',dataType:'json',data:{contestId:c.id},success:function(c){c&&c.entries?(d.removeLoading(),c.entries.length>0?a.each(c.entries,function(a,g){g.hasWinner=c.hasWinner;var h={data:d.cleanEntryData(g),timestamp:!1},i=b.template(f,h);e.prepend(i);var j=e.find('.star');j.rating(),j.rating('select',g.rating),j.rating('readOnly',!0),e.find('.ct_action').hide()}):a(d.el).remove()):a(d.el).remove()},error:function(){a(d.el).remove()}})},cleanEntryData:function(a){return{rating:a.rating,comment:!1,img:a.freelancerLogo,entryId:parseInt(a.id,10),status:a.status,name:a.name,entryUrl:a.entryUrl,entryNumber:a.number,entryS3path:a.s3path,entryThumb:a.thumb,entryThumbName:a.thumb_name,userId:a.userId,userName:a.username,publicName:a.publicName,hasWinner:!0}},removeLoading:function(){a(this.el).find('.loading').remove()}});return g}),define('dashboard/views/events/prizeDispersedEmployer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/prizeDispersedEmployer.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/prizeDispersedFreelancer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/prizeDispersedFreelancer.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},tuncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName()}});return g}),define('dashboard/views/events/contestLockedEmployer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/contestLockedEmployer.htm','notification/libpersist'],function(a,b,c,d,e,f,g){var h=d.extend({compileTemplate:b.template(f),events:b.extend({},d.prototype.events,{'click .unlock':'unlock','click .cancel':'hideAwardBox'}),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','unlock','submitted'),this.confirmation=new e({model:this.model}),this.data=this.model.get('data'),this.confirmation.bind('submitted',this.submitted)},render:function(){a(this.el).html(this.compileTemplate(this.model.toJSON()));var b=T_('Do you want to unlock this contest for <strong><%= currencySign %><%= unlock_fee %> <%= currencyCode %></strong>?',{unlock_fee:this.data.unlock_fee,currencySign:this.data.currencysign,currencyCode:this.data.currencycode});a(this.el).children().children().last().after(this.confirmation.render(b).el),this.confirmation.hide()},hideAwardBox:function(b){a(this.el).find('.unlock').parent().removeClass('active')},unlock:function(b){this.confirmation.toggle(),this.confirmation.isVisible()?a(b.target.parentElement).addClass('active'):a(b.target.parentElement).removeClass('active')},submitted:function(){var b=this,c=this.confirmation;c.hideButtons(),c.showBusy();var d=a(this.el).find('.unlock').parent();jQuery.ajax({type:'POST',data:{project_id:this.data.contest_id,isAjaxCall:1,simpleMessage:'true'},url:'/contest/ajaxUnlockContest.php',dataType:'json',success:function(a){a.status=='success'?b.actionState('unlocked'):(c.displayErrorMessage(a.message),c.hideBusy(),c.setTryAgainButton(),c.showButtons())},error:function(){c.displayErrorMessage(T_('A connection error has occurred.')),c.hideBusy(),c.setTryAgainButton(),c.showButtons()}})},actionState:function(a){var b=this,c=new g('newsfeed'),d=this.model.attributes.state;this.model.set({state:a}),this.renderEvent(),b.truncateProjectName()}});return h}),define('dashboard/views/events/contestLockedFreelancer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/contestLockedFreelancer.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/invoice.acceptedPartial',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/invoice.acceptedPartial.htm'],function(a,b,c,d,e){var f=d.extend({events:b.extend({},d.prototype.events,{'click #viewInvoice':'viewInvoice','click #giveFeedback':'giveFeedback'}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},viewInvoice:function(){var a=this.model.get('data');window.open('/payments/view-invoice.php?invoice_id='+a.invoiceId,'_blank')},giveFeedback:function(){var a=this.model.get('data');window.location='/users/review/rate.php?type=hourly&invoice_id='+a.invoiceId+'&id='+a.id+'&to_user='+a.sellerId}});return f}),define('dashboard/views/events/milestone.updated',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/milestone.updated.htm','notification/libpersist'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{'click #create':'create','click #reject':'showRejectBox','click #btn-reject-milestone-request':'reject','click #btn-cancel-request-rejection':'hideRejectBox'}),compileTemplate:b.template(f),projectNameLineNum:3,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','create','reject')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},create:function(){var b,c;b=this;var d=a(this.el).find('.hint');d.empty(),b.loadingSpinner(),a(this.el).find('#rejectBox').hide();var e=this.model.get('data');c={username:e.userName,amount:e.amount,project:e.id,reason:'partly_payment',currency:e.currencyId,request:e.requestId,csrf_token:getCSRFToken()},a.ajax({type:'GET',url:'/ajax/payment/onnewescrow.php',data:c,dataType:'json',cache:!1,complete:function(){b.loadingSpinner()},success:function(c){c.status=='success'?(d.append('<span class="success-msg">'+T_('You have created the milestone successfully')+' </span><br>'),a(b.el).find('.well').hide(),b.actionState('accept')):(c.msg=='Your balance is insufficient to make this payment.'&&(c.msg+=' <a href = \'/payments/deposit.php\'>'+T_('Deposit funds')+'</a>'),d.append('<span class="error-msg"> '+c.msg+'</span><br>'))}})},showRejectBox:function(){a(this.el).find('.hint').empty(),a(this.el).find('#rejectBox').is(':hidden')?(a(this.el).find('#rejectBox').show(),a(this.el).find('#rejectForm').hide()):a(this.el).find('#rejectBox').hide()},hideRejectBox:function(){a(this.el).find('.hint').empty(),a(this.el).find('#rejectBox').hide(),a(this.el).find('#rejectForm').show()},reject:function(){var b,c;b=this;var d=a(this.el).find('.hint');d.empty(),b.loadingSpinner2();var e=this.model.get('data');c={request_id:e.requestId,reason:a(this.el).find('.ns_half').val()},a.ajax({type:'GET',url:'/ajax/payment/on-reject-milestone-request.php',data:c,dataType:'json',cache:!1,complete:function(){b.loadingSpinner2()},success:function(c){c.success==1?(d.append('<span class="success-msg">'+T_('You have reject the milestone successfully')+'</span><br>'),b.trigger('rejected',c),b.hideRejectBox(),a(b.el).find('.well').hide(),b.actionState('reject')):d.append('<span class="error-msg">'+c.errors+' </span><br>')}})},loadingSpinner:function(){var b=a(this.el).find('#create'),c=a(this.el).find('#reject'),d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(b.hide().after(e),c.hide())},loadingSpinner2:function(){var b=a(this.el).find('#btn-reject-milestone-request'),c=a(this.el).find('#btn-cancel-request-rejection'),d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(b.hide().after(e),c.hide())},actionState:function(a){var b=this,c=new g('newsfeed');c.actionstate(b.model.get('id'),a,function(){},function(){},this),this.model.attributes.state=a,this.renderEvent(this.model),b.truncateProjectName()},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName({preferLineNum:this.projectNameLineNum})}});return h}),define('dashboard/views/events/invoice.paid.part',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/invoice.paid.part.htm','notification/libpersist'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click .accept':'acceptPartialPaymentConfirm','click #accept':'acceptPayment','click #cancel':'hideConfirm'}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.get('data');return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},acceptPartialPaymentConfirm:function(){a(this.el).find('.alert-error').hide(),a(this.el).find('#partialPaymentConfirm').is(':visible')==1?(a(this.el).find('#accept-payment').removeClass('active'),a(this.el).find('#partialPaymentConfirm').hide()):(a(this.el).find('#accept-payment').addClass('active'),a(this.el).find('#partialPaymentConfirm').show())},loadingSpinner:function(){var b=a(this.el).find('#accept'),c=b.next(),d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(c.hide().after(e),b.hide())},acceptPayment:function(){var b=this;a(b.el).find('.hint').empty(),b.loadingSpinner();var c=this.model.get('data');a.ajax({type:'POST',data:{action:'acceptPartial',invoice_id:c.invoiceId},url:'/ajax/payment/on-request-payment.php',dataType:'json',cache:!1,complete:function(){b.loadingSpinner()},success:function(c){var d=a.parseJSON(c);c.success==1?b.actionState('accept'):a(b.el).find('.hint').append('<span class="error-msg">'+c.errors[0]+'<span>')}})},hideConfirm:function(){this.acceptPartialPaymentConfirm()},actionState:function(a){var b=this,c=new f('newsfeed');this.model.set({state:a}),this.renderEvent(),b.truncateProjectName()}});return g}),define('dashboard/views/events/project.review.pending',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/project.review.pending.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(f),events:b.extend({},d.prototype.events,{'click #send-it-live':'showSendItLiveConfirmation'}),projectNameLineNum:4,initialize:function(a){this.constructor.__super__.initialize.call(this),b.bindAll(this,'render','submitted'),this.confirmation=new e({model:this.model}),this.confirmation.bind('submitted',this.submitted)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).children().children().last().after(this.confirmation.render(T_('Send your project live now for <strong><span id="sendlive_fee"></span></strong>?')).el),this.confirmation.hide(),this.setSendItLiveFee(),this},setSendItLiveFee:function(){var b,c;b=this;var d=this.model.get('sendLiveFee');if(typeof d!='undefined'){d==0?a(b.el).find('send-it-live').hide():a(b.el).find('#sendlive_fee').text(d);return}c={id:b.model.get('data').id},a.ajax({type:'GET',url:'/ajax/get_priority_fee_values.php',data:c,dataType:'json',cache:!1,success:function(c){typeof c.err=='undefined'?(a(b.el).find('#sendlive_fee').text(c.fee),b.model.set({sendLiveFee:c.fee})):(a(b.el).find('send-it-live').hide(),b.model.set({sendLiveFee:!1}))}})},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName({preferLineNum:this.projectNameLineNum})},submitted:function(){var b=a('<div></div>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');this.confirmation.hideButtons(),this.confirmation.hideErrorMessage(),a(this.el).find('#confirmation-message').after(b);var c,d;c=this,d={action:'upgradeJSON',btn_priority:!0,id:c.model.get('data').id},a.ajax({type:'GET',url:'/buyers/trial.php',data:d,dataType:'json',cache:!1,success:function(b){a(c.el).find('.loading').text(''),b.status&&b.status=='success'?(c.model.set({state:'live'}),c.renderEvent(this.model)):b.status&&b.status=='failed'?(c.confirmation.showButtons(),c.confirmation.displayErrorMessage(b.message)):(c.confirmation.showButtons(),c.confirmation.displayErrorMessage(T_('Failed to contact server, please try reloading the page.')))},error:function(){a(c.el).find('.loading').text(''),c.confirmation.showButtons(),c.confirmation.displayErrorMessage(T_('Failed to contact server, please try reloading the page.'))}})},showSendItLiveConfirmation:function(b){this.confirmation.toggle();var c=a(b.target).parent();a(this.confirmation.el).is(':visible')?c.addClass('active'):c.removeClass('active')}});return g}),define('dashboard/views/events/pmb.min',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','notification/libpersist','text!templates/dashboard/pmb.min.htm','dashboard/lib/seeMore'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),preferLineNum:3,compileTemplateMin:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a)},render:function(){return a(this.el).html(this.compileTemplateMin(this.model.toJSON())),this},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length,f,g,h,i;for(d;d<e;d++){f=a(c[d]);var j=f.parent();j.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()}});return h}),define('dashboard/views/events/welcome',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/welcome.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.accountSetup=!1,a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/invoiceFeedback',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','notification/libpersist','text!templates/dashboard/invoiceFeedback.htm','text!templates/dashboard/feedback.fixed.project.htm','jquery.autosize','dashboard/lib/feedbackTip'],function(a,b,c,d,e,f,g,h,i){var j=d.extend({events:b.extend({},d.prototype.events,{'click #feedbackButton':'showFeedbackBox','click #cancel':'hideFeedbackBox','click #submit':'submitFeedback','keydown #tip-amount':'onlyAllowPositiveIntAmount','mouseover #tipArea':'clickableIn','mouseout #tipArea':'clickableOut','click #tipArea':'tipClick','focus #comment':'resetCommentError','click #budget_time p':'checkRadio'}),initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.bind('change',this.renderEvent),b.bindAll(this,'condition')},condition:function(a){return a.get('type')=='reviewpostednew'&&a.get('data').invoice_id==this.model.get('data').invoiceId},updateStateValue:'complete',updateOthersState:function(){this.eventViewFactory.setStateOnCondition(this.condition,this.updateStateValue)},invoiceFeedbackTemplate:b.template(f),feedbackFixedProjectCompileTemplate:b.template(g),resetCommentError:function(){a(this.el).find('#comment').removeClass('comment-error')},checkRadio:function(b){a(b.target).find('input').attr('checked','checked')},clickableIn:function(b){var c=this.el.find('#tipArea');a(c).addClass('alert-info')},clickableOut:function(b){var c=this.el.find('#tipArea'),d=this.el.find('input:checkbox');d.is(':checked')||a(c).removeClass('alert-info')},tipClick:function(b){var c=this.el.find('input:checkbox'),d=typeof b;if(d!='undefined'){var e=a(b.target).not('#chkbx_tip')[0];e&&(a(b.target).not('#tip-amount')[0]?c.attr('checked',c.is(':checked')?!1:!0):c.attr('checked',!0))}else this.clickableIn(),c.attr('checked',!0)},render:function(){a(this.el).html(this.invoiceFeedbackTemplate(this.model.toJSON()));if(typeof this.model.attributes.data.amount=='undefined'||this.model.attributes.data.amount==0||this.model.attributes.data.amount==null)this.model.attributes.data.amount=50;return a(this.el).find('.actions').last().append(this.feedbackFixedProjectCompileTemplate(this.model.toJSON())),this.model.get('data').sellerId==getUserIdfromCookie()?(a(this.el).find('#toEmployer').remove(),a(this.el).find('#budget_time').remove(),a(this.el).find('.ns_tip').remove()):a(this.el).find('#toFreelancer').remove(),a(this.el).find('#comment').autosize(),a(this.el).iniatialTipTooltip(),this},showFeedbackBox:function(){a(this.el).find('#feedbackBox').is(':visible')?this.hideFeedbackBox():(a(this.el).find('#feedbackButton').parent().addClass('active'),a(this.el).find('#feedbackBox').show())},hideFeedbackBox:function(){a(this.el).find('#feedbackBox').hide(),a(this.el).find('#feedbackButton').parent().removeClass('active')},submitFeedback:function(b){var c=this,d=!0,e=a(this.el).find('form'),f=this.model.get('data').id.toString(),g=new Array('quality','communication','expertise','professionalism','hire_again'),h=new Array('clarity_spec','communication','payment_prom','professionalism','work_for_again'),i=e.find('[name=descr]').val();if(this.model.get('data').sellerId==getUserIdfromCookie())var j=this.model.get('data').accountId.toString(),k=h;else var j=this.model.get('data').sellerId.toString(),k=g,l=e.find('[name=onbuget]:checked').val(),m=e.find('[name=ontime]:checked').val();var n=e.find('[name=chkbx_tip]').is(':checked'),o=e.find('[name=tip-amount]').val(),p={project_id:f,to_user:j,descr:i,ajax:d};this.model.get('data').sellerId!=getUserIdfromCookie()&&(p.buyer_to_seller=!0),this.model.get('data').sellerId!=getUserIdfromCookie()&&(p.ontime=m,p.onbuget=l),n==1&&(p.chkbx_tip='on',p.tip_amount=o),a.each(k,function(a,b){window[b]=e.find('[name='+b+']:checked').val(),p[b]=window[b]}),p.type='hourly',p.invoice_id=this.model.get('data').invoiceId;var q=this.checkFeedback(p),r=a(this.el).find('.hint-tip');q&&(a(this.el).find('#processing').show(),a(this.el).find('#innerWrapper').hide(),jq.ajax({type:'post',data:p,dataType:'json',url:'/users/review/onrate.php',success:function(b){if(b.status=='success'){var d='completed';c.actionState(d),c.updateOthersState()}else b.status=='redirect'?window.location.replace(b.error):(a(c.el).find('#processing').hide(),a(c.el).find('#innerWrapper').show(),r.empty(),r.show(),r.append('<span class="error-msg">'+b.error+'</span><br>'))}}))},checkFeedback:function(b){var c=!0,d=a(this.el).find('.hint-star'),e=a(this.el).find('.hint-comment');d.empty(),e.empty(),a.each(b,function(a,b){if(typeof b=='undefined')return c=!1,d.append('<span class="error-msg">'+T_('Please rate all criteria')+'</span><br>'),c});var f=a(this.el).find('#tipcheck').data('status');return f=='checking'&&a(this.el).find('#chkbx_tip').is(':checked')?c=!1:f=='fail'&&a(this.el).find('#chkbx_tip').is(':checked')&&(c=!1),b['descr']==0?(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')):b.descr.length<5&&(c=!1,e.append('<span class="error-msg">'+T_('Please provide a comment more than 5 characters in length')+'</span><br>'),e.prev().find('textarea').addClass('comment-error')),c},onlyAllowPositiveIntAmount:function(b){var c=a(this.el).find('#tip-amount').val();if(b.keyCode==48||b.keyCode==96||b.keyCode==46||b.keyCode==8)if(c.length==0){b.preventDefault();return}if(b.keyCode==190||b.keyCode==110){if(c.length==0){b.preventDefault();return}if(c.indexOf('.')!=-1){b.preventDefault();return}}if(b.keyCode!=46&&b.keyCode!=8)if(b.keyCode<95){if(b.keyCode<48||b.keyCode>57){b.preventDefault();return}}else if(b.keyCode<96||b.keyCode>105&&b.keyCode!=110&&b.keyCode!=190){b.preventDefault();return}if(b.keyCode==13){b.preventDefault();return}this.tipClick()},actionState:function(a){var b=this,c=new e('newsfeed'),d=this.model.attributes.state,f=a;this.model.set({state:f}),this.renderEvent(this.model),b.truncateProjectName()}});return j}),define('dashboard/views/events/dispute.newMessage',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/dispute.newMessage.htm','dashboard/lib/seeMore'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(e),preferLineNum:2,events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl.indexOf('/projects/.html')>=0&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()},initialSeeMore:function(){var b=a(this.el).find('.descr-long');b.initialSeeMore({preferLineNum:this.preferLineNum})}});return g}),define('dashboard/views/events/dispute.makeOffer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/dispute.makeOffer.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a)},render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl.indexOf('/projects/.html')>=0&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/dispute.acceptOffer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/dispute.acceptOffer.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/membership.upgradeToNonFreeMembership',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/membership.upgradeToNonFreeMembership.htm','text!templates/dashboard/membership.upgradeToNonFreeMembership-v2.htm','notification/libpersist'],function(a,b,c,d,e,f,g){var h=d.extend({compileTemplate:b.template(e),compileTemplateV2:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return this.model.get('data').membership_mid?a(this.el).html(this.compileTemplateV2(this.model.toJSON())):a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return h}),define('dashboard/views/events/project.draft.post',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/project.draft.post.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/projectAwaitingFeedback',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/projectAwaitingFeedback.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/inviteFriends',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/inviteFriends.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.referral_bonus={amount:referralBonusAmount,currency_sign:referralBonusCurrencySign,currency_code:referralBonusCurrencyCode},a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/customAdminNotification',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/customAdminNotification.htm','text!templates/dashboard/customAdminNotification/connectFacebook.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(e),ConnectFacebookTemplate:b.template(f),render:function(){var b=this.model.get('data').noti_description;switch(b){case'facebook':this.facebookNotification();break;default:a(this.el).html(this.compileTemplate(this.model.toJSON()))}return this},facebookNotification:function(){this.model.get('data').noti_description=='facebook'&&(typeof this.model.get('data').initialised=='undefined'?(this.getFacebookConnecter(),a(this.el).html(this.ConnectFacebookTemplate(this.model.toJSON()))):a(this.el).html(this.ConnectFacebookTemplate(this.model.toJSON())))},getFacebookConnecter:function(){var b=this;this.model.get('data').subtype=this.model.get('data').noti_description;var c={};a.ajax({type:'POST',url:'/ajax/facebook/getConnecter.php',data:c,cache:!1,dataType:'json',complete:function(){b.removeLoading()},success:function(c){a('.facebook',a(b.el)).html(c.fb_connect),c.facepile?a('#facepile').change(b.storeFacepile()):b.model.get('data').initialised=c.fb_connect},error:function(){b.remove()}})},removeLoading:function(){a(this.el).find('#loadingAll').remove()},storeFacepile:function(){var b=this,c=a('#facepile',a(this.el)).children().attr('fb-xfbml-state')=='rendered';if(!c)setTimeout(function(){b.storeFacepile()},1500);else{var d=a('#facepile',a(this.el)).parent().clone(),e=a('#facepile',a(this.el)).height()+20,f=a('#facepile',a(d)).css('height',e+'px');f=d[0];var g=this.nodeToString(f);this.model.get('data').initialised=g}},nodeToString:function(a){var b=document.createElement('div');b.appendChild(a.cloneNode(!0));var c=b.innerHTML;return b=a=null,c}});return g}),define('dashboard/views/events/contestEntryCreated.min',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','notification/libpersist','text!templates/dashboard/contestEntryCreated.min.htm'],function(a,b,c,d,e,f){var g=d.extend({compileTemplateMin:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a)},render:function(){a(this.el).html(this.compileTemplateMin(this.model.toJSON()));var b=this.model.get('data').rating;if(b!=null){var c=a(this.el).find('input');a.each(c,function(c,d){a(d).attr('value')<=b&&(a(d).attr('checked','checked'),a(a(d).parent().find('input')[a(d).attr('value')-1]).addClass('star-rating-on'))})}return this}});return g}),define('dashboard/views/events/generic',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/generic.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.accountSetup=!1,a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/contest.invited',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contest.invited.htm','dashboard/lib/seeMore'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),preferLineNum:3,compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},initialSeeMore:function(){var b=a(this.el).find('.descr-long');b.initialSeeMore({preferLineNum:this.preferLineNum})},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()}});return g}),define('dashboard/views/events/kyc',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/kyc.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/membership.bidsRunningOut',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/membership.bidsRunningOut.htm','notification/libpersist'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click #show-upgrade':'show_upgrade','click #hide-upgrade':'hide_upgrade'}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},show_upgrade:function(a){var b=jQuery(a.currentTarget),c=b.parents('.news-list-wrapper').find('.confirmation');c.show()},hide_upgrade:function(a){var b=jQuery(a.currentTarget);b.closest('.confirmation').hide()}});return g}),define('dashboard/views/events/counterOffer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/counterOffer.htm','notification/libpersist','dashboard/lib/seeMore'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{'click #acceptBtn':'acceptCounterOffer','click #rejectBtn':'rejectCounterOffer'}),compileTemplate:b.template(e),projectNameLineNum:3,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','acceptCounterOffer','rejectCounterOffer')},render:function(){var b=this.model.get('data'),c=this.model.toJSON();return c.data&&c.data.linkUrl.indexOf('/projects/.html')>=0&&(c.data.linkUrl='/projects/'+c.data.id+'.html'),a(this.el).html(this.compileTemplate(c)),this},acceptCounterOffer:function(){var b=this,c=this.model.get('data'),d=c.bid.id,e=a(this.el).find('#acceptBtn'),f=a(this.el).find('#rejectBtn');this.hintPlaceClear(),jq.ajax({type:'post',data:{bidID:d,acceptSellerCounterOfferToken:acceptSellerCounterOfferToken},dataType:'json',url:base_url+'/ajax/hireme/counteroffer/accept-seller-counter-offer.php',beforeSend:function(){b.loadingSpinner(e,f)},success:function(c){c.status=='success'?(console.log(c),b.actionState('accept')):(b.loadingSpinner(e,f),a(b.el).find('.hint').append('<span class="error-msg">'+T_('Unable to accept the seller counter offer')+'<br>'+c.errors.join('<br />')+'</span>'))},error:function(){b.loadingSpinner(e,f),a(b.el).find('.hint').append('<span class="error-msg">'+T_('Server Error')+'</span>')}})},rejectCounterOffer:function(){var b=this,c=this.model.get('data'),d=c.bid.id,e=a(this.el).find('#acceptBtn'),f=a(this.el).find('#rejectBtn');this.hintPlaceClear(),jq.ajax({type:'post',data:{bidID:d},dataType:'json',url:base_url+'/ajax/hireme/counteroffer/reject-seller-counter-offer.php',beforeSend:function(){b.loadingSpinner(e,f)},success:function(c){c.status=='success'?(console.log(c),b.actionState('reject')):(b.loadingSpinner(e,f),a(b.el).find('.hint').append('<span class="error-msg">'+T_('Unable to reject the seller counter offer')+'<br>'+c.errors.join('<br />')+'</span>'))},error:function(){b.loadingSpinner(e,f),a(b.el).find('.hint').append('<span class="error-msg">'+T_('Server Error')+'</span>')}})},loadingSpinner:function(b,c){var d=a(this.el).find('.loading'),e=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');d.length?(d.remove(),b.show(),c.show()):(b.hide().after(e),c.hide())},hintPlaceClear:function(){var b=a(this.el).find('.hint');b.empty()},liveChat:function(a){var b=this.model.get('data');window.liveChat.startChat([b.userId],'private_chat','dashboard-events-counteroffer',{type:'project',id:b.id})},actionState:function(a){var b=this,c=new f('newsfeed');this.model.set({state:a}),this.renderEvent(this.model),b.truncateProjectName()},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName({preferLineNum:this.projectNameLineNum})}});return h}),define('dashboard/views/events/suggestionForFreelancerAfterReceiveReview',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/suggestionForFreelancerAfterReceiveReview.htm','dashboard/lib/seeMore'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click a':'filterDisabledClick'}),projectNameLineNum:3,compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this;return a(this.el).html(this.compileTemplate(this.model.toJSON())),a.ajax({url:'/ajax/hireme/checkFreelancerInDirectory.php',data:{freelancerId:getUserIdfromCookie()},type:'post',dataType:'json',success:function(c){c.status=='success'&&(c.inDirectory?(a(b.el).find('#inDirectory').find('.content').addClass('done'),a(b.el).find('#inDirectory').find('#completeProfileTaskLink').hide(),a(b.el).find('#inDirectory').find('#completeProfileTaskSuccess').show(),a(b.el).find('li.news-item').removeAttr('disabled').css('opacity',1)):a(b.el).find('li.news-item[disabled] a.action').tooltip({title:T_('Complete your profile first'),placement:'bottom',container:'.getMoreWorkList'}))}}),this},filterDisabledClick:function(b){var c=a(b.target);typeof c.parents('li.news-item').attr('disabled')!='undefined'&&b.preventDefault()},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName({preferLineNum:this.projectNameLineNum})}});return g}),define('dashboard/views/events/upsellIntro',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/upsellIntro.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/upsellBasicTrial',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/upsellBasicTrial.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/upsellPlusTrial',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/upsellPlusTrial.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/tombstone',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/tombstone.htm'],function(a,b,c,d,e){var f=d.extend({events:b.extend({},d.prototype.events,{'click .tombstone-img-container':'changeSlide','mouseenter .item':'pause','mouseleave .item':'resume','slide.bs.carousel #tombstoneCarousel':'prepareItem','mouseenter .tombstone-img-container, .item.active':'hoverThumb','mouseleave .tombstone-img-container, .item.active':'exitThumb'}),compileTemplate:b.template(e),clickedIndex:!1,currentIndex:0,numProjects:9,hoverlock:!1,hoverThumb:function(b){a(b.currentTarget).addClass('hover')},exitThumb:function(b){a(b.currentTarget).removeClass('hover')},initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render'),this.model.bind('change:data',this.render,this),this.model.bind('change',this.renderEvent),this.normalFlow=!0,this.paused=!1,this.started=!1,this.lastPause=(new Date).getTime()},render:function(){typeof this.model.get('data')=='undefined'&&this.loadContent(),a(this.el).html(this.compileTemplate(this.model.toJSON())),this.carousel=this.el.find('#tombstoneCarousel'),this.gallery=this.el.find('.tombstone-gallery');if(typeof this.carousel!='undefined'){this.startupCarousel();var b=this;a(window).blur(function(){b.pause()}),a(window).focus(function(){b.resume()}),a(this.el).find('.tombstone-gallery, .tombstone-details-container').css('visibility','visible'),a(this.el).find('.profile-pic-wrapper').removeClass('hide')}return this},loadContent:function(){var b=this;a.ajax({url:'/tombstone/loadNewsfeedProjects.php',data:{count:this.numProjects},type:'post',dataType:'json',success:function(c){typeof c!='undefined'&&c!==null&&c.status==='success'?(c.action_text=T_('See more projects'),c.action_link='/jobs/',c.title=T_('Recent projects completed at Freelancer.com.'),b.model.set({data:c}),setTimeout(function(){b.adjustDisplay(0),b.fixGrayscale()},1e3)):a(b.el).hide()},error:function(){a(b.el).hide()}})},changeSlide:function(b){var c=a(b.currentTarget).data('index');this.clickedIndex=c,this.pauseCarousel(),this.carousel.carousel(c)},pauseCarousel:function(){this.paused===!1&&(this.carousel.carousel('pause'),this.normalFlow=!1,this.paused=!0),this.lastPause=(new Date).getTime()},pause:function(){this.hoverlock=!0,this.pauseCarousel()},resume:function(){this.hoverlock=!1},startupCarousel:function(){if(this.started===!1){var a=this;a.carousel.carousel({interval:36e5}),setInterval(function(){a.paused===!1&&a.hoverlock===!1?a.carousel.carousel('next'):a.paused===!0&&(new Date).getTime()-5e3>a.lastPause&&(a.normalFlow=!0,a.paused=!1)},5e3),a.started=!0}},prepareItem:function(){this.normalFlow===!1?this.currentIndex=this.clickedIndex:this.currentIndex===this.numProjects-1?this.currentIndex=0:this.currentIndex++,this.adjustDisplay(this.currentIndex),this.fixGrayscale()},adjustDisplay:function(a){a===this.numProjects&&(a=0);var b=this.carousel.find('[data-index=\''+a+'\']').find('.project-feedback-container');this.verticalAlign(b)},verticalAlign:function(a){var b=a.height(),c=a.parent().height(),d=(c-b)/2;a.css('margin-top',d)},fixGrayscale:function(){this.gallery.find('img').addClass('grayscale').parent().removeClass('active'),this.gallery.find('[data-index=\''+this.currentIndex+'\'] img').removeClass('grayscale').parent().addClass('active')}});return f}),define('dashboard/views/events/upsellFeatureUpgrade',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/upsellFeatureUpgrade.htm','payments/module-fixed-amount-payment-modal'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click #btn-upgrade-featured':'upgradeFeatured'}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','upgradeFeatured')},upgradeFeatured:function(b){var c={amount:this.model.get('data').featured_price,currencyDetails:this.model.get('data').currencyDetails};f.initModal(c,function(c){var d=c.self,e={id:d.model.get('data').projectId,csrf_token:getCSRFToken(),data:{}};e.data.featured='on';var f=a(b.target);a.ajax({type:'POST',url:'/ajax/buyer/onupgrade.php',data:e,dataType:'json',cache:!1,beforeSend:function(){a(d.el).find('.hint').html('');var b=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'"><span class="processing-text">'+T_('Processing...')+'</span></img>');f.before(b),f.hide()},complete:function(){a('.loading').remove(),f.show()},success:function(b){b.status=='failed'?a(d.el).find('.hint').append('<span class="error-msg">'+b.error+'<span>'):b.status=='insuffunds'?(window.location.replace(b.depositLink),a('#btn-upgrade-featured').attr('disabled',!0)):(d.model.set({state:'upgraded'}),a('#action_history',this.el).show(),a('#content',this.el).remove(),window.location.href='/projects/'+d.model.get('data').seoUrl+'.html#featuredCongrats')},error:function(b,c,e){a(d.el).find('.hint').append('<span class="error-msg">'+T_('Server Error')+'</span>')}})},{self:this})},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/upsellAssistedUpgrade',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/upsellAssistedUpgrade.htm','payments/module-fixed-amount-payment-modal'],function(a,b,c,d,e,f){var g=function(a){window._t.push(['user_action',{section:'ProjectUpgrade',subsection:'Dashboard',action:'click',label:a.label,reference:'project_id',reference_id:a.project_id,name:'Upgrade Type',value:'recruiter'}])},h=d.extend({events:b.extend({},d.prototype.events,{'click #btn-upgrade-assisted':'upgradeAssisted'}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','upgradeAssisted')},upgradeAssisted:function(a){g({label:'submit',project_id:this.model.get('data').projectId});if(this.model.get('data').freeAssisted){i({self:this,events:a});return}var b={amount:this.model.get('data').assisted_price,currencyDetails:this.model.get('data').currencyDetails,chargeDetails:[{label:'Recruiter',amount:this.model.get('data').assisted_price}],includesGST:this.model.get('data').withGST,headingSubtext:T_('Our recruiters personally review your proposals saving you time vetting freelancers. Make your life easier by getting us to find you a great match.')};f.initModal(b,i,{self:this,events:a},g,{label:'cancel_payment',project_id:this.model.get('data').projectId},!1,!1,!1,g,{label:'close',project_id:this.model.get('data').projectId},!1,!0)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),_t.push(['user_action',{section:'ProjectUpgrade',subsection:'Dashboard',action:'view',label:'View',reference:'project_id',reference_id:this.model.get('data').projectId,name:'Upgrade Type',value:'recruiter'}]),this}}),i=function(b){var c=b.self,d=b.events,e={id:c.model.get('data').projectId,csrf_token:getCSRFToken(),data:{}};e.data.assisted='on';var f=a(d.target);g({label:'confirm_payment',project_id:c.model.get('data').projectId}),a.ajax({type:'POST',url:'/ajax/buyer/onupgrade.php',data:e,dataType:'json',cache:!1,beforeSend:function(){a(c.el).find('.hint').html('');var b=a('<span></span>').addClass('loading').html('<img src="'+cdn_url('/img/dashboard-loading.gif?v=ca89c085fa674d383c23b0d41a0a8ace&amp;m=6','//')+'" /><span class="processing-text">'+T_('Processing...')+'</span>');f.before(b),f.hide()},complete:function(){a('.loading').remove(),f.show()},success:function(b){b.status=='failed'?a(c.el).find('.hint').append('<span class="error-msg">'+b.error+'<span>'):b.status=='insuffunds'?(window.location.replace(b.depositLink),a('#btn-upgrade-assisted').attr('disabled',!0)):(c.model.set({state:'upgraded'}),a('#action_history',this.el).show(),a('#content',this.el).remove(),window.location.href='/projects/'+c.model.get('data').seoUrl+'.html#assistedCongrats')},error:function(b,d,e){a(c.el).find('.hint').append('<span class="error-msg">'+T_('Server Error')+'</span>')}})};return h}),define('dashboard/views/events/tombstoneNotiEmployer.min',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/tombstoneNotiEmployer.min.htm'],function(a,b,c,d,e){var f=d.extend({events:b.extend({},d.prototype.events,{}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/tombstoneNotiFreelancer.min',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/tombstoneNotiFreelancer.min.htm'],function(a,b,c,d,e){var f=d.extend({events:b.extend({},d.prototype.events,{}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/communityPromoNoti',['jquery-wrapper','underscore-wrapper','dashboard/views/events/event','text!templates/dashboard/communityPromoNoti.htm'],function(a,b,c,d){var e=c.extend({events:b.extend({},c.prototype.events,{}),compileTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return e}),define('dashboard/views/events/expertsPromoNoti',['jquery-wrapper','underscore-wrapper','dashboard/views/events/event','text!templates/dashboard/expertsPromoNoti.htm'],function(a,b,c,d){var e=c.extend({events:b.extend({},c.prototype.events,{}),compileTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return e}),define('dashboard/views/events/membership.firstEarning',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/membership.firstEarning.htm','notification/libpersist'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/serviceStatusChanged',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/serviceSubmitted.htm','text!templates/dashboard/serviceApproved.htm','text!templates/dashboard/serviceRejected.htm','text!templates/dashboard/serviceClosed.htm'],function(a,b,c,d,e,f,g,h){var i=d.extend({initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.get('subCollection').bind('add',this.renderMin,this),b.bindAll(this,'render')},render:function(){return a(this.el).html('<div id="service-status-changed"></div>'),this.renderMin(this.model),this},renderMin:function(c){var d=c.toJSON(),i=d.data.action,j;d.data.base_url=window.location.protocol+'//'+window.location.host;switch(i){case'created':case'updated':j=e;break;case'approved':j=f;var k=d.data.service_name+' '+d.data.base_url+d.data.service_url+' #freelancer #service';d.data.tweet_status=encodeURIComponent(k);break;case'rejected':j=g;break;case'closed':j=h}var l=b.template(j);a(this.el).find('#service-status-changed').html(l(d)),c.isLiveNotification&&this.markThisNotificationUnread()}});return i}),define('dashboard/views/events/serviceProjectPostedSeller.min',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/serviceProjectPostedSeller.min.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){var c=this.model.toJSON(),d=parseInt(typeof c.data.days_remaining=='undefined'?c.data.project_duration:c.data.days_remaining,10);d===0?c.data.due_text=T_('due today'):d===1?c.data.due_text=T_('due in 1 day'):d>1?c.data.due_text=T_('due in <[- days ]> days',{days:d}):d===-1?c.data.due_text=T_('due 1 day ago'):d<-1&&(d*=-1,c.data.due_text=T_('due <[- days ]> days ago',{days:d}));var e=[];return c.data.project_milestones?b.each(c.data.project_milestones,function(a){e.push(a.description)}):e=T_('Basic Package'),c.data.milestones=e,a(this.el).html(this.compileTemplate(c)),this}});return f}),define('dashboard/views/events/serviceProjectPostedBuyer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/serviceProjectPostedBuyer.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/serviceProjectEndingSeller',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/serviceProjectEndingSeller.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return typeof b.data.bid_id=='undefined'&&(b.data.bid_id=''),a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/serviceProjectEndedSeller',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/serviceProjectEndedSeller.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/serviceProjectEndedBuyer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/serviceProjectEndedBuyer.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return typeof b.data.bid_id=='undefined'&&(b.data.bid_id=''),a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/sitesListingStatusChanged',['jquery-wrapper','underscore-wrapper','dashboard/views/events/event','text!templates/dashboard/sitesListingDraft.htm','text!templates/dashboard/sitesListingActivated.htm','text!templates/dashboard/sitesListingReserveAchieved.htm','text!templates/dashboard/sitesListingReserveAchievedBidder.htm','text!templates/dashboard/sitesListingClosing.htm','text!templates/dashboard/sitesListingClosingBidder.htm','text!templates/dashboard/sitesListingClosed.htm','text!templates/dashboard/sitesListingClosedBidder.htm','text!templates/dashboard/sitesListingCompleted.htm','text!templates/dashboard/sitesListingCompletedBidder.htm','text!templates/dashboard/sitesBinRejected.htm','text!templates/dashboard/sitesOutbid.htm','text!templates/dashboard/sitesListingFundsReceived.htm','text!templates/dashboard/sitesListingFundsReleased.htm','text!templates/dashboard/sitesListingFundsReleasedBidder.htm','text!templates/dashboard/sitesListingFeedbackReminder.htm','text!templates/dashboard/sitesListingFeedbackReminderBidder.htm'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=c.extend({wrapper:null,templates:{draft:d,activated:e,reserve_achieved:f,reserve_achieved_bidder:g,closing:h,closing_bidder:i,closed:j,closed_bidder:k,completed:l,completed_bidder:m,bin_rejected:n,outbid:o,funds_received:p,funds_released:q,funds_released_bidder:r,feedback_reminder:s,feedback_reminder_bidder:t},initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.get('subCollection').bind('add',this.renderMin,this),b.bindAll(this,'render')},render:function(){var b='sites-listing-status-changed';return a(this.el).html('<div id="'+b+'"></div>'),this.wrapper=a(this.el).find('#'+b),this.renderMin(this.model),this},renderMin:function(a){var c=a.toJSON(),d=this.templates[c.data.listing.status];if(d){c.data.listing.bidder&&(c.data.listing.bidder_name=c.data.listing.bidder.username),c.data.listing.seller&&(c.data.listing.seller_name=c.data.listing.seller.username);var e=b.template(d),f=e(c);this.wrapper.html(f)}a.isLiveNotification&&this.markThisNotificationUnread()}});return u}),define('dashboard/views/events/sitesBinCreated',['jquery-wrapper','underscore-wrapper','dashboard/views/events/event','text!templates/dashboard/sitesBinCreated.htm','sites/bin'],function(a,b,c,d,e){var f=c.extend({compileTemplate:b.template(d),wrapper:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.get('subCollection').bind('add',this.renderMin,this),b.bindAll(this,'render')},render:function(){var b='sites-bin-created-'+this.model.id;return a(this.el).html('<div id="'+b+'"></div>'),this.wrapper=a(this.el).find('#'+b),this.renderMin(this.model),this},renderMin:function(a){var b=a.toJSON(),c={id:b.data.listing.id,url:b.data.listing.url,buy_now_price:b.data.bid.fmt_price};this.wrapper.html(this.compileTemplate(b)),a.isLiveNotification&&this.markThisNotificationUnread(),e.init('#'+this.wrapper.attr('id')+' .sites-bin-modal-trigger',c,sitesRespondToBinToken)}});return f}),define('dashboard/views/events/sitesBidCreated',['jquery-wrapper','underscore-wrapper','dashboard/views/events/event','text!templates/dashboard/sitesBidCreated.htm'],function(a,b,c,d){var e=c.extend({compileTemplate:b.template(d),wrapper:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.get('subCollection').bind('add',this.renderMin,this),b.bindAll(this,'render')},render:function(){var b='sites-bid-created-'+this.model.id;return a(this.el).html('<div id="'+b+'"></div>'),this.wrapper=a(this.el).find('#'+b),this.renderMin(this.model),this},renderMin:function(b){var c=this,d=b.toJSON();a.ajax({url:'/ajax/sites/getBidListingInfo.php',data:{id:d.data.listing.id,hash:d.data.listing.hash},dataType:'json',success:function(a){a&&a.result==='success'?(d.data.listing.current_price=a.listing_price,d.data.listing.status_text=a.listing_status,d.data.bid.status_text=a.bid_status,c.wrapper.html(c.compileTemplate(d))):c.renderError(d,a)},error:function(){c.renderError(d)},complete:function(){b.isLiveNotification&&c.markThisNotificationUnread()}})},renderError:function(a,b){a.data.error=!0,this.wrapper.html(this.compileTemplate(a))}});return e}),define('dashboard/views/events/activateFreelancer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','qtsbinds','text!templates/dashboard/activateFreelancer.htm'],function(a,b,c,d,e,f){var g=d.extend({ajaxLoading:!1,compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return a(this.el).html(this.compileTemplate(b)),e.init({section:'ActivateFreelancerDashboard',action:'click'}),e.bind('.activateFreelancerVerifyEmail',{label:'NewsFeedTasks',eventName:'newsfeed_welcome_freelancer',target:'verifyEmail'}),e.bind('.activateFreelancerUpdateProfile',{label:'NewsFeedTasks',eventName:'newsfeed_welcome_freelancer',target:'updateProfile'}),e.bind('.activateFreelancerPlaceBid',{label:'NewsFeedTasks',eventName:'newsfeed_welcome_freelancer',target:'placeBid'}),this}});return g}),define('dashboard/views/events/promoteContest',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/promoteContest.htm'],function(a,b,c,d,e){var f=d.extend({events:b.extend({},d.prototype.events,{'click .ttref-button':'pushTtref'}),compileTemplate:b.template(e),render:function(){var c=this.model.toJSON(),d=this;return a(this.el).append(this.compileTemplate(c)),b.each(a(this.el).find('.promote_img'),function(b){var c=a(b).parent().siblings('.promote-hover');a(b).mouseenter(function(){c.show()}),a(c).mouseleave(function(){a(this).hide()})}),this},pushTtref:function(b){var c='/campaign/0NEW001/?l=',d=a(b.target).data('repost'),e=a(b.target).data('contest-id'),f='';d==1?f=c+'/contest/create.php?from=ContestRepost&contestId='+e:f=c+'/contest',window.location.href=f}});return f}),define('dashboard/views/events/remindUseBids',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/remindUseBids.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/draftContest',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/draftContest.htm','text!templates/dashboard/draftContestPublished.htm'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{'click #postDraft':'postDraft','click #editDraft':'editDraft'}),initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.get('subCollection').bind('add',this.renderMin,this),b.bindAll(this,'render')},render:function(){return a(this.el).html('<div id="draft-contest" class="draft-contest-container"></div>'),this.renderMin(this.model),this},renderMin:function(c){var d=c.toJSON(),g;d.data.isPublished?g=f:g=e;var h=b.template(g);a(this.el).find('#draft-contest').html(h(d)),c.isLiveNotification&&this.markThisNotificationUnread()},postDraft:function(b){var c=a(b.target).data('href');window.location.href=c},editDraft:function(b){var c=a(b.target).data('href');window.location.href=c}});return g}),define('dashboard/views/events/contactsAutoAddedSender',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contactsAutoAddedSender.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/contactsAutoAddedReceiver',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contactsAutoAddedReceiver.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/secondBidPlusTrialUpsell',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/secondBidPlusTrialUpsell.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/articleComment',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/article-comment.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:function(a){var c=b.template(e,a);return c},initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/editAwardedBidRequest',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/editAwardedBidRequest.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl.indexOf('/projects/.html')>=0&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/editAwardedBidAccepted',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/editAwardedBidAccepted.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl.indexOf('/projects/.html')>=0&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/editAwardedBidDeclined',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/editAwardedBidDeclined.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl.indexOf('/projects/.html')>=0&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this}});return f}),define('dashboard/views/events/requestEndProject',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/requestEndProject.htm'],function(a,b,c,d,e){var f=d.extend({preferLineNum:3,compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl.indexOf('/projects/.html')>=0&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this.truncateProjectName(),this},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName({preferLineNum:3})}});return f}),define('dashboard/views/events/pendingFunds',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/pendingFunds.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/examPassedUpsell',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/examPassedUpsell.htm','exams/step-progress-bar'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(e),render:function(){a(this.el).html(this.compileTemplate(this.model.toJSON()));var b=a(this.el).find('.StepsProgressBar');return f.init(this.model.toJSON().data.exam_id_passed,b),this}});return g}),define('dashboard/views/events/examRetakingDiscount',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/examRetakingDiscount.htm','exams/step-progress-bar'],function(a,b,c,d,e,f){var g=d.extend({compileTemplate:b.template(e),render:function(){a(this.el).html(this.compileTemplate(this.model.toJSON()));var b=a(this.el).find('.StepsProgressBar');return f.init(this.model.toJSON().data.exam_id_failed,b),this}});return g}),define('dashboard/views/events/localJobsActivation',['jquery-wrapper','underscore-wrapper','dashboard/views/events/event','text!templates/dashboard/localJobsActivation.htm','local-jobs/updateLocationModal'],function(a,b,c,d,e){var f=e.create(),g=c.extend({events:b.extend({},c.prototype.events,{}),compileTemplate:b.template(d),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this.model.toJSON();a(this.el).html(this.compileTemplate(b));var c=this;if(b.data.project_count<1){var d={section:'newsfeed',titleText:T_('Add your location to hear about jobs in your area'),messageText:T_('Once you have added your location we will tell you about jobs posted in your area'),placeholderText:T_('Start Typing your address and post code'),saveButtonText:T_('Tell me about jobs in my area'),successMessageText:T_('Thanks, you have successfully updated your location. We will update you about jobs available in your area.')};typeof window.userLocation!='undefined'&&(d.geoInfo={lat:window.userLocation.latitude,lng:window.userLocation.longitude,formatted_address:window.userLocation.fullAddress,vicinity:window.userLocation.vicinity,country:window.userLocation.country,administrative_area_level_1:window.userLocation.administrativeArea}),d.hasEmailOption=b.data.is_local_user!==1,f.init(d),a(this.el).on('click','#lj-activation-button',function(){var a={csrfToken:window.csrfToken};return c.trackClick(),f.showModal(a),!1})}else a(this.el).on('click','#lj-activation-button',function(){return c.trackClick(),window.location='/jobs/localjobs',!1});return this},trackClick:function(){_t.push(['user_action',{section:'newsfeed',sub_section:'newsfeed_lj_projects',label:'click'}])}});return g}),define('dashboard/views/events/projectSharedWithYou',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/projectSharedWithYou.htm'],function(a,b,c,d,e){var f=d.extend({compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return f}),define('dashboard/views/events/completeReview',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/completeReview.htm','text!templates/dashboard/freelancerShareMessages.htm','text!templates/dashboard/employerShareMessages.htm','dashboard/collections/eventsCollectionFactory'],function(a,b,c,d,e,f,g,h,i){var j=d.extend({events:b.extend({},d.prototype.events,{'click .shareTwitter':'shareTwitter','click .shareFacebook':'shareFacebook'}),compileTemplate:b.template(f),compileFreelancerShareTemplate:b.template(g),compileEmployerShareTemplate:b.template(h),render:function(){if(!this.model.get('data').isEmployer){var b=this.model.get('user');typeof b=='undefined'&&(b=getUserIdfromCookie()),this.model.get('data').tsId='p_'+this.model.get('data').id+'_'+b}return a(this.el).html(this.compileTemplate(this.model.toJSON())),this},twitterLink:function(a,b,c){return'http://twitter.com/intent/tweet?hashtags=freelancer.com&original_referer='+a+'&has_tweeted&source=tweetbutton&text='+b+'&url='+c},facebookLink:function(a,b,c,d,e){var f=(new i).getFBappId(),g='/campaign/0MGY0127/?l=',h=JSON.stringify([d]);return f!=''&&f!='staging'?'http://www.facebook.com/dialog/feed?display=popup&app_id='+f+'&link='+c+'&name=I just finished a project on '+flns.config.site_name+'&caption='+b+'&properties='+e+'&actions='+h+'&ref=sharesuccess'+'&picture='+a+'/img/freelancer_small.jpg'+'&redirect_uri='+a+'/users/close.php':'http://www.facebook.com/dialog/feed?display=popup&app_id=120131118061981&link='+c+'&name=I just finished a project on '+flns.config.site_name+'&caption='+b+'&properties='+e+'&actions='+h+'&ref=sharesuccess'+'&picture=http://freelancer.com/img/freelancer_small.jpg'+'&redirect_uri=http://www.freelancer.com/users/close.php'},shareTwitter:function(){var a=this.model.toJSON(),b='/campaign/0MGY0127/?l=',c=a.data.isEmployer,d=window.location.protocol+'//'+window.location.hostname,e,f,g;a.data.site_name='@freelancer',c?(a.message=Math.floor(Math.random()*5),f=this.compileEmployerShareTemplate(a),e={name:'Hire '+a.data.userName,link:encodeURI(d+b+'/u/'+a.data.userName+'?hireme=true')},g=JSON.stringify({Rating:this.model.get('data').myRating})):(a.message=Math.floor(Math.random()*5),f=this.compileFreelancerShareTemplate(a),e={name:'Hire Me',link:encodeURI(d+b+'/u/'+currentUserName+'?hireme=true')},g=JSON.stringify({Rating:this.model.get('data').rating}));var h=d+b+'/projects/'+this.model.get('data').seoUrl+'.html',i=this.twitterLink(d,f,h,e,g);window.open(i,'','width=500, height=450, left=100,top=100,menu=no, toolbar=no,scrollbars=yes,resizable=yes')},shareFacebook:function(){var a=this.model.toJSON(),b='/campaign/0MGY0127/?l=',c=a.data.isEmployer,d=window.location.protocol+'//'+window.location.hostname,e,f,g;a.data.site_name=flns.config.site_name,c?(a.message=Math.floor(Math.random()*5),f=this.compileEmployerShareTemplate(a),e={name:'Hire '+a.data.userName,link:encodeURI(d+b+'/u/'+a.data.userName+'?hireme=true')},g=JSON.stringify({Rating:this.model.get('data').myRating})):(a.message=Math.floor(Math.random()*5),f=this.compileFreelancerShareTemplate(a),e={name:'Hire Me',link:encodeURI(d+b+'/u/'+currentUserName+'?hireme=true')},g=JSON.stringify({Rating:this.model.get('data').rating}));var h=d+b+'/projects/'+this.model.get('data').seoUrl+'.html',i=this.facebookLink(d,f,h,e,g);window.open(i,'','width=500, height=450, left=100,top=100,menu=no, toolbar=no,scrollbars=yes,resizable=yes')}});return j}),define('dashboard/views/events/bid.placed',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','text!templates/dashboard/bid.placed.htm','text!templates/dashboard/bid.placed.min.htm','dashboard/views/events/bid.placed.min','text!templates/dashboard/bid.placed.header.htm','dashboard/models/event','dashboard/lib/seeMore'],function(a,b,c,d,e,f,g,h,i,j,k){var l=d.extend({events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick','click #viewAll':'scrollUp','click #scrollUp':'scrollUp','click #tryAgain':'tryAgain','click .bidder':'ttrefBidder','click .project':'ttrefProjectLink','mousedown .project':'ttrefDashboardUsersBid','mousedown #others':'ttrefDashboardUsersBid','mousedown .bidder':'ttrefDashboardUserProfileLink','mousedown .profile-pic':'ttrefDashboardUserProfileLink'}),compileTemplate:b.template(f),compileTemplateMin:b.template(g),compileTemplateHeader:b.template(i),notiShowsPerPage:50,preferLineNum:2,initialShowNum:3,renderFromLiveSelectedDenied:!1,initialize:function(a){var c=this;b.bindAll(this,'receiveAllBids','error_callback','setWinningBid'),this.constructor.__super__.initialize.call(this,a),this.bidPlacedMinViews=[],this.model.get('subCollection').bind('add',this.renderEach,this)},render:function(){this.model.set({postProject:!0});var b=this.model.toJSON();return b.data&&b.data.linkUrl==='/projects/.html'&&(b.data.linkUrl='/projects/'+b.data.projectId+'.html'),a(this.el).html(this.compileTemplate(b)),a(this.el).find('#status').replaceWith(this.compileTemplateHeader(b)),this.model.isLiveNotification?this.model.get('subCollection').add(this.model):this.getAllBids(),this},renderEach:function(a){a.isLiveNotification?(this.renderNew(a),this.model.get('subCollection').size()>1&&(this.markThisNotificationUnread(),a.setIsLiveNotification(!1))):this.renderMin(a)},renderSubCollection:function(){var a=this,b=this.model.get('subCollection').getSortedBidsArray(),c=0;while(c<Math.min(b.length,this.initialShowNum))this.renderMin(b[c++]);this.formatView()},getAllBids:function(){if(this.model.get('subCollection').size()>0){this.renderSubCollection();return}this.fetchAllBids()},tryAgain:function(){a(this.el).find('#loadingAll').find('#loading').show(),a(this.el).find('#loadingAll').find('#loadingFail').hide(),this.fetchAllBids()},ttrefBidder:function(a){_ttref.push(['_clearEntrypoint','Project'],['_setEntrypoint','Project_NewsFeedBidPlaced']),_ttref.pushToTracking('Project','TTREF_Award_DashBidFreelancer','Project_NewsFeedBidPlaced','user_action','click')},ttrefProjectLink:function(a){_ttref.push(['_clearEntrypoint','Project'],['_setEntrypoint','Project_NewsFeedBidPlaced']),_ttref.pushToTracking('Project','TTREF_Award_DashBidLink','Project_NewsFeedBidPlaced','user_action','click')},ttrefDashboardUserProfileLink:function(){var a=this.model.get('data'),b=a.projectId;window._ttref.push(['_clearEntrypoint','ProjectAward']),window._ttref.push(['_setCookie','ProjectAward_NewsFeed']),window._ttref.push(['_trackEvent','ProjectAward','ProfileRedirect',b,'project_id',b])},ttrefDashboardUsersBid:function(){var a=this.model.get('data'),b=a.projectId;window._ttref.push(['_clearEntrypoint','ProjectAward']),window._ttref.push(['_setCookie','ProjectAward_NewsFeed']),window._ttref.push(['_trackEvent','ProjectAward','PVPRedirect',b,'project_id',b])},fetchAllBids:function(){this.model.get('subCollection').fetch({project_id:this.model.get('data').projectId,error:this.error_callback,recevieAllBids:this.receiveAllBids})},error_callback:function(){a(this.el).find('#loadingAll').find('#loading').hide(),a(this.el).find('#loadingAll').find('#loadingFail').show()},receiveAllBids:function(a){if(typeof a=='undefined')return;this.renderFromLiveSelectedDenied&&(a=this.hardCodeChangeRejectUserBidState(a));var b=this,c=0,d=a!=null?a.length:0;for(c;c<d;c++){var e=b.reConstructModelBaseOnNewAjax(a[c]);this.model.get('subCollection').models.push(e)}this.renderSubCollection(),a!=null&&b.reConstructModelBaseOnNewAjax(a[0]).get('state')!=''&&this.model.set({winningBid:b.reConstructModelBaseOnNewAjax(a[0])});if(typeof this.options.denied!=''||this.options.denied){var f=jq(b.el).parent().siblings('#awardOthers').find('.awardOthersText');if(this.bidPlacedMinViews.length>0){var g=this.bidPlacedMinViews.length,h;g===1?h=T_('You still have one other freelancer ready to get started on your project! Award one now:'):h=T_('You still have <%=nu%> other freelancers ready to get started on your project! Award one now:',{nu:g}),f.text(h)}else{var i=T_('You don\'t have any other freelancers bidding on your project.');f.text(i),jq(b.el).parent('#allBids').hide()}}this.initialSeeMore(),this.formatView()},hardCodeChangeRejectUserBidState:function(a){var b=this.model.get('data').userId;for(var c in a)if(a[c].user.id==b){a[c].is_pending=!1,a[c].is_awarded=!1,a[c].is_selected=!1;break}return a},reConstructModelBaseOnNewAjax:function(a){var b=new j,c=this.model.get('data'),d=new Object;d.bid=a,d.id=d.bid.id,d.projectId=d.bid.project_id,d.descr=d.bid.descr,d.period=d.bid.period,d.amount=d.bid.sum,d.projIsHourly=c.projIsHourly,d.projIsFullTime=c.projIsFullTime,d.linkUrl=c.linkUrl,d.currency=c.currency,d.currencyCode=c.currencyCode,d.currencyId=c.currencyId,c.projIsHourly?d.initMilestone=Math.round(d.bid.sum*d.bid.milestone_percentage*100)/100:d.initMilestone=Math.round(d.bid.sum*d.bid.milestone_percentage)/100,typeof d.bid.user!='undefined'&&(d.imgUrl=d.bid.user.profile_logo_url,d.userName=d.bid.user.username,d.publicName=d.bid.user.publicName,d.userId=d.bid.user.id,d.reputation_rate=d.bid.user.seller_rating.avg,d.earning=d.bid.user.earnings,d.reviewsCount=d.bid.user.seller_rating.count);var e=d.bid.is_selected?'awarded':'';return b.set({data:d}),b.set({type:'bid'}),b.set({timestamp:a.submitdate_ts}),b.set({state:e}),b},renderWithoutHeader:function(b){return this.model.set({postProject:!1}),a(this.el).html(this.compileTemplate(this.model.toJSON())),this.renderFromLiveSelectedDenied=this.model.isLiveNotification||!1,this.getAllBids(),this},renderMin:function(b){var c=this;c.removeLoading();if(this.options.denied!=b.get('data').userId){var d=this.generateMinView(b);return this.bidPlacedMinViews.push(d),a(this.el).find('#pageBar').before(d.el),d.initialSeeMore({preferLineNum:this.preferLineNum}),d.bind('awarding',this.setWinningBid),a(d.el).hide().slideDown(),d}return!1},renderNew:function(c){if(typeof c=='undefined')var c=this.model;this.decideNewRecommandedBid(c),this.removeLoading();var d=b.indexOf(this.model.get('subCollection').getSortedBidsArray(),c);if(!(d>a(this.el).find('.news-list .news-item').length)){var e=this.generateMinView(c);this.bidPlacedMinViews.push(e),this.sortbidPlacedMinViews(),a(this.el).find('.news-list .news-item').length==0||d==this.bidPlacedMinViews.length-1?a(this.el).find('#pageBar').before(e.el):a(a(this.el).find('.news-list .news-item')[d]).parent().before(e.el),e.initialSeeMore({preferLineNum:this.preferLineNum}),this.needToHideNewBid(),e.bind('awarding',this.setWinningBid)}var f=this.compileTemplateHeader(c.toJSON());a(this.el).find('#status').html(f),a(this.el).find('#status h2').after(this.menu.el),this.model.set({timestamp:c.get('timestamp')}),this.model.get('data').userId=c.get('data').userId,this.model.get('data').userName=c.get('data').userName,this.model.get('data').publicName=c.get('data').publicName,this.model.get('data').imgUrl=c.get('data').imgUrl,this.formatView()},setWinningBid:function(a){this.model.set({winningBid:a})},decideNewRecommandedBid:function(a){var b=-1,c=0;for(var d=0;d<this.bidPlacedMinViews.length;d++){var e=this.bidPlacedMinViews[d].model.get('data').bid;if(typeof e.recommended!='undefined'&&e.recommended){c=e.ranking,b=d;break}}var f=a.attributes;f.data.bid.ranking>c&&f.data.bid.user.seller_rating.reputation.entire_history.overall>3.5&&f.data.bid.user.seller_rating.reputation.entire_history.ont>.7&&f.data.bid.user.seller_rating.reputation.entire_history.onb>.7&&f.data.bid.user.seller_rating.projectCount.entire_history.completion_rate>.7&&(a.get('data').bid.recommended=!0,b!=-1&&this.bidPlacedMinViews[b].removeRecommendBid())},sortbidPlacedMinViews:function(){var a=this;this.bidPlacedMinViews.sort(function(b,c){var d=a.model.get('subCollection').bidsSortComparator(b.model.get('data').bid,c.model.get('data').bid);return d})},needToHideNewBid:function(){a(this.el).find('.news-item:visible').length>this.initialShowNum&&a(this.el).find('.news-item:visible').last().hide()},generateMinView:function(a){var b=a,c=new h({model:b}),d=c.render();return d},removeLoading:function(){a(this.el).find('#loadingAll').remove()},initialSeeMore:function(){var b=this,c=a(this.el).find('.descr-long'),d=0,e=c.length;for(d;d<e;d++){var f=a(c[d]);f.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick();if(typeof _t!='undefined'){var d=this.model.get('data'),e=d?d.projectId:null;_t.push(['user_action',{section:'Newsfeed',subsection:'BidPlacedView',label:'more',action:'click',project_id:e}])}},truncateProjectLater:function(){var b=a(this.el).find('.trunc').parent();b.length==1&&b.hasClass('truncated')&&(b.truncateProjectName(),b.addClass('truncated'))},scrollUp:function(){var b=this,c=this.model.get('subCollection').size(),d=a(this.el).find('.news-item:visible').length,e=this.model.get('subCollection').getSortedBidsArray();for(var f=d;f<Math.min(d+b.notiShowsPerPage,c);f++)this.bidPlacedMinViews[f]?a(this.bidPlacedMinViews[f].el).find('.news-item').slideDown():this.renderMin(e[f]);b.updateScrollPageStatus(),b.formatNewsItemClass(),d=a(this.el).find('.news-item:visible').length,d==c&&(b.hideViewMore(),b.hideViewAll())},updateScrollPageStatus:function(){var b=this.model.get('subCollection').size(),c=a(this.el).find('.news-item:visible').length;c>0&&(a(this.el).find('#scrollStatus').html(c+' of '+b),a(this.el).find('#viewAll').find('span').text(T_(' View all ')+b+T_(' bids')))},formatNewsItemClass:function(){a(this.el).find('.news-item.first').removeClass('first'),a(this.el).find('.news-item:visible').first().addClass('first')},showPageBar:function(){a(this.el).find('#pageBar').show()},showViewAll:function(){a(this.el).find('#viewAll').show()},hideViewAll:function(){a(this.el).find('#viewAll').hide()},showViewMore:function(){a(this.el).find('#scrollBar').show()},hideViewMore:function(){a(this.el).find('#scrollBar').hide()},formatHeader:function(){var b=a(this.el),c=b.find('.news-item').find('h3').find('#username'),d={};c.each(function(){d[this]++});var e=this.model.get('subCollection').size();if(e>1){var f=this.model.get('data');if(e==2){var g=T_('1 other');for(var h=0;h<c.length;h++)if(a(c[h]).text()!=b.find('h2 #username1st').text()){g=c[h];break}var i=T_(' and <%= html %> ',{html:g.outerHTML});a(this.el).find('#numOfOthers').html(i)}else{var j=T_(' and <a id="others" href="<%= linkUrl %>#bid-list"><%= userNum %> others</a>',{linkUrl:f.linkUrl,userNum:e-1});a(this.el).find('#numOfOthers').html(j)}}},showViewAllOrViewMore:function(){var a=this.model.get('subCollection').size();a>this.initialShowNum&&(a<=this.initialShowNum+this.notiShowsPerPage?(this.hideViewMore(),this.showViewAll()):(this.hideViewAll(),this.showViewMore()))},formatView:function(){this.formatHeader(),this.showViewAllOrViewMore(),this.updateScrollPageStatus(),this.formatNewsItemClass(),this.truncateProjectLater()}});return l}),define('dashboard/views/events/selected.uploaded',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/models/event','dashboard/views/events/event','dashboard/views/events/uploaded','text!templates/dashboard/selected.uploaded.htm','text!templates/dashboard/selected.uploaded.doc.htm','text!templates/dashboard/selected.uploaded.img.htm'],function(a,b,c,d,e,f,g,h,i){var j=f.extend({events:b.extend({},f.prototype.events,{'click #tryAgain':'loadAllFiles'}),selectedUploadTemplate:b.template(g),selectedUploadDocTemplate:b.template(h),selectedUploadImgTemplate:b.template(i),initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.set({totalAmount:0}),this.model.bind('change:files_json',this.storeJsonFilesInSubCollection,this),this.model.bind('change:totalAmount',this.formatHeader,this),this.model.get('subCollection').bind('add',this.addFile,this)},render:function(){return a(this.el).html(this.selectedUploadTemplate(this.model.toJSON())),this.model.isLiveNotification?this.model.get('subCollection').add(this.model):this.model.get('subCollection').length==0?this.loadAllFiles():this.renderSubCollection(),this.formatView(),this},loadAllFiles:function(){var b=this;b.showLoading(),b.hideLoadingFail();var c=this.model.get('data');a.ajax({type:'POST',url:'/ajax/project/getFiles.php',dataType:'json',data:{bid_id:c.id},success:function(a){a!=null&&(a.status==='success'?(b.hideLoading(),a.files.their_files.length>0?b.model.set({files_json:a.files.their_files}):b.model.get('subCollection').add(b.model)):(b.hideLoading(),b.showLoadingFail()))},error:function(){b.hideLoading(),b.model.get('subCollection').add(b.model)}})},storeJsonFilesInSubCollection:function(){var a=this,c=this.model.get('files_json');if(typeof c=='undefined')return;this.model.set({totalAmount:c.length}),b.each(c.reverse(),function(b){var c=a.reConstructModelBaseOnNewAjax(b);a.model.get('subCollection').add(c)})},reConstructModelBaseOnNewAjax:function(a){var b=new d(e),c=this.model.get('data'),e=new Object;return e.projectId=c.projectId,e.accountId=c.accountId,e.seoUrl=c.seoUrl,e.name=c.name,e.userName=c.userName,e.publicName=c.publicName,e.img=c.img,e.id=c.id,e.file=new Object,e.file.id=a.id,e.file.size=a.sizef,e.file.name=a.filename,e.file.url='/projects/fileshare/getFile.php?bid_id='+e.id+'&file_id='+e.file.id,e.file.thumb_obj=a.thumb_obj,b.set({data:e}),b},renderSubCollection:function(){this.hideLoading();var a=this.model.get('subCollection').length;while(a--)this.addFileToEl(this.model.get('subCollection').models[a])},addFile:function(a){this.hideLoading(),this.addFileToEl(a),this.formatView(),a.isLiveNotification&&(this.model.set({totalAmount:this.model.get('totalAmount')+1}),this.model.get('subCollection').length>1&&(this.markThisNotificationUnread(),this.model.attributes.timestamp=a.get('timestamp'),this.model.setIsLiveNotification(!1)))},addFileToEl:function(b){if(this.isImage(b)){var c=this.selectedUploadImgTemplate(b.toJSON());a(this.el).find('.uploads-imgs').prepend(c)}else{var c=this.selectedUploadDocTemplate(b.toJSON());a(this.el).find('.uploads').prepend(c)}},formatView:function(){var b=a(this.el).find('.uploads-imgs').find('li:visible');b.length>5&&(a(this.el).find('.uploads-imgs').find('li:nth-child(6)').remove(),a(this.el).find('.uploads-imgs').find('li:nth-child(1)').hide(),a(this.el).find('.uploads-imgs').find('li:nth-child(1)').fadeIn());var c=a(this.el).find('.uploads').find('li:visible');c.length>3&&(a(this.el).find('.uploads').find('li:nth-child(4)').remove(),a(this.el).find('.uploads').find('li:nth-child(1)').hide(),a(this.el).find('.uploads').find('li:nth-child(1)').fadeIn()),b.length*c.length!=0||this.model.get('containBoth')?(this.model.set({containBoth:!0}),a(this.el).find('hr').show()):a(this.el).find('hr').hide()},isImage:function(a){return a.get('data').file.thumb_obj!=null},showLoading:function(){a(this.el).find('#loading').show()},hideLoading:function(){a(this.el).find('#loading').hide()},showLoadingFail:function(){a(this.el).find('#loadingFail').show()},hideLoadingFail:function(){a(this.el).find('#loadingFail').hide()}});return j}),define('dashboard/views/events/pmbPublic',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','notification/libpersist','text!templates/dashboard/pmbPublic.htm','text!templates/dashboard/pmbPublicHeader.htm','dashboard/views/events/pmbPublic.min','dashboard/models/event','jquery.autosize','dashboard/lib/seeMore'],function(a,b,c,d,e,f,g,h,i,j,k){var l=d.extend({events:b.extend({},d.prototype.events,{'click #viewAll':'viewAll','click #scrollUp':'scrollUp','click #abusive':'abusive','click #modalSubmit':'modalSubmit','click #seeMore':'seeMoreClick','click  #tryAgain':'tryAgain'}),notiShowsPerPage:50,preferLineNum:3,initialShowNum:2,compileTemplate:b.template(f),compileTemplateHeader:b.template(g),initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.pmbPubilcMinViews=[],b.bindAll(this,'error_callback_ajax'),this.model.get('subCollection').bind('add',this.renderEach,this)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).find('#status').replaceWith(this.compileTemplateHeader(this.model.toJSON())),a(this.el).find('#new_message').autosize(),this.model.isLiveNotification?this.model.get('subCollection').add(this.model):this.renderPmbPublicMins(),this.formatView(),this},renderEach:function(a){a.isLiveNotification?(this.renderNew(a),this.model.get('subCollection').length>1&&(this.markThisNotificationUnread(),a.setIsLiveNotification(!1))):this.renderMin(a)},loadPCBMessages:function(){var a=this;jq.ajax({type:'POST',url:'/ajax/project/getPCBMessages.php',cache:!1,dataType:'json',data:{project_id:this.model.get('data').project_id},success:function(b){if(b.messages.length)for(var c in b.messages){var d=a.convertToEventModel(b.messages[c]);a.model.get('subCollection').add(d),a.formatView()}else a.error_callback_ajax()},error:function(){a.error_callback_ajax()}})},htmlDecode:function(b){return a('<div/>').html(b).text()},convertToEventModel:function(a){var b=new i,c={id:a.id,imgUrl:a.from_logo.profile_logo_url,message:this.htmlDecode(a.descr),name:null,project_id:a.project_id,seoUrl:null,text:this.htmlDecode(a.descr),time:a.submittimestamp,userId:a.from_user.id,userName:a.from_user.username};return b.set({data:c}),b.set({type:'pmb_public'}),b.set({timestamp:a.submittimestamp}),b},error_callback_ajax:function(){var b=this;a(this.el).find('#loadingAll').find('#loading').hide(),a(this.el).find('#loadingAll').find('#loadingFail').show()},tryAgain:function(){a(this.el).find('#loadingAll').find('#loading').show(),a(this.el).find('#loadingAll').find('#loadingFail').hide(),this.loadPCBMessages()},renderPmbPublicMins:function(){if(this.model.get('subCollection').length>0){this.renderSubCollection();return}this.loadPCBMessages()},renderSubCollection:function(){var a=this;this.model.get('subCollection').each(function(b){a.renderMin(b)}),this.formatView()},truncateProjectLater:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName()},generateMinView:function(a){var b=new h({model:a});b.portraitFactory=this.portraitFactory;var c=b.render();return c},renderMin:function(b){this.removeLoading();var c=this.generateMinView(b);this.pmbPubilcMinViews.push(c),a(this.el).find('#pageBar').after(c.el),c.initialSeeMore(),this.needToHideNewBid()},renderNew:function(b){typeof b=='undefined'&&(b=this.model),this.removeLoading();var c=this.generateMinView(b);this.pmbPubilcMinViews.unshift(c),a(this.el).find('.new_message').before(c.el);var d=this.compileTemplateHeader(b.toJSON());a(this.el).find('#status').html(d),this.initialOtherModules(),a(this.el).find('#status h2').after(this.menu.el),c.initialSeeMore(),this.model.set({timestamp:b.get('timestamp')}),this.model.get('data').userId=b.get('data').userId,this.model.get('data').userName=b.get('data').userName,this.model.get('data').imgUrl=b.get('data').imgUrl,this.formatView(!1)},removeLoading:function(){a(this.el).find('#loadingAll').remove()},needToHideNewBid:function(){a(this.el).find('.news-item').not('.new_message').length>this.initialShowNum&&a(this.el).find('.news-item').not('.new_message').first().hide()},viewAll:function(){var b=this,c=a(this.el).find('.news-item').not('.new_message'),d=c.length;b.hideViewAll(),d>b.notiShowsPerPage?(b.showViewMore(),b.showCurrentPage()):c.each(function(c){a(this).slideDown(),b.formatNewsItemClass()})},scrollUp:function(){this.showCurrentPage()},showCurrentPage:function(b){var c=a(this.el).find('.news-item').not('.new_message'),d=c.length,e=this,f=a(this.el).find('.news-item:visible').not('.new_message').length;c.each(function(b){b>d-f-e.notiShowsPerPage-1?a(this).slideDown():a(this).slideUp()}),e.updateScrollPageStatus(),e.formatNewsItemClass(),f=a(this.el).find('.news-item:visible').not('.new_message').length,f==d&&e.hideViewMore()},updateScrollPageStatus:function(){var b=a(this.el).find('.news-item').not('.new_message').length,c=a(this.el).find('.news-item:visible').not('.new_message').length;c>0&&(a(this.el).find('#scrollPage').html(c+' of '+b),a(this.el).find('#viewAll').find('span').text(T_(' View all ')+b+T_(' clarifications')))},showPageBar:function(){a(this.el).find('#pageBar').show()},hidePageBar:function(){a(this.el).find('#pageBar').hide()},showViewAll:function(){a(this.el).find('#viewAll').show()},hideViewAll:function(){a(this.el).find('#viewAll').hide()},showViewMore:function(){a(this.el).find('#scrollBar').show()},hideViewMore:function(){a(this.el).find('#scrollBar').hide()},formatHeader:function(){var c=a(this.el),d=c.find('.news-item').not('.new_message'),e=c.find('.news-item').find('h3').find('#username'),f={},g='/projects/'+this.model.get('data').seoUrl+'.html#publicClarificationBoard';e.each(function(){f[this]++});var h=b.size(f);if(h>1){var i=' and <a id=\'others\' href=\''+g+'\'>'+(h-1)+' others</a>';if(h==2){var j=a(a.find('.user-details h4>em>a')).html(),k='';for(var l=0;l<e.length;l++)if(a(e[l]).text()!=c.find('h2 #username1st').text()){k=e[l];if(c.find('h2 #username1st').text()=='You'&&a(k).html()==j)continue;a(k).html()==j&&a(k).text('You');break}i=' and '+k.outerHTML+' '}a(this.el).find('#numOfOthers').html(i)}},showViewAllOrViewMore:function(){var b=a(this.el).find('.news-item').not('.new_message').length;b>this.initialShowNum&&(b<=this.initialShowNum+this.notiShowsPerPage?(this.hideViewMore(),this.showViewAll()):(this.hideViewAll(),this.showViewMore()))},formatView:function(b){var c=this;this.formatHeader();var d=a(this.el),e=d.find('.news-item').not('.new_message'),f=d.find('.news-item:visible').not('.new_message');e.length>c.initialShowNum&&e.length>f.length?(this.showPageBar(),b!==!1&&e.each(function(b){b<e.length-c.initialShowNum?a(this).hide():a(this).slideDown()})):this.hidePageBar(),this.showViewAllOrViewMore(),this.updateScrollPageStatus(),this.formatNewsItemClass(),c.truncateProjectLater()},formatNewsItemClass:function(){a(this.el).find('.news-item.first').removeClass('first'),a(this.el).find('.news-item:visible').first().addClass('first')},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length,f,g,h,i;for(d;d<e;d++){f=a(c[d]);var j=f.parent();j.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()},abusive:function(b){var c=a(b.target),d=c.parents('.news-item').attr('id');c.parents('.news-list-inner').find('.modal').find('#msg_id').val(d),c.parents('.news-list-inner').find('.modal').modal();var e=c.parents('.news-list-inner').find('.modal').find('.hint');e.empty()},modalSubmit:function(b){var c=this,d=a(this.el).find('.modal'),e=d.find('.hint');e.empty();var f=d.find('#msg_id').val(),g=d.find('#message-violation-reason').val(),h=d.find('#message-violation-comments').val();jq.ajax({type:'POST',url:'/ajax/project/moderateMessage.php',cache:!1,dataType:'json',data:{action:'report',msg_id:f,reason:g,description:h,url:encodeURIComponent(window.location.href)},success:function(a){if(!a||a.success!==!0){var b;a.errors?b=a.errors.join('<br/>'):b=T_('Unable to submit violation report'),e.append('<span class="error-msg">'+b+'</span>')}else d.modal('hide'),d.parent().find('#'+d.find('#msg_id').val()).remove(),c.formatView(!1)}})}});return l}),define('dashboard/views/events/pcbPublic',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','notification/libpersist','dashboard/models/event','jquery.autosize','dashboard/lib/seeMore','text!templates/dashboard/pcbPublic.htm','text!templates/dashboard/pcbMessage.htm','text!templates/dashboard/pcbPublicHeader.htm','text!templates/contestView/contestMessageModal.htm'],function(a,b,c,d,e,f,g,h,i,j,k,l){var i=d.extend({preferLineNum:3,events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick','click .seeLess':'seeLessClick','click .contest-report-message-violation':'reportContestMessageViolation','click .confirm-message-delete':'deleteMessage','click .confirm-message-thread-delete':'deleteMessage','click .show-extra-messages':'viewMoreMessages'}),compileTemplate:b.template(i),compileTemplateMessage:b.template(j),compileTemplateHeader:b.template(k),elData:{},initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.get('subCollection').bind('add',this.reloadPCBMessages,this)},render:function(){var c=this.model.get('data');c.linkedUser='<a class="font-bold" href="'+c.userUrl+'">'+(c.userPublicName||c.username)+'</a>',c.linkedContest='<a href="'+b.escape(c.seoUrl)+'">'+b.escape(c.contestName)+'</a>';var d=this.compileTemplateHeader(c);a(this.el).html(this.compileTemplate(c)),a(this.el).find('.status').replaceWith(d);var e=this;return a(this.el).find('.viewAll').click(function(){e.viewAllMessages()}),a(this.el).find('.new_message').autosize(),a(this.el).find('.new_message').keydown(function(a){a.keyCode==13&&(a.shiftKey||(a.preventDefault(),e.postMessage()))}),a(this.el).find('.reload-messages').click(function(){e.reloadPCBMessages(e.model)}),this.elData={viewAllBox:a(e.el).find('.view-all'),loadingAllBox:a(this.el).find('.loadingAll'),loadingDisplay:a(this.el).find('.loadingAll').find('.loading'),loadingFail:a(this.el).find('.loadingAll').find('.loadingFail'),hash:{}},this.elData.hash[c.id]=c.hash,this.loadPCBMessages(),this},show_loading:function(){this.elData.viewAllBox.hide(),this.elData.loadingAllBox.show(),this.elData.loadingDisplay.show(),this.elData.loadingFail.hide()},hide_loading:function(a,b){!a&&b&&b.length>2&&this.elData.viewAllBox.show(),this.elData.loadingAllBox.hide(),this.elData.loadingDisplay.hide(),this.elData.loadingFail.hide()},error_load_callback:function(){this.elData.loadingAllBox.show(),this.elData.loadingDisplay.hide(),this.elData.loadingFail.show()},loadPCBMessages:function(a){var b=this.model.get('data'),c=this;jq.ajax({type:'GET',url:'/contest/projectAction/getMessages.php',cache:!1,dataType:'json',data:{project_id:b.contestId,hash:b.hash},success:function(a){a.isRestricted&&c.el.hide(),a.errors?c.error_load_callback():(c.hide_loading(!1,a.messages),c.renderMessages(a))},error:function(a){c.error_load_callback()}})},reloadPCBMessages:function(b){var c=b.get('data');this.elData.hash[c.id]=c.hash;var d=this;d.show_loading(),jq.ajax({type:'GET',url:'/contest/projectAction/getMessages.php',cache:!1,dataType:'json',data:{project_id:c.contestId,message_id:c.id,hash:c.hash},success:function(b){if(b.errors)d.error_load_callback();else{d.hide_loading(!0,null);if(b.messages){var e={contestId:c.contestId,isLocked:b.isLocked,logged_in:b.logged_in,thisUserId:b.thisUserId,isUserContest:b.isUserContest,threadDisplaySize:b.threadDisplaySize},f=b.messages[0],g=a.extend({},e,f);g.numMessagesExtra=0,g.i=0,g.threadSize=1,g.showReply=!0;var h;if(g.parentId){var i='li[data-msg-id='+g.parentId+']>ol.contest-replies>.pcb-reply';h=a(d.el).find('.pcb_container').find(i)}else h=a(d.el).find('.pcb_container>.pcb-item:last');d.renderMessage(h,g)}}},error:function(a){d.error_load_callback()}})},viewMoreMessages:function(c){var d=this,e=a(c.target),f={project_id:d.model.get('data').contestId,parent_id:e.data('msg-id')};d.show_loading(),a.ajax({type:'GET',url:'/contest/projectAction/getMessages.php',data:f,dataType:'json',success:function(c){if(c.errors)d.error_load_callback();else{d.hide_loading(!0,null),e.hide();if(c.messages){var g={contestId:f.project_id,isLocked:c.isLocked,logged_in:c.logged_in,thisUserId:c.thisUserId,isUserContest:c.isUserContest,threadDisplaySize:c.threadDisplaySize},h=a(d.el).find('.pcb_container li[data-msg-id='+f.parent_id+']>ol.contest-replies');h.find('.pcb-item').remove();var i=h.find('.pcb-reply');b.each(c.messages.reverse(),function(b,e){var f=a.extend({},g,b);f.numMessagesExtra=0,f.i=e,f.showReply=e==c.messages.length-1,d.renderMessage(i,f)})}}},error:function(){d.error_load_callback()}})},renderMessage:function(b,c){var d=a(this.compileTemplateMessage(c));c.parentId?(d.insertBefore(b),b.parent().find('.reply-link').hide(),b.parent().find('.reply-link:last').show()):d.insertAfter(b),this.applyMessageEvents(d);var e=d.find('.descr-long');this.truncateMessage(e)},renderMessages:function(c){var d=this,e=d.model.get('data'),f={contestId:e.contestId,isLocked:c.isLocked,logged_in:c.logged_in,thisUserId:c.thisUserId,isUserContest:c.isUserContest,threadDisplaySize:c.threadDisplaySize};b.each(c.messages,function(c,e){var g=a.extend({},f,c);g.numMessagesExtra=parseInt(g.threadSize)-parseInt(g.threadDisplaySize),g.i=e,g.showReply=parseInt(g.threadSize)==0,d.renderMessage(a(d.el).find('.pcb_container .first'),g),b.each(c.threadMsgs,function(b,e){var h=a.extend({},f,b);h.numMessagesExtra=0,h.i=e,h.showReply=e==c.threadMsgs.length-1;var i='li[data-msg-id='+g.msg_id+']>ol.contest-replies>.pcb-reply',j=a(d.el).find('.pcb_container').find(i);d.renderMessage(j,h)})})},applyMessageEvents:function(c){var d=this;c.find('.new_message').autosize(),c.find('.reply-link').click(function(b){var c=a(this).parents('.pcb-item');c.find('.pcb-reply').show(),a(this).hide()}),c.find('.close-reply').click(function(b){var c=a(this).parents('.pcb-item');c.find('.pcb-reply').hide(),c.find('.reply-link:last').show()}),c.find('.new_message').keydown(function(b){b.keyCode==13&&(b.shiftKey||(b.preventDefault(),d.postMessage(a(this).data('msg-id'))))}),c.find('ul.msg-hover a.delete-message').click(function(c){var e=a(this).parents('.pcb-item'),f=e.data('msg-id'),g=e.data('time'),h=e.find('ol.contest-replies li[data-parent-id]').size()>0,i={msgId:f,hash:d.elData.hash[f]},j=b.template(l),k=a(d.el).find('.modal-container');k.html(j(i)),h?a(d.el).find('#contest-message-delete-thread').modal('show'):a(d.el).find('#contest-message-delete').modal('show')}),c.find('ul.msg-hover a.report-message').click(function(c){var e=a(this).parents('.pcb-item'),f=e.data('msg-id'),g={msgId:f,hash:d.elData.hash[f]},h=b.template(l),i=a(d.el).find('.modal-container');i.html(h(g)),a(d.el).find('#contest-message-violation').modal('show')})},viewAllMessages:function(){a(this.el).find('.pcb-item').fadeIn(),a(this.el).find('.viewAll').hide()},seeMoreClick:function(b){var c=a(b.target),d=c.parents('.descr-long');c.seeMoreClick(),d.append('<a class="seeLess">'+T_('less')+'</a>')},seeLessClick:function(b){var c=a(b.target),d=c.parents('.descr-long');c.remove(),d.append('<a id="seeMore" class="seeMore">'+T_('more')+'</a>'),this.truncateMessage(d)},truncateMessage:function(a){a.initialSeeMore({preferLineNum:this.preferLineNum})},postMessage:function(c){var d=this.model.get('data'),e={project_id:d.contestId},f,g,h;c?(h=a(this.el).find('.error'+c),g=a(this.el).find('.message_throbber'+c),g.show(),e.parent_id=c,f=a(this.el).find('.new_message.textArea'+c),e.comment=f.val()):(h=a(this.el).find('.error0'),g=a(this.el).find('.message_throbber0'),g.show(),e.parent_id=null,f=a(this.el).find('.new_message.textArea0'),e.comment=f.val()),a.ajax({url:'/contest/projectAction/postMessage.php',type:'post',data:e,dataType:'json',cache:!1,complete:function(){g.hide()},success:function(a){a.success?(f.val(''),f.css('height',''),h.html('')):(h.html(''),b.each(a.errors,function(a,b){h.append(a+'<br>')}))},error:function(a){h.html(''),h.append(T_('Failed to submit message.'))}})},beforeModalSubmit:function(a,b){b.prop('disabled',!0),a.find('.modal-footer .error-msg').hide(),a.find('.modal-footer .error-msg').html(''),a.find('.modal-loading').show()},afterModalSubmit:function(a,b){b.prop('disabled',!1),a.find('.modal-loading').hide()},showModalError:function(a,b){a.find('.modal-footer .error-msg').show(),a.find('.modal-footer .error-msg').html(b)},reportContestMessageViolation:function(b){var c=this,d=a(b.target),e=d.data('msg-id'),f=d.data('hash'),g=a(c.el).find('#contest-message-violation'),h=g.find('#message-violation-reason').val(),i=g.find('#message-violation-reason option:selected').text(),j={action:'report',msg_id:e,reason_id:h,description:i,hash:f};c.ajaxMessageAction(j,g,d,T_('Failed to report message.'),function(){})},deleteMessage:function(b){var c=this,d=a(b.target),e=d.parents('.contest-message-popup'),f=d.data('msg-id'),g=d.data('hash'),h=c.model.get('data').contestId,i={action:'delete',project_id:h,msg_id:f,hash:g};c.ajaxMessageAction(i,e,d,T_('Failed to delete message.'),function(){a(c.el).find('#pcb-item-'+f).remove()})},ajaxMessageAction:function(b,c,d,e,f){var g=this;g.beforeModalSubmit(c,d),a.ajax({url:'/contest/projectAction/moderateMessage.php',type:'POST',data:b,dataType:'json',success:function(b){!b||b.success!=1?(b.errors&&a.each(b.errors,function(a,b){e+=' \n'+b+'. '}),g.showModalError(c,e)):(c.modal('hide'),f())},error:function(){g.showModalError(c,e)},complete:function(){g.afterModalSubmit(c,d)}})}});return i}),define('dashboard/views/events/recommendedFreelancers',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/recommendedFreelancers-item.htm','text!templates/dashboard/recommendedFreelancers.htm','dashboard/models/event'],function(a,b,c,d,e,f,g){var h=d.extend({id:'recommendedFreelancers',defaultRecommendedFreelancrsNumber:3,events:b.extend({},d.prototype.events,{'click #tryAgainLoadingRecommendedFreelancers':'tryAgainRecommendedFreelancers'}),initialize:function(a){this.constructor.__super__.initialize.call(this,a)},compileRecommanedFreelancersItemTemplate:b.template(e),compileRecommanedFreelancersTemplate:b.template(f),render:function(){return a(this.el).html(this.compileRecommanedFreelancersTemplate(this.model.toJSON())),this.renderRecommendedFreelancers(),this},renderRecommendedFreelancers:function(){var b=this;if(typeof this.model.get('data').RecommendedFreelancers!='undefined'){b.renderRecommendedFreelancersFromModels();return}a.ajax({type:'get',dataType:'json',url:'/ajax/dashboard/getRecommendedFreelancers.php',data:{project_id:this.model.get('data').id,count:this.defaultRecommendedFreelancrsNumber+1},complete:function(){a(b.el).find('.freelancer-list .rf-loading').hide()},success:function(c){c.status=='success'?c.result.length==0?a(b.el).find('#recommendedFreelancerArea').hide():(b.model.get('data').RecommendedFreelancers=c.result,b.filterRecommendedFreelancers(),b.model.get('data').RecommendedFreelancers.length==0?a(b.el).find('#recommendedFreelancerArea').hide():b.renderRecommendedFreelancersFromModels()):a(b.el).find('.freelancer-list').find('.errorLoading').show()},error:function(c){a(b.el).find('.freelancer-list').find('.errorLoading').show()}})},tryAgainRecommendedFreelancers:function(){a(this.el).find('.freelancer-list').find('.errorLoading').hide(),a(this.el).find('.freelancer-list .rf-loading').show(),this.renderRecommendedFreelancers()},renderRecommendedFreelancersFromModels:function(){var b=this;a(b.el).find('.freelancer-list .rf-loading').hide();var c=this.model.get('data').RecommendedFreelancers;for(var d=0;d<c.length;d++){var e=c[d];if(e==null||typeof e=='undefined')continue;e.index=d,e.projectId=b.model.get('data').id,a(b.el).find('.freelancer-list').append(b.compileRecommanedFreelancersItemTemplate(e))}},filterRecommendedFreelancers:function(){var a=this.model.get('data').RecommendedFreelancers,b=!1,c=-1;for(var d=0;d<a.length;d++){var e=a[d];e.username==this.model.get('data').userName&&(e==null,c=d)}c!=-1?a.splice(c,1):a.length>this.defaultRecommendedFreelancrsNumber&&a.splice(this.defaultRecommendedFreelancrsNumber)}});return h}),define('dashboard/views/events/hiremeOpenToBidding',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/hiremeOpenToBidding.htm','dashboard/models/event'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{}),initialize:function(a){this.constructor.__super__.initialize.call(this,a)},compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/selected.denied',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/selected.denied.htm','dashboard/views/events/bid.placed','dashboard/views/events/recommendedFreelancers','dashboard/views/events/hiremeOpenToBidding','notification/libpersist','dashboard/lib/seeMore','dashboard/models/event','hireme/hiremeABTest'],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=d.extend({events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),bidsViewModule:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.set({ttref:'PostProject_HireMeRejectNewsfeed'}),this.model.set({eventType:'rejected'}),this.HiremeOpenToBiddingView=new h({model:this.model})},compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl==='/projects/.html'&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),this.model.get('data').projectType!='hireMe'?this.renderOtherBids():a(this.el).find('#recommendedFreelancers').replaceWith(this.HiremeOpenToBiddingView.render().el),this},renderOtherBids:function(){var b;typeof this.model.get('bidModel')=='undefined'?(b=this.constructBidModel(),this.model.set({bidModel:b})):b=this.model.get('bidModel'),this.bidsViewModule==null&&(this.bidsViewModule=new f({model:b,denied:this.model.get('data').userId})),this.bidView=this.bidsViewModule.renderWithoutHeader(),a(this.el).find('#allBids').html(this.bidView.el),this.bidView.formatView(),this.bidView.initialSeeMore()},constructBidModel:function(){var a=new Object;a.data=new Object,a.data.projectId=this.model.get('data').id,a.data.userId=this.model.get('data').userId,a.data.linkUrl=this.model.get('data').linkUrl,a.data.currencyCode=this.model.get('data').currencycode,a.data.currency=this.model.get('data').currencysign,a.data.currencyId=this.model.get('data').currencyId,a.data.projIsHourly=this.model.get('data').projIsHourly,a.type='bid';var b=new k(a);return b.setIsLiveNotification(this.model.isLiveNotification||!1),b},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.length==1&&b.truncateProjectName()},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length;for(d;d<e;d++){var f=a(c[d]),g=f.parent();g.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()}});return m}),define('dashboard/views/events/contestEntryRated',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contestEntryRated.htm','text!templates/dashboard/contestEntryRated.header.htm','text!templates/dashboard/contestEntryRated.img.htm','dashboard/models/event'],function(a,b,c,d,e,f,g,h){var i=d.extend({events:b.extend({},d.prototype.events,{'click #viewMore':'viewMore','click .ct_action':'redirect'}),eachViewMore:6,initialShowNum:3,maxShowNum:15,renderFromSelectedDeniedEvent:!1,thumb420height:280,thumb420width:420,thumbHeight:140,thumbVisibleHeight:115,compileTemplate:b.template(e),compileTemplateHeader:b.template(f),compileTemplateImg:b.template(g),initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.setShowEntryCount(),this.model.bind('change:entries_json',this.storeJsonEntriesInSubCollection,this),this.model.get('subCollection').bind('add',this.addEntry,this),this.model.get('subCollection').bind('remove',this.changeEntry,this),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).find('#status').replaceWith(this.compileTemplateHeader(this.model.toJSON())),this.model.isLiveNotification?this.model.get('subCollection').add(this.model):this.model.get('subCollection').length>0?this.renderAllSubModels():this.loadAllEntries(),this},loadAllEntries:function(){var b=this,c=this.model.get('data'),d=0;a.ajax({type:'GET',url:'/contest/projectAction/getEntriesByUser.php',cache:!1,dataType:'json',data:'project_id='+c.contestId,success:function(c){c.status=='success'?(b.removeLoading(),b.model.set({entries_json:c.entries})):a(b.el).remove()},error:function(){a(b.el).remove()}})},removeLoading:function(){a(this.el).find('#loadingAll').remove()},storeJsonEntriesInSubCollection:function(){var a=this,c=this.model.get('entries_json');b.each(c,function(b){var c=a.entryToData(b);a.model.get('subCollection').add(c,{silent:!0})}),this.renderAllSubModels()},entryToData:function(a){var b=new h(d),c=this.model.get('data'),d=new Object;d.contestId=c.contestId,d.contestName=c.contestName,d.contestSeoUrl=c.contestSeoUrl,d.employerId=c.employerId,d.employerName=c.employerName,d.employerPublicName=c.employerPublicName,d.userName=c.employerName,d.userId=c.employerId,d.employerImg=c.employerImg,d.freelancerId=c.freelancerId,d.rating=Number(a.rating).toFixed(1),d.entryId=a.id,d.entryName=a.name,d.entryNumber=a.number,d.entryUrl=a.entryUrl,d.entryThumb=a.thumb,d.entryS3path=a.s3path,d.entriesUrl=c.entriesUrl,d.status=a.status_text;var e=parseInt(a.action_timestamp?a.action_timestamp:a.timestamp_entry);return b.set({data:d}),b.set({timestamp:e}),b.set({type:'contestEntryRated'}),b},setShowEntryCount:function(a){var b=this.model.get('showing');a?this.model.set({showing:a}):b||this.model.set({showing:this.initialShowNum})},clearEntry:function(){a(this.el).find('.gallery .ct_entry').remove()},renderAllSubModels:function(){this.clearEntry();var a=this,b=this.model.get('subCollection').models,c=0,d=b!=null?b.length:0;for(c;c<d;c++){var e=b[c];a.renderMin(e)}this.formatHeader(),this.formatPagination()},redirect:function(b){a(b.target).hasClass('ct_action')||(b.target=a(b.target).parents('.ct_action'));if(a(b.target).children().hasClass('ct_withdraw'))b.target=a(b.target).children(),this.withdraw(b);else if(a(b.target).children().hasClass('ct_award')){var c=a(b.target).data('entry-id');window.location.href='/contest/handover.php?entry_id='+c}else window.location.href=a(b.target).attr('href');return b.stopImmediatePropagation(),!1},addEntry:function(a){this.renderMin(a,!0),this.model.get('subCollection').length>1&&this.markThisNotificationUnread(),this.formatPagination(),this.formatHeader()},changeEntry:function(){this.markThisNotificationUnread(),this.renderAllSubModels(),this.formatHeader()},renderMin:function(b,c){var d=this;this.removeLoading();var e=b.get('data').status,f=a(this.compileTemplateImg(b.toJSON())),g=a(f).find('.hover_group');c?a(this.el).find('#spaceHolder').after(f):a(this.el).find('#bottomHolder').before(f),e=='Withdrawn'?this.setWithdraw(null,null,g):e=='Won'?this.setWon(null,null,g):e=='Eliminated'&&this.setReject(null,null,g);var h=a('.ct_thumb',f).clone().removeAttr('style');a('.ct_thumb',f).load(function(){this.width/this.height>d.thumb420width/d.thumb420height?h.css('min-width','420px'):h.css('min-height','280px');var c=b.get('data').entryThumb.replace(/_thumb.jpg$/i,'_thumb420.jpg');h.attr('src',c);var e='<div class="popover"><div class="arrow"></div><div style="width:auto!important" class="popover-inner"><div style="position:relative;top:0;left:0" class="popover-content"><div></div></div></div></div>';a(f).find('.entry_img').popover_legacy({placement:'right',title:b.get('data').entryName,content:h[0].outerHTML,template:e,trigger:'hover',html:!0}),a(f).find('.entry_img').hover(function(){a(g).show()},function(){a(g).hide()})})},withdraw:function(b){var c=this,d,e=a(b.target).data('entry-id'),f=this.checkWithdraw(e);f?d='undo':d='do';var g={action:d,entry_id:e};a(b.target).prop('disabled',!0),jq.ajax({type:'GET',url:'/contest/projectAction/withdraw.php',cache:!1,data:g,dataType:'json',complete:function(){a(b.target).prop('disabled',!1)},success:function(a){a.result=='success'?f?c.setActive(b,e):c.setWithdraw(b,e):f?alert(T_('Failed to resubmit entry, please try again')):alert(T_('Failed to withdraw entry, please try again'))}})},checkWithdraw:function(a){var b=this.model.get('subCollection').find(function(b){return b.get('data').entryId==a});if(typeof b!='undefined')var c=b.get('data').status=='Withdrawn'?!0:!1;return c},setWithdraw:function(b,c,d){var e=this.model.get('subCollection').find(function(a){return a.get('data').entryId==c});if(b){e.get('data').status='Withdrawn';var d=a(b.target).parents('.hover_group')}a('.ct_withdraw span',a(d)).eq(0).hide(),a('.ct_withdraw span',a(d)).eq(1).show(),a(d).parents('.ct_entry').addClass('ct_withdrawn'),a('.ct_status',a(d).parents('.ct_entry')).html(T_('Withdrawn')),a('.ct_withdraw',a(d)).parent().attr('title',T_('Resubmit'))},setWon:function(b,c,d){var e=this.model.get('subCollection').find(function(a){return a.get('data').entryId==c});if(b){e.get('data').status='Won';var d=a(b.target).parents('.hover_group')}a('.ct_award',a(d)).parent().show(),a('.ct_withdraw ',a(d)).parent().hide(),a(d).parents('.ct_entry').addClass('ct_won'),a('.ct_status',a(d).parents('.ct_entry')).html(T_('Winner'))},setActive:function(b,c){var d=this.model.get('subCollection').find(function(a){return a.get('data').entryId==c});typeof d!='undefined'&&(d.get('data').status='Active'),a(b.target).parents('.ct_entry').removeClass('ct_withdrawn');var e=a(b.target).parents('.hover_group');a('.ct_withdraw span',e).eq(0).show(),a('.ct_withdraw span',e).eq(1).hide(),a('.ct_status',e.parents('.ct_entry')).html(''),a(b.target).parents('.ct_entry').hasClass('ct_eliminated')&&(a('.ct_status',e.parents('.ct_entry')).html(T_('Rejected')),d.get('data').status='Eliminated'),a('.ct_withdraw',a(e)).parent().attr('title',T_('Withdraw'))},setReject:function(b,c,d){a(d).parents('.ct_entry').addClass('ct_eliminated'),a('.ct_status',a(d).parents('.ct_entry')).html(T_('Rejected'))},formatPagination:function(){a('.ct_entry',a(this.el)).slice(0,this.model.get('showing')).slideDown(),a('.ct_entry',a(this.el)).slice(this.model.get('showing'),this.maxShowNum).hide();var b=a('.ct_entry',a(this.el)).length;b<=this.model.get('showing')?a(this.el).find('#viewMore').hide():a(this.el).find('#viewMore').show()},formatHeader:function(){var b=this.model.get('subCollection').models[0];this.model.set({timestamp:b.get('timestamp')}),a(this.el).find('#status').replaceWith(this.compileTemplateHeader(b.toJSON())),a('h2',this.el).truncateProjectName(),this.initialOtherModules(),this.menu.render(),a(this.el).find('#status h2').after(this.menu.el);if(this.model.get('subCollection').length>1){var c=T_('entries');a(this.el).find('#numOfOthers').text(c)}},viewMore:function(){this.model.get('showing')<=this.maxShowNum&&(this.setShowEntryCount(this.model.get('showing')+this.eachViewMore),this.formatPagination())}});return i}),define('dashboard/views/events/hiremeAutoRepost',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/hiremeAutoRepost.htm','dashboard/models/event'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{}),initialize:function(a){this.constructor.__super__.initialize.call(this,a)},compileTemplate:b.template(e),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/pmb',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/views/confirmation','notification/libpersist','text!templates/dashboard/pmb.htm','text!templates/dashboard/pmbHeader.htm','dashboard/views/events/pmb.min','dashboard/models/event','jquery.autosize','dashboard/lib/seeMore'],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=d.extend({events:b.extend({},d.prototype.events,{'click #viewAll':'viewAll','click #scrollUp':'scrollUp','keydown #new_message':'shiftEnterNewline','click #seeMore':'seeMoreClick'}),pageLimit:30,totalNotifi:0,preferLineNum:3,keepNum:2,initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.pmbPubilcMinViews=[],this.model.bind('change',this.modelChange,this)},modelChange:function(){var b=this,c=this.model.get('clarifications'),d=0,e=c!=null?c.length:0;for(d;d<e;d++){var f=c[d]._source,g=a('#'+f.data.id);g.length==0&&b.renderMin(f)}b.initialSeeMore(),a(b.el).find('#viewAll').show()},compileTemplate:b.template(g),compileTemplateHeader:b.template(h),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).find('#status').replaceWith(this.compileTemplateHeader(this.model.toJSON())),this.renderMin(this.model.toJSON()),a(this.el).find('#new_message').autosize(),this.modelChange(),this},renderMin:function(b){var c=this.generateEachNotification(b);this.pmbPubilcMinViews.push(c),a(this.el).find('.view-all').after(c.el),c.initialSeeMore()},renderNew:function(b){var c=this.generateEachNotification(b);this.pmbPubilcMinViews.unshift(c),a(this.el).find('.new_message').before(c.el);var d=this.compileTemplateHeader(b.toJSON());a(this.el).find('#status').html(d),c.initialSeeMore(),this.formatView(!1)},generateEachNotification:function(a){var b=new j(a),c=new i({model:b}),d=c.render();return d},postPublicMessage:function(){var b=this;b.cleanErrorMsg();var c=a(this.el).find('.hint'),d=a(this.el).find('#new_message');d.siblings('.message_throbber').show();var e=this.model.get('data'),f={id:e.projectId,to:e.userId,descr:d.parent().find('#new_message').val()};a(b.el).find('#new_message').val(''),a.ajax({url:base_url+'/pmb/onprivatepost.php',type:'post',data:f,dataType:'json',cache:!1,complete:function(){d.siblings('.message_throbber').hide()},success:function(d){d.status!='success'&&(a(b.el).find('#new_message').addClass('error-bd'),c.html('<span class="error-msg">'+d.errors+' </span><br>'))}})},viewAll:function(){var b=this,c=a(this.el).find('.news-item').not('.new_message');b.hideViewAll(),b.totalNotifi>b.pageLimit?(b.showViewMore(),b.showCurrentPage()):c.each(function(c){a(this).slideDown(),b.formatNewsItemClass()})},scrollUp:function(){this.showCurrentPage()},showCurrentPage:function(b){var c=a(this.el).find('.news-item').not('.new_message'),d=c.length,e=this,f=a(this.el).find('.news-item:visible').not('.new_message').length;c.each(function(b){b>d-f-e.pageLimit-1?a(this).slideDown():a(this).slideUp()}),e.updateScrollPageStatus(),e.formatNewsItemClass(),f=a(this.el).find('.news-item:visible').not('.new_message').length,f==d&&e.hideViewMore()},updateScrollPageStatus:function(){var b=a(this.el).find('.news-item').not('.new_message').length,c=a(this.el).find('.news-item:visible').not('.new_message').length;a(this.el).find('#scrollPage').text(c+' of '+b)},showViewAll:function(){a(this.el).find('#viewAll').show()},hideViewAll:function(){a(this.el).find('#viewAll').hide()},showViewMore:function(){a(this.el).find('#scrollBar').show()},hideViewMore:function(){a(this.el).find('#scrollBar').hide()},formatView:function(b){var c=this,d=a(this.el),e=d.find('.news-item').not('.new_message');b!=0&&(e.length>c.keepNum&&(d.find('.view-all').show(),e.each(function(b){b<e.length-c.keepNum?a(this).hide():a(this).slideDown()})),this.hideViewMore(),this.showViewAll()),this.updateScrollPageStatus(),this.formatNewsItemClass()},formatNewsItemClass:function(){a(this.el).find('.news-item.first').removeClass('first'),a(this.el).find('.news-item:visible').first().addClass('first')},initialSeeMore:function(){var b=this,c=a(this.el).find('.descr-long'),d=0,e=c.length;for(d;d<e;d++){var f=a(c[d]);f.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()},shiftEnterNewline:function(a){var b=this;b.cleanErrorMsg(),a.keyCode==13&&(a.shiftKey||(a.preventDefault(),b.postPublicMessage()))},cleanErrorMsg:function(){a(this.el).find('#new_message').removeClass('error-bd'),a(this.el).find('.hint').empty()}});return m}),define('dashboard/views/events/contestEntryCreated',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/contestEntryCreated.htm','text!templates/dashboard/contestEntryCreated.header.htm','dashboard/views/events/contestEntryCreated.min','dashboard/models/event','contest/award-confirmation','contest/sell-entry','payments/new-module-fixed-amount-payment-modal'],function(a,b,c,d,e,f,g,h,i,j,k){var l=d.extend({events:b.extend({},d.prototype.events,{'click #viewMore':'viewMore','click .radio_option':'rate','click .ct_action':'redirect','click .ct_fullview':'fullview','click .award_trigger':'showModal'}),eachViewMore:6,initialShowNum:3,maxShowNum:15,renderFromSelectedDeniedEvent:!1,thumb420height:280,thumb420width:420,initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.getContestInfo(),this.setShowEntryCount(),this.model.get('subCollection').bind('add',this.addEntry,this),b.bindAll(this,'render')},compileTemplate:b.template(e),compileTemplateHeader:b.template(f),render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),a(this.el).find('#status').replaceWith(this.compileTemplateHeader(this.model.toJSON())),this.model.isLiveNotification?this.model.get('subCollection').length>0?this.renderMin(this.model,!0):(this.removeLoading(),this.model.get('subCollection').add(this.model)):this.model.get('subCollection').length>0?this.renderSubCollection():this.loadAllEntries(),this},loadAllEntries:function(){var b=this,c=this.model.get('data'),d=0,e=14,f={project_id:c.contestId,sortCol:'sort_submitted_desc',start:d,end:e};a.ajax({type:'POST',url:'/contest/projectAction/getEntries.php',cache:!1,dataType:'json',data:f,success:function(c){c!=null&&c.entries!=null&&(b.removeLoading(),c.entries.length>0?(b.setDesignerIds(c.designerIds),a.each(c.entries,function(a,d){d.hasWinner=c.hasWinner,d.currencyId=c.currency.id,d.currencyCode=c.currency.code,d.currencySign=c.currency.sign,d.sell_price=parseInt(d.sell_price,10)||parseInt(c.contestPrize,10),b.entryToData(d)}),b.formatView()):a(b.el).remove())},error:function(c,d,e){a(b.el).remove()}})},entryToData:function(a){var b=new h,c=a.is_active?'Active':a.is_eliminated?'Rejected':a.is_winner?'Won':a.is_bought?'Bought':'Withdrawn',d={rating:a.rating,comment:a.comment,contestId:a.contestId,entryName:a.logoname,freelancerImg:a.freelancerLogo,img:a.freelancerLogo,entryId:parseInt(a.id),status:c,name:a.name,entryUrl:a.logo_large_url,entriesUrl:a.logo_url,entryNumber:a.number,entryS3path:a.s3path,entryThumb:a.thumb,entryThumbName:a.thumb_name,userId:a.userId,freelancerId:a.userId,userName:a.userName,publicName:a.publicUserName,freelancerName:a.userName,freelancerPublicName:a.publicUserName,hasWinner:a.hasWinner,isBought:a.is_bought,isWinner:a.is_winner,sellPrice:a.sell_price,currencyId:a.currencyId,currencyCode:a.currencyCode,currencySign:a.currencySign};b.set({data:d}),b.set({type:this.model.get('type')}),b.set({timestamp:parseInt(a.timestamp_entry)}),this.model.get('subCollection').add(b)},setShowEntryCount:function(a){var b=this.model.get('showing');a?this.model.set({showing:a}):b||this.model.set({showing:this.initialShowNum})},setDesignerIds:function(a){var c=this.model.get('designerIds'),d=typeof c=='undefined'?!0:!1;if(d)var e=a;else var e=b.union(a,c);this.model.set({designerIds:e}),this.model.set({designerCount:e.length})},redirect:function(b){return a(b.target).hasClass('ct_action')||(b.target=a(b.target).parents('.ct_action')),a(b.target).children().hasClass('ct_reject')?(b.target=a(b.target).children(),this.reject(b)):a(b.target).children().hasClass('ct_award')?(b.target=a(b.target).children(),this.award(b)):a(b.target).children().hasClass('ct_sell')&&(b.target=a(b.target).children(),this.sellEntry(b)),b.stopImmediatePropagation(),!1},fullview:function(b){return window.location.href=a(b.target).data('href'),!1},rate:function(b){var c=a(b.target).parent().parent().siblings().last().data('entry-id'),d=a(b.target).text(),e=(new Date).getTime(),f=this.model.get('subCollection').find(function(a){return a.get('data').entryId==c});if((f.get('data').rating?f.get('data').rating:0)==d)return;var g={entry_id:c,rating:d,_:e},h=this;a(b.target).parent().parent().siblings().last().show(),a(b.target).parent().parent().hide(),a.ajax({type:'POST',url:'/contest/projectAction/rate.php',cache:!1,dataType:'json',data:g,complete:function(){a(b.target).parent().parent().siblings().last().hide(),a(b.target).parent().parent().show()},success:function(a){f.get('data').rating=d},error:function(){}}),window._t.push(['user_action',{section:'Dashboard',name:'RateEntry',label:d,value:f.get('data').contestId,reference:'entry_id',reference_id:c}])},award:function(b){if(typeof this.self!='undefined'){var c=this.self,d=this.entryId,e=!0;b=this.e}else{var c=this,d=a(b.target).data('entry-id');d||(d=a(b.target).parent().data('entry-id'));var e=!1}var f={entry_id:d},g=c.getEntryModel(d);if(g.get('data').status==='Won')return window.location.href='/contest/handover.php?entry_id='+d,!1;a(b.target).prop('disabled',!0);var h=a(b.target).parents('.ct_entry').find('.hover_group');a('#entry_award'+d).modal('hide'),a.ajax({type:'GET',url:'/contest/projectAction/pick.php',cache:!1,data:f,dataType:'json',complete:function(){a(b.target).prop('disabled',!1)},success:function(b){b.result=='success'?(c.setWon(null,null,h),e&&(g.set({data:{status:'Won'}}),c.model.set({hasEntryWinner:!0}),a('.confirm-award').modal('hide'))):b.result=='redirect'?window.location.href=b.redirect:(alert(T_('Failed to pick entry as a winner, please try again')),e&&a('.confirm-award').modal('hide'))}})},reject:function(b){var c=this,d,e=a(b.target).data('entry-id'),f=this.checkReject(e);f?d='undo':d='do';var g={action:d,entry_id:e};a(b.target).prop('disabled',!0),jq.ajax({type:'POST',url:'/contest/projectAction/eliminate.php',cache:!1,data:g,dataType:'json',complete:function(){a(b.target).prop('disabled',!1)},success:function(a){a.result=='success'?f?c.setActive(b,e):c.setReject(b,e):f?alert(T_('Failed to reconsider entry, please try again')):alert(T_('Failed to eliminate entry, please try again'))}})},renderMin:function(b,c){var d=this,e=b.get('data'),f=e.status;this.removeLoading();var g=this.generateMin(b),h=a(g.el).children()[0],i=a(h).find('.hover_group');c?a(this.el).find('#spaceHolder').after(h):a(this.el).find('#bottomHolder').before(h);switch(f){case'Won':case'Bought':this.setWon(null,null,i);break;case'Rejected':this.setReject(null,null,i);break;case'Active':e.hasWinner&&!e.isWinner&&!e.isBought&&this.setSellEntry(h);break;case'Withdrawn':default:}a(h).find('.star').rating();var j=a('.ct_thumb',h).clone().removeAttr('style');a('.ct_thumb',h).load(function(){this.width/this.height>d.thumb420width/d.thumb420height?j.css('min-width','420px'):j.css('min-height','280px');var c=b.get('data').entryThumb.replace(/_thumb.jpg$/i,'_thumb420.jpg');j.attr('src',c);var e='<div class="popover"><div class="arrow"></div><div style="width:auto!important" class="popover-inner"><div style="position:relative;top:0;left:0" class="popover-content"><div></div></div></div></div>';a(h).find('.entry_img').popover_legacy({placement:'right',content:j[0].outerHTML,template:e,trigger:'hover',html:!0}),a(h).find('.entry_img').hover(function(){a(i).show()},function(){a(i).hide()})}),c&&this.formatView()},setSellEntry:function(b){b=a(b);var c=b.find('.hover_group'),d=c.data('entry-id'),e=this.getEntryModel(d),f=e.get('data');b.find('.ct_award').addClass('ct_sell').removeClass('ct_award'),b.find('.award_trigger').removeAttr('href'),b.find('.award_trigger').addClass('ct_action'),b.find('.ct_status').html(T_('Buy Entry')),b.find('.ct_action').attr('title',T_('Buy for <%- sign%><%- price%> <%- code%>',{sign:f.currencySign,price:f.sellPrice,code:f.currencyCode}))},setWon:function(b,c,d){c||(c=d.data('entry-id'));var e=this.model.get('subCollection').find(function(a){return a.get('data').entryId==c});typeof e!='undefined'&&(e.get('data').status='Won');if(b)var d=a(b.target).parents('.hover_group');var f=d.parents('.ct_entry');f.find('.ct_award').parent().attr('title',T_('Handover')),f.find('.award_trigger').removeAttr('href'),f.find('.award_trigger').addClass('ct_action'),f.find('.ct_award').attr('href','/contest/handover.php?entry_id='+c),f.find('.award_trigger').attr('href','/contest/handover.php?entry_id='+c),f.find('.ct_reject').parent().hide(),f.find('.ct_msg').parent().hide(),e.get('data').isWinner&&(f.addClass('ct_won'),f.find('.ct_status').html(T_('Winner')))},setReject:function(b,c,d){var e=this.model.get('subCollection').find(function(a){return a.get('data').entryId==c});typeof e!='undefined'&&(e.get('data').status='Rejected');var f=b===null?d:a(b.target),g=f.parents('.ct_entry');g.addClass('ct_eliminated'),g.find('.ct_reject').parent().attr('title',T_('Reconsider')),g.find('.ct_reject .rj_do').hide(),g.find('.ct_reject .rj_undo').show(),g.find('.ct_button').parent().hide(),g.find('.ct_status').html(T_('Rejected'))},checkReject:function(a){var b=this.model.get('subCollection').find(function(b){return b.get('data').entryId==a});if(typeof b!='undefined')var c=b.get('data').status=='Rejected'?!0:!1;return c},setActive:function(b,c){var d=this.model.get('subCollection').find(function(a){return a.get('data').entryId==c});typeof d!='undefined'&&(d.get('data').status='Active');var e=a(b.target).parents('.ct_entry');e.removeClass('ct_eliminated'),e.find('.ct_reject').parent().attr('title',T_('Reject')),e.find('.ct_reject .rj_do').show(),e.find('.ct_reject .rj_undo').hide(),e.find('.ct_button').parent().show(),e.find('.ct_status').html('')},addEntry:function(b){if(!!b.get('entry')){this.entryToData(b);return}a('#status img',a(this.el)).attr('onerror','this.src=\'/img/unknown.png\''),b.isLiveNotification&&(this.model.get('subCollection').length>1&&this.markThisNotificationUnread(),a(this.el).find('.ct_entry').eq(this.maxShowNum-1).remove(),this.model.get('subCollection').remove(this.model.get('subCollection').at(this.maxShowNum),{silent:!0})),this.setDesignerIds([b.get('data').userId.toString()]),b.isLiveNotification?this.renderMin(b,!0):this.renderMin(b)},renderSubCollection:function(){var a=this;this.model.get('subCollection').each(function(b){a.renderMin(b,!1)}),this.formatView()},removeLoading:function(){a(this.el).find('#loadingAll').remove()},generateMin:function(a){var b=new g({model:a}),c=b.render();return c},formatView:function(){this.formatHeader(),this.formatPagination()},formatPagination:function(){a('.ct_entry',a(this.el)).slice(0,this.model.get('showing')).slideDown(),a('.ct_entry',a(this.el)).slice(this.model.get('showing'),this.maxShowNum).hide();var b=a('.ct_entry',a(this.el)).length;b<=this.model.get('showing')?a(this.el).find('#viewMore').hide():a(this.el).find('#viewMore').show()},formatHeader:function(){var b=this.model.get('subCollection').models[0];if(b.get('data').userId!=this.model.get('data').userId){var c=b.get('data');c.contestSeoUrl=this.model.get('data').contestSeoUrl,c.contestName=this.model.get('data').contestName,b.set({data:c}),a(this.el).find('#status').replaceWith(this.compileTemplateHeader(b.toJSON())),this.initialOtherModules(),this.menu.render(),a(this.el).find('#status h2').after(this.menu.el)}if(this.model.get('subCollection').length>1){var d=this.model.get('designerCount');if(d>1){if(d==2)var e=T_(' and 1 other submitted entries ');else var e=T_(' and <[- count]> others submitted entries ',{count:d-1});a(this.el).find('#numOfOthers').text(e)}else{var e=T_(' submitted entries ');a(this.el).find('#numOfOthers').text(e)}}},viewMore:function(){this.model.get('showing')<=this.maxShowNum&&(this.setShowEntryCount(this.model.get('showing')+this.eachViewMore),this.formatPagination())},getContestInfo:function(){var b=this,c={project_id:b.model.get('data').contestId};a.ajax({type:'POST',url:'/contest/projectAction/getContestInfo.php',data:c,dataType:'json',success:function(a){a.status=='success'?b.model.set({contestInfo:a.data}):alert(a.error)}})},showModal:function(b){var c=a(b.target);c.is('li.award_trigger')===!1&&(c=c.parents('li.award_trigger'));var d=c.data('entry-id'),e=this.getEntryModel(d);if(typeof e!='undefined'){var f=e.get('data');if(f.status!='Won'){var g=this.model.get('contestInfo'),h=g.hasEntryWinner;typeof this.model.get('hasEntryWinner')!='undefined'&&this.model.get('hasEntryWinner')==1&&(h=!0);var j={thumb:f.entryThumb,username:f.freelancerName,publicUserName:f.freelancerName,publicName:f.freelancerPublicName,userid:f.freelancerId,number:f.entryNumber,prize:g.prize,prizeFormatted:g.prizeFormatted,entryId:f.entryId,currency:g.currency,hasEntryWinner:h,confirmPickFn:this.award,self:this,e:b};if(g.isContestFreemium){var l;l=new k({modalData:{chargeTotal:parseFloat(j.prize),chargeDetails:[{label:window.T_('Entry #<[- entryNumber ]>',{entryNumber:j.number}),amount:parseFloat(j.prize)}],currency:j.currency,includesGST:g.isAuUser,contestId:this.model.get('data').contestId,spiels:{hasEnoughBalanceOrPaymentMethod:{heading:window.T_('Award & Confirm Payment'),buttonLabel:window.T_('Confirm Payment')},noBalanceOrPaymentMethod:{heading:window.T_('Award & Complete Payment'),buttonLabel:window.T_('Complete Payment'),text:window.T_('To complete awarding, you will be redirected to the deposit page to make a payment of <span class="ModalPayment-descriptionText-totalCost"><[- currencySign ]><[- amountToPay ]> <[- currencyCode ]></span>.',{amountToPay:parseFloat(j.prize).toFixed(2),currencySign:j.currency.sign,currencyCode:j.currency.code})}}},callbacks:{confirm:this.award.bind(this,b)},trackingData:{section:'ContestAwardModal',subsection:'SingleAward'}})}else i.showModal(j)}}return b.stopImmediatePropagation(),!1},sellEntry:function(a){a.stopPropagation();var b=a.target.data('entry-id'),c=this.getEntryModel(b),d=c.get('data');return j.init({csrf_token:csrfToken}),j.openBuyEntryModal({entryId:b,sellPrice:d.sellPrice,currency:{id:d.currencyId,sign:d.currencySign,code:d.currencyCode},thumb:d.entryThumb,username:d.freelancerName,publicName:d.freelancerPublicName,number:d.entryNumber}),!1},getEntryModel:function(a){return this.model.get('subCollection').find(function(b){return b.get('data').entryId==a})}});return l}),define('dashboard/views/events/projectHireMeExpired',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/projectHireMeExpired.htm','dashboard/views/events/recommendedFreelancers','dashboard/views/events/hiremeOpenToBidding','notification/libpersist','dashboard/lib/seeMore','dashboard/models/event'],function(a,b,c,d,e,f,g,h,i,j){var k=d.extend({id:'recommendedFreelancers',events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),bidsViewModule:null,initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.set({ttref:'PostProject_HireMeExpireNewsfeed'}),this.model.set({eventType:'expired'}),this.HiremeOpenToBiddingView=new g({model:this.model})},compileTemplate:b.template(e),render:function(){var b=this.model.toJSON();return b.data&&b.data.linkUrl==='/projects/.html'&&(b.data.linkUrl='/projects/'+b.data.id+'.html'),a(this.el).html(this.compileTemplate(b)),a(this.el).find('#recommendedFreelancers').replaceWith(this.HiremeOpenToBiddingView.render().el),this},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.length==1&&b.truncateProjectName()},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length;for(d;d<e;d++){var f=a(c[d]),g=f.parent();g.initialSeeMore({preferLineNum:this.preferLineNum})}},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()}});return k}),define('dashboard/views/events/awardReminder',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/awardReminder.htm','text!templates/dashboard/bid.placed.min.htm','dashboard/views/events/bid.placed.min','dashboard/models/event','dashboard/lib/seeMore'],function(a,b,c,d,e,f,g,h,i){var e=d.extend({events:b.extend({},d.prototype.events,{'click #seeMore':'seeMoreClick'}),compileTemplate:b.template(e),compileTemplateMin:b.template(f),preferLineNum:2,projectNameLineNum:3,initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){var b=this,c=this.reConstructModelBaseOnNewAjax(this.model.get('data')),d=this.model.toJSON();return d.data&&!d.data.seo_url&&(d.data.seo_url=d.data.pid),a(this.el).html(this.compileTemplate(d)),this},renderBid:function(a){var b=this.generateMinView(a);return b},initialSeeMore:function(){var b=this,c=a(this.el).find('#seeMore'),d=0,e=c.length;for(d;d<e;d++){var f=a(c[d]),g=f.parent();g.initialSeeMore({preferLineNum:this.preferLineNum})}},generateMinView:function(a){var b=a;b.set({RecommendedBid:!0});var c=new g({model:b}),d=c.render();return d},truncateProjectName:function(){var b=a(this.el).find('.trunc').parent();b.truncateProjectName({preferLineNum:this.projectNameLineNum})},reConstructModelBaseOnNewAjax:function(a){var b=new h,c=a.bid,d=new Object;d.id=c.id,d.projectId=c.project_id,d.descr=c.descr,d.period=c.period,d.amount=c.sum,d.projIsHourly=c.additional.isHourlyProject,d.projIsFullTime=c.additional.isFullTimeProject,d.userName=c.username,d.userId=c.users_id,d.bid=c,d.linkUrl=a.seo_url,d.currency=a.currencysign,d.currencyCode=a.currencycode,d.currencyId=a.currencyId,d.projIsHourly?d.initMilestone=Math.round(c.sum*c.milestone_percentage*100)/100:d.initMilestone=Math.round(c.sum*c.milestone_percentage)/100,typeof c.user!='undefined'&&(d.imgUrl=c.user.profile_logo_url,d.bid.user.seller_rating.avg=c.user.seller_rating.avg,d.bid.user.earnings=c.earnings,d.bid.user.seller_rating.count=c.seller_ratecount);var e=d.bid.is_selected?'awarded':'';return b.set({data:d}),b.set({type:'bid'}),b.set({timestamp:c.submitdate_unixtimestamp}),b.set({state:e}),b},seeMoreClick:function(b){var c=a(b.target);c.seeMoreClick()}});return e}),define('dashboard/views/events/tombstoneNotiEmployer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/tombstoneNotiEmployer.htm','dashboard/views/events/tombstoneNotiEmployer.min','dashboard/models/event'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','error_callback','empty_callback','addToSubColletion'),this.model.get('subCollection').bind('add',this.renderEach,this)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this.loadData(),this},loadData:function(){this.model.get('subCollection').fetch({success_callback:this.addToSubColletion,error_callback:this.error_callback,empty_callback:this.empty_callback})},error_callback:function(){a(this.el).find('#loadingAll').hide(),a(this.el).find('#loadingFail').show(),this.hideEvent()},empty_callback:function(){a(this.el).find('#loadingAll').hide(),a(this.el).find('#loadingEmpty').show(),this.hideEvent()},addToSubColletion:function(b){a(this.el).find('#loadingAll').hide();for(var c=0;c<b.length;c++){var d={data:b[c]},e=new g(d);this.model.get('subCollection').add(e)}},renderEach:function(b){var c=[];b.get('data').type=='p'?c=['p',b.get('data').project_id,b.get('data').freelancer_id]:c=['c',b.get('data').project_id,b.get('data').entry_id],b.get('data').tsId=c.join('_');var d=new f({model:b});a(this.el).find('#tombstoneList').append(d.render().el)}});return h}),define('dashboard/views/events/tombstoneNotiFreelancer',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','text!templates/dashboard/tombstoneNotiFreelancer.htm','dashboard/views/events/tombstoneNotiFreelancer.min','dashboard/models/event'],function(a,b,c,d,e,f,g){var h=d.extend({events:b.extend({},d.prototype.events,{}),compileTemplate:b.template(e),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render','error_callback','empty_callback','addToSubColletion'),this.model.get('subCollection').bind('add',this.renderEach,this)},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this.loadData(),this},loadData:function(){this.model.get('subCollection').fetch({success_callback:this.addToSubColletion,error_callback:this.error_callback,empty_callback:this.empty_callback})},error_callback:function(){a(this.el).find('#loadingAll').hide(),a(this.el).find('#loadingFail').show(),this.hideEvent()},empty_callback:function(){a(this.el).find('#loadingAll').hide(),a(this.el).find('#loadingEmpty').show(),this.hideEvent()},addToSubColletion:function(b){a(this.el).find('#loadingAll').hide();for(var c=0;c<b.length;c++){var d={data:b[c]},e=new g(d);this.model.get('subCollection').add(e)}},renderEach:function(b){var c=[];b.get('data').type=='p'?c=['p',b.get('data').project_id,b.get('data').freelancer_id]:c=['c',b.get('data').project_id,b.get('data').entry_id],b.get('data').tsId=c.join('_');var d=new f({model:b});a(this.el).find('#tombstoneList').append(d.render().el)}});return h}),define('dashboard/views/events/tombstoneNoti',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/models/event','text!templates/dashboard/tombstoneNoti.htm'],function(a,b,c,d,e,f){var g=d.extend({events:b.extend({},d.prototype.events,{}),compileTemplate:b.template(f),initialize:function(a){this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'render')},render:function(){return a(this.el).html(this.compileTemplate(this.model.toJSON())),this}});return g}),define('dashboard/views/events/serviceProjectPostedSeller',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/event','dashboard/models/event','dashboard/views/events/serviceProjectPostedSeller.min','text!templates/dashboard/serviceProjectPostedSeller.htm','text!templates/dashboard/serviceProjectPostedSeller.header.htm'],function(a,b,c,d,e,f,g,h){var i=d.extend({compileTemplate:b.template(g),compileTemplateHeader:b.template(h),initialShow:3,moreShow:9,initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.model.get('subCollection').bind('add',this.renderMin,this),b.bindAll(this,'render','errorCallback','emptyCallback','addToSubColletion')},render:function(){var b=this.model.toJSON();a(this.el).html(this.compileTemplate(b)),a(this.el).find('#status').replaceWith(this.compileTemplateHeader(b)),this.model.isLiveNotification?(a(this.el).find('#loadingAll, #viewMore').hide(),this.model.get('subCollection').add(this.model),this.markThisNotificationUnread()):this.getOrders();var c=this;return a(this.el).on('click','#tryAgain',function(b){b.preventDefault(),a(c.el).find('#loadingEmpty, #loadingFail').hide(),a(c.el).find('#loadingAll, #loading').show(),c.getOrders()}),a(this.el).on('click','#viewMore',function(b){b.preventDefault(),a(c.el).find('#loadingEmpty, #loadingFail').hide(),a(c.el).find('#loadingAll, #loading').show(),c.getMoreOrders()}),this},getOrders:function(){this.model.get('subCollection').length>0?(a(this.el).find('#loadingAll').hide(),this.renderSubCollection()):this.fetchData(this.initialShow,null)},getMoreOrders:function(){this.fetchData(this.moreShow,this.model.get('subCollection').length)},fetchData:function(a,b){this.model.get('subCollection').fetch({success_callback:this.addToSubColletion,error_callback:this.errorCallback,empty_callback:this.emptyCallback,limit:a,offset:b})},errorCallback:function(){a(this.el).find('#loading').hide(),a(this.el).find('#loadingFail').show()},emptyCallback:function(){a(this.el).find('#loading').hide(),a(this.el).find('#loadingEmpty').show()},addToSubColletion:function(b){a(this.el).find('#loadingAll').hide(),a(this.el).find('#orderCount').text(b.total);for(var c=0;c<b.projects.length;c++){var d={data:b.projects[c]},f=new e(d);this.model.get('subCollection').add(f)}parseInt(b.total,10)<=this.model.get('subCollection').length&&a(this.el).find('#viewMore').hide()},renderSubCollection:function(){var a=0,b=this.model.get('subCollection').models;while(a<b.length)this.renderMin(b[a++])},renderMin:function(b){var c=new f({model:b}),d=parseInt(a(this.el).find('#orderCount').text(),10)||0;b.isLiveNotification?(a(this.el).find('#orderCount').text(d+1),a(this.el).find('#orders').prepend(c.render().el),this.markThisNotificationUnread()):a(this.el).find('#orders').append(c.render().el)}});return i}),define('dashboard/views/eventViewFactory',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/views/events/newsitem','dashboard/views/events/project.commenced','dashboard/views/events/project.completed','dashboard/views/events/milestone.new','dashboard/views/events/milestone.requested','dashboard/views/events/milestone.released','dashboard/views/events/invoice.requested','dashboard/views/events/invoice.requestChange','dashboard/views/events/invoice.paid','dashboard/views/events/invoice.withdrawn','dashboard/views/events/bid.invited','dashboard/views/events/bid.placed','dashboard/views/events/selected.awarded','dashboard/views/events/selected.accepted','dashboard/views/events/selected.uploaded','dashboard/views/events/contestReviewReceive','dashboard/views/events/reviewPosted','dashboard/views/events/reviewPostedNew','dashboard/views/events/completeContestReview','dashboard/views/events/completeReview','dashboard/views/events/pmbPublic','dashboard/views/events/pcbPublic','dashboard/views/events/milestone.part.released','dashboard/views/events/project.review.active','dashboard/views/events/project.review.reject','dashboard/views/events/directTransferDone','dashboard/views/events/requestToRelease','dashboard/views/events/selected.denied','dashboard/views/events/hireMe','dashboard/views/events/newDispute','dashboard/views/events/escalateDispute','dashboard/views/events/emailChange','dashboard/views/events/buyFreeMarketService','dashboard/views/events/freeMarketServiceExpired','dashboard/views/events/freeMarketServiceIsExpired','dashboard/views/events/sellFreeMarketService','dashboard/views/events/verifyPhone','dashboard/views/events/adminForceVarifyPhone','dashboard/views/events/yahooMailAlert','dashboard/views/events/adminWarningUserBidRestriction','dashboard/views/events/contestEntryRated','dashboard/views/events/contestAwardedToEmployer','dashboard/views/events/contestAwardedToFreelancer','dashboard/views/events/hiremeAutoRepost','dashboard/views/events/membership.downgradeToFreeMembership','dashboard/views/events/membership.specialLoyaltyDiscountOffer','dashboard/views/events/removeUserFromDirectory','dashboard/views/events/banUserFromBidding','dashboard/views/events/contestCreated','dashboard/views/events/contestUpsellFeaturedUpgrade','dashboard/views/events/contestExpired','dashboard/views/events/winningDesignReadyForReview','dashboard/views/events/contestComplete','dashboard/views/events/contestCompleteSellEntryUpsell','dashboard/views/events/prizeDispersedEmployer','dashboard/views/events/prizeDispersedFreelancer','dashboard/views/events/contestLockedEmployer','dashboard/views/events/contestLockedFreelancer','dashboard/views/events/invoice.acceptedPartial','dashboard/views/events/milestone.updated','dashboard/views/events/invoice.paid.part','dashboard/views/events/project.review.pending','dashboard/views/events/pmb','dashboard/views/events/welcome','dashboard/views/events/invoiceFeedback','dashboard/views/events/dispute.newMessage','dashboard/views/events/dispute.makeOffer','dashboard/views/events/dispute.acceptOffer','dashboard/views/events/membership.upgradeToNonFreeMembership','dashboard/views/events/project.draft.post','dashboard/views/events/projectAwaitingFeedback','dashboard/views/events/inviteFriends','dashboard/views/events/customAdminNotification','dashboard/views/events/contestEntryCreated','dashboard/views/events/projectHireMeExpired','dashboard/views/events/generic','dashboard/views/events/contest.invited','dashboard/views/events/kyc','dashboard/views/events/membership.bidsRunningOut','dashboard/views/events/counterOffer','dashboard/views/events/suggestionForFreelancerAfterReceiveReview','dashboard/views/events/upsellIntro','dashboard/views/events/upsellBasicTrial','dashboard/views/events/upsellPlusTrial','dashboard/views/events/tombstone','dashboard/views/events/upsellFeatureUpgrade','dashboard/views/events/upsellAssistedUpgrade','dashboard/views/events/awardReminder','dashboard/views/events/tombstoneNotiEmployer','dashboard/views/events/tombstoneNotiFreelancer','dashboard/views/events/tombstoneNoti','dashboard/views/events/communityPromoNoti','dashboard/views/events/expertsPromoNoti','dashboard/views/events/membership.firstEarning','dashboard/views/events/serviceStatusChanged','dashboard/views/events/serviceProjectPostedSeller','dashboard/views/events/serviceProjectPostedBuyer','dashboard/views/events/serviceProjectEndingSeller','dashboard/views/events/serviceProjectEndedSeller','dashboard/views/events/serviceProjectEndedBuyer','dashboard/views/events/sitesListingStatusChanged','dashboard/views/events/sitesBinCreated','dashboard/views/events/sitesBidCreated','dashboard/views/events/activateFreelancer','dashboard/views/events/promoteContest','dashboard/views/events/remindUseBids','dashboard/views/events/draftContest','dashboard/views/events/contactsAutoAddedSender','dashboard/views/events/contactsAutoAddedReceiver','dashboard/views/events/secondBidPlusTrialUpsell','dashboard/views/events/articleComment','dashboard/views/events/editAwardedBidRequest','dashboard/views/events/editAwardedBidAccepted','dashboard/views/events/editAwardedBidDeclined','dashboard/views/events/requestEndProject','dashboard/views/events/pendingFunds','dashboard/views/events/examPassedUpsell','dashboard/views/events/examRetakingDiscount','dashboard/views/events/localJobsActivation','dashboard/views/events/projectSharedWithYou'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc){var pc={generate:function(b,c){var e,lb;lb={model:c,el:a('<li></li>')};try{switch(c.get('type')){case'freelancernews':e=new d(lb);break;case'bid':e=new o(lb);break;case'award':e=new p(lb);break;case'inviteUserBid':e=new n(lb);break;case'accepted':e=new q(lb);break;case'uploadFile':e=new r(lb);break;case'completed':e=new f(lb);break;case'createMilestone':lb.model.attributes.data.newMilestone.project_owner_id!==getUserIdfromCookie()&&(e=new g(lb));break;case'requestMilestone':e=new h(lb);break;case'releaseMilestone':e=new i(lb);break;case'updateMilestone':typeof c.get('data')!='undefined'&&c.get('data').isSelected===!0&&(e=new ib(lb));break;case'invoiceRequested':e=new j(lb);break;case'invoiceRequestChange':e=new k(lb);break;case'invoicePaid':e=new l(lb);break;case'invoicePartialPaid':e=new jb(lb);break;case'invoiceWithdrawn':e=new m(lb);break;case'invoiceAcceptedPartial':e=new hb(lb);break;case'contestreviewposted':e=new s(lb);break;case'contestCreated':e=new Z(lb);break;case'contestUpsellFeaturedUpgrade':e=new $(lb);break;case'contestExpired':e=new _(lb);break;case'reviewposted':e=new t(lb);break;case'reviewpostednew':e=new u(lb);break;case'completeContestReview':e=new v(lb);break;case'completeReview':e=new w(lb);break;case'pmb_public':e=new x(lb);break;case'contest_pcb':e=new y(lb);break;case'releasePartMilestone':e=new z(lb);break;case'reviewActivate':e=new A(lb);break;case'reviewPending':e=new kb(lb);break;case'rejected':e=new B(lb);break;case'directTransferDone':e=new C(lb);break;case'requestToRelease':e=new D(lb);break;case'denyed':typeof c.get('data')!='undefined'&&typeof c.get('data').autoRepostProjectId!='undefined'?e=new U(lb):e=new E(lb);break;case'hireMe':e=new F(lb);break;case'newDispute':e=new G(lb);break;case'sendDisputeMessage':e=new ob(lb);break;case'makeDisputeOffer':e=new pb(lb);break;case'acceptDisputeOffer':e=new qb(lb);break;case'escalateDispute':e=new H(lb);break;case'emailChange':e=new I(lb);break;case'buyFreeMarketService':e=new J(lb);break;case'freeMarketServiceExpired':e=new K(lb);break;case'freeMarketServiceIsExpired':e=new L(lb);break;case'sellFreeMarketService':e=new M(lb);break;case'verifyPhone':e=new N(lb);break;case'adminForceVarifyPhone':e=new O(lb);break;case'yahooMailAlert':e=new P(lb);break;case'adminWarningUserBidRestriction':e=new Q(lb);break;case'contestAwardedToEmployer':e=new S(lb);break;case'contestEntryRated':e=new R(lb);break;case'contestAwardedToFreelancer':e=new T(lb);break;case'downgradeToFreeMembershipNoti':case'downgradeToFreeMembership':e=new V(lb);break;case'specialLoyaltyDiscount':e=new W(lb);break;case'removeUserFromDirectory':e=new X(lb);break;case'banUserFromBidding':e=new Y(lb);break;case'winningDesignReadyForReview':e=new ab(lb);break;case'contestComplete':e=new bb(lb);break;case'contestCompleteSellEntryUpsell':e=new cb(lb);break;case'prizeDispersedEmployer':e=new db(lb);break;case'prizeDispersedFreelancer':e=new eb(lb);break;case'contestLockedEmployer':e=new fb(lb);break;case'contestLockedFreelancer':e=new gb(lb);break;case'welcome':e=new mb(lb);break;case'invoiceFeedback':e=new nb(lb);break;case'upgradeToNonFreeMembership':e=new rb(lb);break;case'postDraftProject':e=new sb(lb);break;case'projectAwaitingFeedback':e=new tb(lb);break;case'inviteFriends':e=new ub(lb);break;case'contestEntryCreated':e=new wb(lb);break;case'generic':e=new yb(lb);break;case'customAdminNotification':e=new vb(lb);break;case'contactsAutoAddedSender':e=new cc(lb);break;case'contactsAutoAddedReceiver':e=new dc(lb);break;case'projectHireMeExpired':typeof c.get('data')!='undefined'&&typeof c.get('data').autoRepostProjectId!='undefined'?e=new U(lb):e=new xb(lb);break;case'inviteToContest':e=new zb(lb);break;case'kyc':e=new Ab(lb);break;case'bidsRunningOut':e=new Bb(lb);break;case'counterOffer':e=new Cb(lb);break;case'suggestionForFreelancerAfterReceiveReview':e=new Db(lb);break;case'upsellIntro':e=new Eb(lb);break;case'upsellBasicTrial':e=new Fb(lb);break;case'upsellPlusTrial':e=new Gb(lb);break;case'upsellFeatureUpgrade':e=new Ib(lb);break;case'upsellAssistedUpgrade':e=new Jb(lb);break;case'awardReminder':e=new Kb(lb);break;case'tombstoneNotiEmployer':e=new Lb(lb);break;case'tombstoneNotiFreelancer':e=new Mb(lb);break;case'tombstoneNoti':e=new Nb(lb);break;case'communityPromoNoti':e=new Ob(lb);break;case'expertsPromoNoti':e=new Pb(lb);break;case'serviceStatusChanged':e=new Rb(lb);break;case'serviceProjectPostedSeller':e=new Sb(lb);break;case'serviceProjectPostedBuyer':e=new Tb(lb);break;case'serviceProjectEndingSeller':e=new Ub(lb);break;case'serviceProjectEndedSeller':e=new Vb(lb);break;case'serviceProjectEndedBuyer':e=new Wb(lb);break;case'firstEarning':e=new Qb(lb);break;case'activateFreelancer':e=new $b(lb);break;case'promoteContest':e=new _b(lb);break;case'sitesListingStatusChanged':e=new Xb(lb);break;case'sitesBinCreated':e=new Yb(lb);break;case'sitesBidCreated':e=new Zb(lb);break;case'remindUseBids':e=new ac(lb);break;case'draftContest':e=new bc(lb);break;case'secondBidPlusTrialUpsell':e=new ec(lb);break;case'articleCommentReceived':e=new fc(lb);break;case'editAwardedBidRequest':e=new gc(lb);break;case'editAwardedBidAccepted':e=new hc(lb);break;case'editAwardedBidDeclined':e=new ic(lb);break;case'requestEndProject':e=new jc(lb);break;case'pendingFunds':e=new kc(lb);break;case'examPassedUpsell':e=new lc(lb);break;case'examRetakingDiscount':e=new mc(lb);break;case'localJobsActivation':e=new nc(lb);break;case'projectSharedWithYou':e=new oc(lb)}}catch(Hb){ErrorHandler.report(Hb,'Dashboard view constructor ('+c.get('type')+')')}return e}};return pc}),define('dashboard/views/eventList',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/lib/infiniScroll','dashboard/collections/eventsCollectionFactory','text!templates/dashboard/eventList.htm','dashboard/views/eventViewFactory','dashboard/views/smallProjectList','dashboard/views/dashboardParams','text!templates/dashboard/welcome.htm','dashboard/recent-projects','dashboard/views/localJobsBanner','dashboard/models/localJobsBanner','dashboard/views/createMilestoneAlert','dashboard/models/createMilestoneAlert','dashboard/views/corporateUpsellBanner','dashboard/models/corporateUpsellBanner'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=c.View.extend({events:{'click .reload':'reload','click .refresh':'refresh','click .infinReload':'infinReload','click #debug':'debug'},compileTemplate:b.template(f),welcomeTemplate:b.template(j),dbParams:null,collection:null,initialize:function(a){var c=this;this.analytics_bound=!1,this.constructor.__super__.initialize.call(this,a),b.bindAll(this,'setTimeText','render','addAll','addOne','filter','addError','reload'),this.dbParams=new DashboardParams,this.localJobsBannerModel=new m,this.createMilestoneAlertModel=new o,this.corporateUpsellBannerModel=new q,this.options.ab_tests=a.ab_tests,setInterval(function(a){return function(){a.setTimeText()}}(c),3e4)},render:function(){this.eventsCollectonFactory=new e,a(this.el).html(this.compileTemplate({filter:this.options.filter,ab_tests:this.options.ab_tests})),this.analytics_bound||(a(this.el).click(this.track_newsfeed_click(this.el)),this.analytics_bound=!0),this.subviews=[],this.addAll(),this.countImportantNotification(),this.collection.disableTransitions===!0?a('#eventlist').removeClass('opacity-0'):a('#eventlist').addClass('in'),this.collection.fetchFinished&&this.removeLoadingSpinner(),k.init()},track_newsfeed_click:function(a){return function(b){var c=function(a,b){typeof b.label=='undefined'&&a.getAttribute&&a.getAttribute('data-newstrack-label')&&(b.label=a.getAttribute('data-newstrack-label')),typeof b.section=='undefined'&&a.getAttribute&&a.getAttribute('data-newstrack-section')&&(b.section=a.getAttribute('data-newstrack-section')),typeof b.index=='undefined'&&a.getAttribute&&a.getAttribute('data-newstrack-index')&&(b.index=a.getAttribute('data-newstrack-index')),typeof b.typeid=='undefined'&&a.getAttribute&&a.getAttribute('data-newstrack-typeid')&&(b.typeid=a.getAttribute('data-newstrack-typeid')),typeof b.value=='undefined'&&a.getAttribute&&a.getAttribute('data-newstrack-value')&&(b.value=a.getAttribute('data-newstrack-value'))},d=function(a){return typeof a.label!='undefined'&&typeof a.section!='undefined'&&typeof a.index!='undefined'&&typeof a.typeid!='undefined'&&typeof a.value!='undefined'},e=b.target,f={source:'NewsFeed'};c(e,f);while(e!==a&&e.parentNode&&!d(f))c(e,f),e=e.parentNode;f.label&&(window._lt=window._lt||[],window._lt.push(['user_action',f]))}},debug:function(){return console.log(this.subviews[0]===this.subviews[1]),console.log(this.subviews[0]),this.subviews[0].hide(),this.subviews[0]},reload:function(){this.collection.fetch()},refresh:function(){document.location.reload(!0)},infinReload:function(){this.collection.infiniScroll.enableFetch(),this.collection.infiniScroll.watchScroll(event,!0)},filter:function(d){this.collection&&(this.collection.unbind('add',this.addOne),this.collection.unbind('reset',this.render),this.collection.unbind('refresh',this.addAll),this.collection.unbind('rebound',this.render),this.collection.unbind('error',this.addError),this.collection.infiniScroll.disableFetch(),b.each(this.subviews,function(b){a(b.el).unbind('.delegateEvents'+b.cid)})),this.collection=(new e).generate(d),this.collection.bind('add',this.addOne),this.collection.bind('reset',this.render),this.collection.bind('refresh',this.addAll),this.collection.bind('rebound',this.render),this.collection.bind('error',this.addError),this.collection.infiniScroll||(this.collection.infiniScroll=new c.InfiniScroll(this.collection,{scrollOffset:500,includePage:!0})),this.collection.infiniScroll.enableFetch(),this.options.filter=d},addError:function(){this.removeLoadingSpinner();var b=T_('Sorry, we couldn\'t retrieve your updates.</br></br>In the meantime, why not <a href="/post-project">Post a Project</a> or <a href="/contest/create.php">Post a Contest</a>'),c=a(this.el).find('#NoneNotification');c&&c.length===1?c.html('<p id=\'NoneNotification\' class=\'margin-t40\' align = \'center\'>'+b+'<p>'):a(this.el).find('#eventlist').find('.view-all').first().after('<p id=\'NoneNotification\' class=\'margin-t40\' align = \'center\'>'+b+'<p>'),a('#eventlist').addClass('in')},addWelcome:function(){var a=(new Date).getTime();a=parseInt(a/1e3,10);var b='<div class="news-list-wrapper""><div class="news-list-inner">'+this.welcomeTemplate({companyLogo:'/img/freelancer_32_32.png',timestamp:a,accountSetup:!0})+'</div></div>';return b},addPeopleYouMayKnow:function(){},hidePeopleYouMayKnow:function(){if(this.angular){var a=angular.element(document.getElementById('pymkNewsfeedAppBlock'));a&&a.hide()}},addLocalJobsBanner:function(){this.options.filter==='all'&&this.options.ab_tests&&this.options.ab_tests.show_local_jobs_banner&&(this.localJobsBanner=new l({model:this.localJobsBannerModel,el:a(this.el).find('#local-jobs-banner')}),this.localJobsBanner.render())},addCorporateUpsellBanner:function(){this.options.ab_tests.showCorporateUpsellBanner&&(this.corporateUpsellBanner=new p({model:this.corporateUpsellBannerModel,el:a(this.el).find('#corporate-upsell-banner')}),this.corporateUpsellBanner.render())},showCreateMilestoneAlert:function(){this.createMilestoneAlert=new n({model:this.createMilestoneAlertModel,el:a(this.el).find('#create-milestone-alert')})},addAll:function(){if(this.collection.fetchFinished===!0&&this.collection.length===0){var c;this.eventsCollectonFactory.isTabPinned()?c=T_('You do not have any starred items.'):this.eventsCollectonFactory.isTabImportant()?c=T_('You do not have any important items.'):c=this.addWelcome(),a(this.el).find('#eventlist').find('.view-all').first().after('<p id=\'NoneNotification\' class=\'margin-t40\' align = \'center\'>'+c+'<p>')}var d=this;this.collection.each(function(a){d.addOne(a)}),this.showCreateMilestoneAlert(),this.collection.trigger('readyToAddTombstone'),this.collection.trigger('readyToAddNews');if(this.collection.fetchFinished===!0&&this.options.filter=='all'&&typeof looking_for!='undefined'&&looking_for=='Worker'){this.addLocalJobsBanner(),d.addPeopleYouMayKnow(),this.addCorporateUpsellBanner();if(d.angular){var e=angular.element(document.getElementById('pymkNewsfeedAppBlock'));if(e){var f=e.scope();f&&typeof f.suggestedFriendsReady!='undefined'&&f.suggestedFriendsReady.promise.then(function(){b.isEmpty(f.suggestedFriends)&&d.hidePeopleYouMayKnow()})}}}},addOne:function(b){if(typeof b=='undefined')return;a(this.el).find('#eventlist').find('#NoneNotification').remove();if(b.get('type')==='freelancernews'&&!b.get('hasInserted')&&!this.eventsCollectonFactory.isTabFreelancerNews()){this.addOneFreelancerNews(b);return}var c=this.collection.indexOf(b),d=g.generate(this.el,b);typeof d!='undefined'&&(c===0?(b.isLiveNotification&&b.get('is_important')&&this.increaseImportNotification(),a(this.el).find('#eventlist').find('.view-all').first().after(d.renderEvent().el),this.subviews.unshift(d)):(a(this.el).find('#eventlist').append(d.renderEvent().el),this.subviews.push(d)),typeof d.initialSeeMore=='function'&&d.initialSeeMore(),typeof d.truncateProjectName=='function'&&d.truncateProjectName(),typeof d.formatNewsItemClass=='function'&&d.formatNewsItemClass(),typeof d.setTrackingData=='function'&&d.setTrackingData(c,b.get('type')))},addOneFreelancerNews:function(b){var c=g.generate(this.el,b),d=this.collection.indexOf(b);c.setTrackingData(d,b.get('type'));if(d>this.subviews.length)return;switch(d){case-1:return;case 0:this.subviews.splice(d,0,c),a(this.el).find('#eventlist').find('.view-all').first().after(c.renderEvent().el);break;default:this.subviews.splice(d,0,c),a(this.subviews[d-1].el).after(c.renderEvent().el),b.set({hasInserted:!0})}},addTombstone:function(b){var c=g.generate(this.el,b),d=this.collection.indexOf(b);switch(d){case-1:return;case 0:this.subviews.unshift(c),a(this.el).find('#eventlist').find('.view-all').first().after(c.renderEvent().el);break;default:this.subviews.splice(d,0,c),a(this.subviews[d-1].el).after(c.renderEvent().el)}},increaseImportNotification:function(){this.dbParams.importantNotiCountPlusOne(),this.dbParams.getImportantNotiCount()>100?(a(this.el).find('#importantCount').text(' (99+)'),a(this.el).find('#importantCount').show()):this.dbParams.getImportantNotiCount()!==0&&(a(this.el).find('#importantCount').text(' ('+this.dbParams.getImportantNotiCount()+')'),a(this.el).find('#importantCount').show())},countImportantNotification:function(){this.collection!==null&&this.collection.importantNotificationCount!==null&&typeof this.collection.importantNotificationCount!='undefined'&&this.dbParams.setImportantNotiCount(this.collection.importantNotificationCount),this.dbParams.getImportantNotiCount()>100?(a(this.el).find('#importantCount').text(' (99+)'),a(this.el).find('#importantCount').show()):this.dbParams.getImportantNotiCount()!==0?(a(this.el).find('#importantCount').text(' ('+this.dbParams.getImportantNotiCount()+')'),a(this.el).find('#importantCount').show()):a(this.el).find('#importantCount').hide()},setTimeText:function(){var a=this;b.each(a.subviews,function(a){a.setTimeText()})},removeLoadingSpinner:function(){a(this.el).find('#spiningOfDeath').next().children().first().hide(),a(this.el).find('#spiningOfDeath').hide()}});return r}),define('dashboard/views/newsFeed',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/dashboard/newsFeed.htm','text!templates/dashboard/topFreelancersWidget/freelancer.htm','dashboard/views/eventList','dashboard/views/smallProjectList','dashboard/views/userDetails','dashboard/views/poll','dashboard/views/bidTicker','dashboard/views/myFunds','dashboard/views/kycDashboard','dashboard/views/freemarketPost','dashboard/models/userDetails','dashboard/models/poll','dashboard/models/pollQuestions','dashboard/models/hireMePostContest','dashboard/views/localJobsPost','dashboard/views/localJobsAdd','dashboard/views/nearbyProjects','dashboard/collections/projectsTodoList','dashboard/views/projectsTodoList','dashboard/views/hireMePostContest','dashboard/views/no-commission','dashboard/views/preferredFreelancerSupport'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=c.View.extend({events:b.extend({},Event.prototype.events,{'click #btn-post-first-project-fixed':'postLocalProject','change #skill_category-fixed':'update_select'}),compileTemplate:b.template(d),collection:null,initialize:function(c){this.constructor.__super__.initialize.call(this,c),typeof c.ab_tests!='undefined'&&c.ab_tests!==null?this.ab_tests=c.ab_tests:this.ab_tests={},b.bindAll(this,'filterEvents','render','filterSmallProjects','stopInfiniScroll','getInfiniScroll','startInfiniScroll'),membershipTrialBanner&&(window._ttref.push(['_clearEntrypoint','Membership']),window._ttref.push(['_setEntrypoint','dashboard']),window._ttref.push(['_trackEvent','Membership','dashboard-upsell-banner-show',null,null,null,'current-memb-package',null])),this.render(),this.eventList=new f({el:'#events',ab_tests:this.ab_tests.event_list}),this.smallProjectListView=new g({el:'#projects_module',filter:'active'});var d=new n;d.fetch(),this.userDetailsView=new h({el:'#user-details',model:d,showReferralLink:this.ab_tests.showReferralLink,showNoCommissionLink:this.ab_tests.showNoCommissionLink,givegetInvitationsSent:this.ab_tests.givegetInvitationsSent}),this.kycDashboardView=new l({el:'#kyc_module',model:d}),this.bind('hidden',this.stopInfiniScroll),this.bind('shown',this.startInfiniScroll);var e=new o,j=new p;this.pollView=new i({el:'#poll_module',model:e,pollQuestions:j}),a.ajax({type:'GET',url:'/ajax/dashboard/getMRSellerIdWhoHasntHiredAfterHighScoreContest.php',dataType:'json',success:function(a){if(a.status==='success'&&a.mrSellerIdWhoHasHiredAfterHighScoreContest){var b=new q;this.hireMePostContestView=new w({el:'#hire_me_post_contest_module',model:b,sellerId:a.mrSellerIdWhoHasHiredAfterHighScoreContest})}}}),this.getFreelancersSuggestion();var k=this},filterEvents:function(a){this.eventList.filter(a),this.eventList.render()},stopInfiniScroll:function(){this.getInfiniScroll().disableFetch()},startInfiniScroll:function(){this.getInfiniScroll().enableFetch()},getInfiniScroll:function(){return this.eventList.collection.infiniScroll},filterSmallProjects:function(a){this.smallProjectListView.filter(a),this.smallProjectListView.render()},render:function(){a(this.el).append(this.compileTemplate({ab_tests:b.extend({},this.ab_tests),csrf_token:getCookie('XSRF-TOKEN')}));var c=new j;a(this.el).find('#bid-info').html(c.render().el),a('.bid-left-container').css('width','135px'),a('.bids-left-button-container').show();var d=new k;a(this.el).find('#funds_module').html(d.render().el);if(this.ab_tests.show_fm_widget){var e=new m;a(this.el).find('#freemarket_module').html(e.render().el)}var f=new u,g=new v({collection:f,postOneClickOnLinkClickedToComplete:looking_for!=='Worker'});a(this.el).find(g.domSelector.base).html(g.render().el),this.ab_tests.showNoCommissionLink&&!this.ab_tests.showNoCommissionBannerWidget&&x.init();if(looking_for!=='Worker'){var h=new r;a(this.el).find('#post_local_module').html(h.render().el),this.prepareCategory()}else{var i=!0;this.prepareCategory(i)}if(looking_for!=='Employer'&&window.local_skills)if(!window.is_local_user||window.local_skills.length===1&&window.local_skills[0].id==='27'){var l=new s;a(this.el).find('#add_local_module').html(l.render().el),l.initElements()}if(looking_for!=='Employer'&&typeof window.userLocation=='object'&&window.userLocation.latitude&&window.userLocation.longitude){var n=new t({lat:window.userLocation.latitude,lon:window.userLocation.longitude,lang:window.local_user_languages});a(this.el).find('#nearby_projects_module').html(n.render().el),n.initElements(),a('#NearbyWidget-list').slimScroll({height:'168px'})}if(this.ab_tests.showPreferredFreelancerSupport===!0){var o=new y;a(this.el).find('#pf_support_module').html(o.render().el)}var p=window.oneClickProjectList||[];this.renderOneClickPostProjectLinks(p),this.bindEventsOneClickPostProjectLinks(p)},hide:function(){a(this.el).find('#newsFeed').hide()},show:function(){a(this.el).find('#newsFeed').show()},postLocalProject:function(){window._t.push(['user_action',{section:'DashboardSidebar',subsection:'LocalJobsDashboardCard',label:'PostALocalJob',action:'click'}]),this.postproject_redirect()},postproject_redirect:function(){var b=a('#skill_subcategory-fixed-dash'),c=b.val();if(c<=0){a('#post-fixed').submit();return}a.ajax({type:'POST',url:'/ajax/skill-bundle.php',dataType:'json',data:{skill_bundle:c},cache:!0,beforeSend:function(){a('#btn-post-first-project-fixed').attr('disabled',!0)},complete:function(){a('#btn-post-first-project-fixed').removeAttr('disabled')},success:function(a){if(!a||!a.length)return;var c=b.find(':selected').text(),d=a.map(function(a){return a.job_id});window._t.push(['user_action',{section:'DashboardSidebar',subsection:'OneClickPostProjectCategorySelector',label:'OneClickPostProject_'+c,reference:'skill',reference_id:d}]),this.submitOneClickPostProjectForm(c,d)}.bind(this)})},update_select:function(){var b=a('select#skill_category-fixed option:selected').val();if(b==-1)a('#skill_subcategory-fixed-dash').html(''),a('#skill_subcategory-fixed-dash').hide();else{var c={category:a('#skill_category-fixed').val()};a.ajax({type:'GET',url:'/ajax/skill-bundle.php',data:c,dataType:'json',cache:!0,beforeSend:function(){a('#skill_subcategory-fixed-dash').attr('disabled',!0),a('#skill_subcategory-fixed-dash').css('background','#CCC'),a('#skill_subcategory-fixed-dash').css('display','inline')},complete:function(){a('#skill_subcategory-fixed-dash').removeAttr('disabled'),a('#skill_subcategory-fixed-dash').css('background','#FFF')},success:function(b){var c='<option value="-1">'+T_('Select One (Optional)')+'</option>';a.each(b,function(a,b){c+='<option value= \''+b.id+'\'>',c+=b.name+'</option>'}),a('#skill_subcategory-fixed-dash').html(c)}})}},prepareCategory:function(b){if(b){a(this.el).find('#newsfeed-main-nav').remove();return}a.ajax({type:'GET',url:'/ajax/skill-bundle.php',dataType:'json',cache:!0,complete:function(){a('#newsfeed-main-nav').show()},success:function(b){var c;a.each(b,function(a,b){c+='<option value= \''+b.id+'\'>',c+=b.name+'</option>'}),c+='<option value=\'0\' disabled hidden selected>'+T_('Select a Category')+'</option>',c+='<option value=\'-1\'>'+T_('Other')+'</option>',a('#skill_category-fixed').html(c)}})},getFreelancersSuggestion:function(){var b=1,c=6;a.ajax({type:'GET',url:'/ajax/directory/suggestions.php',data:{source_id:b,limit:c},dataType:'json',cache:!1,success:function(b){if(b.status!=='success')return;if(!b.count)return;var d=a('#TopFreelancers_module');if(!b.count)return;d.find('h3').text(window.T_('Top Freelancers for <[- job.name ]>',{job:b.job})),b.count<=c&&d.find('p').addClass('hide');var f=d.find('.DashboardHireme-card');f.find('.profile-img-link, a.contact-popover-name-link').on('mousedown',function(){window._ttref.push(['_clearEntrypoint','ProjectHireMe']),window._ttref.push(['_setCookie','ProjectHireMe_DashboardTopFreelancer']),window._ttref.push(['_trackEvent','ProjectHireMe','ProfileRedirect'])}),f.find('a.contact-popover-hire-bt').on('click',function(){window._ttref.push(['_clearEntrypoint','ProjectHireMe']),window._ttref.push(['_setCookie','ProjectHireMe_DashboardTopFreelancer']),window._ttref.push(['_trackEvent','ProjectHireMe','ShowModal'])}),b.count<=c?d.find('.DashboardHireme-cta').addClass('hide').removeClass('DashboardHireme-cta'):d.find('.DashboardHireme-cta').attr('href','/search/#/users/'+encodeURIComponent(b.job.name.toLowerCase())).on('click',function(){window._t.push(['user_action',{section:'Dashboard',subsection:'TopFreelancers',label:'ShowMoreSearchResult'}])});var g='',h=d.find('.DashboardHireme-freelancer-list');b.users.forEach(function(b){a('<img />').attr('src',b.logo_url);var c=a(e);c.find('a').attr('href','/u/'+b.username).attr('target','_blank').on('click',function(c,e){c.preventDefault();var f=a(this);f.parent().siblings().each(function(){a(this).find('.ImageThumbnail').removeClass('ImageThumbnail-focus')}),f.find('.ImageThumbnail').addClass('ImageThumbnail-focus');var h='/u/'+b.username,i=h+'?hireme=true',j=b.no_reviews===1?window.T_('<[- reviews ]> review',{reviews:b.no_reviews}):window.T_('<[- reviews ]> reviews',{reviews:b.no_reviews}),k=b.country.toLowerCase().replace(/[^a-zA-Z ]/g,'').split(' ').join('-'),l=d.find('.DashboardHireme-card');l.find('.profile-img img').attr('alt',b.username+' - '+b.country).attr('src',b.logo_url),l.find('.profile-img-link').attr('href',h).attr('target','_blank'),g!==k&&(l.find('.contact-popover-flag').removeClass(g).addClass(k),g=k),l.find('a.contact-popover-name-link').attr('href',h).attr('target','_blank').text(b.username);var m='online-status-online',n=l.find('.online-status');n.attr('data-is_online',!1),b.is_online?n.addClass(m):n.removeClass(m),l.find('a.contact-popover-hire-bt').attr('href',i).attr('data-link',i).attr('target','_blank').addClass('hireme-wrap'),l.find('.Rating').attr('data-star_rating',b.rating_stars_count),l.find('.Rating-review').text(j),(typeof e!='object'||typeof e=='object'&&!e.noTracking)&&window._t.push(['user_action',{section:'Dashboard',subsection:'TopFreelancers',label:'CheckAnotherFreelancer'}])}),c.find('img.ImageThumbnail-image').attr('alt',b.username).attr('src',b.profile_logo),h.append(c)}),h.find('li a').first().trigger('click',{noTracking:!0}),d.removeClass('hide'),window._t.push(['element_view',{section:'Dashboard',subsection:'SearchTopFreelancers',label:'Show'}])}})},renderOneClickPostProjectLinks:function(c){a('#post-project-one-click-links').html(b.template('<% for (var i = 0; i < links.length; i++) { %><button class="btn btn-mini WidgetPostProjectLinks-link" value="<%- i %>"><%- T_(links[i].name) %></button><% } %>')({links:c}))},bindEventsOneClickPostProjectLinks:function(b){a('#post-project-one-click-links').children('button').on('click',function(a){var c=a.target.value;window._t.push(['user_action',{section:'DashboardSidebar',subsection:'OneClickPostProjectLinks',label:'OneClickPostProject_'+b[c].name,reference:'skill',reference_id:b[c].id}]),this.submitOneClickPostProjectForm(b[c].project_name,[b[c].id])}.bind(this))},submitOneClickPostProjectForm:function(c,d){var e=a('#post-project-one-click-form');e.find('[name="project_name"]').val(c),e.find('[name="description"]').val(c),a('#post-project-one-click-jobs').html(b.template('<% for (var i = 0; i < jobIds.length; i++) { %><input type="hidden" name="job_<%- jobIds[i] %>" value="on"><% } %>')({jobIds:d})),e.submit()}});return z}),define('dashboard/router',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/collections/events','dashboard/views/newsFeed','dashboard/views/projectList'],function(a,b,c,d,e,f){var g=c.Router.extend({views:{},tab:'newsFeed',routes:{'!events':'showEvents','!events/:filter':'showEvents','!projects_small/:filter':'showProjectsSmall','!projects':'showProjects','!projects/:filter_state/:filter_type/:sort':'showProjects','/!events':'showEvents','/!events/:filter':'showEvents','/!projects_small/:filter':'showProjectsSmall','/!projects':'showProjects','/!projects/:filter_state/:filter_type/:sort':'showProjects','*actions':'defaultAction'},initialize:function(b){return a('#dashboard').text(''),this.ab_tests=b,this},initializeViews:function(a){switch(a){case'newsFeed':var b={};typeof this.ab_tests!='undefined'&&typeof this.ab_tests.news_feed!='undefined'&&(b=this.ab_tests.news_feed),this.views[a]=new e({el:'#dashboard',filter:'all',ab_tests:b});break;case'projectsList':this.views[a]=new f({el:'#dashboard',filter_state:'all',filter_type:'all',sort:'latest'})}},switchTab:function(a){typeof this.views[a]=='undefined'&&this.initializeViews(a),this.tab!==a&&(typeof this.views[this.tab]!='undefined'&&(this.views[this.tab].hide(),this.views[this.tab].trigger('hidden')),this.views[a].show(),this.views[a].trigger('shown'),this.tab=a)},showProjects:function(a,b,c){this.switchTab('projectsList'),this.views.projectsList.filter(a,b,c)},showProjectsSmall:function(a){this.switchTab('newsFeed'),this.views.newsFeed.filterSmallProjects(a)},showEvents:function(a){this.switchTab('newsFeed'),this.views.newsFeed.filterEvents(a)},defaultAction:function(a){this.switchTab('newsFeed'),this.views.newsFeed.filterEvents('all')}}),h=function(a){var b=new g(a);c.history.start()};return{initialize:h}}),define('dashboard/dashboard',['jquery-wrapper','underscore-wrapper','backbone-wrapper','dashboard/router','dashboard/lib/Placeholder','dashboard/lib/stats'],function(a,b,c,d,e,f){var g=function(b){d.initialize(b),e.init({live:!0}),a.ajaxSetup({cache:!1}),f.initialize()};return{initialize:g}}),define('dashboardmain',['dashboard/dashboard'],function(a){var b=function(b){typeof b=='undefined'&&(b={}),a.initialize(b)};return{initialize:b}})